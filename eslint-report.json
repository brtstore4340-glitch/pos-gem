[{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\PropTypes-Example.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\ai-backups\\wrap_appshell_25690109_205325\\src\\main.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,18],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'App' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"App"},"fix":{"range":[75,84],"text":""},"desc":"Remove unused variable 'App'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './AppAuth';\nimport './index.css';\n\n// Safe initialization with error handling\nconst rootElement = document.getElementById('root');\n\nif (!rootElement) {\n  throw new Error('Failed to find root element. Please ensure <div id=\"root\"></div> exists in index.html');\n}\n\n// Using React 18 createRoot API for better performance\nconst root = ReactDOM.createRoot(rootElement);\n\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// Performance monitoring (optional, remove in production)\nif (import.meta.env.DEV) {\n  console.log('üöÄ App initialized successfully');\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\ai-backups\\wrap_appshell_25690109_205412\\src\\main.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,18],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'App' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"App"},"fix":{"range":[75,84],"text":""},"desc":"Remove unused variable 'App'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './AppAuth';\nimport './index.css';\n\n// Safe initialization with error handling\nconst rootElement = document.getElementById('root');\n\nif (!rootElement) {\n  throw new Error('Failed to find root element. Please ensure <div id=\"root\"></div> exists in index.html');\n}\n\n// Using React 18 createRoot API for better performance\nconst root = ReactDOM.createRoot(rootElement);\n\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// Performance monitoring (optional, remove in production)\nif (import.meta.env.DEV) {\n  console.log('üöÄ App initialized successfully');\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\boots-grab-print\\extension\\src\\background.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":6,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":13,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":13,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":17,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":17,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":21,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":21,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":30,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":30,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":36,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":36,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":40,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":40,"endColumn":25},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":40,"column":55,"nodeType":"BlockStatement","messageId":"unexpected","endLine":40,"endColumn":57,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[1328,1328],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"function sleep(ms){ return new Promise(r => setTimeout(r, ms)); }\n\nfunction waitTabComplete(tabId, timeoutMs) {\n  return new Promise((resolve, reject) => {\n    const t = setTimeout(() => {\n      chrome.tabs.onUpdated.removeListener(onUpd);\n      reject(new Error('timeout'));\n    }, timeoutMs);\n\n    function onUpd(id, info) {\n      if (id === tabId && info.status === 'complete') {\n        clearTimeout(t);\n        chrome.tabs.onUpdated.removeListener(onUpd);\n        resolve(true);\n      }\n    }\n    chrome.tabs.onUpdated.addListener(onUpd);\n  });\n}\n\nchrome.runtime.onMessage.addListener((msg, _sender, sendResponse) => {\n  (async () => {\n    if (msg?.type !== 'OPEN_BG_AND_EXTRACT') {\n      return sendResponse({ ok: false, error: 'unknown_message_type' });\n    }\n    \n    const url = (msg.url || '').toString();\n    if (!url) throw new Error('missing_url');\n\n    const tab = await chrome.tabs.create({ url, active: false });\n    if (!tab?.id) throw new Error('tab_create_failed');\n\n    try {\n      await waitTabComplete(tab.id, 15000);\n      await sleep(600);\n      const resp = await chrome.tabs.sendMessage(tab.id, { type: 'GRAB_EXTRACT_DETAIL' });\n      if (!resp?.job) throw new Error(resp?.error || 'extract_failed');\n      sendResponse(resp.job);\n    } finally {\n      try { await chrome.tabs.remove(tab.id); } catch {}\n    }\n  })().catch(e => {\n    try {\n      sendResponse({ ok: false, error: String(e?.message || e) });\n    } catch (ignoreError) {\n      console.error('Failed to send error response:', ignoreError);\n    }\n  });\n  return true;\n});\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\boots-grab-print\\extension\\src\\content.js","messages":[{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":18,"column":38,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":18,"endColumn":39,"suggestions":[{"messageId":"removeEscape","fix":{"range":[592,593],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[592,592],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":25,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":25,"endColumn":7}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"function uniq(arr) {\n  const s = new Set(); const out = [];\n  for (const x of arr) { if (!s.has(x)) { s.add(x); out.push(x); } }\n  return out;\n}\n\nfunction listOrderHistoryLinks() {\n  const anchors = Array.from(document.querySelectorAll('a[href]'));\n  const links = anchors\n    .map(a => a.getAttribute('href') || '')\n    .filter(h => /\\/order\\/.+\\/history/.test(h));\n\n  const abs = links.map(h => {\n    try { return new URL(h, location.origin).toString(); } catch { return ''; }\n  }).filter(Boolean);\n\n  const orders = uniq(abs).slice(0, 80).map(url => {\n    const m = url.match(/\\/order\\/([^\\/]+)\\/history/);\n    return { id: m ? m[1] : url, url };\n  });\n\n  return orders;\n}\n\nchrome.runtime.onMessage.addListener((msg, _sender, sendResponse) => {\n  (async () => {\n    try {\n      if (!msg) {\n        sendResponse({ ok: false, error: 'null_message' });\n        return;\n      }\n\n      if (msg?.type === 'GRAB_LIST_ORDERS') {\n        sendResponse({ orders: listOrderHistoryLinks() });\n        return;\n      }\n      if (msg?.type === 'GRAB_EXTRACT_DETAIL') {\n        // MVP: minimal payload to prove pipeline; refine DOM extraction later\n        sendResponse({\n          job: {\n            source: 'grab',\n            shortGM: '',\n            bookingCode: '',\n            total: '',\n            totalQty: 0,\n            driverName: '',\n            driverPhone: '',\n            orderDateStr: '',\n            orderTimeStr: '',\n            items: [],\n            sourceUrl: location.href\n          }\n        });\n        return;\n      }\n      sendResponse({ ok: false, error: 'unknown_message_type' });\n    } catch (e) {\n      sendResponse({ ok: false, error: String(e?.message || e) });\n    }\n  })().catch(e => {\n    try {\n      sendResponse({ ok: false, error: String(e?.message || e) });\n    } catch (ignoreError) {\n      console.error('Failed to send error response:', ignoreError);\n    }\n  });\n  return true;\n});\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\boots-grab-print\\extension\\src\\options.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'$' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":2,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"$"},"fix":{"range":[57,103],"text":""},"desc":"Remove unused variable '$'."}]},{"ruleId":"no-undef","severity":2,"message":"'branchId' is not defined.","line":6,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'token' is not defined.","line":7,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'baseUrl' is not defined.","line":8,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'save' is not defined.","line":10,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'ok' is not defined.","line":11,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'err' is not defined.","line":12,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'ok' is not defined.","line":21,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":21,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'err' is not defined.","line":23,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":23,"endColumn":10}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getSettings, setSettings } from './storage.js';\nconst $ = (id) => document.getElementById(id);\n\n(async function init(){\n  const s = await getSettings();\n  branchId.value = s.branchId;\n  token.value = s.token;\n  baseUrl.value = s.baseUrl;\n\n  save.addEventListener('click', async () => {\n    ok.textContent = '';\n    err.textContent = '';\n    try {\n      const branchId = branchId.value.trim();\n      const token = token.value;\n      const baseUrl = baseUrl.value.trim().replace(/\\/+$/,'');\n      if (!branchId) throw new Error('missing_branchId');\n      if (!token) throw new Error('missing_token');\n      if (!baseUrl) throw new Error('missing_baseUrl');\n      await setSettings({ branchId, token, baseUrl });\n      ok.textContent = 'Saved.';\n    } catch (e) {\n      err.textContent = String(e?.message || e);\n    }\n  });\n})();\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\boots-grab-print\\extension\\src\\popup.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":25,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":25,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'err' is not defined.","line":31,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":31,"endColumn":6},{"ruleId":"no-undef","severity":2,"message":"'ok' is not defined.","line":32,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":32,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":34,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":34,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'ok' is not defined.","line":37,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":37,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'err' is not defined.","line":41,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":41,"endColumn":6},{"ruleId":"no-undef","severity":2,"message":"'ok' is not defined.","line":42,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":42,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":47,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":47,"endColumn":28},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":59,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":59,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'ok' is not defined.","line":75,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":75,"endColumn":5},{"ruleId":"no-undef","severity":2,"message":"'btnScan' is not defined.","line":78,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":78,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'err' is not defined.","line":78,"column":59,"nodeType":"Identifier","messageId":"undef","endLine":78,"endColumn":62},{"ruleId":"no-undef","severity":2,"message":"'btnIngestSel' is not defined.","line":79,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":79,"endColumn":13},{"ruleId":"no-undef","severity":2,"message":"'err' is not defined.","line":79,"column":74,"nodeType":"Identifier","messageId":"undef","endLine":79,"endColumn":77},{"ruleId":"no-undef","severity":2,"message":"'openOptions' is not defined.","line":80,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":80,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":80,"column":45,"nodeType":"Identifier","messageId":"undef","endLine":80,"endColumn":51}],"suppressedMessages":[],"errorCount":16,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getSettings } from './storage.js';\nconst $ = (id) => document.getElementById(id);\n\nfunction renderList(orders) {\n  const list = $('list');\n  list.innerHTML = '';\n  for (const o of orders) {\n    const div = document.createElement('div');\n    div.className = 'item';\n    div.innerHTML = `\n      <input type=\"checkbox\" data-id=\"${o.id}\" />\n      <div style=\"flex:1;\">\n        <div><b>${o.id}</b></div>\n        <div class=\"meta\">${o.url}</div>\n      </div>\n    `;\n    list.appendChild(div);\n  }\n  if (!orders.length) {\n    list.innerHTML = '<div class=\"meta\">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå /order/{id}/history ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ (‡∏•‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤ Orders ‡∏Å‡πà‡∏≠‡∏ô)</div>';\n  }\n}\n\nasync function activeTab() {\n  const [tab] = await chrome.tabs.query({ active: true, currentWindow: true });\n  if (!tab?.id) throw new Error('no_active_tab');\n  return tab;\n}\n\nasync function scan() {\n  err.textContent = '';\n  ok.textContent = '';\n  const tab = await activeTab();\n  const resp = await chrome.tabs.sendMessage(tab.id, { type: 'GRAB_LIST_ORDERS' });\n  const orders = resp?.orders || [];\n  renderList(orders);\n  ok.textContent = `Found ${orders.length} orders.`;\n}\n\nasync function ingestSelected() {\n  err.textContent = '';\n  ok.textContent = '';\n  const s = await getSettings();\n  if (!s.branchId || !s.token || !s.baseUrl) throw new Error('missing_settings_open_settings');\n\n  const tab = await activeTab();\n  const resp = await chrome.tabs.sendMessage(tab.id, { type: 'GRAB_LIST_ORDERS' });\n  const orders = resp?.orders || [];\n\n  const checks = Array.from(document.querySelectorAll('input[type=checkbox][data-id]'));\n  const selectedIds = new Set(checks.filter(c => c.checked).map(c => c.getAttribute('data-id')));\n  const selected = orders.filter(o => selectedIds.has(o.id));\n  if (!selected.length) throw new Error('no_selection');\n\n  let okCount = 0, failCount = 0;\n\n  for (const o of selected) {\n    try {\n      const jobResp = await chrome.runtime.sendMessage({ type: 'OPEN_BG_AND_EXTRACT', url: o.url });\n      if (jobResp?.ok === false) throw new Error(jobResp?.error || 'extract_failed');\n\n      const r = await fetch(`${s.baseUrl}/api/jobs/ingest`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ token: s.token, branchId: s.branchId, job: jobResp })\n      });\n      const j = await r.json().catch(() => ({}));\n      if (!r.ok || !j?.ok) throw new Error(j?.error || 'http_error');\n      okCount++;\n    } catch {\n      failCount++;\n    }\n  }\n\n  ok.textContent = `Ingest done. ok=${okCount} fail=${failCount}`;\n}\n\nbtnScan.addEventListener('click', () => scan().catch(e => err.textContent = String(e?.message || e)));\nbtnIngestSel.addEventListener('click', () => ingestSelected().catch(e => err.textContent = String(e?.message || e)));\nopenOptions.addEventListener('click', () => chrome.runtime.openOptionsPage());\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\boots-grab-print\\extension\\src\\storage.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":2,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'chrome' is not defined.","line":11,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":15}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export async function getSettings() {\n  const s = await chrome.storage.sync.get(['branchId', 'token', 'baseUrl']);\n  return {\n    branchId: (s.branchId || '').toString(),\n    token: (s.token || '').toString(),\n    baseUrl: (s.baseUrl || '').toString()\n  };\n}\n\nexport async function setSettings(v) {\n  await chrome.storage.sync.set({\n    branchId: (v.branchId || '').toString().trim(),\n    token: (v.token || '').toString(),\n    baseUrl: (v.baseUrl || '').toString().replace(/\\/+$/,'')\n  });\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\functions\\.eslintrc.cjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\functions\\index.js","messages":[{"ruleId":null,"nodeType":null,"fatal":true,"severity":2,"message":"Parsing error: Identifier 'functions' has already been declared","line":863,"column":7}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* functions/index.js */\nconst functions = require(\"firebase-functions/v1\");\nconst admin = require(\"firebase-admin\");\nconst crypto = require(\"crypto\");\nconst ALLOWED_ORIGINS = (process.env.ALLOWED_CORS_ORIGINS || \"http://localhost:5173,http://localhost:3000\")\n  .split(\",\")\n  .map((o) => o.trim())\n  .filter(Boolean);\nconst cors = require(\"cors\")({\n  origin: (origin, callback) => {\n    if (!origin || ALLOWED_ORIGINS.includes(origin)) {\n      return callback(null, true);\n    }\n    return callback(new Error(\"Not allowed by CORS\"), false);\n  }\n});\n\nadmin.initializeApp();\nconst db = admin.firestore();\nconst { calculateCartSummary } = require(\"./src/services/cartService\");\n\nconst REGION = \"asia-southeast1\";\nconst UPLOAD_DOC = db.collection(\"system_metadata\").doc(\"upload_status\");\nconst BOOTSTRAP_ADMIN_DOC = db.collection(\"system_metadata\").doc(\"bootstrap_admin_state\");\nconst ACCOUNTS = db.collection(\"accounts\");\nconst ID_INDEX = db.collection(\"idIndex\");\nconst AUDIT_LOGS = db.collection(\"auditLogs\");\n\nconst PIN_ITERATIONS = 120000;\nconst PIN_KEYLEN = 32;\nconst PIN_MAX_ATTEMPTS = 5;\nconst PIN_LOCK_MINUTES = 15;\nconst ROLES = [\"admin\", \"SM-SGM\", \"user\"];\nconst DEFAULT_ALLOWED_MENUS = Object.freeze({\n  admin: [\"dashboard\", \"pos\", \"search\", \"report\", \"inventory\", \"orders\", \"settings\", \"Upload\", \"management\"],\n  \"SM-SGM\": [\"dashboard\", \"pos\", \"search\", \"report\", \"inventory\", \"orders\", \"settings\", \"Upload\", \"management\"],\n  user: [\"pos\", \"search\", \"dashboard\"]\n});\n\nfunction requireAuth(context) {\n  if (!context.auth) throw new functions.https.HttpsError(\"unauthenticated\", \"Login required\");\n}\n\nfunction getAuthEmail(context) {\n  requireAuth(context);\n  const email = String(context.auth.token?.email || \"\").trim().toLowerCase();\n  if (!email) throw new functions.https.HttpsError(\"failed-precondition\", \"Email required\");\n  return email;\n}\nfunction requireAppCheck(context) {\n  if (!context.app) throw new functions.https.HttpsError(\"failed-precondition\", \"App Check required\");\n}\n\nasync function isAdmin(uid) {\n  const snap = await db.collection(\"users\").doc(uid).get();\n  return snap.exists && (snap.data().role === \"admin\");\n}\n\nfunction nowTs() { return admin.firestore.FieldValue.serverTimestamp(); }\n\nfunction hashPin(pin, salt) {\n  const cleanPin = String(pin || \"\").trim();\n  if (!cleanPin) throw new functions.https.HttpsError(\"invalid-argument\", \"PIN required\");\n  const pinSalt = salt || crypto.randomBytes(16).toString(\"base64\");\n  const hash = crypto.pbkdf2Sync(cleanPin, pinSalt, PIN_ITERATIONS, PIN_KEYLEN, \"sha256\").toString(\"base64\");\n  return { pinHash: hash, pinSalt, pinAlgo: `pbkdf2-sha256-${PIN_ITERATIONS}` };\n}\n\nfunction verifyPin(pin, record) {\n  if (!record?.pinHash || !record?.pinSalt) return false;\n  const expected = String(record.pinHash || \"\");\n  const pinSalt = String(record.pinSalt || \"\");\n  const hash = crypto.pbkdf2Sync(String(pin || \"\"), pinSalt, PIN_ITERATIONS, PIN_KEYLEN, \"sha256\").toString(\"base64\");\n  return crypto.timingSafeEqual(Buffer.from(hash), Buffer.from(expected));\n}\n\nfunction validateJsonBody(req, res) {\n  const contentType = req.get(\"content-type\") || \"\";\n  if (!contentType.toLowerCase().includes(\"application/json\")) {\n    res.status(415).json({ error: \"Unsupported Media Type. Use application/json.\" });\n    return false;\n  }\n  if (!req.body || typeof req.body !== \"object\") {\n    res.status(400).json({ error: \"Invalid JSON body\" });\n    return false;\n  }\n  return true;\n}\n\nfunction sanitizePermissions(input, role) {\n  const allowedMenus = Array.isArray(input?.allowedMenus) ? input.allowedMenus : (DEFAULT_ALLOWED_MENUS[role] || []);\n  const clean = Array.from(new Set(allowedMenus.map((m) => String(m || \"\").trim()).filter(Boolean)));\n  return { allowedMenus: clean };\n}\n\nasync function getIdDocByCode(idCode) {\n  const cleanId = String(idCode || \"\").trim();\n  if (!cleanId) throw new functions.https.HttpsError(\"invalid-argument\", \"idCode required\");\n  const indexSnap = await ID_INDEX.doc(cleanId).get();\n  if (!indexSnap.exists) throw new functions.https.HttpsError(\"not-found\", \"ID not found\");\n  const email = String(indexSnap.data()?.email || \"\").trim().toLowerCase();\n  if (!email) throw new functions.https.HttpsError(\"failed-precondition\", \"ID email missing\");\n  const idRef = ACCOUNTS.doc(email).collection(\"ids\").doc(cleanId);\n  const idSnap = await idRef.get();\n  if (!idSnap.exists) throw new functions.https.HttpsError(\"not-found\", \"ID not found\");\n  return { email, idRef, idSnap };\n}\n\nasync function getActor(context, actorIdCode) {\n  const email = getAuthEmail(context);\n  const { email: targetEmail, idSnap } = await getIdDocByCode(actorIdCode);\n  if (targetEmail !== email) throw new functions.https.HttpsError(\"permission-denied\", \"Actor email mismatch\");\n  const data = idSnap.data() || {};\n  if (data.status !== \"active\") throw new functions.https.HttpsError(\"permission-denied\", \"Actor disabled\");\n  return {\n    email,\n    idCode: String(actorIdCode || \"\").trim(),\n    role: String(data.role || \"\"),\n    permissions: data.permissions || {}\n  };\n}\n\nfunction assertManageScope(actor, targetEmail, targetRole, desiredRole) {\n  if (actor.role === \"admin\") return;\n  if (actor.role !== \"SM-SGM\") throw new functions.https.HttpsError(\"permission-denied\", \"Not allowed\");\n  if (actor.email !== targetEmail) throw new functions.https.HttpsError(\"permission-denied\", \"Email scope violation\");\n  if (targetRole === \"admin\" || desiredRole === \"admin\") {\n    throw new functions.https.HttpsError(\"permission-denied\", \"Cannot assign admin role\");\n  }\n}\n\nfunction assertMenuAccess(actor, menu) {\n  const permissions = sanitizePermissions(actor.permissions, actor.role);\n  if (!permissions.allowedMenus.includes(menu)) {\n    throw new functions.https.HttpsError(\"permission-denied\", \"Menu access denied\");\n  }\n}\n\nasync function writeAuditLog(payload) {\n  await AUDIT_LOGS.add({\n    ...payload,\n    createdAt: nowTs()\n  });\n}\n\nfunction normalizeType(type) {\n  // ‚úÖ NEW: pricing = ItemMasterPrintOnDeph (must be first)\n  if (![\"pricing\", \"master\", \"maintenance\"].includes(type)) {\n    throw new functions.https.HttpsError(\"invalid-argument\", \"Invalid upload type\");\n  }\n  return type;\n}\n\nasync function acquireLock(lockOwner, type, fileMeta) {\n  await db.runTransaction(async (tx) => {\n    const s = await tx.get(UPLOAD_DOC);\n    const data = s.exists ? s.data() : {};\n    const lock = data.lock || {};\n\n    if (lock.inProgress) {\n      throw new functions.https.HttpsError(\"failed-precondition\", `Upload in progress by ${lock.by || \"unknown\"}`);\n    }\n\n    // ‚úÖ NEW prerequisite: pricing must be ready before master/maintenance\n    const pricingReady = !!(data.pricing && data.pricing.isReady);\n    if ((type === \"master\" || type === \"maintenance\") && !pricingReady) {\n      throw new functions.https.HttpsError(\"failed-precondition\", \"ItemMasterPrintOnDeph (pricing) not uploaded yet\");\n    }\n\n    tx.set(UPLOAD_DOC, {\n      lock: { inProgress: true, by: lockOwner, type, startedAt: nowTs() },\n      lastError: admin.firestore.FieldValue.delete()\n    }, { merge: true });\n\n    tx.set(UPLOAD_DOC, {\n      [type]: {\n        ...(data[type] || {}),\n        lastFileName: fileMeta?.fileName || null,\n        lastChecksum: fileMeta?.checksum || null,\n        lastRowCount: fileMeta?.rowCount || null\n      }\n    }, { merge: true });\n  });\n}\n\nfunction chunkArray(arr, size) {\n  const out = [];\n  for (let i = 0; i < arr.length; i += size) out.push(arr.slice(i, i + size));\n  return out;\n}\n\n// Keep ops safe\nconst MAX_OPS_PER_BATCH = 400;\n\nfunction safeStr(x) { return (x === undefined || x === null) ? \"\" : String(x).trim(); }\nfunction safeNum(x) { const n = Number(x); return Number.isFinite(n) ? n : 0; }\n\n// ‚úÖ Step 1 = PRICING (ItemMasterPrintOnDeph) - create/upsert base products\nfunction mapPricingRow(row) {\n  const itemCode = safeStr(row.Itemcode || row.ItemCode || row.ProductCode);\n  if (!itemCode) return null;\n\n  const name = safeStr(row.Description || row[\"Description\"]);\n  const barcode = safeStr(row.Barcode || row.BARCODE); // if present in file; ok if empty\n\n  const doc = {\n    itemCode,\n    name: name || null,\n    barcodeMain: barcode || null,\n    dept: safeStr(row.Dept || row[\"Dept\"]),\n    class: safeStr(row.Class || row[\"Class\"]),\n    merchandise: safeStr(row.Merchandise || row[\"Merchandise\"]),\n    regPrice: safeNum(row[\"Reg. Price\"] ?? row.RegPrice ?? row[\"Reg Price\"]),\n    method: safeStr(row.Method || row[\"Method\"]),\n    unitPrice: safeNum(row[\"Unit Price\"] ?? row.UnitPrice),\n    dealPrice: safeNum(row[\"Deal Price\"] ?? row.DealPrice),\n    dealQty: safeNum(row[\"Deal QTY\"] ?? row.DealQty),\n    limitQty: safeNum(row[\"Limit\"] ?? row[\"Limit QTY\"] ?? row.LimitQty),\n    mpg: safeStr(row.MPG || row[\"MPG\"]),\n    tax: safeStr(row.Tax || row[\"Tax\"]),\n    brand: safeStr(row.Brand || row[\"Brand\"]),\n    source: { pricingAt: admin.firestore.FieldValue.serverTimestamp() },\n    updatedAt: admin.firestore.FieldValue.serverTimestamp()\n  };\n\n  doc.keywordsText = `${itemCode} ${barcode} ${name}`.toLowerCase();\n  return { itemCode, barcode, doc };\n}\n\n// ‚úÖ Step 2 = MASTER (ProductAllDept) - enrich/merge only (no need to exist check now, but ok)\nfunction mapMasterRow(row) {\n  const itemCode = safeStr(row.ProductCode || row.Itemcode || row.ItemCode || row.ID);\n  const name = safeStr(row.ProductDesc || row.Description || row.Name);\n  const barcode = safeStr(row.Barcode || row.BARCODE);\n  const status = safeStr(row.ProductStatus || row.Status);\n\n  if (!status || !status.startsWith(\"0\")) return null;\n  if (!itemCode) return null;\n\n  const upd = {\n    itemCode,\n    name: name || null,\n    barcodeMain: barcode || null,\n    dept: safeStr(row.Dept || row.Department),\n    deptDesc: safeStr(row.DeptDesc || row.DepartmentDesc),\n    price: safeNum(row.SellPrice || row.Price || row.UnitPrice),\n    status,\n    source: { masterAt: admin.firestore.FieldValue.serverTimestamp() },\n    updatedAt: admin.firestore.FieldValue.serverTimestamp()\n  };\n\n  return { itemCode, barcode, upd };\n}\n\nfunction mapMaintenanceRow(row) {\n  const itemCode = safeStr(row.Itemcode || row.ItemCode || row.ProductCode);\n  if (!itemCode) return null;\n\n  const upd = {\n    itemCode,\n    description: safeStr(row.Description || row[\"Description\"]),\n    maintenanceType: safeStr(row.Type || row[\"Type\"]),\n    dept: safeStr(row.Dept || row[\"Dept\"]),\n    class: safeStr(row.Class || row[\"Class\"]),\n    regPrice: safeNum(row[\"Reg. Price\"] ?? row.RegPrice ?? row[\"Reg Price\"]),\n    method: safeStr(row.Method || row[\"Method\"]),\n    unitPrice: safeNum(row[\"Unit Price\"] ?? row.UnitPrice),\n    dealPrice: safeNum(row[\"Deal Price\"] ?? row.DealPrice),\n    limitQty: safeNum(row[\"Limit QTY\"] ?? row.LimitQty),\n    mpGroup: safeStr(row[\"MP Group\"] ?? row.MPGroup),\n    source: { maintenanceAt: admin.firestore.FieldValue.serverTimestamp() },\n    updatedAt: admin.firestore.FieldValue.serverTimestamp()\n  };\n\n  if (!upd.description) delete upd.description;\n  return { itemCode, upd };\n}\n\nexports.bootstrapAdmin = functions.region(REGION).https.onCall(async (data, context) => {\n  const email = getAuthEmail(context);\n  const idCode = safeStr(data?.idCode);\n  const pin = safeStr(data?.pin);\n  if (!idCode || !pin) throw new functions.https.HttpsError(\"invalid-argument\", \"idCode and pin required\");\n\n  // Prefer collection group lookup; if unsupported, fall back to marker doc.\n  let adminExists = false;\n  try {\n    const existingAdmin = await db.collectionGroup(\"ids\").where(\"role\", \"==\", \"admin\").limit(1).get();\n    adminExists = !existingAdmin.empty;\n  } catch (err) {\n    console.error(\"bootstrapAdmin admin lookup failed, falling back to marker doc:\", err?.message || err);\n    const markerSnap = await BOOTSTRAP_ADMIN_DOC.get();\n    adminExists = !!(markerSnap.exists && markerSnap.data()?.exists);\n  }\n  if (adminExists) throw new functions.https.HttpsError(\"failed-precondition\", \"Admin already exists\");\n\n  await db.runTransaction(async (tx) => {\n    const bootstrapMarker = await tx.get(BOOTSTRAP_ADMIN_DOC);\n    if (bootstrapMarker.exists && bootstrapMarker.data()?.exists) {\n      throw new functions.https.HttpsError(\"failed-precondition\", \"Admin already exists\");\n    }\n\n    const indexRef = ID_INDEX.doc(idCode);\n    if ((await tx.get(indexRef)).exists) throw new functions.https.HttpsError(\"already-exists\", \"ID already exists\");\n\n    const accountRef = ACCOUNTS.doc(email);\n    const idRef = accountRef.collection(\"ids\").doc(idCode);\n    const { pinHash, pinSalt, pinAlgo } = hashPin(pin);\n    const permissions = sanitizePermissions(data?.permissions, \"admin\");\n\n    tx.set(accountRef, { email, createdAt: nowTs(), updatedAt: nowTs() }, { merge: true });\n    tx.set(idRef, {\n      idCode,\n      email,\n      role: \"admin\",\n      permissions,\n      status: \"active\",\n      pinHash,\n      pinSalt,\n      pinAlgo,\n      pinAttempts: 0,\n      pinResetRequired: false,\n        createdAt: nowTs(),\n        updatedAt: nowTs(),\n        createdBy: \"bootstrap\",\n        createdByUid: context.auth.uid\n      });\n      tx.set(indexRef, { idCode, email, createdAt: nowTs() });\n      tx.set(BOOTSTRAP_ADMIN_DOC, {\n        exists: true,\n        email,\n        idCode,\n        createdAt: nowTs(),\n        createdByUid: context.auth?.uid || null\n      }, { merge: true });\n    });\n\n  await writeAuditLog({\n    action: \"bootstrap_admin\",\n    actorUid: context.auth.uid,\n    actorEmail: email,\n    actorIdCode: idCode,\n    targetEmail: email,\n    targetIdCode: idCode\n  });\n\n  return { ok: true };\n});\n\n// HTTPS REST fallback with CORS + body validation (for clients not using httpsCallable)\nexports.bootstrapAdminHttp = functions.region(REGION).https.onRequest((req, res) => {\n  cors(req, res, async () => {\n    try {\n      if (req.method === \"OPTIONS\") return res.status(204).send(\"\");\n      if (req.method !== \"POST\") return res.status(405).json({ error: \"Method Not Allowed\" });\n      if (!validateJsonBody(req, res)) return;\n\n      const { idCode, pin } = req.body || {};\n      if (!idCode || !pin) return res.status(400).json({ error: \"idCode and pin required\" });\n\n      // Require Firebase Auth token (should be injected by proxy/emulator middleware)\n      try { requireAuth({ auth: req.auth || req.user }); } catch (e) { return res.status(401).json({ error: e.message }); }\n\n      // Reuse callable logic by invoking directly\n      const callable = exports.bootstrapAdmin;\n      const result = await callable.run({ data: { idCode, pin }, context: { auth: req.auth || req.user } });\n      return res.status(200).json(result);\n    } catch (e) {\n      console.error(\"bootstrapAdminHttp error:\", e);\n      const code = e?.code === \"failed-precondition\" ? 412 : 500;\n      return res.status(code).json({ error: e?.message || \"Internal error\" });\n    }\n  });\n});\n\nexports.listMyIds = functions.region(REGION).https.onCall(async (data, context) => {\n  const email = getAuthEmail(context);\n  const snap = await ACCOUNTS.doc(email).collection(\"ids\").get();\n  const ids = snap.docs.map((doc) => {\n    const { pinHash, pinSalt, pinAlgo, ...rest } = doc.data() || {};\n    return rest;\n  });\n  return { ids };\n});\n\nexports.verifyIdPin = functions.region(REGION).https.onCall(async (data, context) => {\n  const email = getAuthEmail(context);\n  const idCode = safeStr(data?.idCode);\n  const pin = safeStr(data?.pin);\n  if (!idCode || !pin) throw new functions.https.HttpsError(\"invalid-argument\", \"idCode and pin required\");\n\n  const { email: targetEmail, idRef, idSnap } = await getIdDocByCode(idCode);\n  if (targetEmail !== email) throw new functions.https.HttpsError(\"permission-denied\", \"Email mismatch\");\n  const idData = idSnap.data() || {};\n  if (idData.status !== \"active\") throw new functions.https.HttpsError(\"failed-precondition\", \"ID disabled\");\n\n  const lockedUntil = idData.pinLockedUntil?.toMillis ? idData.pinLockedUntil.toMillis() : 0;\n  if (lockedUntil && lockedUntil > Date.now()) {\n    throw new functions.https.HttpsError(\"failed-precondition\", \"PIN locked\");\n  }\n\n  const ok = verifyPin(pin, idData);\n  if (!ok) {\n    const attempts = Number(idData.pinAttempts || 0) + 1;\n    const updates = { pinAttempts: attempts, updatedAt: nowTs() };\n    if (attempts >= PIN_MAX_ATTEMPTS) {\n      const lockUntil = admin.firestore.Timestamp.fromMillis(Date.now() + PIN_LOCK_MINUTES * 60 * 1000);\n      updates.pinLockedUntil = lockUntil;\n    }\n    await idRef.update(updates);\n    throw new functions.https.HttpsError(\"permission-denied\", \"Invalid PIN\");\n  }\n\n  await idRef.update({\n    pinAttempts: 0,\n    pinLockedUntil: admin.firestore.FieldValue.delete(),\n    lastLoginAt: nowTs(),\n    updatedAt: nowTs()\n  });\n\n  const permissions = idData.permissions || sanitizePermissions(null, idData.role);\n\n  return {\n    session: {\n      email,\n      idCode,\n      role: idData.role,\n      permissions,\n      status: idData.status,\n      pinResetRequired: !!idData.pinResetRequired\n    }\n  };\n});\n\nexports.createId = functions.region(REGION).https.onCall(async (data, context) => {\n  const actor = await getActor(context, data?.actorIdCode);\n  if (![\"admin\", \"SM-SGM\"].includes(actor.role)) throw new functions.https.HttpsError(\"permission-denied\", \"Not allowed\");\n\n  const targetEmail = safeStr(data?.email || actor.email).toLowerCase();\n  const idCode = safeStr(data?.idCode);\n  const role = safeStr(data?.role);\n  const pin = safeStr(data?.pin);\n  if (!idCode || !pin) throw new functions.https.HttpsError(\"invalid-argument\", \"idCode and pin required\");\n  if (!ROLES.includes(role)) throw new functions.https.HttpsError(\"invalid-argument\", \"Invalid role\");\n  assertManageScope(actor, targetEmail, null, role);\n\n  await db.runTransaction(async (tx) => {\n    const indexRef = ID_INDEX.doc(idCode);\n    if ((await tx.get(indexRef)).exists) throw new functions.https.HttpsError(\"already-exists\", \"ID already exists\");\n\n    const accountRef = ACCOUNTS.doc(targetEmail);\n    const idRef = accountRef.collection(\"ids\").doc(idCode);\n    const { pinHash, pinSalt, pinAlgo } = hashPin(pin);\n    const permissions = sanitizePermissions(data?.permissions, role);\n\n    tx.set(accountRef, { email: targetEmail, createdAt: nowTs(), updatedAt: nowTs() }, { merge: true });\n    tx.set(idRef, {\n      idCode,\n      email: targetEmail,\n      role,\n      permissions,\n      status: \"active\",\n      pinHash,\n      pinSalt,\n      pinAlgo,\n      pinAttempts: 0,\n      pinResetRequired: true,\n      createdAt: nowTs(),\n      updatedAt: nowTs(),\n      createdBy: actor.idCode,\n      createdByUid: context.auth.uid\n    });\n    tx.set(indexRef, { idCode, email: targetEmail, createdAt: nowTs() });\n  });\n\n  await writeAuditLog({\n    action: \"create_id\",\n    actorUid: context.auth.uid,\n    actorEmail: actor.email,\n    actorIdCode: actor.idCode,\n    targetEmail: targetEmail,\n    targetIdCode: idCode,\n    role\n  });\n\n  return { ok: true };\n});\n\nexports.adminResetAllPins = functions.region(REGION).https.onCall(async (data, context) => {\n  const actor = await getActor(context, data?.actorIdCode);\n  if (actor.role !== \"admin\") throw new functions.https.HttpsError(\"permission-denied\", \"Not allowed\");\n\n  const newPin = \"1234\";\n  const { pinHash, pinSalt, pinAlgo } = hashPin(newPin);\n\n  const batchSize = 400;\n  const snapshot = await db.collectionGroup(\"ids\").get();\n  const batches = [];\n  let batch = db.batch();\n  let count = 0;\n\n  snapshot.docs.forEach((doc) => {\n    batch.update(doc.ref, {\n      pinHash,\n      pinSalt,\n      pinAlgo,\n      pinAttempts: 0,\n      pinLockedUntil: admin.firestore.FieldValue.delete(),\n      pinResetRequired: true,\n      updatedAt: nowTs(),\n      updatedBy: actor.idCode,\n      updatedByUid: context.auth.uid\n    });\n    count++;\n    if (count % batchSize === 0) {\n      batches.push(batch);\n      batch = db.batch();\n    }\n  });\n\n  if (count % batchSize !== 0) {\n    batches.push(batch);\n  }\n\n  await Promise.all(batches.map(b => b.commit()));\n\n  await writeAuditLog({\n    action: \"admin_reset_all_pins\",\n    actorUid: context.auth.uid,\n    actorEmail: actor.email,\n    actorIdCode: actor.idCode,\n    count\n  });\n\n  return { ok: true, count };\n});\n\nexports.updateId = functions.region(REGION).https.onCall(async (data, context) => {\n  const actor = await getActor(context, data?.actorIdCode);\n  if (![\"admin\", \"SM-SGM\"].includes(actor.role)) throw new functions.https.HttpsError(\"permission-denied\", \"Not allowed\");\n\n  const idCode = safeStr(data?.idCode);\n  if (!idCode) throw new functions.https.HttpsError(\"invalid-argument\", \"idCode required\");\n\n  const { email: targetEmail, idRef, idSnap } = await getIdDocByCode(idCode);\n  const targetData = idSnap.data() || {};\n  const desiredRole = data?.role ? safeStr(data?.role) : null;\n  if (desiredRole && !ROLES.includes(desiredRole)) throw new functions.https.HttpsError(\"invalid-argument\", \"Invalid role\");\n  assertManageScope(actor, targetEmail, targetData.role, desiredRole);\n\n  const updates = { updatedAt: nowTs(), updatedBy: actor.idCode, updatedByUid: context.auth.uid };\n  if (desiredRole) updates.role = desiredRole;\n  if (data?.permissions) updates.permissions = sanitizePermissions(data?.permissions, desiredRole || targetData.role);\n  if (data?.status) updates.status = safeStr(data?.status);\n\n  await idRef.update(updates);\n\n  await writeAuditLog({\n    action: \"update_id\",\n    actorUid: context.auth.uid,\n    actorEmail: actor.email,\n    actorIdCode: actor.idCode,\n    targetEmail,\n    targetIdCode: idCode,\n    role: desiredRole || targetData.role,\n    status: updates.status\n  });\n\n  return { ok: true };\n});\n\nexports.resetPin = functions.region(REGION).https.onCall(async (data, context) => {\n  const actor = await getActor(context, data?.actorIdCode);\n  if (![\"admin\", \"SM-SGM\"].includes(actor.role)) throw new functions.https.HttpsError(\"permission-denied\", \"Not allowed\");\n\n  const idCode = safeStr(data?.idCode);\n  if (!idCode) throw new functions.https.HttpsError(\"invalid-argument\", \"idCode required\");\n\n  const { email: targetEmail, idRef, idSnap } = await getIdDocByCode(idCode);\n  const targetData = idSnap.data() || {};\n  assertManageScope(actor, targetEmail, targetData.role, null);\n\n  const tempPin = String(Math.floor(100000 + Math.random() * 900000));\n  const { pinHash, pinSalt, pinAlgo } = hashPin(tempPin);\n\n  await idRef.update({\n    pinHash,\n    pinSalt,\n    pinAlgo,\n    pinAttempts: 0,\n    pinLockedUntil: admin.firestore.FieldValue.delete(),\n    pinResetRequired: true,\n    updatedAt: nowTs(),\n    updatedBy: actor.idCode,\n    updatedByUid: context.auth.uid\n  });\n\n  await writeAuditLog({\n    action: \"reset_pin\",\n    actorUid: context.auth.uid,\n    actorEmail: actor.email,\n    actorIdCode: actor.idCode,\n    targetEmail,\n    targetIdCode: idCode\n  });\n\n  return { ok: true, tempPin };\n});\n\nexports.setPin = functions.region(REGION).https.onCall(async (data, context) => {\n  const email = getAuthEmail(context);\n  const idCode = safeStr(data?.idCode);\n  const currentPin = safeStr(data?.currentPin);\n  const newPin = safeStr(data?.newPin);\n  if (!idCode || !currentPin || !newPin) throw new functions.https.HttpsError(\"invalid-argument\", \"Missing pin fields\");\n\n  const { email: targetEmail, idRef, idSnap } = await getIdDocByCode(idCode);\n  if (targetEmail !== email) throw new functions.https.HttpsError(\"permission-denied\", \"Email mismatch\");\n  const idData = idSnap.data() || {};\n\n  if (!verifyPin(currentPin, idData)) {\n    throw new functions.https.HttpsError(\"permission-denied\", \"Invalid PIN\");\n  }\n\n  const { pinHash, pinSalt, pinAlgo } = hashPin(newPin);\n  await idRef.update({\n    pinHash,\n    pinSalt,\n    pinAlgo,\n    pinAttempts: 0,\n    pinLockedUntil: admin.firestore.FieldValue.delete(),\n    pinResetRequired: false,\n    updatedAt: nowTs(),\n    updatedBy: idCode,\n    updatedByUid: context.auth.uid\n  });\n\n  await writeAuditLog({\n    action: \"set_pin\",\n    actorUid: context.auth.uid,\n    actorEmail: email,\n    actorIdCode: idCode,\n    targetEmail,\n    targetIdCode: idCode\n  });\n\n  return { ok: true };\n});\n\nexports.searchIds = functions.region(REGION).https.onCall(async (data, context) => {\n  const actor = await getActor(context, data?.actorIdCode);\n  if (![\"admin\", \"SM-SGM\"].includes(actor.role)) throw new functions.https.HttpsError(\"permission-denied\", \"Not allowed\");\n\n  const idCode = safeStr(data?.idCode);\n  const email = safeStr(data?.email).toLowerCase();\n\n  if (idCode) {\n    const { email: targetEmail, idSnap } = await getIdDocByCode(idCode);\n    assertManageScope(actor, targetEmail, idSnap.data()?.role, null);\n    const { pinHash, pinSalt, pinAlgo, ...rest } = idSnap.data() || {};\n    return { ids: [rest] };\n  }\n\n  if (!email) throw new functions.https.HttpsError(\"invalid-argument\", \"email or idCode required\");\n  assertManageScope(actor, email, null, null);\n\n  const snap = await ACCOUNTS.doc(email).collection(\"ids\").get();\n  const ids = snap.docs.map((doc) => {\n    const { pinHash, pinSalt, pinAlgo, ...rest } = doc.data() || {};\n    return rest;\n  });\n  return { ids };\n});\n\nexports.getAuditLogs = functions.region(REGION).https.onCall(async (data, context) => {\n  const actor = await getActor(context, data?.actorIdCode);\n  if (![\"admin\", \"SM-SGM\"].includes(actor.role)) throw new functions.https.HttpsError(\"permission-denied\", \"Not allowed\");\n\n  const targetEmail = safeStr(data?.email || \"\").toLowerCase();\n  const limit = Math.min(Math.max(parseInt(data?.limit || 50, 10), 1), 200);\n\n  if (actor.role === \"SM-SGM\" && targetEmail && targetEmail !== actor.email) {\n    throw new functions.https.HttpsError(\"permission-denied\", \"Email scope violation\");\n  }\n\n  let query = AUDIT_LOGS.orderBy(\"createdAt\", \"desc\").limit(limit);\n  if (targetEmail) query = query.where(\"targetEmail\", \"==\", targetEmail);\n  if (actor.role === \"SM-SGM\" && !targetEmail) query = query.where(\"targetEmail\", \"==\", actor.email);\n\n  const snap = await query.get();\n  const logs = snap.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\n  return { logs };\n});\n\nexports.calculateOrder = functions.region(REGION).https.onCall(async (data, context) => {\n  requireAuth(context);\n  const actorIdCode = safeStr(data?.actorIdCode);\n  if (!actorIdCode) throw new functions.https.HttpsError(\"invalid-argument\", \"actorIdCode required\");\n  const actor = await getActor(context, actorIdCode);\n  assertMenuAccess(actor, \"pos\");\n  const { items, billDiscountPercent, coupons, allowance, topup } = data || {};\n  return calculateCartSummary(items, billDiscountPercent, coupons, allowance, topup);\n});\n\nexports.beginUpload = functions.region(REGION).https.onCall(async (data, context) => {\n  requireAuth(context);\n  requireAppCheck(context);\n\n  const actor = await getActor(context, data?.actorIdCode);\n  if (actor.role !== \"admin\") throw new functions.https.HttpsError(\"permission-denied\", \"Admin only\");\n\n  const type = normalizeType(data?.type);\n  const fileMeta = data?.fileMeta || {};\n  await acquireLock(actor.idCode, type, fileMeta);\n  return { ok: true };\n});\n\nexports.uploadChunk = functions.region(REGION).https.onCall(async (data, context) => {\n  requireAuth(context);\n  requireAppCheck(context);\n\n  const actor = await getActor(context, data?.actorIdCode);\n  if (actor.role !== \"admin\") throw new functions.https.HttpsError(\"permission-denied\", \"Admin only\");\n\n  const type = normalizeType(data?.type);\n  const rows = Array.isArray(data?.rows) ? data.rows : [];\n  if (rows.length === 0) return { ok: true, processed: 0, matched: 0, skipped: 0, invalid: 0 };\n\n  const st = await UPLOAD_DOC.get();\n  const lock = st.exists ? (st.data().lock || {}) : {};\n  if (!lock.inProgress || lock.by !== actor.idCode || lock.type !== type) {\n    throw new functions.https.HttpsError(\"failed-precondition\", \"No active lock for this upload\");\n  }\n\n  let processed = 0, matched = 0, skipped = 0, invalid = 0;\n  const ops = [];\n\n  if (type === \"pricing\") {\n    // Step 1: upsert products base from ItemMasterPrintOnDeph\n    for (const r of rows) {\n      const mapped = mapPricingRow(r);\n      if (!mapped) { invalid++; continue; }\n      const { itemCode, barcode, doc } = mapped;\n\n      ops.push({ ref: db.collection(\"products\").doc(itemCode), data: doc, merge: true });\n\n      if (barcode) {\n        ops.push({ ref: db.collection(\"barcode_index\").doc(barcode), data: { itemCode, updatedAt: nowTs() }, merge: true });\n      }\n      processed++; matched++;\n    }\n  } else if (type === \"master\") {\n    // Step 2: merge ProductAllDept (only for existing codes is optional, but we'll just merge)\n    for (const r of rows) {\n      const mapped = mapMasterRow(r);\n      if (!mapped) { invalid++; continue; }\n      const { itemCode, barcode, upd } = mapped;\n\n      ops.push({ ref: db.collection(\"products\").doc(itemCode), data: upd, merge: true });\n\n      if (barcode) {\n        ops.push({ ref: db.collection(\"barcode_index\").doc(barcode), data: { itemCode, updatedAt: nowTs() }, merge: true });\n      }\n      processed++; matched++;\n    }\n  } else if (type === \"maintenance\") {\n    // Step 3: update only if product exists\n    const codes = [];\n    const mappedRows = [];\n    for (const r of rows) {\n      const mapped = mapMaintenanceRow(r);\n      if (!mapped) { invalid++; continue; }\n      mappedRows.push(mapped);\n      codes.push(mapped.itemCode);\n    }\n\n    const codeChunks = chunkArray(codes, 200);\n    const existsSet = new Set();\n    for (const c of codeChunks) {\n      const refs = c.map(code => db.collection(\"products\").doc(code));\n      const snaps = await db.getAll(...refs);\n      snaps.forEach((snap, idx) => { if (snap.exists) existsSet.add(c[idx]); });\n    }\n\n    for (const m of mappedRows) {\n      if (!existsSet.has(m.itemCode)) { skipped++; continue; }\n      ops.push({ ref: db.collection(\"products\").doc(m.itemCode), data: m.upd, merge: true });\n      processed++; matched++;\n    }\n  }\n\n  const opChunks = chunkArray(ops, MAX_OPS_PER_BATCH);\n  for (const part of opChunks) {\n    const batch = db.batch();\n    for (const op of part) batch.set(op.ref, op.data, { merge: !!op.merge });\n    await batch.commit();\n  }\n\n  return { ok: true, processed, matched, skipped, invalid };\n});\n\nexports.finalizeUpload = functions.region(REGION).https.onCall(async (data, context) => {\n  requireAuth(context);\n  requireAppCheck(context);\n\n  const actor = await getActor(context, data?.actorIdCode);\n  if (actor.role !== \"admin\") throw new functions.https.HttpsError(\"permission-denied\", \"Admin only\");\n\n  const type = normalizeType(data?.type);\n  const summary = data?.summary || {};\n\n  await db.runTransaction(async (tx) => {\n    const s = await tx.get(UPLOAD_DOC);\n    const d = s.exists ? s.data() : {};\n    const currentVersion = Number(d?.pricing?.version || 0);\n\n    const patch = {};\n    if (type === \"pricing\") {\n      patch.pricing = {\n        ...(d.pricing || {}),\n        isReady: true,\n        lastUploadAt: nowTs(),\n        rowCount: summary.rowCount ?? d.pricing?.rowCount ?? null,\n        checksum: summary.checksum ?? d.pricing?.checksum ?? null,\n        version: currentVersion + 1\n      };\n      patch.productsVersion = currentVersion + 1;\n    } else {\n      patch[type] = {\n        ...(d[type] || {}),\n        isReady: true,\n        lastUploadAt: nowTs(),\n        matched: summary.matched ?? null,\n        skipped: summary.skipped ?? null,\n        invalid: summary.invalid ?? null,\n        processed: summary.processed ?? null\n      };\n      patch.productsVersion = currentVersion;\n    }\n\n    tx.set(UPLOAD_DOC, patch, { merge: true });\n    tx.set(UPLOAD_DOC, { lock: { inProgress: false, by: null, type: null, startedAt: null } }, { merge: true });\n  });\n\n  return { ok: true };\n});\n\nexports.abortUpload = functions.region(REGION).https.onCall(async (data, context) => {\n  requireAuth(context);\n  requireAppCheck(context);\n\n  const actor = await getActor(context, data?.actorIdCode);\n  if (actor.role !== \"admin\") throw new functions.https.HttpsError(\"permission-denied\", \"Admin only\");\n\n  await UPLOAD_DOC.set({\n    lock: { inProgress: false, by: null, type: null, startedAt: null },\n    lastError: { at: new Date().toISOString(), step: \"abort\", message: \"aborted by admin\" }\n  }, { merge: true });\n\n  return { ok: true };\n});\n\nconst functions = require('firebase-functions');\nconst admin = require('firebase-admin');\n\nif (!admin.apps.length) {\n  admin.initializeApp();\n}\n\nexports.setAdminRole = functions\n  .region('asia-southeast1')\n  .https.onCall(async (data, context) => {\n    // Only existing admins can set roles\n    if (!context.auth || !context.auth.token.admin) {\n      throw new functions.https.HttpsError(\n        'permission-denied',\n        'Only admins can set roles'\n      );\n    }\n    \n    const { uid, role } = data;\n    \n    if (!uid || !role) {\n      throw new functions.https.HttpsError(\n        'invalid-argument',\n        'uid and role are required'\n      );\n    }\n    \n    try {\n      await admin.auth().setCustomUserClaims(uid, { \n        role: role,\n        admin: role === 'admin'\n      });\n      \n      return { \n        success: true, \n        message: `Role ${role} set for user ${uid}` \n      };\n    } catch (error) {\n      throw new functions.https.HttpsError(\n        'internal',\n        `Error setting role: ${error.message}`\n      );\n    }\n  });\n\n// First-time setup function (remove after use)\nexports.setFirstAdmin = functions\n  .region('asia-southeast1')\n  .https.onRequest(async (req, res) => {\n    const email = req.query.email;\n    \n    if (!email) {\n      res.status(400).send('Email parameter required');\n      return;\n    }\n    \n    try {\n      const user = await admin.auth().getUserByEmail(email);\n      \n      await admin.auth().setCustomUserClaims(user.uid, { \n        role: 'admin',\n        admin: true\n      });\n      \n      res.send(`Admin role set for ${email} (${user.uid})`);\n    } catch (error) {\n      res.status(500).send(`Error: ${error.message}`);\n    }\n  });\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\functions\\src\\ai\\orchestrator.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\functions\\src\\ai\\providers\\anthropic.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\functions\\src\\ai\\providers\\openai.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\functions\\src\\ai\\providers\\orchestrator.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\functions\\src\\ai\\providers\\vertex.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\functions\\src\\ai\\types.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\functions\\src\\callables\\userManagement.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":124,"column":56,"nodeType":"Identifier","messageId":"unusedVar","endLine":124,"endColumn":57},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":124,"column":59,"nodeType":"BlockStatement","messageId":"unexpected","endLine":124,"endColumn":61,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[3311,3311],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use strict\";\n\nconst admin = require(\"firebase-admin\");\n\nif (!admin.apps.length) {\n  admin.initializeApp();\n}\n\nconst db = admin.firestore();\n\nfunction normLower(v) {\n  return String(v || \"\").trim().toLowerCase();\n}\n\nasync function getCallerProfile(uid) {\n  const snap = await db.doc(`users/${uid}`).get();\n  if (!snap.exists) return null;\n  return snap.data();\n}\n\nfunction assertRoleAllowed(callerRole, targetRole) {\n  const okRoles = new Set([\"admin\", \"SM-SGM\", \"user\"]);\n  if (!okRoles.has(targetRole)) {\n    const err = new Error(\"Invalid role\");\n    err.code = \"invalid-argument\";\n    throw err;\n  }\n  if (callerRole === \"SM-SGM\" && targetRole === \"admin\") {\n    const err = new Error(\"SM-SGM cannot assign admin role\");\n    err.code = \"permission-denied\";\n    throw err;\n  }\n}\n\nexports.createManagedUser = async (data, context) => {\n  if (!context || !context.auth || !context.auth.uid) {\n    const err = new Error(\"Unauthenticated\");\n    err.code = \"unauthenticated\";\n    throw err;\n  }\n\n  const callerUid = context.auth.uid;\n  const caller = await getCallerProfile(callerUid);\n  const callerRole = caller && caller.role ? caller.role : null;\n  if (callerRole !== \"admin\" && callerRole !== \"SM-SGM\") {\n    const err = new Error(\"Permission denied\");\n    err.code = \"permission-denied\";\n    throw err;\n  }\n\n  const username = normLower(data && data.username);\n  const email = normLower(data && data.email);\n  const password = String((data && data.password) || \"\").trim();\n  const role = String((data && data.role) || \"user\").trim();\n  const allowedMenus = Array.isArray(data && data.allowedMenus) ? data.allowedMenus.map(String) : [];\n\n  if (!username || username.length < 3) {\n    const err = new Error(\"Username must be at least 3 characters\");\n    err.code = \"invalid-argument\";\n    throw err;\n  }\n  if (!email || !email.includes(\"@\")) {\n    const err = new Error(\"Invalid email\");\n    err.code = \"invalid-argument\";\n    throw err;\n  }\n  if (!password || password.length < 6) {\n    const err = new Error(\"Password must be at least 6 characters\");\n    err.code = \"invalid-argument\";\n    throw err;\n  }\n\n  assertRoleAllowed(callerRole, role);\n\n  const unameRef = db.doc(`usernames/${username}`);\n  const unameSnap = await unameRef.get();\n  if (unameSnap.exists) {\n    const err = new Error(\"Username already exists\");\n    err.code = \"already-exists\";\n    throw err;\n  }\n\n  let userRecord;\n  try {\n    userRecord = await admin.auth().createUser({\n      email,\n      password,\n      displayName: username,\n    });\n  } catch (e) {\n    const msg = e && e.message ? e.message : \"Failed to create auth user\";\n    const err = new Error(msg);\n    err.code = \"internal\";\n    throw err;\n  }\n\n  const uid = userRecord.uid;\n  const now = admin.firestore.FieldValue.serverTimestamp();\n\n  const userRef = db.doc(`users/${uid}`);\n  const createdByUid = callerRole === \"admin\" ? null : callerUid;\n\n  const batch = db.batch();\n  batch.set(userRef, {\n    uid,\n    email,\n    username,\n    role,\n    allowedMenus,\n    createdByUid,\n    createdAt: now,\n    updatedAt: now,\n  });\n  batch.create(unameRef, {\n    uid,\n    email,\n    createdAt: now,\n  });\n\n  try {\n    await batch.commit();\n  } catch (e) {\n    // Best-effort rollback auth user if Firestore write fails\n    try { await admin.auth().deleteUser(uid); } catch (_) {}\n    const msg = e && e.message ? e.message : \"Failed to create user profile\";\n    const err = new Error(msg);\n    err.code = \"internal\";\n    throw err;\n  }\n\n  return { uid };\n};\n\nexports.updateManagedUser = async (data, context) => {\n  if (!context || !context.auth || !context.auth.uid) {\n    const err = new Error(\"Unauthenticated\");\n    err.code = \"unauthenticated\";\n    throw err;\n  }\n\n  const callerUid = context.auth.uid;\n  const caller = await getCallerProfile(callerUid);\n  const callerRole = caller && caller.role ? caller.role : null;\n  if (callerRole !== \"admin\" && callerRole !== \"SM-SGM\") {\n    const err = new Error(\"Permission denied\");\n    err.code = \"permission-denied\";\n    throw err;\n  }\n\n  const targetUid = String((data && data.uid) || \"\").trim();\n  if (!targetUid) {\n    const err = new Error(\"Missing uid\");\n    err.code = \"invalid-argument\";\n    throw err;\n  }\n\n  const targetRef = db.doc(`users/${targetUid}`);\n  const targetSnap = await targetRef.get();\n  if (!targetSnap.exists) {\n    const err = new Error(\"User not found\");\n    err.code = \"not-found\";\n    throw err;\n  }\n  const target = targetSnap.data();\n\n  if (callerRole === \"SM-SGM\") {\n    if (!target || target.createdByUid !== callerUid) {\n      const err = new Error(\"SM-SGM can only update users they created\");\n      err.code = \"permission-denied\";\n      throw err;\n    }\n  }\n\n  const patch = {};\n  if (data && typeof data.role === \"string\" && data.role.trim()) {\n    const role = data.role.trim();\n    assertRoleAllowed(callerRole, role);\n    patch.role = role;\n  }\n  if (data && Array.isArray(data.allowedMenus)) {\n    patch.allowedMenus = data.allowedMenus.map(String);\n  }\n\n  if (Object.keys(patch).length === 0) {\n    return { ok: true };\n  }\n\n  patch.updatedAt = admin.firestore.FieldValue.serverTimestamp();\n  await targetRef.update(patch);\n\n  return { ok: true };\n};","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\functions\\src\\controllers\\posController.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'cart' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":59,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"cart"},"fix":{"range":[2198,2203],"text":""},"desc":"Remove unused variable 'cart'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'summary' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":59,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"summary"},"fix":{"range":[2202,2211],"text":""},"desc":"Remove unused variable 'summary'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"Ôªøconst functions = require('firebase-functions');\nconst { getProductBySku } = require('../repositories/productRepository');\nconst { calculateCartSummary } = require('../services/cartService');\n\n// API 1: Scan Item\nexports.scanItem = functions.region('asia-southeast1').https.onCall(async (data, context) => {\n  // 1. Auth Check\n  if (!context.auth) {\n    throw new functions.https.HttpsError('unauthenticated', 'User must be logged in');\n  }\n\n  // 2. Input Validation\n  const { sku } = data;\n  if (!sku) throw new functions.https.HttpsError('invalid-argument', 'SKU is required');\n\n  // 3. Logic\n  const product = await getProductBySku(sku);\n  \n  if (!product) {\n    throw new functions.https.HttpsError('not-found', 'Product not found');\n  }\n\n  return product;\n});\n\n// API 2: Calculate Cart\nexports.calculateOrder = functions.region('asia-southeast1').https.onCall((data, context) => {\n  // 1. Auth Check\n  if (!context.auth) {\n    throw new functions.https.HttpsError('unauthenticated', 'User must be logged in');\n  }\n\n  const { items, billDiscountPercent, coupons, allowance, topup } = data;\n  return calculateCartSummary(items, billDiscountPercent, coupons, allowance, topup);\n});\n\n// API 3: Void Bill (Stub)\nexports.voidBill = functions.region('asia-southeast1').https.onCall(async (data, context) => {\n  if (!context.auth) throw new functions.https.HttpsError('unauthenticated', 'User must be logged in');\n  // TODO: Check RBAC for 'void' permission\n  \n  const { orderId, reason } = data;\n  return { success: true, message: `Voided order ${orderId}: ${reason}` };\n});\n\n// API 4: Apply Discount (Stub)\nexports.applyDiscount = functions.region('asia-southeast1').https.onCall(async (data, context) => {\n  if (!context.auth) throw new functions.https.HttpsError('unauthenticated', 'User must be logged in');\n  // TODO: Check RBAC for 'discount' permission\n  \n  const { type, value } = data; \n  return { success: true, applied: { type, value } };\n});\n\n// API 5: Save Invoice (Stub)\nexports.saveInvoice = functions.region('asia-southeast1').https.onCall(async (data, context) => {\n  if (!context.auth) throw new functions.https.HttpsError('unauthenticated', 'User must be logged in');\n  \n  const { cart, summary } = data;\n  // TODO: Write to Firestore 'invoices'\n  return { success: true, invoiceId: 'STUB-INVOICE-123' };\n});\n\n// API 6: Get Daily Report (Stub)\nexports.getDailyReport = functions.region('asia-southeast1').https.onCall(async (data, context) => {\n  if (!context.auth) throw new functions.https.HttpsError('unauthenticated', 'User must be logged in');\n  // TODO: Check RBAC for 'report' permission\n\n  return { \n    date: new Date().toISOString(), \n    totalSales: 0, \n    orders: [] \n  };\n});\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\functions\\src\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\functions\\src\\rbac\\claims.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\functions\\src\\repositories\\productRepository.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\functions\\src\\schema\\snapshot.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\functions\\src\\services\\cartService.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":299,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":299,"endColumn":11},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":299,"column":13,"nodeType":"BlockStatement","messageId":"unexpected","endLine":299,"endColumn":15,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[10933,10933],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Safe Mapper to handle inconsistent field names from API/DB\n * Maps various casing to standard keys.\n */\n// BEGIN: THAM:IMPORT_FIELD_MAPPER_V1\nconst { mapFields: thamMapFields } = require('../utils/fieldMapper');\n// END:   THAM:IMPORT_FIELD_MAPPER_V1\nconst normalizeItem = (item) => {\n  const getVal = (keys) => {\n    for (const key of keys) {\n      if (item[key] !== undefined && item[key] !== null) return item[key];\n    }\n    return undefined;\n  };\n\n  return {\n    // Identity\n    id: item.id || item.sku || item.GridProductCode || item.ProductCode,\n    sku: item.sku || item.id || item.GridProductCode || item.ProductCode, // Standardize SKU\n    name: item.name || item.ProductDesc || item.desc || item.description,\n    \n    // Price & Qty\n    qty: parseInt(item.qty || 0),\n    unitPrice: parseFloat(getVal(['unitPrice', 'UnitPrice', 'SellPrice', 'regPrice', 'RegPrice']) || 0),\n    \n    // Promotion Fields\n    method: String(getVal(['method', 'Method', 'method_maint', 'Method_maint']) || '0').trim(),\n    dealQty: parseInt(getVal(['dealQty', 'DealQty', 'dealQty_maint']) || 0),\n    dealPrice: parseFloat(getVal(['dealPrice', 'DealPrice', 'dealPrice_maint']) || 0),\n    \n    // Manual Discount\n    manualDiscountPercent: parseFloat(item.manualDiscountPercent || 0),\n    \n    // Pass through original\n    originalItem: item\n  };\n};\n\n/**\n * Generates the Thai Promotion Badge Text based on rules\n */\nconst getPromotionBadge = (rawItem) => {\n  const item = normalizeItem(rawItem);\n  const { method, dealQty, dealPrice, unitPrice } = item;\n\n  if (method === '0' || !method) return null;\n\n  // METHOD 8: Buy N Get 1 Free style\n  if (method === '8') {\n    if (dealQty <= 1) return null;\n    if (dealQty === 2) return \"‡∏ã‡∏∑‡πâ‡∏≠ 1 ‡πÅ‡∏ñ‡∏° 1\";\n    if (dealQty === 3) return \"‡∏ã‡∏∑‡πâ‡∏≠ 2 ‡πÅ‡∏ñ‡∏° 1\";\n    return `‡∏ã‡∏∑‡πâ‡∏≠ ${dealQty} ‡πÅ‡∏ñ‡∏° 1`;\n  }\n\n  // METHOD 9: Bundle Price\n  if (method === '9') {\n    if (dealQty <= 1 || dealPrice <= 0) return null;\n    return `‡∏ã‡∏∑‡πâ‡∏≠ ${dealQty} ‡∏ä‡∏¥‡πâ‡∏ô ‡πÉ‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤ ${dealPrice.toLocaleString()}`;\n  }\n\n  // METHOD 1: Special Price\n  if (method === '1') {\n    if (dealPrice <= 0) return null;\n    let percent = 0;\n    if (unitPrice > 0) {\n      percent = Math.round((1 - (dealPrice / unitPrice)) * 100);\n    }\n    if (percent <= 0) return `‡∏£‡∏≤‡∏Ñ‡∏≤‡∏û‡∏¥‡πÄ‡∏®‡∏© ${dealPrice.toLocaleString()}`;\n    return `‡∏£‡∏≤‡∏Ñ‡∏≤‡∏û‡∏¥‡πÄ‡∏®‡∏© ${dealPrice.toLocaleString()} ‡∏•‡∏î ${percent}%`;\n  }\n\n  return null;\n};\n\n/**\n * Calculates the total price, discount, and line total for an item\n */\nconst calculateLine = (rawItem) => {\n  const item = normalizeItem(rawItem);\n// BEGIN: THAM:APPLY_FIELD_MAP_TO_LINE_V2\nconst __thamMapped = (typeof thamMapFields === 'function') ? thamMapFields(rawItem || {}) : null;\nif (__thamMapped) {\nconst __n = String(__thamMapped.name ?? '').trim();\nif ((!item.name || String(item.name).trim() === '') && __n) item.name = __n;\n\nconst __u = Number.isFinite(+__thamMapped.unitPrice) ? +__thamMapped.unitPrice : 0;\nif ((!Number.isFinite(+item.unitPrice) || +item.unitPrice <= 0) && __u > 0) item.unitPrice = __u;\n\nconst __dp = Number.isFinite(+__thamMapped.dealPrice) ? +__thamMapped.dealPrice : 0;\nif ((!Number.isFinite(+item.dealPrice) || +item.dealPrice <= 0) && __dp > 0) item.dealPrice = __dp;\n\nconst __dq = parseInt(String(__thamMapped.dealQty ?? 0).trim(), 10);\nconst __curDq = parseInt(String(item.dealQty ?? 0).trim(), 10) || 0;\nif (__curDq <= 0 && Number.isFinite(__dq) && __dq > 0) item.dealQty = __dq;\n\nconst __baseMethod = String(item.method ?? '0').trim();\nconst __mappedMethod = String(__thamMapped.method ?? 0).trim();\nif ((__baseMethod === '' || __baseMethod === '0') && __mappedMethod !== '' && __mappedMethod !== '0') item.method = __mappedMethod;\n}\n// END:   THAM:APPLY_FIELD_MAP_TO_LINE_V2\n// BEGIN: THAM:APPLY_FIELD_MAP_TO_LINE_V1\nconst mapped = thamMapFields(rawItem || {});\nif (mapped) {\nconst mappedName = String(mapped.name ?? '').trim();\nif ((!item.name || String(item.name).trim() === '') && mappedName) item.name = mappedName;\n\nconst mappedUnit = Number.isFinite(+mapped.unitPrice) ? +mapped.unitPrice : 0;\nif ((!Number.isFinite(+item.unitPrice) || +item.unitPrice <= 0) && mappedUnit > 0) item.unitPrice = mappedUnit;\n\nconst mappedDealPrice = Number.isFinite(+mapped.dealPrice) ? +mapped.dealPrice : 0;\nif ((!Number.isFinite(+item.dealPrice) || +item.dealPrice <= 0) && mappedDealPrice > 0) item.dealPrice = mappedDealPrice;\n\nconst mappedDealQty = parseInt(String(mapped.dealQty ?? 0).trim(), 10);\nif ((parseInt(String(item.dealQty ?? 0).trim(), 10) || 0) <= 0 && Number.isFinite(mappedDealQty) && mappedDealQty > 0) item.dealQty = mappedDealQty;\n\nconst baseMethod = String(item.method ?? '0').trim();\nconst mappedMethod = String(mapped.method ?? 0).trim();\nif ((baseMethod === '' || baseMethod === '0') && mappedMethod !== '' && mappedMethod !== '0') item.method = mappedMethod;\n\n}\n// END:   THAM:APPLY_FIELD_MAP_TO_LINE_V1\n// BEGIN: THAM:CANON_METHOD_V1\nconst __thamMethodNum = parseInt(String(item.method ?? '0').trim(), 10);\nitem.method = Number.isFinite(__thamMethodNum) ? String(__thamMethodNum) : '0';\nitem.qty = Math.max(0, parseInt(String(item.qty ?? 0).trim(), 10) || 0);\nitem.dealQty = Math.max(0, parseInt(String(item.dealQty ?? 0).trim(), 10) || 0);\nitem.unitPrice = Number.isFinite(+item.unitPrice) ? +item.unitPrice : 0;\nitem.dealPrice = Number.isFinite(+item.dealPrice) ? +item.dealPrice : 0;\n// END:   THAM:CANON_METHOD_V1\n  const { qty, unitPrice, method, dealQty, dealPrice } = item;\n\n  let total = 0;\n  let promoDesc = null;\n\n  // Default: Normal Price\n  total = qty * unitPrice;\n\n  if (method === '8' && dealQty > 0) {\n    const freeCount = Math.floor(qty / dealQty);\n    const paidQty = qty - freeCount;\n    const pricePerPaid = dealPrice > 0 ? dealPrice : unitPrice;\n    const calculatedTotal = paidQty * pricePerPaid;\n    total = calculatedTotal;\n  } else if (method === '9' && dealQty > 0 && dealPrice > 0) {\n    const groups = Math.floor(qty / dealQty);\n    const remainder = qty % dealQty;\n    const calculatedTotal = (groups * dealPrice) + (remainder * unitPrice);\n    total = calculatedTotal;\n  } else if (method === '1' && dealPrice > 0) {\n    const calculatedTotal = qty * dealPrice;\n    total = calculatedTotal;\n  }\n\n  if (total < 0) total = 0;\n\n  const discountAmount = total - (qty * unitPrice);\n  promoDesc = getPromotionBadge(rawItem);\n\n  return {\n    finalTotal: total,\n    discountAmount: discountAmount,\n    badgeText: promoDesc,\n    promoTag: promoDesc,\n    normalizedItem: item\n  };\n};\n\nexports.calculateCartSummary = (items, billDiscountPercent = 0, coupons = [], allowance = 0, topup = 0) => {\n  let sumPromoTotal = 0;\n  let sumTotalItems = 0;\n  let sumPromoDiscount = 0;\n  let sumManualItemDiscount = 0;\n\n  const safeItems = Array.isArray(items) ? items : [];\n\n  const processedItems = safeItems.map(rawItem => {\n    // 1. Promotion Calculation\n    const { finalTotal: promoPrice, discountAmount: promoDisc, badgeText, promoTag, normalizedItem } = calculateLine(rawItem);\n\n    // 2. Manual Item Discount\n    const manualPercent = normalizedItem.manualDiscountPercent || 0;\n    const manualDiscAmount = (promoPrice * manualPercent) / 100;\n    const finalLineTotal = promoPrice - manualDiscAmount;\n\n    sumPromoTotal += finalLineTotal;\n    sumTotalItems += normalizedItem.qty;\n    sumPromoDiscount += promoDisc;\n    sumManualItemDiscount += -manualDiscAmount;\n\n    return {\n      ...rawItem, // Keep original fields\n      calculatedTotal: Number(finalLineTotal.toFixed(2)),\n      badgeText,\n      promoTag,\n      promoDiscount: Number(promoDisc.toFixed(2)),\n      manualDiscountAmount: Number((-manualDiscAmount).toFixed(2))\n    };\n  });\n\n  // 3. Bill-Wide Discount\n  const billDiscAmount = (sumPromoTotal * billDiscountPercent) / 100;\n  const totalAfterBillDisc = sumPromoTotal - billDiscAmount;\n\n  // 4. Coupons\n  const totalCouponValue = coupons.reduce((sum, c) => sum + (c.couponValue || 0), 0);\n  const totalAfterCoupons = totalAfterBillDisc - totalCouponValue;\n\n  // 5. Allowance & Topup\n  const totalAfterAllowance = totalAfterCoupons - allowance;\n  const grandTotal = totalAfterAllowance - topup; \n\n  // VAT Calculation (Inclusive 7%)\n  // grandTotal = net + vat\n  // net = grandTotal / 1.07\n  const vatRate = 7;\n  const safeGrandTotal = Math.max(0, grandTotal);\n  const netTotal = safeGrandTotal / (1 + (vatRate / 100));\n  const vatTotal = safeGrandTotal - netTotal;\n\n  return {\n    items: processedItems,\n    summary: {\n      totalItems: sumTotalItems,\n      subtotal: Number(sumPromoTotal.toFixed(2)),\n      \n      // Discount Breakdown\n      promoDiscount: Number(sumPromoDiscount.toFixed(2)),\n      manualItemDiscount: Number(sumManualItemDiscount.toFixed(2)),\n      billDiscountAmount: Number((-billDiscAmount).toFixed(2)),\n      couponTotal: Number((-totalCouponValue).toFixed(2)),\n      allowance: Number((-allowance).toFixed(2)),\n      topup: Number((-topup).toFixed(2)),\n\n      // Final\n      vatTotal: Number(vatTotal.toFixed(2)),\n      netTotal: Number(netTotal.toFixed(2)), // Base amount before VAT\n      grandTotal: Number(safeGrandTotal.toFixed(2))\n    }\n  };\n};\n\n// BEGIN: THAM:METHOD8_HELPERS_V1\n/**\n\n* Method 8 ‡πÇ‚Ç¨‚Äù Buy N Get 1 Free\n* Interpretation A (DEFAULT):\n* dealQty = N\n* freeItems = floor(qty / dealQty)\n* payable = qty - freeItems\n*\n* Alternative Interpretation B (DOCUMENTED ONLY, tested):\n* For every (N + 1) items, 1 is free:\n* freeItems = floor(qty / (dealQty + 1))\n* payable = qty - freeItems\n  */\n  function tham_calcMethod8_A(qty, dealQty) {\n  const q = Math.max(0, parseInt(String(qty ?? 0).trim(), 10) || 0);\n  const n = Math.max(0, parseInt(String(dealQty ?? 0).trim(), 10) || 0);\n  if (n <= 0) return { freeItems: 0, payableQty: q };\n  const freeItems = Math.floor(q / n);\n  const payableQty = Math.max(0, q - freeItems);\n  return { freeItems, payableQty };\n  }\n\nfunction tham_calcMethod8_B(qty, dealQty) {\nconst q = Math.max(0, parseInt(String(qty ?? 0).trim(), 10) || 0);\nconst n = Math.max(0, parseInt(String(dealQty ?? 0).trim(), 10) || 0);\nconst denom = n + 1;\nif (denom <= 0) return { freeItems: 0, payableQty: q };\nconst freeItems = Math.floor(q / denom);\nconst payableQty = Math.max(0, q - freeItems);\nreturn { freeItems, payableQty };\n}\n\nexports.THAM = exports.THAM || {};\nexports.THAM.calcMethod8_A = tham_calcMethod8_A;\nexports.THAM.calcMethod8_B = tham_calcMethod8_B;\n// END:   THAM:METHOD8_HELPERS_V1\n\n/* BEGIN: THAM:WRAP_CARTSUMMARY_NETTOTAL_V1 */\n(() => {\nconst __orig = exports.calculateCartSummary;\nif (typeof __orig !== 'function') return;\n\nexports.calculateCartSummary = function (...args) {\nconst res = __orig.apply(this, args);\ntry {\nif (res && res.summary) {\nconst gt = res.summary.grandTotal;\nconst oldNet = res.summary.netTotal;\nif (typeof oldNet === 'number' && Number.isFinite(oldNet) && res.summary.netBeforeVat === undefined) {\nres.summary.netBeforeVat = oldNet;\n}\nif (typeof gt === 'number' && Number.isFinite(gt)) {\nres.summary.netTotal = gt; // payable amount (inclusive VAT)\n}\n}\n} catch (_) {}\nreturn res;\n};\n})();\n/* END:   THAM:WRAP_CARTSUMMARY_NETTOTAL_V1 */\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\functions\\src\\utils\\fieldMapper.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\functions\\tests\\module1.cartsummary.selftest.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'e1' is defined but never used.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":12},{"ruleId":"no-unused-vars","severity":1,"message":"'e2' is defined but never used.","line":10,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// BEGIN: THAM:TEST_CARTSUMMARY_SELFTEST_V1\nconst assert = require('assert');\n\nfunction loadCartService() {\ntry {\nreturn require('../src/services/cartService');\n} catch (e1) {\ntry {\nreturn require('../src/services/cartservice');\n} catch (e2) {\nthrow new Error('Cannot require cartService (cartService.js / cartservice.js).');\n}\n}\n}\n\nfunction run() {\nconst cart = loadCartService();\nif (typeof cart.calculateCartSummary !== 'function') {\nthrow new Error('calculateCartSummary not found.');\n}\n\n// Method 8 via raw inconsistent keys (METHOD/DEAL QTY/REG PRICE)\nconst raw = {\nqty: 2,\n'METHOD': 8,\n'DEAL QTY': 2,\n'REG PRICE': 100,\n'DESCRIPTION PRINT': 'TEST ITEM'\n};\n\nconst res = cart.calculateCartSummary([raw], 0, [], 0, 0);\nassert.ok(res && res.items && res.items.length === 1, 'Expected 1 processed item');\n\n// Buy 2 get 1 free (Interpretation A) => pay 1\nassert.strictEqual(res.items[0].calculatedTotal, 100, 'Method 8 discount not applied as expected');\n\n// Net Total shown must equal payable amount (grandTotal)\nassert.strictEqual(res.summary.netTotal, res.summary.grandTotal, 'netTotal must equal grandTotal (payable)');\nconsole.log('[PASS] CartSummary selftest OK');\n}\n\ntry {\nrun();\n} catch (err) {\nconsole.error('[FAIL] CartSummary selftest failed:', err && err.message ? err.message : err);\nprocess.exit(1);\n}\n// END:   THAM:TEST_CARTSUMMARY_SELFTEST_V1","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\functions\\tests\\module1.method8.selftest.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'e1' is defined but never used.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":12},{"ruleId":"no-unused-vars","severity":1,"message":"'e2' is defined but never used.","line":10,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// BEGIN: THAM:TEST_METHOD8_SELFTEST_V1\nconst assert = require('assert');\n\nfunction loadCartService() {\ntry {\nreturn require('../src/services/cartService');\n} catch (e1) {\ntry {\nreturn require('../src/services/cartservice');\n} catch (e2) {\nthrow new Error('Cannot require cartService (cartService.js / cartservice.js).');\n}\n}\n}\n\nfunction run() {\nconst cart = loadCartService();\nif (!cart.THAM || typeof cart.THAM.calcMethod8_A !== 'function' || typeof cart.THAM.calcMethod8_B !== 'function') {\nthrow new Error('Missing THAM helpers. Ensure patch P004 applied.');\n}\n\n// Interpretation A (default)\nassert.deepStrictEqual(cart.THAM.calcMethod8_A(1, 2), { freeItems: 0, payableQty: 1 });\nassert.deepStrictEqual(cart.THAM.calcMethod8_A(2, 2), { freeItems: 1, payableQty: 1 });\nassert.deepStrictEqual(cart.THAM.calcMethod8_A(5, 2), { freeItems: 2, payableQty: 3 });\nassert.deepStrictEqual(cart.THAM.calcMethod8_A(0, 2), { freeItems: 0, payableQty: 0 });\n\n// Alternative Interpretation B (documented only)\nassert.deepStrictEqual(cart.THAM.calcMethod8_B(3, 2), { freeItems: 1, payableQty: 2 });\nassert.deepStrictEqual(cart.THAM.calcMethod8_B(6, 2), { freeItems: 2, payableQty: 4 });\nassert.deepStrictEqual(cart.THAM.calcMethod8_B(0, 2), { freeItems: 0, payableQty: 0 });\n\nconsole.log('[PASS] Module1 Method8 selftest OK');\n}\n\ntry {\nrun();\n} catch (err) {\nconsole.error('[FAIL] Module1 Method8 selftest failed:', err && err.message ? err.message : err);\nprocess.exit(1);\n}\n// END:   THAM:TEST_METHOD8_SELFTEST_V1","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\functions\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\functions\\src\\controllers\\posController.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'context' is defined but never used. Allowed unused args must match /^_/u.","line":6,"column":82,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":89,"suggestions":[{"messageId":"removeVar","data":{"varName":"context"},"fix":{"range":[292,301],"text":""},"desc":"Remove unused variable 'context'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'context' is defined but never used. Allowed unused args must match /^_/u.","line":20,"column":82,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":89,"suggestions":[{"messageId":"removeVar","data":{"varName":"context"},"fix":{"range":[697,706],"text":""},"desc":"Remove unused variable 'context'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"Ôªøconst functions = require('firebase-functions');\nconst { getProductBySku } = require('../repositories/productRepository');\nconst { calculateCartSummary } = require('../services/cartService');\n\n// API 1: Scan Item\nexports.scanItem = functions.region('asia-southeast1').https.onCall(async (data, context) => {\n  const { sku } = data;\n  if (!sku) throw new functions.https.HttpsError('invalid-argument', 'SKU is required');\n\n  const product = await getProductBySku(sku);\n  \n  if (!product) {\n    throw new functions.https.HttpsError('not-found', 'Product not found');\n  }\n\n  return product;\n});\n\n// API 2: Calculate Cart\nexports.calculateOrder = functions.region('asia-southeast1').https.onCall((data, context) => {\n  const { items } = data;\n  return calculateCartSummary(items);\n});\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\functions\\src\\repositories\\productRepository.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\functions\\src\\services\\cartService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\rebuild_src.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\setup_project.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\src\\App.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'PosUI' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"PosUI"},"fix":{"range":[48,59],"text":""},"desc":"Remove unused variable 'PosUI'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AdminSettings' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"AdminSettings"},"fix":{"range":[89,108],"text":""},"desc":"Remove unused variable 'AdminSettings'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ProductSearchPage' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"ProductSearchPage"},"fix":{"range":[145,168],"text":""},"desc":"Remove unused variable 'ProductSearchPage'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'LayoutDashboard' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"LayoutDashboard"},"fix":{"range":[208,224],"text":""},"desc":"Remove unused variable 'LayoutDashboard'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Monitor' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"Monitor"},"fix":{"range":[223,234],"text":""},"desc":"Remove unused variable 'Monitor'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'FileText' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"FileText"},"fix":{"range":[234,246],"text":""},"desc":"Remove unused variable 'FileText'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'SearchIcon' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"SearchIcon"},"fix":{"range":[246,270],"text":""},"desc":"Remove unused variable 'SearchIcon'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Settings' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Settings"},"fix":{"range":[270,282],"text":""},"desc":"Remove unused variable 'Settings'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'UploadCloud' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"UploadCloud"},"fix":{"range":[282,297],"text":""},"desc":"Remove unused variable 'UploadCloud'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ShieldCheck' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"ShieldCheck"},"fix":{"range":[297,312],"text":""},"desc":"Remove unused variable 'ShieldCheck'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport PosUI from './components/DemoUI';\nimport AdminSettings from './components/AdminSettings';\nimport ProductSearchPage from './pages/ProductSearchPage';\nimport {\n  LayoutDashboard,\n  Monitor,\n  FileText,\n  Search as SearchIcon,\n  Settings,\n  UploadCloud,\n  ShieldCheck\n} from 'lucide-react';\n\nfunction App() {\n  const [view, setView] = useState('pos'); // 'pos' | 'admin' | 'search'\n\n  return (\n    <div className=\"min-h-screen bg-slate-50\">\n      <nav className=\"bg-white border-b border-gray-200 shadow-md\">\n        <div className=\"flex items-center justify-between px-4 py-3\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"flex items-center gap-3\">\n              <img\n                src=\"https://store.boots.co.th/images/boots-logo.png\"\n                alt=\"Boots Logo\"\n                className=\"h-8 w-auto object-contain\"\n              />\n              <div className=\"flex flex-col text-[10px] text-slate-400 font-mono leading-tight\">\n                <span>v1.4.0</span>\n                <span>2026-01-01</span>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-1\">\n              {[\n                { id: 'dashboard', label: 'Dashboard', icon: <LayoutDashboard size={20} />, view: null },\n                { id: 'pos', label: 'POS', icon: <Monitor size={20} />, view: 'pos' },\n                { id: 'report', label: 'Report', icon: <FileText size={20} />, view: null },\n                { id: 'search', label: 'Search', icon: <SearchIcon size={20} />, view: 'search' },\n                { id: 'upload', label: 'Upload', icon: <UploadCloud size={20} />, view: null },\n                { id: 'management', label: 'Management', icon: <ShieldCheck size={20} />, view: 'admin' },\n                { id: 'settings', label: 'Setting', icon: <Settings size={20} />, view: 'admin' }\n              ].map((item) => {\n                const active = view === item.view;\n                const baseClasses =\n                  'w-[86px] h-[74px] flex flex-col items-center justify-center gap-1 rounded-xl transition-all duration-200 font-semibold';\n                const inactive =\n                  'text-slate-500 hover:bg-slate-100 shadow-sm bg-white border border-slate-200';\n                const activeCls =\n                  'bg-blue-700 text-white shadow-lg border border-blue-800';\n                return (\n                  <button\n                    key={item.id}\n                    onClick={() => item.view && setView(item.view)}\n                    className={`${baseClasses} ${active ? activeCls : inactive}`}\n                  >\n                    <span\n                      className={`inline-flex items-center justify-center w-10 h-10 rounded-xl border transition-colors ${\n                        active\n                          ? 'bg-white/10 border-white/20'\n                          : 'bg-white border-slate-200'\n                      }`}\n                    >\n                      {item.icon}\n                    </span>\n                    <span className=\"text-[11px] leading-none\">{item.label}</span>\n                  </button>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n      </nav>\n\n      {view === 'pos' && (\n        <div className=\"relative\">\n          <PosUI onAdminSettings={() => setView('admin')} onSearch={() => setView('search')} />\n        </div>\n      )}\n      {view === 'search' && (\n        <div className=\"relative\">\n          <ProductSearchPage onClose={() => setView('pos')} />\n        </div>\n      )}\n      {view === 'admin' && <AdminSettings onBack={() => setView('pos')} />}\n    </div>\n  );\n}\n\nexport default App;\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\src\\components\\AdminSettings.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Upload' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"Upload"},"fix":{"range":[58,65],"text":""},"desc":"Remove unused variable 'Upload'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"X"},"fix":{"range":[64,67],"text":""},"desc":"Remove unused variable 'X'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle"},"fix":{"range":[67,80],"text":""},"desc":"Remove unused variable 'CheckCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AlertTriangle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertTriangle"},"fix":{"range":[80,95],"text":""},"desc":"Remove unused variable 'AlertTriangle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'FileText' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":57,"suggestions":[{"messageId":"removeVar","data":{"varName":"FileText"},"fix":{"range":[95,105],"text":""},"desc":"Remove unused variable 'FileText'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Loader2' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":59,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":66,"suggestions":[{"messageId":"removeVar","data":{"varName":"Loader2"},"fix":{"range":[105,114],"text":""},"desc":"Remove unused variable 'Loader2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Database' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":68,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":76,"suggestions":[{"messageId":"removeVar","data":{"varName":"Database"},"fix":{"range":[114,124],"text":""},"desc":"Remove unused variable 'Database'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"Ôªøimport React, { useState, useRef } from 'react';\nimport { Upload, X, CheckCircle, AlertTriangle, FileText, Loader2, Database } from 'lucide-react';\nimport { posService } from '../services/posService';\nimport { cn } from '../utils/cn';\n\nexport default function AdminSettings({ onClose }) {\n  const [uploadStatus, setUploadStatus] = useState('idle');\n  const [progress, setProgress] = useState({ phase: '', percent: 0, total: 0, success: 0, failed: 0, errors: [] });\n  const [selectedFile, setSelectedFile] = useState(null);\n  const fileInputRef = useRef(null);\n\n  const handleFileSelect = (e) => {\n    if (e.target.files && e.target.files[0]) {\n      setSelectedFile(e.target.files[0]);\n      setUploadStatus('idle');\n      setProgress({ phase: 'Ready', percent: 0, total: 0, success: 0, failed: 0, errors: [] });\n    }\n  };\n\n  const startUpload = async () => {\n    if (!selectedFile) return;\n    setUploadStatus('uploading');\n    \n    try {\n      await posService.uploadMasterDataOptimized(selectedFile, (stats) => {\n        setProgress(stats);\n      });\n      setUploadStatus('done');\n    } catch (err) {\n      console.error(err);\n      setUploadStatus('error');\n      setProgress(prev => ({ ...prev, phase: 'Failed', errors: [err.message, ...prev.errors] }));\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-in fade-in\">\n      <div className=\"bg-white w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]\">\n        \n        <div className=\"px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-blue-100 text-blue-600 rounded-lg\"><Database size={20} /></div>\n            <div>\n              <h2 className=\"text-lg font-bold text-slate-800\">Database Management</h2>\n              <p className=\"text-xs text-slate-500\">Update product master data</p>\n            </div>\n          </div>\n          <button onClick={onClose} className=\"p-2 hover:bg-slate-200 rounded-full transition-colors\"><X size={20} /></button>\n        </div>\n\n        <div className=\"p-8 flex flex-col gap-6 overflow-y-auto\">\n          \n          <div className={cn(\"border-2 border-dashed rounded-xl p-8 text-center transition-all\", \n              uploadStatus === 'uploading' ? \"border-blue-200 bg-blue-50/50 pointer-events-none opacity-50\" : \"border-slate-300 hover:border-blue-400 hover:bg-slate-50 cursor-pointer\"\n          )} onClick={() => uploadStatus !== 'uploading' && fileInputRef.current?.click()}>\n            <input type=\"file\" ref={fileInputRef} onChange={handleFileSelect} accept=\".xlsx,.xls,.csv\" className=\"hidden\" />\n            \n            <div className=\"flex flex-col items-center gap-3\">\n              <div className=\"w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center shadow-sm\">\n                {uploadStatus === 'uploading' ? <Loader2 size={32} className=\"animate-spin\" /> : <Upload size={32} />}\n              </div>\n              <div>\n                <h3 className=\"text-lg font-bold text-slate-700\">{selectedFile ? selectedFile.name : \"Click to select file\"}</h3>\n                <p className=\"text-sm text-slate-400\">{selectedFile ? `${(selectedFile.size / 1024).toFixed(1)} KB` : \"Supports Excel (.xlsx, .xls) or CSV\"}</p>\n              </div>\n            </div>\n          </div>\n\n          {(selectedFile || uploadStatus !== 'idle') && (\n            <div className=\"bg-slate-50 rounded-xl border border-slate-200 p-5 space-y-4 animate-in slide-in-from-bottom-2\">\n              <div className=\"space-y-1\">\n                <div className=\"flex justify-between text-xs font-bold uppercase tracking-wider text-slate-500\">\n                  <span>{progress.phase || 'Ready'}</span>\n                  <span>{progress.percent}%</span>\n                </div>\n                <div className=\"h-2 w-full bg-slate-200 rounded-full overflow-hidden\">\n                  <div className=\"h-full bg-blue-500 transition-all duration-300 ease-out\" style={{ width: `${progress.percent}%` }}></div>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-3 gap-4\">\n                <div className=\"bg-white p-3 rounded-lg border border-slate-100 shadow-sm text-center\">\n                  <div className=\"text-xs text-slate-400 mb-1\">Total</div>\n                  <div className=\"text-xl font-bold text-slate-800\">{progress.total.toLocaleString()}</div>\n                </div>\n                <div className=\"bg-white p-3 rounded-lg border border-green-100 shadow-sm text-center\">\n                  <div className=\"text-xs text-green-500 mb-1\">Success</div>\n                  <div className=\"text-xl font-bold text-green-600\">{progress.success.toLocaleString()}</div>\n                </div>\n                <div className=\"bg-white p-3 rounded-lg border border-red-100 shadow-sm text-center\">\n                  <div className=\"text-xs text-red-500 mb-1\">Failed</div>\n                  <div className=\"text-xl font-bold text-red-600\">{progress.failed.toLocaleString()}</div>\n                </div>\n              </div>\n\n              {progress.errors.length > 0 && (\n                <div className=\"mt-4 p-3 bg-red-50 rounded-lg border border-red-100 text-xs\">\n                  <div className=\"font-bold text-red-700 mb-2 flex items-center gap-2\"><AlertTriangle size={14} /> Errors ({progress.errors.length})</div>\n                  <ul className=\"list-disc list-inside space-y-1 text-red-600 max-h-32 overflow-y-auto\">\n                    {progress.errors.slice(0, 20).map((err, i) => (\n                      <li key={i} className=\"truncate\">{err}</li>\n                    ))}\n                    {progress.errors.length > 20 && <li>...and {progress.errors.length - 20} more</li>}\n                  </ul>\n                </div>\n              )}\n            </div>\n          )}\n\n        </div>\n\n        <div className=\"p-4 bg-slate-50 border-t border-slate-100 flex justify-end gap-3\">\n          <button onClick={onClose} disabled={uploadStatus === 'uploading'} className=\"px-6 py-2 rounded-lg text-slate-600 hover:bg-slate-200 font-bold transition-colors disabled:opacity-50\">Close</button>\n          \n          {uploadStatus === 'idle' && selectedFile && (\n            <button onClick={startUpload} className=\"px-6 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-bold shadow-md hover:shadow-lg transition-all flex items-center gap-2\">\n              <Upload size={18} /> Start Upload\n            </button>\n          )}\n          \n          {uploadStatus === 'done' && (\n            <button onClick={onClose} className=\"px-6 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-white font-bold shadow-md flex items-center gap-2\">\n              <CheckCircle size={18} /> Done\n            </button>\n          )}\n        </div>\n\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\src\\components\\DailyReportModal.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"X"},"fix":{"range":[61,63],"text":""},"desc":"Remove unused variable 'X'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Calendar' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"Calendar"},"fix":{"range":[62,72],"text":""},"desc":"Remove unused variable 'Calendar'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Printer' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"Printer"},"fix":{"range":[72,81],"text":""},"desc":"Remove unused variable 'Printer'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Search' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"Search"},"fix":{"range":[81,89],"text":""},"desc":"Remove unused variable 'Search'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Trash2' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"Trash2"},"fix":{"range":[89,97],"text":""},"desc":"Remove unused variable 'Trash2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ChevronDown' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":59,"suggestions":[{"messageId":"removeVar","data":{"varName":"ChevronDown"},"fix":{"range":[97,110],"text":""},"desc":"Remove unused variable 'ChevronDown'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ChevronUp' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":61,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":70,"suggestions":[{"messageId":"removeVar","data":{"varName":"ChevronUp"},"fix":{"range":[110,121],"text":""},"desc":"Remove unused variable 'ChevronUp'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadData'. Either include it or remove the dependency array.","line":24,"column":36,"nodeType":"ArrayExpression","endLine":24,"endColumn":38,"suggestions":[{"desc":"Update the dependencies array to be: [loadData]","fix":{"range":[1044,1046],"text":"[loadData]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"Ôªøimport React, { useState, useEffect } from 'react';\nimport { X, Calendar, Printer, Search, Trash2, ChevronDown, ChevronUp } from 'lucide-react';\nimport { posService } from '../services/posService';\nimport { cn } from '../utils/cn';\nimport JsBarcode from 'jsbarcode';\n\nexport default function DailyReportModal({ onClose }) {\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [expandedRow, setExpandedRow] = useState(null);\n  const [summary, setSummary] = useState({ totalSales: 0, totalVoid: 0, count: 0, totalItems: 0, totalDiscount: 0 });\n\n  // Filter States (Default to Bangkok Today)\n  const getBangkokDate = () => {\n    // Returns YYYY-MM-DD in Bangkok timezone\n    const d = new Date().toLocaleString('en-CA', { timeZone: 'Asia/Bangkok' });\n    return d.split(',')[0]; \n  };\n\n  const [selectedDate, setSelectedDate] = useState(getBangkokDate());\n  const [startTime, setStartTime] = useState('00:00');\n  const [endTime, setEndTime] = useState('23:59');\n\n  useEffect(() => { loadData(); }, []);\n\n  // Generate barcodes (optimized with cleanup)\n  useEffect(() => {\n    if (orders.length === 0) return;\n\n    // Debounce to prevent excessive re-renders\n    const timer = setTimeout(() => {\n      orders.forEach((order) => {\n        order.items?.forEach((item, index) => {\n          try {\n            const barcodeValue = item.barcode || item.sku;\n            if (!barcodeValue || barcodeValue === '-') return;\n\n            const canvasId = `barcode-${order.id}-${index}`;\n            const canvas = document.getElementById(canvasId);\n            \n            if (canvas && canvas.getContext) {\n              // Clear previous barcode\n              const ctx = canvas.getContext('2d');\n              ctx.clearRect(0, 0, canvas.width, canvas.height);\n              \n              // Generate new barcode\n              JsBarcode(canvas, barcodeValue, {\n                format: 'CODE128',\n                width: 1,\n                height: 20,\n                displayValue: false,\n                margin: 0,\n                background: 'transparent'\n              });\n            }\n          } catch (err) {\n            console.error(`Barcode generation failed for ${item.sku}:`, err.message);\n          }\n        });\n      });\n    }, 100); // 100ms debounce\n\n    // Cleanup\n    return () => clearTimeout(timer);\n  }, [orders]);\n\n  const loadData = async () => {\n    setLoading(true);\n    setExpandedRow(null);\n    try {\n        // Validate date inputs\n        if (!selectedDate || !startTime || !endTime) {\n          throw new Error('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');\n        }\n\n        const start = new Date(`${selectedDate}T${startTime}:00`);\n        const end = new Date(`${selectedDate}T${endTime}:59`);\n        \n        // Validate date objects\n        if (isNaN(start.getTime()) || isNaN(end.getTime())) {\n          throw new Error('‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');\n        }\n\n        if (start > end) {\n          throw new Error('‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î');\n        }\n\n        const data = await posService.getSalesReport(start, end);\n        \n        // Validate response data\n        if (!Array.isArray(data)) {\n          console.warn('Invalid data format received:', data);\n          setOrders([]);\n          setSummary({ totalSales: 0, totalVoid: 0, count: 0, totalItems: 0, totalDiscount: 0 });\n          return;\n        }\n\n        setOrders(data);\n        \n        // --- Calculate Summary with validation ---\n        const validOrders = data.filter(o => o && o.status !== 'void' && o.summary);\n        \n        const totalSales = validOrders.reduce((sum, o) => {\n          const subtotal = Number(o.summary?.subtotal);\n          return sum + (isNaN(subtotal) ? 0 : subtotal);\n        }, 0);\n\n        const totalItems = validOrders.reduce((sum, o) => {\n          const items = Number(o.summary?.totalItems);\n          return sum + (isNaN(items) ? 0 : items);\n        }, 0);\n        \n        const totalDiscount = validOrders.reduce((sum, o) => {\n            const billDiscount = (o.items || []).reduce((isum, item) => {\n                const price = Number(item.price) || 0;\n                const qty = Number(item.qty) || 0;\n                const normalTotal = price * qty;\n                const soldTotal = item.calculatedTotal !== undefined ? Number(item.calculatedTotal) || 0 : normalTotal;\n                return isum + Math.max(0, normalTotal - soldTotal); // Prevent negative discounts\n            }, 0);\n            const orderDiscount = Number(o.summary?.discount) || 0;\n            return sum + billDiscount + orderDiscount;\n        }, 0);\n        \n        setSummary({ \n          totalSales: Math.max(0, totalSales), \n          totalVoid: 0, \n          count: validOrders.length, \n          totalItems: Math.max(0, totalItems), \n          totalDiscount: Math.max(0, totalDiscount) \n        });\n    } catch (err) { \n      console.error(\"Report Error:\", err); \n      alert(`‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${err.message}`);\n      setOrders([]);\n      setSummary({ totalSales: 0, totalVoid: 0, count: 0, totalItems: 0, totalDiscount: 0 });\n    } finally { \n      setLoading(false); \n    }\n  };\n\n  const handleVoid = async (orderId) => {\n    if (!window.confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏ö‡∏¥‡∏•‡∏ô‡∏µ‡πâ?')) return;\n    try { await posService.voidInvoice(orderId, 'User Cancelled'); loadData(); } catch (e) { alert(e.message); }\n  };\n\n  const toggleRow = (id) => { setExpandedRow(expandedRow === id ? null : id); };\n  const handlePrint = () => { window.print(); };\n\n  return (\n    <>\n      {/* üü¢ PRINT STYLING - NOTO SANS THAI */}\n      <style>{`\n        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700&display=swap');\n        \n        #print-section { display: none; }\n        \n        @media print {\n          @page { \n            margin: 1.5cm 1cm; \n            size: A4 portrait; \n          }\n          \n          body * { \n            visibility: hidden; \n          }\n          \n          #print-section, #print-section * { \n            visibility: visible !important; \n            color: #1a1a1a !important;\n            font-family: 'Noto Sans Thai', sans-serif !important;\n          }\n          \n          #print-section { \n            display: block !important; \n            position: fixed; \n            left: 0; \n            top: 0; \n            width: 100%; \n            height: 100%; \n            background: white !important; \n            z-index: 99999;\n            padding: 20px 30px;\n          }\n          \n          .modal-overlay { \n            display: none !important; \n          }\n          \n          /* Print-specific styling */\n          .print-header {\n            border-bottom: 3px solid #2563eb;\n            padding-bottom: 12px;\n            margin-bottom: 20px;\n          }\n          \n          .print-summary-box {\n            background: #f8fafc !important;\n            border: 1px solid #cbd5e1 !important;\n            border-radius: 8px;\n            padding: 12px 16px;\n            margin-bottom: 20px;\n          }\n          \n          .print-table th {\n            background: #f1f5f9 !important;\n            font-weight: 600;\n            padding: 10px 8px;\n          }\n          \n          .print-table td {\n            padding: 8px;\n          }\n          \n          .print-barcode {\n            opacity: 0.7;\n          }\n          \n          .print-footer-total {\n            background: #f8fafc !important;\n            font-weight: 700;\n          }\n        }\n      `}</style>\n\n      {/* --- SCREEN VIEW --- */}\n      <div className=\"modal-overlay fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-in fade-in duration-200 print:hidden font-sans\">\n        <div className=\"bg-white w-[95vw] h-[95vh] max-w-7xl rounded-2xl shadow-2xl overflow-hidden flex flex-col relative\">\n          \n          {/* Header */}\n          <div className=\"bg-slate-900 text-white p-6 shrink-0\">\n            <div className=\"flex justify-between items-start mb-6\">\n              <div className=\"flex items-center gap-4\">\n                <div className=\"p-3 bg-slate-800 rounded-xl\"><Calendar size={28} /></div>\n                <div><h2 className=\"text-2xl font-bold font-kanit\">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢</h2><p className=\"text-slate-400 text-sm\">Summary Sales Report</p></div>\n              </div>\n              <button onClick={onClose} className=\"p-2 hover:bg-slate-700 rounded-full\"><X size={24} /></button>\n            </div>\n\n            {/* Filters */}\n            <div className=\"bg-slate-800 p-4 rounded-xl border border-slate-700\">\n               <div className=\"flex flex-wrap items-end gap-4\">\n                   <div>\n                       <label className=\"text-xs text-slate-400 mb-1 block font-bold\">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (Date)</label>\n                       <input type=\"date\" value={selectedDate} onChange={(e) => setSelectedDate(e.target.value)} className=\"bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2 text-sm h-10\"/>\n                   </div>\n                   <div>\n                       <label className=\"text-xs text-slate-400 mb-1 block font-bold\">‡πÄ‡∏£‡∏¥‡πà‡∏° (Start)</label>\n                       <input type=\"time\" value={startTime} onChange={(e) => setStartTime(e.target.value)} className=\"bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2 text-sm h-10\"/>\n                   </div>\n                   <div>\n                       <label className=\"text-xs text-slate-400 mb-1 block font-bold\">‡∏ñ‡∏∂‡∏á (End)</label>\n                       <input type=\"time\" value={endTime} onChange={(e) => setEndTime(e.target.value)} className=\"bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2 text-sm h-10\"/>\n                   </div>\n                   <button onClick={loadData} disabled={loading} className=\"bg-blue-600 hover:bg-blue-500 text-white px-6 h-10 rounded-lg text-sm font-bold flex items-center gap-2 transition-all\">\n                       {loading ? '...' : <><Search size={16} /> ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</>}\n                   </button>\n                   <div className=\"flex-1 text-right\">\n                       <button onClick={handlePrint} disabled={orders.length === 0} className=\"bg-white text-slate-900 hover:bg-slate-100 border border-slate-200 px-6 h-10 rounded-lg text-sm font-bold inline-flex items-center gap-2 transition-all shadow-sm\">\n                           <Printer size={16} /> ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô\n                       </button>\n                   </div>\n               </div>\n            </div>\n          </div>\n\n          {/* Summary Cards */}\n          <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4 p-6 bg-slate-50 border-b border-slate-200 shrink-0\">\n             <div className=\"bg-white p-4 rounded-xl border border-slate-200 shadow-sm\"><div className=\"text-slate-500 text-xs font-bold mb-1\">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ö‡∏¥‡∏•</div><div className=\"text-2xl font-bold text-slate-800\">{summary.count}</div></div>\n             <div className=\"bg-white p-4 rounded-xl border border-slate-200 shadow-sm\"><div className=\"text-slate-500 text-xs font-bold mb-1\">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</div><div className=\"text-2xl font-bold text-slate-800\">{summary.totalItems}</div></div>\n             <div className=\"bg-white p-4 rounded-xl border border-slate-200 shadow-sm\"><div className=\"text-slate-500 text-xs font-bold mb-1\">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°</div><div className=\"text-2xl font-bold text-blue-600\">‡∏ø{(summary.totalSales + summary.totalDiscount).toLocaleString()}</div></div>\n             <div className=\"bg-white p-4 rounded-xl border border-slate-200 shadow-sm\"><div className=\"text-slate-500 text-xs font-bold mb-1\">‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏£‡∏ß‡∏°</div><div className=\"text-2xl font-bold text-red-500\">-‡∏ø{summary.totalDiscount.toLocaleString()}</div></div>\n             <div className=\"bg-white p-4 rounded-xl border border-green-200 bg-green-50 shadow-sm\"><div className=\"text-green-700 text-xs font-bold mb-1\">‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥ (Net)</div><div className=\"text-2xl font-bold text-green-700\">‡∏ø{summary.totalSales.toLocaleString()}</div></div>\n          </div>\n\n          {/* Table */}\n          <div className=\"flex-1 overflow-y-auto p-6 bg-slate-100\">\n              <div className=\"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden\">\n                <table className=\"w-full text-sm text-left\">\n                  <thead className=\"bg-slate-50 text-slate-500 font-bold uppercase tracking-wider border-b border-slate-200 sticky top-0\">\n                    <tr>\n                      <th className=\"p-4 w-10\"></th>\n                      <th className=\"p-4\">‡πÄ‡∏ß‡∏•‡∏≤</th>\n                      <th className=\"p-4\">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏•</th>\n                      <th className=\"p-4 text-center\">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>\n                      <th className=\"p-4 text-right\">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</th>\n                      <th className=\"p-4 text-center\">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>\n                      <th className=\"p-4 text-center\">Action</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-slate-100\">\n                    {orders.map((order) => (\n                      <React.Fragment key={order.id}>\n                        <tr className={cn(\"hover:bg-slate-50 cursor-pointer transition-colors\", expandedRow === order.id && \"bg-blue-50/50\")} onClick={() => toggleRow(order.id)}>\n                          <td className=\"p-4 text-center\">{expandedRow === order.id ? <ChevronUp size={16}/> : <ChevronDown size={16}/>}</td>\n                          <td className=\"p-4 text-slate-600\">{order.timestamp.toLocaleTimeString('th-TH', { hour: '2-digit', minute: '2-digit' })}</td>\n                          <td className=\"p-4 font-mono font-medium\">{order.id.slice(0, 8)}...</td>\n                          <td className=\"p-4 text-center\"><span className=\"bg-slate-100 px-2 py-1 rounded-full text-xs font-bold\">{order.summary?.totalItems}</span></td>\n                          <td className=\"p-4 text-right font-bold text-slate-800\">‡∏ø{(order.summary?.subtotal || 0).toLocaleString()}</td>\n                          <td className=\"p-4 text-center\">{order.status === 'void' ? <span className=\"text-red-600 font-bold text-xs bg-red-100 px-2 py-1 rounded\">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</span> : <span className=\"text-green-600 font-bold text-xs bg-green-100 px-2 py-1 rounded\">‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</span>}</td>\n                          <td className=\"p-4 text-center\">{order.status !== 'void' && <button onClick={(e) => { e.stopPropagation(); handleVoid(order.id); }} className=\"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded\"><Trash2 size={16}/></button>}</td>\n                        </tr>\n                        {expandedRow === order.id && (\n                          <tr>\n                            <td colSpan=\"7\" className=\"p-0\">\n                              <div className=\"bg-slate-50 p-4 border-b border-slate-100 shadow-inner\">\n                                <div className=\"bg-white rounded border border-slate-200 overflow-hidden\">\n                                  <table className=\"w-full text-xs\">\n                                    <thead className=\"bg-slate-100 text-slate-600 font-bold border-b border-slate-200\">\n                                      <tr>\n                                        <th className=\"p-2 text-left w-32\">‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>\n                                        <th className=\"p-2 text-left w-32\">‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î</th>\n                                        <th className=\"p-2 text-left\">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>\n                                        <th className=\"p-2 text-right\">‡∏£‡∏≤‡∏Ñ‡∏≤</th>\n                                        <th className=\"p-2 text-center\">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>\n                                        <th className=\"p-2 text-right text-red-500\">‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</th>\n                                        <th className=\"p-2 text-right\">‡∏£‡∏ß‡∏°</th>\n                                      </tr>\n                                    </thead>\n                                    <tbody className=\"divide-y divide-slate-50\">\n                                      {order.items?.map((item, i) => {\n                                         const normalTotal = (item.price * item.qty);\n                                         const finalTotal = item.calculatedTotal !== undefined ? item.calculatedTotal : normalTotal;\n                                         const discount = normalTotal - finalTotal;\n                                         return (\n                                            <tr key={i} className=\"hover:bg-slate-50\">\n                                              <td className=\"p-2 font-mono text-slate-500\">{item.sku}</td>\n                                              <td className=\"p-2 font-mono text-slate-500\">{item.barcode || '-'}</td>\n                                              <td className=\"p-2 font-medium\">{item.name || item.ProductDesc || item.sku}</td>\n                                              <td className=\"p-2 text-right\">{(item.price || 0).toLocaleString()}</td>\n                                              <td className=\"p-2 text-center font-bold\">{item.qty}</td>\n                                              <td className=\"p-2 text-right text-red-500\">{discount > 0 ? `-${discount.toLocaleString()}` : '-'}</td>\n                                              <td className=\"p-2 text-right font-bold\">{finalTotal.toLocaleString()}</td>\n                                            </tr>\n                                         );\n                                      })}\n                                    </tbody>\n                                  </table>\n                                </div>\n                              </div>\n                            </td>\n                          </tr>\n                        )}\n                      </React.Fragment>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n          </div>\n        </div>\n      </div>\n\n      {/* --- PRINT LAYOUT (MODERN DESIGN - NOTO SANS THAI) --- */}\n      <div id=\"print-section\" role=\"article\" aria-label=\"Daily Sales Report\">\n         {/* Header */}\n         <div className=\"print-header text-center\" role=\"banner\">\n            <h1 className=\"text-3xl font-bold mb-2\" style={{color: '#2563eb', letterSpacing: '-0.5px'}}>\n              ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢\n            </h1>\n            <p className=\"text-sm\" style={{color: '#64748b', fontWeight: '400'}}>\n              Daily Sales Report\n            </p>\n            <p className=\"text-xs mt-2\" style={{color: '#94a3b8'}} aria-label={`Report date: ${new Date(selectedDate).toLocaleDateString('th-TH')} from ${startTime} to ${endTime}`}>\n              ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: {new Date(selectedDate).toLocaleDateString('th-TH', { year: 'numeric', month: 'long', day: 'numeric' })} \n              {' '}| ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤: {startTime} - {endTime}\n            </p>\n         </div>\n\n         {/* Summary Box */}\n         <div className=\"print-summary-box\">\n            <div style={{display: 'grid', gridTemplateColumns: 'repeat(5, 1fr)', gap: '16px', fontSize: '11px'}}>\n               <div>\n                  <div style={{color: '#64748b', marginBottom: '4px', fontWeight: '500'}}>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ö‡∏¥‡∏•</div>\n                  <div style={{fontSize: '18px', fontWeight: '700', color: '#1e293b'}}>{summary.count}</div>\n               </div>\n               <div>\n                  <div style={{color: '#64748b', marginBottom: '4px', fontWeight: '500'}}>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</div>\n                  <div style={{fontSize: '18px', fontWeight: '700', color: '#1e293b'}}>{summary.totalItems}</div>\n               </div>\n               <div>\n                  <div style={{color: '#64748b', marginBottom: '4px', fontWeight: '500'}}>‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°</div>\n                  <div style={{fontSize: '18px', fontWeight: '700', color: '#2563eb'}}>\n                    ‡∏ø{(summary.totalSales + summary.totalDiscount).toLocaleString()}\n                  </div>\n               </div>\n               <div>\n                  <div style={{color: '#64748b', marginBottom: '4px', fontWeight: '500'}}>‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</div>\n                  <div style={{fontSize: '18px', fontWeight: '700', color: '#dc2626'}}>\n                    -‡∏ø{summary.totalDiscount.toLocaleString()}\n                  </div>\n               </div>\n               <div style={{borderLeft: '2px solid #cbd5e1', paddingLeft: '16px'}}>\n                  <div style={{color: '#64748b', marginBottom: '4px', fontWeight: '500'}}>‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</div>\n                  <div style={{fontSize: '20px', fontWeight: '700', color: '#059669'}}>\n                    ‡∏ø{summary.totalSales.toLocaleString()}\n                  </div>\n               </div>\n            </div>\n         </div>\n\n         {/* Table */}\n         <table className=\"print-table\" style={{width: '100%', borderCollapse: 'collapse', fontSize: '11px'}}>\n            <thead>\n               <tr style={{borderBottom: '2px solid #cbd5e1'}}>\n                  <th style={{textAlign: 'left', width: '60px', color: '#475569'}}>‡πÄ‡∏ß‡∏•‡∏≤</th>\n                  <th style={{textAlign: 'left', width: '80px', color: '#475569'}}>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏•</th>\n                  <th style={{textAlign: 'left', color: '#475569'}}>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>\n                  <th style={{textAlign: 'right', width: '100px', color: '#475569'}}>‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</th>\n               </tr>\n            </thead>\n            <tbody>\n               {orders.map((order) => (\n                  <tr key={order.id} style={{borderBottom: '1px solid #e2e8f0'}}>\n                     <td style={{verticalAlign: 'top', paddingTop: '12px', color: '#64748b', fontSize: '10px'}}>\n                        {order.timestamp.toLocaleTimeString('th-TH', { hour: '2-digit', minute: '2-digit' })}\n                     </td>\n                     <td style={{verticalAlign: 'top', paddingTop: '12px'}}>\n                        <div style={{fontFamily: 'monospace', fontSize: '9px', color: '#94a3b8'}}>\n                          {order.id.slice(0, 8)}\n                        </div>\n                     </td>\n                     <td style={{paddingTop: '12px', paddingBottom: '12px'}}>\n                         {order.items.map((item, i) => {\n                            const normalTotal = (item.price || 0) * (item.qty || 0);\n                            const finalTotal = item.calculatedTotal !== undefined ? Number(item.calculatedTotal) : normalTotal;\n                            const itemDiscount = normalTotal - finalTotal;\n\n                            return (\n                               <div key={i} style={{\n                                 display: 'flex', \n                                 justifyContent: 'space-between', \n                                 alignItems: 'flex-start',\n                                 marginBottom: i < order.items.length - 1 ? '10px' : '0',\n                                 paddingBottom: i < order.items.length - 1 ? '10px' : '0',\n                                 borderBottom: i < order.items.length - 1 ? '1px dashed #e2e8f0' : 'none'\n                               }}>\n                                  <div style={{display: 'flex', gap: '12px', flex: 1}}>\n                                     {/* Barcode */}\n                                     <div style={{width: '55px', flexShrink: 0}}>\n                                        {(item.barcode && item.barcode !== '-') ? (\n                                          <canvas \n                                            id={`barcode-${order.id}-${i}`} \n                                            className=\"print-barcode\"\n                                            style={{width: '100%', height: '22px'}}\n                                          ></canvas>\n                                        ) : (\n                                          <div style={{\n                                            fontSize: '8px', \n                                            color: '#cbd5e1', \n                                            fontFamily: 'monospace',\n                                            textAlign: 'center',\n                                            padding: '4px 0'\n                                          }}>\n                                            {item.sku}\n                                          </div>\n                                        )}\n                                     </div>\n                                     \n                                     {/* Product Info */}\n                                     <div style={{flex: 1}}>\n                                        <div style={{\n                                          fontWeight: '600', \n                                          color: '#1e293b',\n                                          marginBottom: '3px',\n                                          fontSize: '11px'\n                                        }}>\n                                          {item.name || item.ProductDesc || item.sku}\n                                        </div>\n                                        <div style={{\n                                          fontSize: '9px', \n                                          color: '#64748b',\n                                          display: 'flex',\n                                          gap: '8px',\n                                          alignItems: 'center'\n                                        }}>\n                                          <span>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: {item.qty}</span>\n                                          <span>√ó</span>\n                                          <span>‡∏ø{(item.price || 0).toLocaleString()}</span>\n                                          {itemDiscount > 0 && (\n                                            <span style={{\n                                              color: '#dc2626',\n                                              background: '#fee2e2',\n                                              padding: '2px 6px',\n                                              borderRadius: '3px',\n                                              fontSize: '8px',\n                                              fontWeight: '600'\n                                            }}>\n                                              ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î -‡∏ø{itemDiscount.toLocaleString()}\n                                            </span>\n                                          )}\n                                        </div>\n                                     </div>\n                                     \n                                     {/* Item Total */}\n                                     <div style={{\n                                       textAlign: 'right',\n                                       fontWeight: '600',\n                                       color: '#334155',\n                                       fontSize: '11px',\n                                       minWidth: '70px'\n                                     }}>\n                                        ‡∏ø{finalTotal.toLocaleString()}\n                                     </div>\n                                  </div>\n                               </div>\n                            );\n                         })}\n                     </td>\n                     <td style={{\n                       verticalAlign: 'top', \n                       textAlign: 'right', \n                       paddingTop: '12px',\n                       fontWeight: '700',\n                       fontSize: '12px',\n                       color: '#1e293b'\n                     }}>\n                         ‡∏ø{(order.summary?.subtotal || 0).toLocaleString()}\n                         {order.status === 'void' && (\n                           <div style={{\n                             fontSize: '8px',\n                             color: '#dc2626',\n                             border: '1px solid #dc2626',\n                             display: 'inline-block',\n                             padding: '2px 6px',\n                             borderRadius: '3px',\n                             marginTop: '4px',\n                             fontWeight: '600'\n                           }}>\n                             VOID\n                           </div>\n                         )}\n                     </td>\n                  </tr>\n               ))}\n            </tbody>\n            <tfoot>\n               <tr style={{borderTop: '2px solid #cbd5e1'}}>\n                  <td colSpan=\"3\" style={{\n                    textAlign: 'right', \n                    padding: '10px 8px',\n                    color: '#64748b',\n                    fontSize: '11px',\n                    fontWeight: '500'\n                  }}>\n                    ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏±‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î\n                  </td>\n                  <td style={{\n                    textAlign: 'right',\n                    padding: '10px 8px',\n                    fontSize: '12px',\n                    fontWeight: '600'\n                  }}>\n                    ‡∏ø{(summary.totalSales + summary.totalDiscount).toLocaleString()}\n                  </td>\n               </tr>\n               <tr>\n                  <td colSpan=\"3\" style={{\n                    textAlign: 'right',\n                    padding: '8px',\n                    color: '#dc2626',\n                    fontSize: '11px',\n                    fontWeight: '500'\n                  }}>\n                    ‡∏´‡∏±‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\n                  </td>\n                  <td style={{\n                    textAlign: 'right',\n                    padding: '8px',\n                    color: '#dc2626',\n                    fontSize: '12px',\n                    fontWeight: '600'\n                  }}>\n                    -‡∏ø{summary.totalDiscount.toLocaleString()}\n                  </td>\n               </tr>\n               <tr className=\"print-footer-total\" style={{borderTop: '2px solid #2563eb'}}>\n                  <td colSpan=\"3\" style={{\n                    textAlign: 'right',\n                    padding: '12px 8px',\n                    fontSize: '13px',\n                    fontWeight: '700',\n                    color: '#1e293b'\n                  }}>\n                    ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô (Grand Total)\n                  </td>\n                  <td style={{\n                    textAlign: 'right',\n                    padding: '12px 8px',\n                    fontSize: '16px',\n                    fontWeight: '700',\n                    color: '#059669'\n                  }}>\n                    ‡∏ø{summary.totalSales.toLocaleString()}\n                  </td>\n               </tr>\n            </tfoot>\n         </table>\n         \n         {/* Footer */}\n         <div style={{\n           marginTop: '30px',\n           paddingTop: '15px',\n           borderTop: '1px solid #e2e8f0',\n           textAlign: 'center',\n           fontSize: '9px',\n           color: '#94a3b8'\n         }}>\n            <div>Boots POS System | Store 4340</div>\n            <div style={{marginTop: '4px'}}>\n              ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠: {new Date().toLocaleString('th-TH', { \n                year: 'numeric', \n                month: 'long', \n                day: 'numeric',\n                hour: '2-digit',\n                minute: '2-digit'\n              })}\n            </div>\n         </div>\n      </div>\n    </>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\src\\components\\DemoUI.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'useRef' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"useRef"},"fix":{"range":[35,43],"text":""},"desc":"Remove unused variable 'useRef'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ShoppingCart' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"ShoppingCart"},"fix":{"range":[69,82],"text":""},"desc":"Remove unused variable 'ShoppingCart'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Search' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"Search"},"fix":{"range":[81,89],"text":""},"desc":"Remove unused variable 'Search'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Menu' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"Menu"},"fix":{"range":[89,95],"text":""},"desc":"Remove unused variable 'Menu'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ScanBarcode' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"ScanBarcode"},"fix":{"range":[95,108],"text":""},"desc":"Remove unused variable 'ScanBarcode'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'User' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":55,"suggestions":[{"messageId":"removeVar","data":{"varName":"User"},"fix":{"range":[108,114],"text":""},"desc":"Remove unused variable 'User'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Trash2' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":57,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":63,"suggestions":[{"messageId":"removeVar","data":{"varName":"Trash2"},"fix":{"range":[114,122],"text":""},"desc":"Remove unused variable 'Trash2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Loader2' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":65,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":72,"suggestions":[{"messageId":"removeVar","data":{"varName":"Loader2"},"fix":{"range":[122,131],"text":""},"desc":"Remove unused variable 'Loader2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":74,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":85,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertCircle"},"fix":{"range":[131,144],"text":""},"desc":"Remove unused variable 'AlertCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":87,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":88,"suggestions":[{"messageId":"removeVar","data":{"varName":"X"},"fix":{"range":[144,147],"text":""},"desc":"Remove unused variable 'X'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Tag' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":90,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":93,"suggestions":[{"messageId":"removeVar","data":{"varName":"Tag"},"fix":{"range":[147,152],"text":""},"desc":"Remove unused variable 'Tag'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Package' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":95,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":102,"suggestions":[{"messageId":"removeVar","data":{"varName":"Package"},"fix":{"range":[152,161],"text":""},"desc":"Remove unused variable 'Package'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Box' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":104,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":107,"suggestions":[{"messageId":"removeVar","data":{"varName":"Box"},"fix":{"range":[161,166],"text":""},"desc":"Remove unused variable 'Box'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'MinusCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":109,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":120,"suggestions":[{"messageId":"removeVar","data":{"varName":"MinusCircle"},"fix":{"range":[166,179],"text":""},"desc":"Remove unused variable 'MinusCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'FileText' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":122,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":130,"suggestions":[{"messageId":"removeVar","data":{"varName":"FileText"},"fix":{"range":[179,189],"text":""},"desc":"Remove unused variable 'FileText'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Settings' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":132,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":140,"suggestions":[{"messageId":"removeVar","data":{"varName":"Settings"},"fix":{"range":[189,199],"text":""},"desc":"Remove unused variable 'Settings'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Hash' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":142,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":146,"suggestions":[{"messageId":"removeVar","data":{"varName":"Hash"},"fix":{"range":[199,205],"text":""},"desc":"Remove unused variable 'Hash'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Percent' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":148,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":155,"suggestions":[{"messageId":"removeVar","data":{"varName":"Percent"},"fix":{"range":[205,214],"text":""},"desc":"Remove unused variable 'Percent'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Ticket' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":157,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":163,"suggestions":[{"messageId":"removeVar","data":{"varName":"Ticket"},"fix":{"range":[214,222],"text":""},"desc":"Remove unused variable 'Ticket'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Gift' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":165,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":169,"suggestions":[{"messageId":"removeVar","data":{"varName":"Gift"},"fix":{"range":[222,228],"text":""},"desc":"Remove unused variable 'Gift'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":171,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":182,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle"},"fix":{"range":[228,241],"text":""},"desc":"Remove unused variable 'CheckCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ReceiptModal' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"ReceiptModal"},"fix":{"range":[410,428],"text":""},"desc":"Remove unused variable 'ReceiptModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ProductLookupModal' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"ProductLookupModal"},"fix":{"range":[453,477],"text":""},"desc":"Remove unused variable 'ProductLookupModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DailyReportModal' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"DailyReportModal"},"fix":{"range":[508,530],"text":""},"desc":"Remove unused variable 'DailyReportModal'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":25,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\nimport { ShoppingCart, Search, Menu, ScanBarcode, User, Trash2, Loader2, AlertCircle, X, Tag, Package, Box, MinusCircle, FileText, Settings, Hash, Percent, Ticket, Gift, CheckCircle } from 'lucide-react';\nimport { cn } from '../utils/cn';\nimport { useCart } from '../hooks/useCart';\nimport { useScanListener } from '../hooks/useScanListener';\nimport ReceiptModal from './ReceiptModal';\nimport ProductLookupModal from './ProductLookupModal';\nimport DailyReportModal from './DailyReportModal';\nimport { posService } from '../services/posService';\n\nexport default function PosUI({ onAdminSettings, onSearch }) {\n  const { \n    cartItems, addToCart: originalAddToCart, decreaseItem, removeFromCart, clearCart, \n    summary, lastScanned, isLoading, error,\n    setManualItemDiscount, updateBillDiscount, billDiscount,\n    addCoupon, removeCoupon, coupons,\n    updateAllowance, allowance\n  } = useCart();\n\n  const [lastOrder, setLastOrder] = useState(null);\n  const [isSaving, setIsSaving] = useState(false);\n  const [isVoidMode, setIsVoidMode] = useState(false);\n  const [nextQty, setNextQty] = useState(1);\n\n  // Modal States\n  const [suggestions, setSuggestions] = useState([]);\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [showProductLookup, setShowProductLookup] = useState(false);\n  const [showReport, setShowReport] = useState(false);\n  const [showDiscountModal, setShowDiscountModal] = useState(false);\n\n  // Discount Modal Inner State\n  const [activeTab, setActiveTab] = useState('discount'); // discount, coupon, allowance\n  const [discountSubTab, setDiscountSubTab] = useState('bill'); // bill, items\n  \n  // Coupon Input State\n  const [couponInput, setCouponInput] = useState({ type: '', value: '', code: '' });\n  const [showCouponInput, setShowCouponInput] = useState(false); \n\n  // Helper for Button Animation\n  const btnEffect = \"active:scale-95 transition-transform duration-100 ease-in-out shadow-sm hover:shadow-md active:shadow-none select-none\";\n\n  const lastItemDetail = lastScanned ? cartItems.find(i => (i.sku === lastScanned || i.id === lastScanned)) : null;\n\n  // --- Handlers ---\n\n  const handleScanAction = async (skuOrItem) => {\n    if (showCouponInput) {\n        setCouponInput(prev => ({ ...prev, code: typeof skuOrItem === 'string' ? skuOrItem : skuOrItem.sku }));\n        return;\n    }\n    \n    const quantityToApply = nextQty;\n    \n    if (isVoidMode) {\n       const sku = typeof skuOrItem === 'string' ? skuOrItem : (skuOrItem.sku || skuOrItem.id);\n       decreaseItem(sku); \n       setShowDropdown(false);\n       setInputValue('');\n       if (nextQty !== 1) setNextQty(1);\n       return;\n    }\n    \n    if (typeof skuOrItem === 'string') {\n       try {\n         const item = await posService.scanItem(skuOrItem);\n         await originalAddToCart(item, quantityToApply);\n       } catch (e) { console.error(e); }\n    } else {\n       await originalAddToCart(skuOrItem, quantityToApply);\n    }\n    \n    if (nextQty !== 1) setNextQty(1);\n    setShowDropdown(false);\n  };\n\n  const handleCheckout = async () => {\n    if (cartItems.length === 0) return;\n    const orderData = { \n        items: [...cartItems], \n        summary: summary, \n        cashier: 'Staff #01', \n        device: 'POS-Web',\n        adjustments: {\n            billDiscount,\n            coupons,\n            allowance\n        }\n    };\n    setIsSaving(true);\n    try {\n      const orderId = await posService.createOrder(orderData);\n      setLastOrder({ ...orderData, id: orderId, timestamp: new Date().toISOString() });\n      clearCart();\n    } catch (err) { alert('Error: ' + err.message); } \n    finally { setIsSaving(false); }\n  };\n\n  // ‚úÖ New Setting Handler\n  const handleAdminSettings = () => {\n    if (onAdminSettings) {\n      onAdminSettings();\n    } else {\n      alert('Admin Settings: Feature coming soon');\n    }\n  };\n\n  const { inputRef, inputValue, setInputValue, handleInputKeyDown, handleInputChange } = useScanListener(handleScanAction, !lastOrder ? handleCheckout : undefined);\n\n  const onInputChangeWrapper = (e) => {\n    const val = e.target.value;\n    if (val.endsWith('*')) {\n      const numberPart = val.slice(0, -1);\n      if (/^\\d+$/.test(numberPart)) {\n        const qty = parseInt(numberPart, 10);\n        if (qty > 0) {\n           setNextQty(qty);\n           setInputValue(''); \n        } else {\n           alert('‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0');\n           setInputValue('');\n        }\n      } else {\n        setInputValue(''); \n      }\n      return; \n    }\n    handleInputChange(e);\n  };\n\n  useEffect(() => {\n    const timer = setTimeout(async () => {\n      if (inputValue.length >= 2 && !isVoidMode && !showDiscountModal) { \n        const results = await posService.searchProducts(inputValue);\n        setSuggestions(results);\n        setShowDropdown(results.length > 0);\n      } else {\n        setSuggestions([]);\n        setShowDropdown(false);\n      }\n    }, 300);\n    return () => clearTimeout(timer);\n  }, [inputValue, isVoidMode, showDiscountModal]);\n\n  const handleSelectSuggestion = (sku) => {\n    posService.scanItem(sku).then(item => {\n        handleScanAction(item);\n    });\n  };\n\n  const openCouponInput = (type) => {\n      setCouponInput({ type, value: '', code: '' });\n      setShowCouponInput(true);\n  };\n\n  const handleSaveCoupon = () => {\n      if (!couponInput.value && couponInput.type !== 'boots') return;\n      let finalValue = parseFloat(couponInput.value) || 0;\n      let finalCode = couponInput.code;\n      if (couponInput.type === 'boots') {\n          if (finalValue === 0) {\n             const numbers = finalCode.match(/\\d+/);\n             finalValue = numbers ? parseInt(numbers[0]) : 50; \n          }\n      }\n      addCoupon({ couponType: couponInput.type, couponValue: finalValue, couponCode: finalCode });\n      setShowCouponInput(false);\n  };\n\n  return (\n    <div className=\"h-screen w-full bg-slate-100 p-4 font-sans flex gap-4 overflow-hidden\" onClick={() => setShowDropdown(false)}>\n      \n      {/* Modals */}\n      {lastOrder && <ReceiptModal order={lastOrder} onClose={() => setLastOrder(null)} />}\n      {showProductLookup && <ProductLookupModal onClose={() => setShowProductLookup(false)} />}\n      {showReport && <DailyReportModal onClose={() => setShowReport(false)} />}\n\n      {/* --- Discount Menu Modal --- */}\n      {showDiscountModal && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-in zoom-in-95 duration-200\">\n            <div className=\"bg-white w-full max-w-4xl h-[80vh] rounded-2xl shadow-2xl flex overflow-hidden\">\n                {/* Sidebar */}\n                <div className=\"w-64 bg-slate-100 p-4 border-r border-slate-200 flex flex-col gap-2\">\n                    <h2 className=\"text-xl font-bold text-slate-800 mb-4 px-2\">‡πÄ‡∏°‡∏ô‡∏π‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</h2>\n                    <button onClick={() => setActiveTab('discount')} className={cn(\"text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition-colors\", activeTab === 'discount' ? \"bg-white shadow text-boots-base\" : \"text-slate-500 hover:bg-slate-200\")}>\n                        <Percent size={20}/> ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î (Discount)\n                    </button>\n                    <button onClick={() => setActiveTab('coupon')} className={cn(\"text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition-colors\", activeTab === 'coupon' ? \"bg-white shadow text-boots-base\" : \"text-slate-500 hover:bg-slate-200\")}>\n                        <Ticket size={20}/> ‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á (Coupons)\n                    </button>\n                    <button onClick={() => setActiveTab('allowance')} className={cn(\"text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition-colors\", activeTab === 'allowance' ? \"bg-white shadow text-boots-base\" : \"text-slate-500 hover:bg-slate-200\")}>\n                        <Gift size={20}/> Allowance\n                    </button>\n                    <div className=\"mt-auto\">\n                        <button onClick={() => setShowDiscountModal(false)} className=\"w-full py-3 bg-slate-800 text-white rounded-xl font-bold\">‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á</button>\n                    </div>\n                </div>\n\n                {/* Content */}\n                <div className=\"flex-1 p-8 bg-white overflow-y-auto\">\n                    {/* --- TAB: DISCOUNT --- */}\n                    {activeTab === 'discount' && (\n                        <div>\n                            <div className=\"flex gap-4 mb-6 border-b border-slate-200 pb-4\">\n                                <button onClick={() => setDiscountSubTab('bill')} className={cn(\"px-6 py-2 rounded-lg font-bold transition-all\", discountSubTab === 'bill' ? \"bg-boots-base text-white shadow-md\" : \"bg-slate-100 text-slate-500\")}>‡∏•‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏ö‡∏¥‡∏•</button>\n                                <button onClick={() => setDiscountSubTab('items')} className={cn(\"px-6 py-2 rounded-lg font-bold transition-all\", discountSubTab === 'items' ? \"bg-boots-base text-white shadow-md\" : \"bg-slate-100 text-slate-500\")}>‡∏•‡∏î‡∏ö‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>\n                            </div>\n\n                            {discountSubTab === 'bill' && (\n                                <div className=\"max-w-sm\">\n                                    <label className=\"block text-sm font-bold text-slate-700 mb-2\">‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏ö‡∏¥‡∏• (%)</label>\n                                    <div className=\"flex gap-4\">\n                                        <input \n                                            type=\"number\" \n                                            value={billDiscount.percent} \n                                            onChange={(e) => updateBillDiscount(e.target.value)}\n                                            className=\"w-full border-2 border-slate-200 rounded-xl px-4 py-3 text-2xl font-bold focus:border-boots-base outline-none\" \n                                            placeholder=\"0\"\n                                        />\n                                        <div className=\"flex items-center text-slate-400 font-bold text-xl\">%</div>\n                                    </div>\n                                    <p className=\"text-sm text-slate-400 mt-2\">* ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å‡∏¢‡∏≠‡∏î‡∏´‡∏•‡∏±‡∏á‡∏´‡∏±‡∏Å‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡πÅ‡∏•‡πâ‡∏ß</p>\n                                </div>\n                            )}\n\n                            {discountSubTab === 'items' && (\n                                <div>\n                                    <table className=\"w-full text-left border-collapse\">\n                                        <thead>\n                                            <tr className=\"border-b border-slate-200 text-slate-500 text-sm\"><th className=\"p-3\">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th><th className=\"p-3 text-right\">‡∏¢‡∏≠‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏î</th><th className=\"p-3 text-center w-32\">‡∏•‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏° (%)</th></tr>\n                                        </thead>\n                                        <tbody>\n                                            {cartItems.map((item, idx) => (\n                                                <tr key={idx} className=\"border-b border-slate-100\">\n                                                    <td className=\"p-3 font-medium\">{item.name} <span className=\"text-slate-400 text-xs\">x{item.qty}</span></td>\n                                                    <td className=\"p-3 text-right font-mono\">{(item.price * item.qty).toLocaleString()}</td>\n                                                    <td className=\"p-3\">\n                                                        <input \n                                                            type=\"number\" \n                                                            value={item.manualDiscountPercent || ''}\n                                                            onChange={(e) => setManualItemDiscount(item.id || item.sku, e.target.value)}\n                                                            className=\"w-full border border-slate-300 rounded-lg px-2 py-1 text-center font-bold focus:border-boots-base outline-none\"\n                                                            placeholder=\"0\"\n                                                        />\n                                                    </td>\n                                                </tr>\n                                            ))}\n                                        </tbody>\n                                    </table>\n                                </div>\n                            )}\n                        </div>\n                    )}\n\n                    {/* --- TAB: COUPON --- */}\n                    {activeTab === 'coupon' && (\n                        <div>\n                            <h3 className=\"text-2xl font-bold mb-6 text-slate-800\">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á</h3>\n                            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                                <button onClick={() => openCouponInput('store')} className={cn(\"h-40 rounded-2xl flex flex-col items-center justify-center gap-4 text-white text-xl font-bold bg-sky-400 hover:bg-sky-500 shadow-lg\", btnEffect)}>\n                                    <Ticket size={40} /> Store Coupon\n                                </button>\n                                <button onClick={() => openCouponInput('vendor')} className={cn(\"h-40 rounded-2xl flex flex-col items-center justify-center gap-4 text-white text-xl font-bold bg-pink-400 hover:bg-pink-500 shadow-lg\", btnEffect)}>\n                                    <Tag size={40} /> Vendor Coupon\n                                </button>\n                                <button onClick={() => openCouponInput('boots')} className={cn(\"h-40 rounded-2xl flex flex-col items-center justify-center gap-4 text-white text-xl font-bold bg-blue-900 hover:bg-blue-800 shadow-lg\", btnEffect)}>\n                                    <CheckCircle size={40} /> Boots Coupon\n                                </button>\n                            </div>\n\n                            <div className=\"mt-8\">\n                                <h4 className=\"font-bold text-slate-700 mb-4\">‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ ({coupons.length})</h4>\n                                {coupons.length === 0 ? <p className=\"text-slate-400\">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á</p> : (\n                                    <div className=\"flex flex-wrap gap-3\">\n                                        {coupons.map((c, i) => (\n                                            <div key={i} className=\"flex items-center gap-2 bg-slate-100 px-3 py-2 rounded-lg border border-slate-200\">\n                                                <div className=\"text-sm\">\n                                                    <span className=\"font-bold uppercase text-slate-700\">{c.couponType}</span> \n                                                    <span className=\"mx-2 text-slate-400\">|</span> \n                                                    Code: {c.couponCode} \n                                                    <span className=\"ml-2 font-bold text-red-500\">-‡∏ø{c.couponValue}</span>\n                                                </div>\n                                                <button onClick={() => removeCoupon(c.couponCode)} className=\"text-slate-400 hover:text-red-500\"><X size={16}/></button>\n                                            </div>\n                                        ))}\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n                    )}\n\n                    {/* --- TAB: ALLOWANCE --- */}\n                    {activeTab === 'allowance' && (\n                        <div className=\"max-w-sm\">\n                            <label className=\"block text-sm font-bold text-slate-700 mb-2\">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô Allowance</label>\n                            <div className=\"relative\">\n                                <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold\">‡∏ø</span>\n                                <input \n                                    type=\"number\" \n                                    value={allowance}\n                                    onChange={(e) => updateAllowance(e.target.value)}\n                                    className=\"w-full border-2 border-slate-200 rounded-xl pl-10 pr-4 py-3 text-2xl font-bold focus:border-boots-base outline-none\" \n                                    placeholder=\"0.00\"\n                                />\n                            </div>\n                            <p className=\"text-sm text-slate-400 mt-2\">* ‡∏•‡∏î‡∏à‡∏≤‡∏Å‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡∏ó‡πâ‡∏≤‡∏¢‡∏ö‡∏¥‡∏•</p>\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            {/* --- Coupon Input Sub-Modal --- */}\n            {showCouponInput && (\n                <div className=\"absolute inset-0 z-[60] flex items-center justify-center bg-black/50\">\n                    <div className=\"bg-white p-6 rounded-xl w-96 shadow-2xl animate-in zoom-in-95\">\n                        <h3 className=\"text-lg font-bold mb-4 uppercase text-slate-700\">Add {couponInput.type} Coupon</h3>\n                        \n                        {couponInput.type !== 'boots' && (\n                            <div className=\"mb-4\">\n                                <label className=\"block text-xs font-bold text-slate-500 mb-1\">‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á (‡∏ö‡∏≤‡∏ó)</label>\n                                <input autoFocus type=\"number\" className=\"w-full border border-slate-300 rounded-lg px-3 py-2 font-bold text-lg\" \n                                    value={couponInput.value} onChange={e => setCouponInput({...couponInput, value: e.target.value})} />\n                            </div>\n                        )}\n                        \n                        <div className=\"mb-6\">\n                            <label className=\"block text-xs font-bold text-slate-500 mb-1\">‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á / Barcode</label>\n                            <input type=\"text\" className=\"w-full border border-slate-300 rounded-lg px-3 py-2 font-mono\" \n                                value={couponInput.code} onChange={e => setCouponInput({...couponInput, code: e.target.value})} \n                                placeholder=\"Scan or type...\"\n                            />\n                        </div>\n\n                        <div className=\"flex gap-2\">\n                            <button onClick={() => setShowCouponInput(false)} className=\"flex-1 py-2 bg-slate-200 rounded-lg font-bold text-slate-600\">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>\n                            <button onClick={handleSaveCoupon} className=\"flex-1 py-2 bg-boots-base text-white rounded-lg font-bold\">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </div>\n      )}\n\n      {/* LEFT SIDE */}\n      <div className=\"w-[35%] flex flex-col gap-4\">\n        {/* Input Section */}\n        <div className={cn(\"p-6 rounded-2xl shadow-sm border-2 relative z-40 transition-colors\", isVoidMode ? \"bg-red-50 border-red-300\" : \"bg-white border-slate-200\")}>\n           <div className=\"flex justify-between items-center mb-2\">\n             <h2 className={cn(\"text-sm font-bold uppercase tracking-wider flex items-center gap-2\", isVoidMode ? \"text-red-600\" : \"text-slate-400\")}>\n               {isVoidMode ? <><MinusCircle size={16}/> VOID MODE (‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏ö)</> : <><ScanBarcode size={16}/> SCAN PRODUCT</>}\n             </h2>\n             <button \n               onClick={() => { setIsVoidMode(!isVoidMode); inputRef.current?.focus(); }}\n               className={cn(\"text-xs font-bold px-3 py-1.5 rounded-lg border\", btnEffect, isVoidMode ? \"bg-red-600 text-white border-red-600 shadow-red-200\" : \"bg-slate-100 text-slate-500 border-slate-200 hover:bg-red-50 hover:text-red-500 hover:border-red-200\")}\n             >\n               {isVoidMode ? 'EXIT VOID MODE' : 'SCAN TO VOID'}\n             </button>\n           </div>\n           \n           <div className=\"relative group\">\n            <div className=\"absolute left-4 top-1/2 -translate-y-1/2 transition-colors\">\n              {isLoading ? <Loader2 size={24} className=\"animate-spin text-boots-base\" /> : ( isVoidMode ? <Trash2 size={24} className=\"text-red-500\"/> : <Search size={24} className=\"text-slate-400\"/> )}\n            </div>\n            \n            <input \n              ref={inputRef}\n              value={inputValue}\n              onChange={onInputChangeWrapper}\n              onKeyDown={handleInputKeyDown}\n              disabled={isLoading || lastOrder || isSaving || showDiscountModal}\n              type=\"text\" \n              placeholder={isVoidMode ? \"‡∏™‡πÅ‡∏Å‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏ö‡∏≠‡∏≠‡∏Å...\" : \"‡∏™‡πÅ‡∏Å‡∏ô‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î... (‡∏û‡∏¥‡∏°‡∏û‡πå 3* ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô)\"}\n              autoComplete=\"off\"\n              className={cn(\"w-full pl-12 pr-4 py-4 rounded-xl border-2 outline-none transition-all shadow-inner text-xl font-bold placeholder:font-normal\", isVoidMode ? \"bg-white border-red-300 text-red-600 placeholder:text-red-200 focus:ring-4 focus:ring-red-500/10 focus:border-red-500\" : \"bg-slate-50 border-slate-200 text-boots-text placeholder:text-slate-300 focus:ring-4 focus:ring-boots-base/10 focus:border-boots-base\")}\n            />\n            {inputValue && <button onClick={() => setInputValue('')} className=\"absolute right-4 top-1/2 -translate-y-1/2 text-slate-300 hover:text-slate-500\"><X size={20} /></button>}\n            \n            {nextQty > 1 && (\n               <div className=\"absolute -top-3 right-0 bg-orange-500 text-white text-xs font-bold px-2 py-1 rounded-full shadow-md flex items-center gap-1 animate-in zoom-in\">\n                  <Hash size={12} /> Next Qty: {nextQty}\n               </div>\n            )}\n            \n            {showDropdown && !isVoidMode && (\n              <div className=\"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-xl border border-slate-100 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200 max-h-[300px] overflow-y-auto z-50\">\n                {suggestions.map((item) => (\n                  <div key={item.sku} onClick={() => handleSelectSuggestion(item.sku)} className=\"p-4 border-b border-slate-50 hover:bg-boots-light/30 cursor-pointer flex justify-between items-center group\">\n                    <div><div className=\"text-slate-800 font-bold\">{item.name}</div><div className=\"text-xs text-slate-400\">SKU: {item.sku}</div></div><div className=\"text-boots-base font-bold\">‡∏ø{item.price.toLocaleString()}</div>\n                  </div>\n                ))}\n              </div>\n            )}\n           </div>\n           {error && (<div className=\"mt-4 bg-red-50 text-red-600 px-4 py-3 rounded-xl border border-red-100 flex items-center gap-3 animate-in slide-in-from-top-2\"><AlertCircle size={20} /><span className=\"text-sm font-medium\">{error}</span></div>)}\n        </div>\n\n        {/* Monitor Section */}\n        <div className={cn(\"flex-1 rounded-2xl shadow-sm border p-6 flex flex-col relative overflow-hidden transition-colors\", isVoidMode ? \"bg-red-50/30 border-red-200\" : \"bg-white border-slate-200\")}>\n           <div className=\"absolute top-0 right-0 p-6 opacity-5 text-slate-400 pointer-events-none\"><Package size={180} /></div>\n           <h2 className=\"text-sm font-bold text-slate-400 uppercase tracking-wider mb-auto flex items-center gap-2\"><Box size={16} /> {isVoidMode ? 'Void Monitor' : 'Last Scanned'}</h2>\n           \n           {lastItemDetail ? (\n             <div className=\"mt-4 animate-in slide-in-from-right-4 duration-300 text-center relative z-10\">\n                <div className={cn(\"w-24 h-24 rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-inner text-white\", isVoidMode ? \"bg-red-500\" : \"bg-boots-light text-boots-base\")}>\n                   {isVoidMode ? <MinusCircle size={48}/> : <Package size={48} />}\n                </div>\n                <h3 className=\"text-2xl font-bold text-slate-800 leading-tight mb-2 line-clamp-2\">{lastItemDetail.name}</h3>\n                <div className=\"text-slate-400 font-mono mb-6\">{lastItemDetail.sku}</div>\n                \n                {isVoidMode ? (\n                  <div className=\"text-red-600 font-bold text-xl animate-pulse\">REMOVED -1</div>\n                ) : (\n                  <div className=\"flex flex-col items-center\">\n                    <div className=\"text-6xl font-bold text-boots-base tracking-tighter\">\n                       ‡∏ø{\n                         // [Safe Fix] Fallback if calculatedTotal is undefined (e.g. initial add)\n                         ((lastItemDetail.calculatedTotal !== undefined ? lastItemDetail.calculatedTotal : (lastItemDetail.price * lastItemDetail.qty)) / lastItemDetail.qty).toLocaleString(undefined, {minimumFractionDigits:0, maximumFractionDigits:2})\n                       }\n                    </div>\n                    <div className=\"text-sm text-slate-400 mt-1 font-medium\">(‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥)</div>\n                  </div>\n                )}\n             </div>\n           ) : (\n             <div className=\"flex-1 flex flex-col items-center justify-center text-slate-300\"><ScanBarcode size={64} className=\"mb-4 opacity-50\" /><p className=\"text-lg font-medium\">‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</p></div>\n           )}\n          <div className=\"mt-auto pt-6 border-t border-slate-100 flex gap-2\">\n              <button\n                onClick={() => (typeof onSearch === 'function' ? onSearch() : setShowProductLookup(true))}\n                className={cn(\"flex-1 py-3 bg-slate-50 hover:bg-boots-light text-slate-600 hover:text-boots-base rounded-xl font-bold flex items-center justify-center gap-2\", btnEffect)}\n              >\n                <Search size={20} /> ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤\n              </button>\n          </div>\n       </div>\n      </div>\n\n      {/* RIGHT SIDE */}\n      <div className=\"w-[65%] flex flex-col bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden relative\">\n        \n        {/* Header */}\n        <div className=\"px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50\">\n           <div className=\"flex items-center gap-3\">\n              <img src=\"https://store.boots.co.th/images/boots-logo.png\" alt=\"Boots Logo\" className=\"h-8 w-auto object-contain\" />\n              <div className=\"h-6 w-px bg-slate-300\"></div>\n              <span className=\"font-bold text-slate-800 text-2xl\">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</span>\n           </div>\n           \n           {/* BUTTON GROUP */}\n           <div className=\"flex items-center gap-2\">\n              <div className=\"flex items-center gap-2 text-sm text-slate-500 bg-white px-3 py-1 rounded-lg border border-slate-200 shadow-sm\"><User size={16} /> Staff #01</div>\n              \n              {/* Daily Report Button */}\n              <button onClick={() => setShowReport(true)} className={cn(\"px-4 py-1.5 bg-white text-slate-700 rounded-lg border border-slate-200 text-sm font-bold hover:bg-slate-50 hover:text-boots-base shadow-sm transition-all flex items-center gap-2\", btnEffect)} title=\"Daily Report\">\n                 <FileText size={16} /> Daily Report\n              </button>\n\n              {/* ‚úÖ SETTING BUTTON MOVED HERE */}\n              <button \n                 onClick={handleAdminSettings} \n                 className={cn(\"flex items-center gap-2 px-3 py-1.5 bg-white text-slate-700 rounded-lg border border-slate-200 text-sm font-bold hover:bg-slate-50 hover:text-boots-base shadow-sm transition-all\", btnEffect)}\n                 title=\"Admin Settings\"\n              >\n                 <Settings size={16} />\n                 <span>Setting</span>\n              </button>\n           </div>\n        </div>\n\n        {/* Table Head */}\n        <div className=\"grid grid-cols-12 gap-2 px-6 py-3 bg-slate-100/50 text-xs font-bold text-slate-500 uppercase tracking-wider border-b border-slate-200\">\n           <div className=\"col-span-1 text-center\">No.</div>\n           <div className=\"col-span-4\">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</div>\n           <div className=\"col-span-2 text-right\">‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢</div>\n           <div className=\"col-span-2 text-center\">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</div>\n           <div className=\"col-span-1 text-right text-red-600\">‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</div>\n           <div className=\"col-span-2 text-right\">‡∏£‡∏ß‡∏°</div>\n        </div>\n\n        {/* Table Body */}\n        <div className=\"flex-1 overflow-y-auto px-4 py-2\">\n          {cartItems.length === 0 ? (\n            <div className=\"h-full flex flex-col items-center justify-center text-slate-300\"><ShoppingCart size={64} className=\"mb-4 opacity-50\" /><p className=\"text-xl font-medium\">‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤</p></div>\n          ) : (\n            cartItems.map((item, index) => {\n              // [Safe Fix] Fallback to prevent NaN\n              const price = item.price || 0;\n              const qty = item.qty || 0;\n              const normalTotal = price * qty;\n              const lineTotal = item.calculatedTotal !== undefined ? item.calculatedTotal : normalTotal; \n              const discountVal = normalTotal - lineTotal;\n\n              return (\n              <div key={item.id || item.sku} className={cn(\"grid grid-cols-12 gap-2 p-3 border-b border-slate-50 items-center hover:bg-slate-50 transition-colors group relative\", lastScanned === item.sku && \"bg-blue-50/60\")}>\n                 <div className=\"col-span-1 flex justify-center\"><div className=\"w-6 h-6 rounded-full bg-slate-100 text-slate-500 flex items-center justify-center text-xs font-bold\">{cartItems.length - index}</div></div>\n                 \n                 <div className=\"col-span-4\">\n                    <div className=\"font-bold text-slate-800 text-base line-clamp-1\">{item.name}</div>\n                    <div className=\"text-xs text-slate-400 font-mono mb-1\">{item.sku}</div>\n                    \n                    {item.badgeText ? (\n                        <span className=\"inline-flex items-center gap-1 text-[10px] text-white px-2 py-0.5 rounded-md font-semibold shadow-sm mt-0.5\" style={{ backgroundColor: '#184290' }}>\n                          <Tag size={10} className=\"text-white\" /> {item.badgeText}\n                        </span>\n                    ) : ( item.promoTag && <span className=\"inline-flex items-center gap-1 text-[10px] bg-orange-100 text-orange-700 px-1.5 py-0.5 rounded font-bold mt-0.5\"><Tag size={10} /> {item.promoTag}</span> )}\n                 </div>\n\n                 <div className=\"col-span-2 text-right\">\n                    <div className=\"text-lg font-bold text-slate-600\">‡∏ø{price.toLocaleString()}</div>\n                 </div>\n\n                 <div className=\"col-span-2 flex justify-center\">\n                    <div className=\"bg-white border border-slate-200 px-2 py-1 rounded-lg font-bold text-slate-700 shadow-sm min-w-[3.5rem] text-center text-xl\">\n                        {qty}\n                    </div>\n                 </div>\n\n                 <div className=\"col-span-1 text-right\">\n                    {discountVal > 0 ? (\n                        <div className=\"text-sm font-bold text-red-600\">-‡∏ø{discountVal.toLocaleString(undefined, {minimumFractionDigits:0, maximumFractionDigits:2})}</div>\n                    ) : (\n                        <div className=\"text-slate-300\">-</div>\n                    )}\n                 </div>\n\n                 <div className=\"col-span-2 text-right relative pr-8\"> \n                    <div className=\"text-xl font-bold text-boots-base\">‡∏ø{lineTotal.toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: 2})}</div>\n                    <button \n                        onClick={() => removeFromCart(item.id || item.sku)} \n                        className={cn(\"absolute right-0 top-1/2 -translate-y-1/2 p-2 bg-white text-red-500 rounded-full shadow border border-red-100 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-50\", btnEffect)}\n                    >\n                        <Trash2 size={18} />\n                    </button>\n                 </div>\n              </div>\n            )})\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"bg-slate-900 text-white p-6 shadow-[0_-10px_40px_-15px_rgba(0,0,0,0.3)] z-20\">\n           {/* Detailed Summary */}\n           <div className=\"flex justify-between items-end mb-4 border-b border-slate-700 pb-4\">\n              <div className=\"flex gap-8 text-sm\">\n                 <div>\n                    <div className=\"text-slate-400 mb-1\">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</div>\n                    <div className=\"font-bold\">{summary.subtotal.toLocaleString()}</div>\n                 </div>\n                 {summary.billDiscountAmount < 0 && (\n                     <div>\n                        <div className=\"text-slate-400 mb-1\">‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ö‡∏¥‡∏•</div>\n                        <div className=\"font-bold text-orange-400\">{summary.billDiscountAmount.toLocaleString()}</div>\n                     </div>\n                 )}\n                 {summary.couponTotal < 0 && (\n                     <div>\n                        <div className=\"text-slate-400 mb-1\">‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á</div>\n                        <div className=\"font-bold text-orange-400\">{summary.couponTotal.toLocaleString()}</div>\n                     </div>\n                 )}\n                 {summary.allowance < 0 && (\n                     <div>\n                        <div className=\"text-slate-400 mb-1\">Allowance</div>\n                        <div className=\"font-bold text-orange-400\">{summary.allowance.toLocaleString()}</div>\n                     </div>\n                 )}\n              </div>\n              \n              {/* Discount Menu Button */}\n              <button \n                onClick={() => setShowDiscountModal(true)}\n                className={cn(\"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-xl font-bold text-sm shadow-md transition-all\", btnEffect)}\n              >\n                <Tag size={18} /> ‡πÄ‡∏°‡∏ô‡∏π‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î (Discount)\n              </button>\n           </div>\n\n           <div className=\"flex justify-between items-start mb-6\">\n              <div className=\"flex gap-8\">\n                 <div><div className=\"text-slate-400 text-sm font-medium mb-1\">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ä‡∏¥‡πâ‡∏ô‡∏£‡∏ß‡∏°</div><div className=\"text-4xl font-bold text-white\">{summary.totalItems} <span className=\"text-lg text-slate-500 font-normal\">Items</span></div></div>\n                 {(summary.discount > 0 || summary.billDiscountAmount < 0 || summary.couponTotal < 0 || summary.allowance < 0) && (\n                     <div>\n                        <div className=\"text-orange-400 text-sm font-medium mb-1\">‡∏£‡∏ß‡∏°‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</div>\n                        <div className=\"text-4xl font-bold text-orange-400\">\n                            -‡∏ø{(Math.abs(summary.discount + summary.billDiscountAmount + summary.couponTotal + summary.allowance)).toLocaleString()}\n                        </div>\n                     </div>\n                 )}\n              </div>\n              <div className=\"text-right\"><div className=\"text-slate-400 text-sm font-medium mb-1\">‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥ (Net Total)</div><div className=\"text-7xl font-bold tracking-tighter text-white leading-none\">‡∏ø{summary.netTotal.toLocaleString(undefined, { minimumFractionDigits: 2 })}</div></div>\n           </div>\n           \n           <button onClick={handleCheckout} disabled={cartItems.length === 0 || isLoading || isSaving} className={cn(\"w-full bg-boots-base hover:bg-blue-600 text-white h-20 rounded-xl text-2xl font-bold flex items-center justify-center gap-4 shadow-lg shadow-boots-base/30 disabled:opacity-50 disabled:cursor-not-allowed\", btnEffect)}>\n              {isSaving ? <Loader2 className=\"animate-spin w-8 h-8\" /> : <ShoppingCart className=\"w-8 h-8\" />}\n              <span>‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô (Checkout)</span>\n              <span className=\"bg-white/20 text-white text-sm px-3 py-1 rounded font-normal\">F12</span>\n           </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\src\\components\\PosUI.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'useRef' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"useRef"},"fix":{"range":[35,43],"text":""},"desc":"Remove unused variable 'useRef'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ShoppingCart' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"ShoppingCart"},"fix":{"range":[69,82],"text":""},"desc":"Remove unused variable 'ShoppingCart'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Search' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"Search"},"fix":{"range":[81,89],"text":""},"desc":"Remove unused variable 'Search'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Menu' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"Menu"},"fix":{"range":[89,95],"text":""},"desc":"Remove unused variable 'Menu'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ScanBarcode' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"ScanBarcode"},"fix":{"range":[95,108],"text":""},"desc":"Remove unused variable 'ScanBarcode'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'User' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":55,"suggestions":[{"messageId":"removeVar","data":{"varName":"User"},"fix":{"range":[108,114],"text":""},"desc":"Remove unused variable 'User'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Trash2' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":57,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":63,"suggestions":[{"messageId":"removeVar","data":{"varName":"Trash2"},"fix":{"range":[114,122],"text":""},"desc":"Remove unused variable 'Trash2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Loader2' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":65,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":72,"suggestions":[{"messageId":"removeVar","data":{"varName":"Loader2"},"fix":{"range":[122,131],"text":""},"desc":"Remove unused variable 'Loader2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":74,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":85,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertCircle"},"fix":{"range":[131,144],"text":""},"desc":"Remove unused variable 'AlertCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":87,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":88,"suggestions":[{"messageId":"removeVar","data":{"varName":"X"},"fix":{"range":[144,147],"text":""},"desc":"Remove unused variable 'X'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Tag' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":90,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":93,"suggestions":[{"messageId":"removeVar","data":{"varName":"Tag"},"fix":{"range":[147,152],"text":""},"desc":"Remove unused variable 'Tag'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Package' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":95,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":102,"suggestions":[{"messageId":"removeVar","data":{"varName":"Package"},"fix":{"range":[152,161],"text":""},"desc":"Remove unused variable 'Package'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Box' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":104,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":107,"suggestions":[{"messageId":"removeVar","data":{"varName":"Box"},"fix":{"range":[161,166],"text":""},"desc":"Remove unused variable 'Box'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'MinusCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":109,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":120,"suggestions":[{"messageId":"removeVar","data":{"varName":"MinusCircle"},"fix":{"range":[166,179],"text":""},"desc":"Remove unused variable 'MinusCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'FileText' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":122,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":130,"suggestions":[{"messageId":"removeVar","data":{"varName":"FileText"},"fix":{"range":[179,189],"text":""},"desc":"Remove unused variable 'FileText'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Settings' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":132,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":140,"suggestions":[{"messageId":"removeVar","data":{"varName":"Settings"},"fix":{"range":[189,199],"text":""},"desc":"Remove unused variable 'Settings'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Hash' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":142,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":146,"suggestions":[{"messageId":"removeVar","data":{"varName":"Hash"},"fix":{"range":[199,205],"text":""},"desc":"Remove unused variable 'Hash'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Percent' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":148,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":155,"suggestions":[{"messageId":"removeVar","data":{"varName":"Percent"},"fix":{"range":[205,214],"text":""},"desc":"Remove unused variable 'Percent'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Ticket' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":157,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":163,"suggestions":[{"messageId":"removeVar","data":{"varName":"Ticket"},"fix":{"range":[214,222],"text":""},"desc":"Remove unused variable 'Ticket'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Gift' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":165,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":169,"suggestions":[{"messageId":"removeVar","data":{"varName":"Gift"},"fix":{"range":[222,228],"text":""},"desc":"Remove unused variable 'Gift'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":171,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":182,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle"},"fix":{"range":[228,241],"text":""},"desc":"Remove unused variable 'CheckCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ReceiptModal' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"ReceiptModal"},"fix":{"range":[410,428],"text":""},"desc":"Remove unused variable 'ReceiptModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ProductLookupModal' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"ProductLookupModal"},"fix":{"range":[453,477],"text":""},"desc":"Remove unused variable 'ProductLookupModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DailyReportModal' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"DailyReportModal"},"fix":{"range":[508,530],"text":""},"desc":"Remove unused variable 'DailyReportModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'sidePanelW' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":16,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"sidePanelW"},"fix":{"range":[754,803],"text":""},"desc":"Remove unused variable 'sidePanelW'."}]},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":51,"column":13,"nodeType":"BlockStatement","messageId":"unexpected","endLine":51,"endColumn":15,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[2118,2118],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'inputRef'. Either include it or remove the dependency array.","line":195,"column":6,"nodeType":"ArrayExpression","endLine":195,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [canFocusScanInput, inputRef]","fix":{"range":[6906,6925],"text":"[canFocusScanInput, inputRef]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'searchHits'. Either include it or remove the dependency array.","line":242,"column":6,"nodeType":"ArrayExpression","endLine":242,"endColumn":49,"suggestions":[{"desc":"Update the dependencies array to be: [inputValue, isVoidMode, searchHits, showDiscountModal]","fix":{"range":[8400,8443],"text":"[inputValue, isVoidMode, searchHits, showDiscountModal]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":28,"fixableErrorCount":0,"fixableWarningCount":0,"source":"Ôªøimport React, { useState, useEffect, useRef } from 'react';\nimport { ShoppingCart, Search, Menu, ScanBarcode, User, Trash2, Loader2, AlertCircle, X, Tag, Package, Box, MinusCircle, FileText, Settings, Hash, Percent, Ticket, Gift, CheckCircle } from 'lucide-react';\nimport { cn } from '../utils/cn';\nimport { useCart } from '../hooks/useCart';\nimport { useScanListener } from '../hooks/useScanListener';\nimport ReceiptModal from './ReceiptModal';\nimport ProductLookupModal from './ProductLookupModal';\nimport DailyReportModal from './DailyReportModal';\nimport { posService } from '../services/posService';\n\n// Version Control\nconst APP_VERSION = \"1.2.0\";\nconst APP_UPDATED = \"2025-12-26\";\n\nexport default function PosUI({ onAdminSettings, onSearch }) {\n  const sidePanelW = \"w-[clamp(320px,34vw,520px)]\";\n\n  const { \n    cartItems, addToCart: originalAddToCart, decreaseItem, removeFromCart, clearCart, \n    summary, lastScanned, isLoading, error,\n    setManualItemDiscount, updateBillDiscount, billDiscount,\n    addCoupon, removeCoupon, coupons,\n    updateAllowance, allowance,\n    topup // [SAFE] Now safe because useCart returns it\n  } = useCart();\n\n  const [lastOrder, setLastOrder] = useState(null);\n  const [isSaving, setIsSaving] = useState(false);\n  const [isVoidMode, setIsVoidMode] = useState(false);\n  const [nextQty, setNextQty] = useState(1);\n\n  // Modal States\n  const [suggestions, setSuggestions] = useState([]);\n  const [showDropdown, setShowDropdown] = useState(false);\n  \n  // --- Search UX Enhancements (Arrow select + Enter pick + Search Hits) ---\n  const [selectedSuggestionIndex, setSelectedSuggestionIndex] = useState(0);\n  const [searchHits, setSearchHits] = useState(() => {\n    try { return JSON.parse(localStorage.getItem(\"pos_search_hits\") || \"{}\"); }\n    catch { return {}; }\n  });\n\n  const bumpSearchHit = (sku) => {\n    try {\n      const key = (sku || \"\").toString();\n      if (!key) return;\n      const next = { ...(searchHits || {}) };\n      next[key] = (next[key] || 0) + 1;\n      setSearchHits(next);\n      localStorage.setItem(\"pos_search_hits\", JSON.stringify(next));\n    } catch {}\n  };\n\n  const handleInputKeyDownWrapper = async (e) => {\n    // When dropdown is open: arrow up/down move highlight; Enter picks highlighted item.\n    if (showDropdown && suggestions.length > 0 && !isVoidMode && !showDiscountModal) {\n      if (e.key === \"ArrowDown\") {\n        e.preventDefault();\n        setSelectedSuggestionIndex(i => Math.min(i + 1, suggestions.length - 1));\n        return;\n      }\n      if (e.key === \"ArrowUp\") {\n        e.preventDefault();\n        setSelectedSuggestionIndex(i => Math.max(i - 1, 0));\n        return;\n      }\n      if (e.key === \"Enter\") {\n        e.preventDefault();\n        const sel = suggestions[selectedSuggestionIndex];\n        if (sel?.sku) {\n          bumpSearchHit(sel.sku);\n          await handleSelectSuggestion(sel.sku);\n          setInputValue(\"\");          // (4.2) clear after choose\n          setShowDropdown(false);\n        }\n        return;\n      }\n    }\n\n    // fallback to original handler\n    handleInputKeyDown(e);\n  };\nconst [showProductLookup, setShowProductLookup] = useState(false);\n  const [showReport, setShowReport] = useState(false);\n  const [showDiscountModal, setShowDiscountModal] = useState(false);\n\n  // Discount Modal Inner State\n  const [activeTab, setActiveTab] = useState('discount'); \n  const [discountSubTab, setDiscountSubTab] = useState('bill'); \n  const [discountCheckedItems, setDiscountCheckedItems] = useState(new Set());\n  \n  // DB Status State\n  const [dbLastUpdate, setDbLastUpdate] = useState(null);\n\n  // Coupon Input State\n  const [couponInput, setCouponInput] = useState({ type: '', value: '', code: '' });\n  const [showCouponInput, setShowCouponInput] = useState(false); \n\n  // Helper for Button Animation\n  const btnEffect = \"active:scale-95 transition-transform duration-100 ease-in-out shadow-sm hover:shadow-md active:shadow-none select-none\";\n\n  const lastItemDetail = lastScanned ? cartItems.find(i => (i.sku === lastScanned || i.id === lastScanned)) : null;\n\n  // [CRITICAL FIX] Safe DB Update Check\n  useEffect(() => {\n    if (posService && posService.getLastDBUpdate) {\n        posService.getLastDBUpdate()\n            .then(setDbLastUpdate)\n            .catch(err => console.warn(\"DB Update Check Failed:\", err));\n    }\n  }, []);\n\n  // --- Handlers ---\n  const toggleDiscountCheck = (id) => {\n    setDiscountCheckedItems(prev => {\n        const next = new Set(prev);\n        if (next.has(id)) next.delete(id);\n        else next.add(id);\n        return next;\n    });\n  };\n\n  const handleScanAction = async (skuOrItem) => {\n    if (showCouponInput) {\n        setCouponInput(prev => ({ ...prev, code: typeof skuOrItem === 'string' ? skuOrItem : skuOrItem.sku }));\n        return;\n    }\n    \n    const quantityToApply = nextQty;\n    \n    if (isVoidMode) {\n       const sku = typeof skuOrItem === 'string' ? skuOrItem : (skuOrItem.sku || skuOrItem.id);\n       decreaseItem(sku); \n       setShowDropdown(false);\n       setInputValue('');\n       if (nextQty !== 1) setNextQty(1);\n       return;\n    }\n    \n    if (typeof skuOrItem === 'string') {\n        try {\n          const item = await posService.scanItem(skuOrItem);\n          await originalAddToCart(item, quantityToApply);\n        } catch (e) { console.error(e); }\n    } else {\n        await originalAddToCart(skuOrItem, quantityToApply);\n    }\n    \n    if (nextQty !== 1) setNextQty(1);\n    setShowDropdown(false);\n  };\n\n  const handleCheckout = async () => {\n    if (cartItems.length === 0) return;\n    const orderData = { \n        items: [...cartItems], \n        summary: summary, \n        cashier: 'Staff #01', \n        device: 'POS-Web',\n        adjustments: {\n            billDiscount,\n            coupons,\n            allowance,\n            topup \n        }\n    };\n    setIsSaving(true);\n    try {\n      const orderId = await posService.createOrder(orderData);\n      setLastOrder({ ...orderData, id: orderId, timestamp: new Date().toISOString() });\n      clearCart();\n    } catch (err) { alert('Error: ' + err.message); } \n    finally { setIsSaving(false); }\n  };\n\n  const handleAdminSettings = () => {\n    if (onAdminSettings) {\n      onAdminSettings();\n    } else {\n      alert('Admin Settings: Feature coming soon');\n    }\n  };\n\n  const { inputRef, inputValue, setInputValue, handleInputKeyDown, handleInputChange } = useScanListener(handleScanAction, !lastOrder ? handleCheckout : undefined);\n\n  \n  // --- Focus Guard: only auto-focus scan input when POS is in \"scan-ready\" state ---\n  const canFocusScanInput = !lastOrder && !isSaving && !showDiscountModal && !showProductLookup && !showReport && !showCouponInput;\n\n  useEffect(() => {\n    if (!canFocusScanInput) return;\n    // light auto-focus when returning to POS\n    const t = setTimeout(() => inputRef.current?.focus(), 0);\n    return () => clearTimeout(t);\n  }, [canFocusScanInput]);\nconst onInputChangeWrapper = (e) => {\n    const val = e.target.value;\n    if (val.endsWith('*')) {\n      const numberPart = val.slice(0, -1);\n      if (/^\\d+$/.test(numberPart)) {\n        const qty = parseInt(numberPart, 10);\n        if (qty > 0) {\n           setNextQty(qty);\n           setInputValue(''); \n        } else {\n           alert('‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0');\n           setInputValue('');\n        }\n      } else {\n        setInputValue(''); \n      }\n      return; \n    }\n    handleInputChange(e);\n  };\n\n  useEffect(() => {\n    const timer = setTimeout(async () => {\n      if (inputValue.length >= 2 && !isVoidMode && !showDiscountModal) { \n                let results = await posService.searchProducts(inputValue);\n\n        // sort by hit (desc) then name (asc)\n        const hits = searchHits || {};\n        results = [...results].sort((a, b) => {\n          const ha = hits[(a?.sku || \"\").toString()] || 0;\n          const hb = hits[(b?.sku || \"\").toString()] || 0;\n          if (hb !== ha) return hb - ha;\n          const na = (a?.name || \"\").toString().toLowerCase();\n          const nb = (b?.name || \"\").toString().toLowerCase();\n          return na.localeCompare(nb);\n        });\n\n        setSuggestions(results);\n        setShowDropdown(results.length > 0);\n        if (results.length > 0) setSelectedSuggestionIndex(0);\n      } else {\n        setSuggestions([]);\n        setShowDropdown(false);\n      }\n    }, 300);\n    return () => clearTimeout(timer);\n  }, [inputValue, isVoidMode, showDiscountModal]);\n\n    const handleSelectSuggestion = async (sku) => {\n    const item = await posService.scanItem(sku);\n    await handleScanAction(item);\n    setInputValue(\"\");          // (4.2) clear after choose\n    setShowDropdown(false);\n  };\n\n  const openCouponInput = (type) => {\n      setCouponInput({ type, value: '', code: '' });\n      setShowCouponInput(true);\n  };\n\n  const handleSaveCoupon = () => {\n      if (!couponInput.value && couponInput.type !== 'boots') return;\n      let finalValue = parseFloat(couponInput.value) || 0;\n      let finalCode = couponInput.code;\n      if (couponInput.type === 'boots') {\n          if (finalValue === 0) {\n             const numbers = finalCode.match(/\\d+/);\n             finalValue = numbers ? parseInt(numbers[0]) : 50; \n          }\n      }\n      addCoupon({ couponType: couponInput.type, couponValue: finalValue, couponCode: finalCode });\n      setShowCouponInput(false);\n  };\n\n  return (\n    <div className=\"h-screen w-full bg-slate-100 p-4 font-sans flex gap-4 overflow-hidden items-stretch\" onClick={() => setShowDropdown(false)}>\n      \n      {/* Modals */}\n      {lastOrder && <ReceiptModal order={lastOrder} onClose={() => setLastOrder(null)} />}\n      {showProductLookup && <ProductLookupModal onClose={() => setShowProductLookup(false)} />}\n      {showReport && <DailyReportModal onClose={() => setShowReport(false)} />}\n\n      {/* --- Discount Menu Modal --- */}\n      {showDiscountModal && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-in zoom-in-95 duration-200\">\n            <div className=\"bg-white w-full max-w-4xl h-[80vh] rounded-2xl shadow-2xl flex overflow-hidden\">\n                {/* Sidebar */}\n                <div className=\"w-64 bg-slate-100 p-4 border-r border-slate-200 flex flex-col gap-2\">\n                    <h2 className=\"text-xl font-bold text-slate-800 mb-4 px-2\">‡πÄ‡∏°‡∏ô‡∏π‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</h2>\n                    <button onClick={() => setActiveTab('discount')} className={cn(\"text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition-colors\", activeTab === 'discount' ? \"bg-white shadow text-boots-base\" : \"text-slate-500 hover:bg-slate-200\")}>\n                        <Percent size={20}/> ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î (Discount)\n                    </button>\n                    <button onClick={() => setActiveTab('coupon')} className={cn(\"text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition-colors\", activeTab === 'coupon' ? \"bg-white shadow text-boots-base\" : \"text-slate-500 hover:bg-slate-200\")}>\n                        <Ticket size={20}/> ‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á (Coupons)\n                    </button>\n                    <button onClick={() => setActiveTab('allowance')} className={cn(\"text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition-colors\", activeTab === 'allowance' ? \"bg-white shadow text-boots-base\" : \"text-slate-500 hover:bg-slate-200\")}>\n                        <Gift size={20}/> Allowance\n                    </button>\n                    <div className=\"mt-auto\">\n                        <button onClick={() => setShowDiscountModal(false)} className=\"w-full py-3 bg-slate-800 text-white rounded-xl font-bold\">‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á</button>\n                    </div>\n                </div>\n\n                {/* Content */}\n                <div className=\"flex-1 p-8 bg-white overflow-y-auto\">\n                    {/* --- TAB: DISCOUNT --- */}\n                    {activeTab === 'discount' && (\n                        <div>\n                            <div className=\"flex gap-4 mb-6 border-b border-slate-200 pb-4\">\n                                <button onClick={() => setDiscountSubTab('bill')} className={cn(\"px-6 py-2 rounded-lg font-bold transition-all\", discountSubTab === 'bill' ? \"bg-boots-base text-white shadow-md\" : \"bg-slate-100 text-slate-500\")}>‡∏•‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏ö‡∏¥‡∏•</button>\n                                <button onClick={() => setDiscountSubTab('items')} className={cn(\"px-6 py-2 rounded-lg font-bold transition-all\", discountSubTab === 'items' ? \"bg-boots-base text-white shadow-md\" : \"bg-slate-100 text-slate-500\")}>‡∏•‡∏î‡∏ö‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>\n                            </div>\n\n                            {discountSubTab === 'bill' && (\n                                <div className=\"max-w-sm\">\n                                    <label className=\"block text-sm font-bold text-slate-700 mb-2\">‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏ö‡∏¥‡∏• (%)</label>\n                                    <div className=\"flex gap-4\">\n                                        <input \n                                            type=\"number\" \n                                            value={billDiscount.percent} \n                                            onChange={(e) => updateBillDiscount(e.target.value)}\n                                            className=\"w-full border-2 border-slate-200 rounded-xl px-4 py-3 text-2xl font-bold focus:border-boots-base outline-none\" \n                                            placeholder=\"0\"\n                                        />\n                                        <div className=\"flex items-center text-slate-400 font-bold text-xl\">%</div>\n                                    </div>\n                                    <p className=\"text-sm text-slate-400 mt-2\">* ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å‡∏¢‡∏≠‡∏î‡∏´‡∏•‡∏±‡∏á‡∏´‡∏±‡∏Å‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡πÅ‡∏•‡πâ‡∏ß</p>\n                                </div>\n                            )}\n\n                            {discountSubTab === 'items' && (\n                                <div>\n                                    <h3 className=\"text-slate-500 font-bold mb-4 text-sm\">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤ (Check items to enable discount input in cart)</h3>\n                                    <div className=\"space-y-2\">\n                                        {cartItems.map((item, idx) => {\n                                            const isChecked = discountCheckedItems.has(item.id || item.sku);\n                                            return (\n                                                <div key={idx} \n                                                     onClick={() => toggleDiscountCheck(item.id || item.sku)}\n                                                     className={cn(\"flex items-center gap-4 p-3 rounded-xl border cursor-pointer transition-all\", isChecked ? \"border-boots-base bg-blue-50\" : \"border-slate-200 hover:bg-slate-50\")}\n                                                >\n                                                    <div className={cn(\"w-6 h-6 rounded border-2 flex items-center justify-center\", isChecked ? \"bg-boots-base border-boots-base text-white\" : \"border-slate-300 bg-white\")}>\n                                                        {isChecked && <CheckCircle size={16} />}\n                                                    </div>\n                                                    <div className=\"flex-1\">\n                                                        <div className=\"font-bold text-slate-800\">{item.name}</div>\n                                                        <div className=\"text-xs text-slate-400\">{item.sku}</div>\n                                                    </div>\n                                                    <div className=\"font-bold text-slate-600\">‡∏ø{(item.price * item.qty).toLocaleString()}</div>\n                                                </div>\n                                            );\n                                        })}\n                                        {cartItems.length === 0 && <p className=\"text-slate-400 text-center py-4\">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</p>}\n                                    </div>\n                                </div>\n                            )}\n                        </div>\n                    )}\n\n                    {/* --- TAB: COUPON --- */}\n                    {activeTab === 'coupon' && (\n                        <div>\n                            <h3 className=\"text-2xl font-bold mb-6 text-slate-800\">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á</h3>\n                            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                                <button onClick={() => openCouponInput('store')} className={cn(\"h-40 rounded-2xl flex flex-col items-center justify-center gap-4 text-white text-xl font-bold bg-sky-400 hover:bg-sky-500 shadow-lg\", btnEffect)}>\n                                    <Ticket size={40} /> Store Coupon\n                                </button>\n                                <button onClick={() => openCouponInput('vendor')} className={cn(\"h-40 rounded-2xl flex flex-col items-center justify-center gap-4 text-white text-xl font-bold bg-pink-400 hover:bg-pink-500 shadow-lg\", btnEffect)}>\n                                    <Tag size={40} /> Vendor Coupon\n                                </button>\n                                <button onClick={() => openCouponInput('boots')} className={cn(\"h-40 rounded-2xl flex flex-col items-center justify-center gap-4 text-white text-xl font-bold bg-blue-900 hover:bg-blue-800 shadow-lg\", btnEffect)}>\n                                    <CheckCircle size={40} /> Mobile coupon\n                                </button>\n                            </div>\n\n                            <div className=\"mt-8\">\n                                <h4 className=\"font-bold text-slate-700 mb-4\">‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ ({coupons.length})</h4>\n                                {coupons.length === 0 ? <p className=\"text-slate-400\">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á</p> : (\n                                    <div className=\"flex flex-wrap gap-3\">\n                                        {coupons.map((c, i) => (\n                                            <div key={i} className=\"flex items-center gap-2 bg-slate-100 px-3 py-2 rounded-lg border border-slate-200\">\n                                                <div className=\"text-sm\">\n                                                    <span className=\"font-bold uppercase text-slate-700\">{c.couponType}</span> \n                                                    <span className=\"mx-2 text-slate-400\">|</span> \n                                                    Code: {c.couponCode} \n                                                    <span className=\"ml-2 font-bold text-red-500\">-‡∏ø{c.couponValue}</span>\n                                                </div>\n                                                <button onClick={() => removeCoupon(c.couponCode)} className=\"text-slate-400 hover:text-red-500\"><X size={16}/></button>\n                                            </div>\n                                        ))}\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n                    )}\n\n                    {/* --- TAB: ALLOWANCE --- */}\n                    {activeTab === 'allowance' && (\n                        <div className=\"max-w-sm\">\n                            <label className=\"block text-sm font-bold text-slate-700 mb-2\">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô Allowance</label>\n                            <div className=\"relative\">\n                                <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold\">‡∏ø</span>\n                                <input \n                                    type=\"number\" \n                                    value={allowance}\n                                    onChange={(e) => updateAllowance(e.target.value)}\n                                    className=\"w-full border-2 border-slate-200 rounded-xl pl-10 pr-4 py-3 text-2xl font-bold focus:border-boots-base outline-none\" \n                                    placeholder=\"0.00\"\n                                />\n                            </div>\n                            <p className=\"text-sm text-slate-400 mt-2\">* ‡∏•‡∏î‡∏à‡∏≤‡∏Å‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡∏ó‡πâ‡∏≤‡∏¢‡∏ö‡∏¥‡∏•</p>\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            {/* --- Coupon Input Sub-Modal --- */}\n            {showCouponInput && (\n                <div className=\"absolute inset-0 z-[60] flex items-center justify-center bg-black/50\">\n                    <div className=\"bg-white p-6 rounded-xl w-96 shadow-2xl animate-in zoom-in-95\">\n                        <h3 className=\"text-lg font-bold mb-4 uppercase text-slate-700\">Add {couponInput.type} Coupon</h3>\n                        \n                        {couponInput.type !== 'boots' && (\n                            <div className=\"mb-4\">\n                                <label className=\"block text-xs font-bold text-slate-500 mb-1\">‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á (‡∏ö‡∏≤‡∏ó)</label>\n                                <input autoFocus type=\"number\" className=\"w-full border border-slate-300 rounded-lg px-3 py-2 font-bold text-lg\" \n                                    value={couponInput.value} onChange={e => setCouponInput({...couponInput, value: e.target.value})} />\n                            </div>\n                        )}\n                        \n                        <div className=\"mb-6\">\n                            <label className=\"block text-xs font-bold text-slate-500 mb-1\">‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á / Barcode</label>\n                            <input type=\"text\" className=\"w-full border border-slate-300 rounded-lg px-3 py-2 font-mono\" \n                                value={couponInput.code} onChange={e => setCouponInput({...couponInput, code: e.target.value})} \n                                placeholder=\"Scan or type...\"\n                            />\n                        </div>\n\n                        <div className=\"flex gap-2\">\n                            <button onClick={() => setShowCouponInput(false)} className=\"flex-1 py-2 bg-slate-200 rounded-lg font-bold text-slate-600\">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>\n                            <button onClick={handleSaveCoupon} className=\"flex-1 py-2 bg-boots-base text-white rounded-lg font-bold\">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </div>\n      )}\n\n      {/* LEFT SIDE */}\n      <div className=\"w-[35%] flex flex-col gap-4\">\n        {/* Input Section */}\n        <div className={cn(\"p-6 rounded-2xl shadow-sm border-2 relative z-40 transition-colors\", isVoidMode ? \"bg-red-50 border-red-300\" : \"bg-white border-slate-200\")}>\n           <div className=\"flex justify-between items-center mb-2\">\n             <h2 className={cn(\"text-sm font-bold uppercase tracking-wider flex items-center gap-2\", isVoidMode ? \"text-red-600\" : \"text-slate-400\")}>\n               {isVoidMode ? <><MinusCircle size={16}/> VOID MODE (‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏ö)</> : <><ScanBarcode size={16}/> SCAN PRODUCT</>}\n             </h2>\n             <button \n               onClick={() => { setIsVoidMode(!isVoidMode); if (canFocusScanInput) inputRef.current?.focus(); }}\n               className={cn(\"text-xs font-bold px-3 py-1.5 rounded-lg border\", btnEffect, isVoidMode ? \"bg-red-600 text-white border-red-600 shadow-red-200\" : \"bg-slate-100 text-slate-500 border-slate-200 hover:bg-red-50 hover:text-red-500 hover:border-red-200\")}\n             >\n               {isVoidMode ? 'EXIT VOID MODE' : 'SCAN TO VOID'}\n             </button>\n           </div>\n           \n           <div className=\"relative group\">\n            <div className=\"absolute left-4 top-1/2 -translate-y-1/2 transition-colors\">\n              {isLoading ? <Loader2 size={24} className=\"animate-spin text-boots-base\" /> : ( isVoidMode ? <Trash2 size={24} className=\"text-red-500\"/> : <Search size={24} className=\"text-slate-400\"/> )}\n            </div>\n            \n            <input \n              ref={inputRef}\n              value={inputValue}\n              onChange={onInputChangeWrapper}\n              onKeyDown={handleInputKeyDownWrapper}\n              disabled={isLoading || lastOrder || isSaving || showDiscountModal || showProductLookup || showReport || showCouponInput}\n              type=\"text\" \n              placeholder={isVoidMode ? \"‡∏™‡πÅ‡∏Å‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏ö‡∏≠‡∏≠‡∏Å...\" : \"‡∏™‡πÅ‡∏Å‡∏ô‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î... (‡∏û‡∏¥‡∏°‡∏û‡πå 3* ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô)\"}\n              autoComplete=\"off\"\n              className={cn(\"w-full pl-12 pr-4 py-4 rounded-xl border-2 outline-none transition-all shadow-inner text-xl font-bold placeholder:font-normal\", isVoidMode ? \"bg-white border-red-300 text-red-600 placeholder:text-red-200 focus:ring-4 focus:ring-red-500/10 focus:border-red-500\" : \"bg-slate-50 border-slate-200 text-boots-text placeholder:text-slate-300 focus:ring-4 focus:ring-boots-base/10 focus:border-boots-base\")}\n            />\n            {inputValue && <button onClick={() => setInputValue('')} className=\"absolute right-4 top-1/2 -translate-y-1/2 text-slate-300 hover:text-slate-500\"><X size={20} /></button>}\n            \n            {nextQty > 1 && (\n               <div className=\"absolute -top-3 right-0 bg-orange-500 text-white text-xs font-bold px-2 py-1 rounded-full shadow-md flex items-center gap-1 animate-in zoom-in\">\n                  <Hash size={12} /> Next Qty: {nextQty}\n               </div>\n            )}\n            \n            {showDropdown && !isVoidMode && (\n              <div className=\"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-xl border border-slate-100 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200 max-h-[300px] overflow-y-auto z-50\">\n                {suggestions.map((item, idx) => (\n                  <div\n                    key={item.sku}\n                    onMouseEnter={() => setSelectedSuggestionIndex(idx)}\n                    onClick={async () => { bumpSearchHit(item.sku); await handleSelectSuggestion(item.sku); }}\n                    className={cn(\n                      \"p-4 border-b border-slate-50 cursor-pointer flex justify-between items-center group transition-colors\",\n                      idx === selectedSuggestionIndex ? \"bg-boots-light/40\" : \"hover:bg-boots-light/30\"\n                    )}\n                  >\n                    <div><div className=\"text-slate-800 font-bold\">{item.name}</div><div className=\"text-xs text-slate-400\">SKU: {item.sku}</div></div><div className=\"text-boots-base font-bold\">‡∏ø{item.price.toLocaleString()}</div>\n                  </div>\n                ))}\n              </div>\n            )}\n           </div>\n           {error && (<div className=\"mt-4 bg-red-50 text-red-600 px-4 py-3 rounded-xl border border-red-100 flex items-center gap-3 animate-in slide-in-from-top-2\"><AlertCircle size={20} /><span className=\"text-sm font-medium\">{error}</span></div>)}\n        </div>\n\n        {/* Monitor Section */}\n        <div className={cn(\"flex-1 rounded-2xl shadow-sm border p-6 flex flex-col relative overflow-hidden transition-colors\", isVoidMode ? \"bg-red-50/30 border-red-200\" : \"bg-white border-slate-200\")}>\n           <div className=\"absolute top-0 right-0 p-6 opacity-5 text-slate-400 pointer-events-none\"><Package size={180} /></div>\n                      <div className=\"flex items-center justify-between\">\n             <h2 className=\"text-sm font-bold text-slate-400 uppercase tracking-wider mb-auto flex items-center gap-2\">\n               <Box size={16} /> {isVoidMode ? 'Void Monitor' : 'Last Scanned'}\n             </h2>\n\n               <button\n                 onClick={() => (typeof onSearch === 'function' ? onSearch() : setShowProductLookup(true))}\n                 className={cn(\n                   \"text-xs font-bold px-3 py-1.5 rounded-lg border flex items-center gap-2 shadow-sm\",\n                   btnEffect,\n                   \"bg-blue-600 text-white border-blue-500 hover:bg-blue-500 hover:border-blue-400\"\n                 )}\n                 title=\"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤\"\n               >\n                 <Search size={14} /> ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤\n               </button>\n             </div>\n           \n           {lastItemDetail ? (\n             <div className=\"mt-4 animate-in slide-in-from-right-4 duration-300 text-center relative z-10\">\n                <div className={cn(\"w-24 h-24 rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-inner text-white\", isVoidMode ? \"bg-red-500\" : \"bg-boots-light text-boots-base\")}>\n                   {isVoidMode ? <MinusCircle size={48}/> : <Package size={48} />}\n                </div>\n                <h3 className=\"text-2xl font-bold text-slate-800 leading-tight mb-2 line-clamp-2\">{lastItemDetail.name}</h3>\n                <div className=\"text-slate-400 font-mono mb-6\">{lastItemDetail.sku}</div>\n                \n                {isVoidMode ? (\n                  <div className=\"text-red-600 font-bold text-xl animate-pulse\">REMOVED -1</div>\n                ) : (\n                  <div className=\"flex flex-col items-center\">\n                    <div className=\"text-6xl font-bold text-boots-base tracking-tighter\">\n                        ‡∏ø{\n                          ((lastItemDetail.calculatedTotal !== undefined ? lastItemDetail.calculatedTotal : (lastItemDetail.price * lastItemDetail.qty)) / lastItemDetail.qty).toLocaleString(undefined, {minimumFractionDigits:0, maximumFractionDigits:2})\n                        }\n                    </div>\n                    <div className=\"text-sm text-slate-400 mt-1 font-medium\">(‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥)</div>\n                  </div>\n                )}\n             </div>\n           ) : (\n             <div className=\"flex-1 flex flex-col items-center justify-center text-slate-300\"><ScanBarcode size={64} className=\"mb-4 opacity-50\" /><p className=\"text-lg font-medium\">‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</p></div>\n           )}\n</div>\n      </div>\n\n      {/* RIGHT SIDE */}\n      <div className=\"w-[65%] flex flex-col bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden relative\">\n        \n        {/* Header */}\n        <div className=\"px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50\">\n           <div className=\"flex flex-col\">\n              <div className=\"flex items-center gap-3\">\n                 <img src=\"https://store.boots.co.th/images/boots-logo.png\" alt=\"Boots Logo\" className=\"h-8 w-auto object-contain\" />\n                 <div className=\"h-6 w-px bg-slate-300\"></div>\n                 <span className=\"font-bold text-slate-800 text-2xl\">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</span>\n              </div>\n              <div className=\"flex items-center gap-3 mt-1 text-[10px] text-slate-400 font-mono\">\n                  <span>v{APP_VERSION} ({APP_UPDATED})</span>\n                  {dbLastUpdate && (\n                      <>\n                        <span>‚Ä¢</span>\n                        <span>DB Update: {dbLastUpdate.toLocaleString('th-TH')}</span>\n                      </>\n                  )}\n              </div>\n           </div>\n           \n           {/* BUTTON GROUP */}\n           <div className=\"flex items-center gap-2\">\n              <div className=\"flex items-center gap-2 text-sm text-slate-500 bg-white px-3 py-1 rounded-lg border border-slate-200 shadow-sm\"><User size={16} /> Staff #01</div>\n              \n              {/* Discount Menu (Moved Here) */}\n              <button \n                onClick={() => setShowDiscountModal(true)}\n                className={cn(\"flex items-center gap-2 px-3 py-1.5 bg-orange-600 hover:bg-orange-500 text-white rounded-lg font-bold text-sm shadow-sm transition-all\", btnEffect)}\n              >\n                <Tag size={16} /> ‡πÄ‡∏°‡∏ô‡∏π‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î\n              </button>\n\n              {/* Daily Report Button */}\n              <button onClick={() => setShowReport(true)} className={cn(\"px-4 py-1.5 bg-white text-slate-700 rounded-lg border border-slate-200 text-sm font-bold hover:bg-slate-50 hover:text-boots-base shadow-sm transition-all flex items-center gap-2\", btnEffect)} title=\"Daily Report\">\n                 <FileText size={16} /> Daily Report\n              </button>\n\n              <button \n                  onClick={handleAdminSettings} \n                  className={cn(\"flex items-center gap-2 px-3 py-1.5 bg-white text-slate-700 rounded-lg border border-slate-200 text-sm font-bold hover:bg-slate-50 hover:text-boots-base shadow-sm transition-all\", btnEffect)}\n                  title=\"Admin Settings\"\n              >\n                  <Settings size={16} />\n                  <span>Setting</span>\n              </button>\n           </div>\n        </div>\n\n        {/* Table Head */}\n        <div className=\"grid grid-cols-12 gap-2 px-6 py-3 bg-slate-100/50 text-xs font-bold text-slate-500 uppercase tracking-wider border-b border-slate-200\">\n           <div className=\"col-span-1 text-center\">No.</div>\n           <div className=\"col-span-4\">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</div>\n           <div className=\"col-span-2 text-right\">‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢</div>\n           <div className=\"col-span-2 text-center\">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</div>\n           <div className=\"col-span-1 text-right text-red-600\">‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</div>\n           <div className=\"col-span-2 text-right\">‡∏£‡∏ß‡∏°</div>\n        </div>\n\n        {/* Table Body */}\n        <div className=\"flex-1 overflow-y-auto px-4 py-2\">\n          {cartItems.length === 0 ? (\n            <div className=\"h-full flex flex-col items-center justify-center text-slate-300\"><ShoppingCart size={64} className=\"mb-4 opacity-50\" /><p className=\"text-xl font-medium\">‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤</p></div>\n          ) : (\n            cartItems.map((item, index) => {\n              const price = item.price || 0;\n              const qty = item.qty || 0;\n              const normalTotal = price * qty;\n              const lineTotal = item.calculatedTotal !== undefined ? item.calculatedTotal : normalTotal; \n              const discountVal = normalTotal - lineTotal;\n              const isItemChecked = discountCheckedItems.has(item.id || item.sku);\n\n              return (\n              <div key={item.id || item.sku} className={cn(\"grid grid-cols-12 gap-2 p-3 border-b border-slate-50 items-center hover:bg-slate-50 transition-colors group relative\", lastScanned === item.sku && \"bg-blue-50/60\")}>\n                 <div className=\"col-span-1 flex justify-center\"><div className=\"w-6 h-6 rounded-full bg-slate-100 text-slate-500 flex items-center justify-center text-xs font-bold\">{cartItems.length - index}</div></div>\n                 \n                 <div className=\"col-span-4\">\n                    <div className=\"font-bold text-slate-800 text-base line-clamp-1\">{item.name}</div>\n                    <div className=\"text-xs text-slate-400 font-mono mb-1\">{item.sku}</div>\n                    \n                    {/* Discount Input Injection */}\n                    {isItemChecked && (\n                        <div className=\"mt-1 flex items-center gap-2 animate-in slide-in-from-left-2\">\n                            <span className=\"text-xs font-bold text-orange-600\">‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î:</span>\n                            <input \n                                type=\"number\" \n                                autoFocus\n                                value={item.manualDiscountPercent || ''}\n                                onChange={(e) => setManualItemDiscount(item.id || item.sku, e.target.value)}\n                                className=\"w-16 border border-orange-300 rounded px-1 py-0.5 text-center font-bold text-sm focus:border-orange-500 outline-none bg-orange-50\"\n                                placeholder=\"0\"\n                            />\n                            <span className=\"text-xs font-bold text-slate-500\">%</span>\n                        </div>\n                    )}\n                    \n                    {item.badgeText ? (\n                        <span className=\"inline-flex items-center gap-1 text-[10px] text-white px-2 py-0.5 rounded-md font-semibold shadow-sm mt-0.5\" style={{ backgroundColor: '#184290' }}>\n                          <Tag size={10} className=\"text-white\" /> {item.badgeText}\n                        </span>\n                    ) : ( item.promoTag && <span className=\"inline-flex items-center gap-1 text-[10px] bg-orange-100 text-orange-700 px-1.5 py-0.5 rounded font-bold mt-0.5\"><Tag size={10} /> {item.promoTag}</span> )}\n                 </div>\n\n                 <div className=\"col-span-2 text-right\">\n                    <div className=\"text-lg font-bold text-slate-600\">‡∏ø{price.toLocaleString()}</div>\n                 </div>\n\n                 <div className=\"col-span-2 flex justify-center\">\n                    <div className=\"bg-white border border-slate-200 px-2 py-1 rounded-lg font-bold text-slate-700 shadow-sm min-w-[3.5rem] text-center text-xl\">\n                        {qty}\n                    </div>\n                 </div>\n\n                 <div className=\"col-span-1 text-right\">\n                    {discountVal > 0 ? (\n                        <div className=\"text-sm font-bold text-red-600\">-‡∏ø{discountVal.toLocaleString(undefined, {minimumFractionDigits:0, maximumFractionDigits:2})}</div>\n                    ) : (\n                        <div className=\"text-slate-300\">-</div>\n                    )}\n                 </div>\n\n                 <div className=\"col-span-2 text-right relative pr-8\"> \n                    <div className=\"text-xl font-bold text-boots-base\">‡∏ø{lineTotal.toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: 2})}</div>\n                    <button \n                        onClick={() => removeFromCart(item.id || item.sku)} \n                        className={cn(\"absolute right-0 top-1/2 -translate-y-1/2 p-2 bg-white text-red-500 rounded-full shadow border border-red-100 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-50\", btnEffect)}\n                    >\n                        <Trash2 size={18} />\n                    </button>\n                 </div>\n              </div>\n            )})\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"bg-slate-900 text-white p-6 shadow-[0_-10px_40px_-15px_rgba(0,0,0,0.3)] z-20\">\n           {/* Detailed Summary */}\n           <div className=\"flex justify-between items-end mb-4 border-b border-slate-700 pb-4\">\n              <div className=\"flex gap-8 text-sm\">\n                 <div>\n                    <div className=\"text-slate-400 mb-1\">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</div>\n                    <div className=\"font-bold\">{summary.subtotal.toLocaleString()}</div>\n                 </div>\n                 {summary.billDiscountAmount < 0 && (\n                     <div>\n                        <div className=\"text-slate-400 mb-1\">‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ö‡∏¥‡∏•</div>\n                        <div className=\"font-bold text-orange-400\">{summary.billDiscountAmount.toLocaleString()}</div>\n                     </div>\n                 )}\n                 {summary.couponTotal < 0 && (\n                     <div>\n                        <div className=\"text-slate-400 mb-1\">‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á</div>\n                        <div className=\"font-bold text-orange-400\">{summary.couponTotal.toLocaleString()}</div>\n                     </div>\n                 )}\n                 {summary.allowance < 0 && (\n                     <div>\n                        <div className=\"text-slate-400 mb-1\">Allowance</div>\n                        <div className=\"font-bold text-orange-400\">{summary.allowance.toLocaleString()}</div>\n                     </div>\n                 )}\n              </div>\n           </div>\n\n           <div className=\"flex justify-between items-start mb-6\">\n              <div className=\"flex gap-8\">\n                 <div><div className=\"text-slate-400 text-sm font-medium mb-1\">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ä‡∏¥‡πâ‡∏ô‡∏£‡∏ß‡∏°</div><div className=\"text-4xl font-bold text-white\">{summary.totalItems} <span className=\"text-lg text-slate-500 font-normal\">Items</span></div></div>\n                 {(summary.discount > 0 || summary.billDiscountAmount < 0 || summary.couponTotal < 0 || summary.allowance < 0) && (\n                     <div>\n                        <div className=\"text-orange-400 text-sm font-medium mb-1\">‡∏£‡∏ß‡∏°‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</div>\n                        <div className=\"text-4xl font-bold text-orange-400\">\n                            -‡∏ø{(Math.abs(summary.discount + summary.billDiscountAmount + summary.couponTotal + summary.allowance)).toLocaleString()}\n                        </div>\n                     </div>\n                 )}\n              </div>\n              <div className=\"text-right\"><div className=\"text-slate-400 text-sm font-medium mb-1\">‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥ (Net Total)</div><div className=\"text-7xl font-bold tracking-tighter text-white leading-none\">‡∏ø{summary.netTotal.toLocaleString(undefined, { minimumFractionDigits: 2 })}</div></div>\n           </div>\n           \n           <button onClick={handleCheckout} disabled={cartItems.length === 0 || isLoading || isSaving} className={cn(\"w-full bg-boots-base hover:bg-blue-600 text-white h-20 rounded-xl text-2xl font-bold flex items-center justify-center gap-4 shadow-lg shadow-boots-base/30 disabled:opacity-50 disabled:cursor-not-allowed\", btnEffect)}>\n              {isSaving ? <Loader2 className=\"animate-spin w-8 h-8\" /> : <ShoppingCart className=\"w-8 h-8\" />}\n              <span>‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô (Checkout)</span>\n              <span className=\"bg-white/20 text-white text-sm px-3 py-1 rounded font-normal\">F12</span>\n           </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\src\\components\\ProductLookupModal.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"X"},"fix":{"range":[69,71],"text":""},"desc":"Remove unused variable 'X'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Search' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"Search"},"fix":{"range":[70,78],"text":""},"desc":"Remove unused variable 'Search'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Package' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"Package"},"fix":{"range":[78,87],"text":""},"desc":"Remove unused variable 'Package'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Database' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"Database"},"fix":{"range":[87,97],"text":""},"desc":"Remove unused variable 'Database'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'FileText' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":48,"suggestions":[{"messageId":"removeVar","data":{"varName":"FileText"},"fix":{"range":[97,107],"text":""},"desc":"Remove unused variable 'FileText'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Layers' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":50,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":56,"suggestions":[{"messageId":"removeVar","data":{"varName":"Layers"},"fix":{"range":[107,115],"text":""},"desc":"Remove unused variable 'Layers'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Box' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":58,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":61,"suggestions":[{"messageId":"removeVar","data":{"varName":"Box"},"fix":{"range":[115,120],"text":""},"desc":"Remove unused variable 'Box'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'selectedItem'. Either include it or remove the dependency array.","line":37,"column":6,"nodeType":"ArrayExpression","endLine":37,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [keyword, selectedItem]","fix":{"range":[1280,1289],"text":"[keyword, selectedItem]"}}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DetailItem' is defined but never used. Allowed unused vars must match /^_/u.","line":237,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":237,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"DetailItem"},"fix":{"range":[13168,13711],"text":""},"desc":"Remove unused variable 'DetailItem'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"Ôªøimport React, { useState, useEffect, useRef } from 'react';\nimport { X, Search, Package, Database, FileText, Layers, Box } from 'lucide-react';\nimport { posService } from '../services/posService';\nimport { cn } from '../utils/cn';\n\nexport default function ProductLookupModal({ onClose, variant = 'modal' }) {\n  const [keyword, setKeyword] = useState('');\n  const [results, setResults] = useState([]);\n  const [selectedItem, setSelectedItem] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const inputRef = useRef(null);\n  const isPage = variant === 'page';\n\n  useEffect(() => {\n    if (inputRef.current) inputRef.current.focus();\n  }, []);\n\n  useEffect(() => {\n    const timer = setTimeout(async () => {\n      if (keyword.length >= 2) {\n        setLoading(true);\n        try {\n          const items = await posService.searchProducts(keyword);\n          setResults(items);\n          if (items.length > 0 && !selectedItem) {\n            setSelectedItem(items[0]);\n          } else if (items.length === 0) {\n            setSelectedItem(null);\n          }\n        } catch (e) { console.error(e); } finally { setLoading(false); }\n      } else {\n        setResults([]);\n        setSelectedItem(null);\n      }\n    }, 300);\n    return () => clearTimeout(timer);\n  }, [keyword]);\n\n  return (\n    <div\n      className={cn(\n        \"animate-in fade-in duration-200\",\n        isPage\n          ? \"min-h-screen bg-slate-50 flex items-center justify-center p-4\"\n          : \"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4\"\n      )}\n    >\n\n      <div\n        className={cn(\n          \"bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-row relative ring-1 ring-white/20\",\n          isPage ? \"w-full h-[90vh] max-w-7xl\" : \"w-[95vw] h-[90vh] max-w-7xl\"\n        )}\n      >\n\n        {/* --- LEFT PANEL --- */}\n        <div className=\"w-[350px] flex flex-col border-r border-slate-200 bg-white shrink-0\">\n          <div className=\"p-4 border-b border-slate-100 bg-slate-50/50\">\n            <h2 className=\"text-lg font-bold text-slate-800 mb-3 flex items-center gap-2\">\n              <Search className=\"text-boots-base\" size={20} /> ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤\n            </h2>\n            <div className=\"relative group\">\n              <input \n                ref={inputRef}\n                type=\"text\" \n                value={keyword}\n                onChange={(e) => setKeyword(e.target.value)}\n                placeholder=\"‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠, ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î, ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™...\" \n                className=\"w-full pl-10 pr-4 py-3 bg-white border border-slate-300 rounded-xl focus:ring-2 focus:ring-boots-base focus:border-boots-base outline-none shadow-sm transition-all text-base\"\n              />\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-boots-base transition-colors\" size={18} />\n            </div>\n          </div>\n\n          <div className=\"flex-1 overflow-y-auto bg-slate-50 p-2 space-y-2\">\n            {loading ? (\n              <div className=\"text-center py-10 text-slate-400 animate-pulse\">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...</div>\n            ) : results.length === 0 ? (\n              <div className=\"text-center py-20 text-slate-400 flex flex-col items-center\">\n                <Box size={48} className=\"mb-2 opacity-20\" />\n                <span>{keyword.length < 2 ? '‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤' : '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤'}</span>\n              </div>\n            ) : (\n              results.map((item) => (\n                <div \n                  key={item.sku}\n                  onClick={() => setSelectedItem(item)}\n                  className={cn(\n                    \"p-3 rounded-lg cursor-pointer border transition-all relative overflow-hidden group\",\n                    selectedItem?.sku === item.sku \n                      ? \"bg-white border-boots-base shadow-md ring-1 ring-boots-base/20\" \n                      : \"bg-white border-slate-200 hover:border-boots-base/50 hover:shadow-sm\"\n                  )}\n                >\n                  {selectedItem?.sku === item.sku && <div className=\"absolute left-0 top-0 bottom-0 w-1 bg-boots-base\"></div>}\n                  <div className=\"pl-2\">\n                    <div className={cn(\"font-bold text-sm line-clamp-1\", selectedItem?.sku === item.sku ? \"text-boots-base\" : \"text-slate-700\")}>\n                      {item.ProductDesc}\n                    </div>\n                    <div className=\"flex justify-between items-end mt-1\">\n                      <div className=\"text-xs text-slate-500 font-mono bg-slate-100 px-1.5 py-0.5 rounded\">{item.sku}</div>\n                      <div className=\"font-bold text-slate-800\">‡∏ø{item.SellPrice?.toLocaleString()}</div>\n                    </div>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n          <div className=\"p-2 border-t border-slate-200 bg-white text-center text-xs text-slate-500 font-medium\">\n            ‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î {results.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£\n          </div>\n        </div>\n\n        {/* --- RIGHT PANEL (DETAILS) --- */}\n        <div className=\"flex-1 flex flex-col bg-slate-50/30 overflow-hidden relative\">\n\n          {onClose && (\n            <button\n              onClick={onClose}\n              className=\"absolute top-4 right-4 z-20 p-2 bg-white hover:bg-red-50 text-slate-400 hover:text-red-500 rounded-full shadow-sm border border-slate-100 transition-all hover:rotate-90\"\n            >\n              <X size={24} />\n            </button>\n          )}\n\n          {selectedItem ? (\n            <div className=\"flex-1 overflow-y-auto p-6 lg:p-8\">\n              <div className=\"max-w-5xl mx-auto space-y-6 animate-in slide-in-from-bottom-4 duration-300\">\n                \n                {/* 1. MASTER INFO */}\n                <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 relative overflow-hidden\">\n                  <div className=\"absolute top-0 right-0 p-8 opacity-5 text-boots-base pointer-events-none\"><Package size={200} /></div>\n                  <div className=\"relative z-10 flex flex-col md:flex-row gap-6 justify-between items-start border-b border-slate-100 pb-6 mb-6\">\n                    <div>\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <span className=\"bg-boots-base text-white text-[10px] px-2 py-0.5 rounded-full font-bold tracking-wide uppercase\">Master Product</span>\n                        <span className={cn(\"text-[10px] px-2 py-0.5 rounded-full border font-bold\", selectedItem.ProductStatus?.startsWith('0') ? \"text-green-600 border-green-200 bg-green-50\" : \"text-red-600 border-red-200 bg-red-50\")}>{selectedItem.ProductStatus || 'Unknown'}</span>\n                      </div>\n                      <h1 className=\"text-2xl md:text-3xl font-bold text-slate-800 leading-tight mb-2\">{selectedItem.ProductDesc}</h1>\n                      <div className=\"flex flex-wrap gap-4 text-sm text-slate-500 font-mono mt-2\">\n                        <span className=\"flex items-center gap-1\"><Database size={14}/> ID: {selectedItem.sku}</span>\n                        <span className=\"w-px h-4 bg-slate-300\"></span>\n                        <span className=\"flex items-center gap-1\">Barcode: {selectedItem.barcode || '-'}</span>\n                      </div>\n                    </div>\n                    <div className=\"text-right bg-slate-50 p-4 rounded-xl border border-slate-100 min-w-[140px]\">\n                      <div className=\"text-xs text-slate-400 mb-1\">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏õ‡∏Å‡∏ï‡∏¥</div>\n                      <div className=\"text-4xl font-bold text-boots-base tracking-tight\">‡∏ø{selectedItem.SellPrice?.toLocaleString()}</div>\n                      <div className=\"text-[10px] text-slate-400 mt-1\">Vat ({selectedItem.VatRate}%)</div>\n                    </div>\n                  </div>\n                  <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-6\">\n                    <DetailItem label=\"Department\" value={selectedItem.DeptCode} sub={selectedItem.DeptDesc} />\n                    <DetailItem label=\"Group\" value={selectedItem.GroupCode} sub={selectedItem.GroupDesc} />\n                    <DetailItem label=\"Sub Group\" value={selectedItem.SubGroupCode} />\n                    <DetailItem label=\"Supplier\" value={selectedItem.SupplierCode} sub={selectedItem.SupplierName} />\n                  </div>\n                </div>\n\n                {/* 2. PRINT ON DEPT (FILE 2) - FULL FIELDS */}\n                <div className=\"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden\">\n                  <div className=\"px-6 py-4 border-b border-slate-100 bg-blue-50/30 flex items-center gap-2\">\n                    <FileText size={18} className=\"text-blue-500\" />\n                    <h3 className=\"font-bold text-slate-800\">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Print On Dept (‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ü‡∏¥‡∏•‡∏î‡πå)</h3>\n                  </div>\n                  <div className=\"p-6\">\n                    {/* Description Print */}\n                    <div className=\"mb-4 pb-4 border-b border-slate-50\">\n                       <DetailItem label=\"Description (Print)\" value={selectedItem.description_print} fullWidth />\n                    </div>\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-y-6 gap-x-4\">\n                      <DetailItem label=\"Dept\" value={selectedItem.dept} />\n                      <DetailItem label=\"Class\" value={selectedItem.class} />\n                      <DetailItem label=\"Brand\" value={selectedItem.brand_print} />\n                      <DetailItem label=\"Merchandise\" value={selectedItem.merchandise} />\n                      \n                      <DetailItem label=\"Reg Price\" value={selectedItem.regPrice_print} />\n                      <DetailItem label=\"Unit Price\" value={selectedItem.unitPrice_print} />\n                      <DetailItem label=\"Tax Code\" value={selectedItem.tax_print} />\n                      <DetailItem label=\"Method\" value={selectedItem.method_print} />\n                      \n                      <div className=\"col-span-2 bg-yellow-50 p-3 rounded-lg border border-yellow-100 flex justify-between items-center\">\n                         <DetailItem label=\"Deal Price\" value={selectedItem.dealPrice_print} highlight />\n                         <DetailItem label=\"Deal Qty\" value={selectedItem.dealQty_print} highlight />\n                         <DetailItem label=\"Limit\" value={selectedItem.limit_print} />\n                      </div>\n                      <DetailItem label=\"MPG\" value={selectedItem.mpg_print} />\n                    </div>\n                  </div>\n                </div>\n\n                {/* 3. MAINTENANCE EVENT (FILE 3) - FULL FIELDS */}\n                <div className=\"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden\">\n                  <div className=\"px-6 py-4 border-b border-slate-100 bg-orange-50/30 flex items-center gap-2\">\n                    <Layers size={18} className=\"text-orange-500\" />\n                    <h3 className=\"font-bold text-slate-800\">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Maintenance Event (‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ü‡∏¥‡∏•‡∏î‡πå)</h3>\n                  </div>\n                  <div className=\"p-6\">\n                     {/* Description Maint */}\n                    <div className=\"mb-4 pb-4 border-b border-slate-50\">\n                       <DetailItem label=\"Description (Maint)\" value={selectedItem.description_maint} fullWidth />\n                    </div>\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-y-6 gap-x-4\">\n                      <DetailItem label=\"Event Type\" value={selectedItem.type_maint} />\n                      <DetailItem label=\"Dept\" value={selectedItem.dept_maint} />\n                      <DetailItem label=\"Class\" value={selectedItem.class_maint} />\n                      <DetailItem label=\"MP Group\" value={selectedItem.mpGroup_maint} />\n                      \n                      <DetailItem label=\"Reg Price\" value={selectedItem.regPrice_maint} />\n                      <DetailItem label=\"Unit Price\" value={selectedItem.unitPrice_maint} />\n                      <DetailItem label=\"Method\" value={selectedItem.method_maint} />\n                      <div className=\"hidden md:block\"></div> {/* Spacer */}\n\n                      <div className=\"col-span-2 bg-orange-50 p-3 rounded-lg border border-orange-100 flex justify-between items-center\">\n                         <DetailItem label=\"Deal Price\" value={selectedItem.dealPrice_maint} highlight />\n                         <DetailItem label=\"Deal Qty\" value={selectedItem.dealQty_maint} highlight />\n                         <DetailItem label=\"Limit Qty\" value={selectedItem.limitQty_maint} />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n              </div>\n            </div>\n          ) : (\n            <div className=\"flex-1 flex flex-col items-center justify-center text-slate-400\">\n              <div className=\"w-24 h-24 bg-slate-100 rounded-full flex items-center justify-center mb-4\"><Search size={40} className=\"text-slate-300\" /></div>\n              <p className=\"text-lg font-medium text-slate-500\">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢</p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction DetailItem({ label, value, sub, highlight, fullWidth }) {\n  return (\n    <div className={cn(\"min-w-0\", fullWidth && \"w-full\")}>\n      <div className=\"text-[10px] uppercase tracking-wider text-slate-400 font-semibold mb-1\">{label}</div>\n      <div className={cn(\"font-medium truncate\", highlight ? \"text-slate-800 font-bold text-lg\" : \"text-slate-700\", !value && \"text-slate-300 italic\")}>\n        {value || '-'}\n      </div>\n      {sub && <div className=\"text-[10px] text-slate-400 truncate\" title={sub}>{sub}</div>}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\src\\components\\ReceiptModal.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,18],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"X"},"fix":{"range":[36,38],"text":""},"desc":"Remove unused variable 'X'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Printer' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"Printer"},"fix":{"range":[37,46],"text":""},"desc":"Remove unused variable 'Printer'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle"},"fix":{"range":[46,59],"text":""},"desc":"Remove unused variable 'CheckCircle'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"Ôªøimport React from 'react';\nimport { X, Printer, CheckCircle } from 'lucide-react';\n\nexport default function ReceiptModal({ order, onClose }) {\n  if (!order) return null;\n\n  const handlePrint = () => {\n    window.print();\n  };\n\n  return (\n    <>\n      <style>{`\n        @media print {\n          body * { visibility: hidden; }\n          #receipt-area, #receipt-area * { visibility: visible !important; }\n          #receipt-area { \n            position: absolute !important; top: 0 !important; left: 0 !important; \n            width: 100% !important; height: auto !important; \n            background: white !important; display: block !important; padding: 20px; \n          }\n          .fixed.inset-0 { background: none !important; backdrop-filter: none !important; }\n        }\n      `}</style>\n\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200\">\n      \n      {/* Modal Container */}\n      <div className=\"bg-white w-full max-w-[380px] rounded-xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]\">\n        \n        {/* Header Actions (Non-printable) */}\n        <div className=\"bg-slate-100 p-3 flex justify-between items-center border-b border-slate-200 print:hidden\">\n          <div className=\"flex items-center gap-2 text-green-600 font-semibold text-sm\">\n            <CheckCircle size={16} /> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à\n          </div>\n          <div className=\"flex gap-2\">\n            <button onClick={handlePrint} className=\"p-2 hover:bg-white rounded-lg transition-colors text-slate-600\" title=\"Print\"><Printer size={18} /></button>\n            <button onClick={onClose} className=\"p-2 hover:bg-white rounded-lg transition-colors text-slate-600\" title=\"Close\"><X size={18} /></button>\n          </div>\n        </div>\n\n        {/* Receipt Content (Printable Area) */}\n        <div className=\"p-6 overflow-y-auto font-mono text-sm bg-white\" id=\"receipt-area\">\n          \n          {/* Logo & Header */}\n          <div className=\"text-center mb-6\">\n            <img src=\"https://store.boots.co.th/images/boots-logo.png\" alt=\"Boots\" className=\"h-6 mx-auto mb-2 grayscale opacity-80\" />\n            <div className=\"font-bold text-lg text-slate-800\">BOOTS RETAIL (THAILAND)</div>\n            <div className=\"text-xs text-slate-500\">TAX ID: 0105548105xxx</div>\n            <div className=\"text-xs text-slate-500\">Grand 5 Sukhumvit</div>\n            <div className=\"text-xs text-slate-500 mt-2\">POS ID: #01 &bull; CASHIER: STAFF</div>\n            <div className=\"text-xs text-slate-400 mt-1\">{new Date().toLocaleString('th-TH')}</div>\n          </div>\n\n          {/* Divider */}\n          <div className=\"border-b border-dashed border-slate-300 my-4\"></div>\n\n          {/* Items */}\n          <div className=\"space-y-2 mb-4\">\n            {order.items.map((item, i) => (\n              <div key={i} className=\"flex justify-between items-start\">\n                <div className=\"flex-1 pr-2\">\n                  <div className=\"text-slate-800\">{item.name}</div>\n                  <div className=\"text-xs text-slate-500\">{item.qty} x {item.price.toLocaleString()}</div>\n                </div>\n                <div className=\"text-slate-800 font-medium\">\n                  {(item.price * item.qty).toLocaleString()}\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {/* Divider */}\n          <div className=\"border-b border-dashed border-slate-300 my-4\"></div>\n\n          {/* Totals */}\n          <div className=\"space-y-1\">\n            <div className=\"flex justify-between text-slate-500 text-xs\">\n              <span>Subtotal (Excl. VAT)</span>\n              <span>{(order.summary.subtotal / 1.07).toLocaleString(undefined, { maximumFractionDigits: 2 })}</span>\n            </div>\n            <div className=\"flex justify-between text-slate-500 text-xs\">\n              <span>VAT (7%)</span>\n              <span>{(order.summary.subtotal - (order.summary.subtotal / 1.07)).toLocaleString(undefined, { maximumFractionDigits: 2 })}</span>\n            </div>\n\n            {/* Discount Breakdown */}\n            {order.adjustments?.coupons?.length > 0 && (\n              <div className=\"flex justify-between text-slate-500 text-xs\">\n                <span>Coupons</span>\n                <span className=\"text-red-600\">-{order.adjustments.coupons.reduce((a,c)=>a+c.couponValue,0).toLocaleString()}</span>\n              </div>\n            )}\n            {order.adjustments?.allowance > 0 && (\n              <div className=\"flex justify-between text-slate-500 text-xs\">\n                <span>Allowance</span>\n                <span className=\"text-red-600\">-{Number(order.adjustments.allowance).toLocaleString()}</span>\n              </div>\n            )}\n            {order.adjustments?.topup > 0 && (\n              <div className=\"flex justify-between text-slate-500 text-xs\">\n                <span>Topup Discount</span>\n                <span className=\"text-red-600\">-{Number(order.adjustments.topup).toLocaleString()}</span>\n              </div>\n            )}\n            {order.adjustments?.billDiscount?.amount > 0 && (\n               <div className=\"flex justify-between text-slate-500 text-xs\">\n                <span>Bill Discount ({order.adjustments.billDiscount.percent}%)</span>\n                <span className=\"text-red-600\">-{Number(order.adjustments.billDiscount.amount).toLocaleString()}</span>\n              </div>\n            )}\n\n            <div className=\"flex justify-between text-slate-800 font-bold text-lg mt-2\">\n              <span>TOTAL (Net)</span>\n              <span>‡∏ø{(order.summary.netTotal || order.summary.subtotal).toLocaleString()}</span>\n            </div>\n          </div>\n\n          {/* Footer */}\n          <div className=\"mt-8 text-center text-xs text-slate-400\">\n            <div>THANK YOU FOR SHOPPING WITH US</div>\n            <div className=\"mt-1\">** www.boots.co.th **</div>\n            <div className=\"mt-4 barcode font-serif tracking-widest text-slate-300\">\n              ||| || ||| || ||| |||| ||\n            </div>\n          </div>\n\n        </div>\n\n        {/* Footer Action (Non-printable) */}\n        <div className=\"p-4 bg-slate-50 border-t border-slate-100 print:hidden\">\n          <button onClick={onClose} className=\"w-full bg-slate-800 text-white py-3 rounded-lg font-medium hover:bg-slate-700 transition-colors\">\n            New Transaction (Enter)\n          </button>\n        </div>\n\n      </div>\n    </div>\n    </>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\src\\hooks\\useCart.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'subtotal' is not defined.","line":70,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":70,"endColumn":30}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"Ôªøimport { useState, useMemo } from 'react';\nimport { calculateLine } from '../services/promotionEngine';\n\n\nconst toNumber = (v) => {\n  const n = Number(v);\n  return Number.isFinite(n) ? n : 0;\n};\nexport const useCart = () => {\n  const [cartItems, setCartItems] = useState([]);\n  \n  // Discount States\n  const [billDiscount, setBillDiscount] = useState({ percent: 0, amount: 0 });\n  const [coupons, setCoupons] = useState([]);\n  const [allowance, setAllowance] = useState(0);\n  const [topup, setTopup] = useState(0); // [FIX] Added State\n  \n  const [lastScanned, setLastScanned] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // --- üß† CALCULATION ENGINE ---\n  const { summary, enrichedItems } = useMemo(() => {\n    let sumPromoTotal = 0;\n    let sumTotalItems = 0;\n    let sumPromoDiscount = 0;\n    let sumManualItemDiscount = 0;\n\n    // 1. Calculate Per-Item\n    const processedItems = cartItems.map(item => {\n      const newItem = { ...item };\n\n      // A. Promotion\n      const promoResult = calculateLine(newItem); \n      const promoPrice = promoResult.finalTotal;\n      \n      // B. Manual Item Discount\n      const manualPercent = newItem.manualDiscountPercent || 0;\n      const manualDiscAmount = (promoPrice * manualPercent) / 100;\n      const finalLineTotal = promoPrice - manualDiscAmount;\n\n      newItem.calculatedTotal = finalLineTotal; \n      newItem.badgeText = promoResult.badgeText;\n      newItem.promoDiscount = promoResult.discountAmount;\n      newItem.manualDiscountAmount = -manualDiscAmount;\n\n      sumPromoTotal += finalLineTotal;\n      sumTotalItems += newItem.qty;\n      sumPromoDiscount += promoResult.discountAmount;\n      sumManualItemDiscount += -manualDiscAmount;\n\n      return newItem;\n    });\n\n    // 2. Bill-Wide Discount\n    const billDiscAmount = (sumPromoTotal * billDiscount.percent) / 100;\n    const totalAfterBillDisc = sumPromoTotal - billDiscAmount;\n\n    // 3. Coupons\n    const totalCouponValue = coupons.reduce((sum, c) => sum + (c.couponValue || 0), 0);\n    const totalAfterCoupons = totalAfterBillDisc - totalCouponValue;\n\n    // 4. Allowance & Topup\n    const totalAfterAllowance = totalAfterCoupons - allowance;\n    const finalNetTotal = totalAfterAllowance - topup; // Apply Topup\n\n    return {\n      enrichedItems: processedItems,\n      summary: {\n  subtotal: toNumber(subtotal),\n        totalItems: sumTotalItems,\n        discount: sumPromoDiscount + sumManualItemDiscount,\n        netTotal: Math.max(0, finalNetTotal),\n        \n        // Breakdown\n        promoDiscount: sumPromoDiscount,\n        manualItemDiscount: sumManualItemDiscount,\n        billDiscountAmount: -billDiscAmount,\n        couponTotal: -totalCouponValue,\n        allowance: -allowance,\n        topup: -topup\n      }\n    };\n  }, [cartItems, billDiscount, coupons, allowance, topup]);\n\n  // --- Actions ---\n  const addToCart = async (skuOrItem, quantity = 1) => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const product = skuOrItem;\n      if (!product || (!product.sku && !product.id)) throw new Error('Invalid Product');\n\n      setCartItems(prev => {\n        const key = product.sku || product.id;\n        const existing = prev.find(item => (item.sku || item.id) === key);\n        if (existing) {\n          return prev.map(item => \n            (item.sku || item.id) === key ? { ...item, qty: item.qty + quantity } : item\n          );\n        }\n        return [...prev, { ...product, qty: quantity, manualDiscountPercent: 0 }];\n      });\n      setLastScanned(product.sku || product.id);\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const decreaseItem = (sku) => {\n    setCartItems(prev => {\n      const existing = prev.find(item => (item.sku === sku || item.id === sku));\n      if (!existing) return prev;\n      if (existing.qty > 1) {\n        return prev.map(item => (item.sku === sku || item.id === sku) ? { ...item, qty: item.qty - 1 } : item);\n      } else {\n        return prev.filter(item => (item.sku !== sku && item.id !== sku));\n      }\n    });\n    setLastScanned(sku);\n  };\n\n  const removeFromCart = (id) => {\n    setCartItems(prev => prev.filter(item => (item.id || item.sku) !== id));\n  };\n\n  const clearCart = () => {\n    setCartItems([]);\n    setBillDiscount({ percent: 0, amount: 0 });\n    setCoupons([]);\n    setAllowance(0);\n    setTopup(0);\n    setLastScanned(null);\n  };\n\n  const setManualItemDiscount = (id, percent) => {\n    setCartItems(prev => prev.map(item => \n      (item.id === id || item.sku === id) ? { ...item, manualDiscountPercent: parseFloat(percent) || 0 } : item\n    ));\n  };\n\n  const updateBillDiscount = (percent) => {\n    setBillDiscount({ percent: parseFloat(percent) || 0, amount: 0 });\n  };\n\n  const addCoupon = (couponData) => {\n    setCoupons(prev => [...prev, { ...couponData, createdAt: new Date() }]);\n  };\n\n  const removeCoupon = (code) => {\n    setCoupons(prev => prev.filter(c => c.couponCode !== code));\n  };\n\n  const updateAllowance = (amount) => {\n    setAllowance(parseFloat(amount) || 0);\n  };\n  \n  const updateTopup = (amount) => {\n    setTopup(parseFloat(amount) || 0);\n  };\n\n  return { \n    cartItems: enrichedItems,\n    addToCart, decreaseItem, removeFromCart, clearCart, \n    summary, lastScanned, isLoading, error,\n    setManualItemDiscount, updateBillDiscount, billDiscount,\n    addCoupon, removeCoupon, coupons,\n    updateAllowance, allowance,\n    updateTopup, topup // [FIX] Return topup\n  };\n};\n\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\src\\hooks\\useScanListener.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\src\\lib\\firebase.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\src\\main.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,18],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'App' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"App"},"fix":{"range":[75,84],"text":""},"desc":"Remove unused variable 'App'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"Ôªøimport React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nconst container = document.getElementById(\"app-root\");\nif (!container) throw new Error('Missing #app-root in index.html');\n\nReactDOM.createRoot(container).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// ‚úÖ remove HTML loading screen once app has painted at least 1 frame\nrequestAnimationFrame(() => {\n  requestAnimationFrame(() => {\n    const el = document.getElementById(\"app-loading\");\n    if (el && el.parentNode) el.parentNode.removeChild(el);\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\src\\mockProducts.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\src\\pages\\ProductSearchPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,18],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ProductLookupModal' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"ProductLookupModal"},"fix":{"range":[34,58],"text":""},"desc":"Remove unused variable 'ProductLookupModal'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport ProductLookupModal from '../components/ProductLookupModal';\n\nexport default function ProductSearchPage({ onClose }) {\n  return <ProductLookupModal variant=\"page\" onClose={onClose} />;\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\src\\services\\posService.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'addDoc' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":55,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":61,"suggestions":[{"messageId":"removeVar","data":{"varName":"addDoc"},"fix":{"range":[90,98],"text":""},"desc":"Remove unused variable 'addDoc'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'getCountFromServer' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":75,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":93,"suggestions":[{"messageId":"removeVar","data":{"varName":"getCountFromServer"},"fix":{"range":[110,130],"text":""},"desc":"Remove unused variable 'getCountFromServer'."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":9,"column":48,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":9,"endColumn":49,"suggestions":[{"messageId":"removeEscape","fix":{"range":[422,423],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[422,422],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\(.","line":9,"column":50,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":9,"endColumn":51,"suggestions":[{"messageId":"removeEscape","fix":{"range":[424,425],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[424,424],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\).","line":9,"column":52,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":9,"endColumn":53,"suggestions":[{"messageId":"removeEscape","fix":{"range":[426,427],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[426,426],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\..","line":9,"column":54,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":9,"endColumn":55,"suggestions":[{"messageId":"removeEscape","fix":{"range":[428,429],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[428,428],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\,.","line":9,"column":56,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":9,"endColumn":57,"suggestions":[{"messageId":"removeEscape","fix":{"range":[430,431],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[430,430],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"Ôªøimport { db } from '../lib/firebase';\nimport { collection, doc, getDoc, getDocs, updateDoc, addDoc, writeBatch, getCountFromServer, serverTimestamp, query, limit, where, orderBy, startAt, endAt, Timestamp } from 'firebase/firestore';\nimport * as XLSX from 'xlsx';\n\n// --- Helpers ---\nconst generateKeywords = (text) => {\n  if (!text) return [];\n  const keywords = new Set();\n  const words = text.toUpperCase().split(/[\\s\\-\\/\\(\\)\\.\\,]+/);\n  words.forEach(word => {\n    const cleanWord = word.trim();\n    if (cleanWord.length < 2) return;\n    keywords.add(cleanWord);\n    let temp = '';\n    for (let i = 0; i < cleanWord.length; i++) {\n      temp += cleanWord[i];\n      if (temp.length >= 3) keywords.add(temp);\n    }\n  });\n  return Array.from(keywords);\n};\n\nexport const posService = {\n  // --- REPORT ---\n  getSalesReport: async (startDate, endDate) => {\n    try {\n      const start = Timestamp.fromDate(startDate);\n      const end = Timestamp.fromDate(endDate);\n      const q = query(\n        collection(db, 'invoices'), \n        where('createdAt', '>=', start),\n        where('createdAt', '<=', end),\n        orderBy('createdAt', 'desc')\n      );\n      const snapshot = await getDocs(q);\n      const orders = [];\n      snapshot.forEach(doc => {\n        const data = doc.data();\n        orders.push({ \n          id: doc.id, \n          ...data, \n          timestamp: data.createdAt?.toDate ? data.createdAt.toDate() : new Date() \n        });\n      });\n      return orders;\n    } catch (e) {\n      console.error('Report Error:', e);\n      return [];\n    }\n  },\n\n  voidInvoice: async (orderId, reason) => {\n    try {\n      const docRef = doc(db, 'invoices', orderId);\n      await updateDoc(docRef, { status: 'void', voidReason: reason || 'Cashier Request', voidedAt: serverTimestamp() });\n      return true;\n    } catch (e) { throw new Error('Void Failed: ' + e.message); }\n  },\n\n  // --- SEARCH ---\n  searchProducts: async (keyword) => {\n    if (!keyword || keyword.length < 2) return [];\n    try {\n      const searchKey = keyword.toUpperCase().trim();\n      const productsRef = collection(db, 'products');\n      let results = [];\n      const seenIds = new Set(); \n\n      try {\n        const q1 = query(productsRef, where('keywords', 'array-contains', searchKey), where('ProductStatus', '>=', '0'), limit(10));\n        const snap1 = await getDocs(q1);\n        snap1.forEach(doc => {\n          const d = doc.data();\n          if (d.ProductStatus && d.ProductStatus.startsWith('0')) {\n             const id = d.GridProductCode || d.ProductCode || doc.id;\n             if (!seenIds.has(id)) { results.push({ sku: id, name: d.ProductDesc, price: Number(d.SellPrice), ...d }); seenIds.add(id); }\n          }\n        });\n      } catch (e) { console.warn('Strategy 1 failed:', e.code); }\n\n      if (results.length < 5) {\n        try {\n          const q2 = query(productsRef, orderBy('ProductDesc'), startAt(searchKey), endAt(searchKey + '\\uf8ff'), limit(10));\n          const snap2 = await getDocs(q2);\n          snap2.forEach(doc => {\n            const d = doc.data();\n            if (d.ProductStatus && d.ProductStatus.startsWith('0')) {\n               const id = d.GridProductCode || d.ProductCode || doc.id;\n               if (!seenIds.has(id)) { results.push({ sku: id, name: d.ProductDesc, price: Number(d.SellPrice), ...d }); seenIds.add(id); }\n            }\n          });\n        } catch (e) { console.warn('Strategy 2 failed:', e.code); }\n      }\n\n      if (results.length === 0 && /^\\d+$/.test(searchKey)) {\n         const q3 = query(productsRef, where('barcode', '==', searchKey), limit(1));\n         const snap3 = await getDocs(q3);\n         snap3.forEach(doc => {\n            const d = doc.data();\n            const id = d.GridProductCode || d.ProductCode || doc.id;\n            if (!seenIds.has(id)) { results.push({ sku: id, name: d.ProductDesc, price: Number(d.SellPrice), ...d }); seenIds.add(id); }\n         });\n      }\n      return results;\n    } catch (err) { console.error(err); return []; }\n  },\n\n  // [FIX] Aliases to prevent \"function missing\" errors\n  search: async (keyword) => { return posService.searchProducts(keyword); },\n\n  // --- SCAN ITEM ---\n  scanItem: async (keyword) => {\n    await new Promise(resolve => setTimeout(resolve, 300));\n    const cleanKey = keyword.trim();\n    if (!cleanKey) throw new Error('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤');\n    try {\n      const docRef = doc(db, 'products', cleanKey);\n      const docSnap = await getDoc(docRef);\n      if (docSnap.exists() && docSnap.data().ProductStatus?.startsWith('0')) { \n          const data = docSnap.data(); \n          return { sku: docSnap.id, name: data.ProductDesc, price: Number(data.SellPrice), ...data }; \n      }\n      const qBarcode = query(collection(db, 'products'), where('barcode', '==', cleanKey), limit(1));\n      const barcodeSnap = await getDocs(qBarcode);\n      if (!barcodeSnap.empty) { \n          const data = barcodeSnap.docs[0].data(); \n          if (data.ProductStatus?.startsWith('0')) \n              return { sku: data.barcode, name: data.ProductDesc, price: Number(data.SellPrice), ...data }; \n      }\n      const results = await posService.searchProducts(cleanKey);\n      if (results.length > 0) return results[0];\n      throw new Error('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤: ' + cleanKey);\n    } catch (error) { \n        if (error.message.includes('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤')) throw error; \n        throw new Error('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤'); \n    }\n  },\n\n  // [FIX] Restore getLastDBUpdate to prevent PosUI crash\n  getLastDBUpdate: async () => {\n    try {\n      const q = query(collection(db, 'products'), orderBy('updatedAt', 'desc'), limit(1));\n      const snapshot = await getDocs(q);\n      if (!snapshot.empty) {\n        const data = snapshot.docs[0].data();\n        return data.updatedAt?.toDate ? data.updatedAt.toDate() : new Date();\n      }\n      return null;\n    } catch (e) { console.warn(\"Failed to get DB update time\", e); return null; }\n  },\n\n  // --- OPTIMIZED MULTI-TYPE UPLOAD ---\n  uploadFileOptimized: async (file, type, onProgress) => {\n    const startTime = Date.now();\n    if (onProgress) onProgress({ phase: 'Parsing', percent: 0, total: 0, success: 0, failed: 0, errors: [] });\n    \n    const buffer = await file.arrayBuffer();\n    const workbook = XLSX.read(buffer);\n    const firstSheet = workbook.Sheets[workbook.SheetNames[0]];\n    const rows = XLSX.utils.sheet_to_json(firstSheet, { header: 1, defval: '' });\n    \n    if (rows.length > 0) rows.shift(); // Remove header\n\n    const total = rows.length;\n    if (total === 0) return { success: 0, failed: 0, errors: ['File is empty'] };\n\n    if (onProgress) onProgress({ phase: 'Processing', percent: 5, total, success: 0, failed: 0, errors: [] });\n\n    const batches = [];\n    const BATCH_SIZE = 500;\n    let currentBatch = writeBatch(db);\n    let countInBatch = 0;\n    let successCount = 0;\n    let failCount = 0;\n    const errors = [];\n\n    const processRow = (row, index) => {\n        let code = '';\n        let data = {};\n        const itemCode = String(row[1] || '').trim();\n        if (!itemCode) throw new Error(`Row ${index + 2}: Missing Code`);\n        code = itemCode;\n\n        if (type === 'PRINT') {\n            data = {\n                description_print: row[5], dept: row[11], class: row[13], merchandise: row[20],\n                regPrice_print: row[24], method_print: row[29], unitPrice_print: row[31],\n                dealPrice_print: row[35], dealQty_print: row[40], limit_print: row[44],\n                mpg_print: row[47], tax_print: row[50], brand_print: row[53],\n                updatedAt: serverTimestamp()\n            };\n        } else if (type === 'MAINT') {\n            data = {\n                description_maint: row[5], type_maint: row[11], dept_maint: row[13],\n                class_maint: row[17], regPrice_maint: row[21], method_maint: row[24],\n                unitPrice_maint: row[27], dealPrice_maint: row[31], dealQty_maint: row[37],\n                limitQty_maint: row[42], mpGroup_maint: row[45],\n                updatedAt: serverTimestamp()\n            };\n        }\n        return { code, data };\n    };\n\n    let rowsToProcess = rows;\n    if (type === 'MASTER') {\n        const rowsObj = XLSX.utils.sheet_to_json(firstSheet, { defval: '' });\n        rowsToProcess = rowsObj;\n    }\n\n    rowsToProcess.forEach((row, index) => {\n      try {\n        let docRef, updateData;\n\n        if (type === 'MASTER') {\n            const status = String(row['ProductStatus'] || row['Product Status'] || '').trim();\n            if (!status.startsWith('0')) return; \n\n            const rawCode = row['ProductCode'] || row['GridProductCode'] || row['Product Code'] || '';\n            const cleanCode = String(rawCode).trim();\n            if (!cleanCode) throw new Error(`Row ${index + 2}: Missing Code`);\n\n            docRef = doc(db, 'products', cleanCode);\n            updateData = {\n                ProductCode: cleanCode,\n                Barcode: String(row['Barcode'] || row['Bar Code'] || '').trim(),\n                ProductDesc: String(row['ProductDesc'] || row['Description'] || '').trim(),\n                SellPrice: parseFloat(row['SellPrice'] || row['Price'] || 0),\n                VatRate: parseFloat(row['VatRate'] || row['Vat'] || 0),\n                ...row,\n                updatedAt: serverTimestamp()\n            };\n            const keywords = generateKeywords(updateData.ProductDesc);\n            if (updateData.Barcode) keywords.push(updateData.Barcode);\n            if (cleanCode) keywords.push(cleanCode);\n            updateData.keywords = keywords;\n\n        } else {\n            const result = processRow(row, index);\n            docRef = doc(db, 'products', result.code);\n            updateData = result.data;\n        }\n\n        currentBatch.set(docRef, updateData, { merge: true });\n        countInBatch++;\n        successCount++;\n\n        if (countInBatch >= BATCH_SIZE) {\n          batches.push(currentBatch);\n          currentBatch = writeBatch(db);\n          countInBatch = 0;\n        }\n      } catch (err) {\n        failCount++;\n        if (errors.length < 20) errors.push(err.message);\n      }\n    });\n\n    if (countInBatch > 0) batches.push(currentBatch);\n\n    const CONCURRENCY_LIMIT = 5;\n    \n    async function runBatches() {\n        const executing = [];\n        let completed = 0;\n        for (const batch of batches) {\n            const p = batch.commit().then(() => {\n                completed++;\n                const percent = 10 + Math.floor((completed / batches.length) * 90);\n                if (onProgress) onProgress({ phase: 'Uploading', percent, total, success: successCount, failed: failCount, errors });\n            });\n            executing.push(p);\n            if (executing.length >= CONCURRENCY_LIMIT) await Promise.race(executing);\n        }\n        await Promise.all(executing);\n    }\n\n    await runBatches();\n    if (onProgress) onProgress({ phase: 'Done', percent: 100, total, success: successCount, failed: failCount, errors });\n    return { success: successCount, failed: failCount, time: Date.now() - startTime };\n  },\n\n  // [FIX] Alias for backward compatibility\n  uploadMasterDataOptimized: async (file, onProgress) => {\n    return posService.uploadFileOptimized(file, 'MASTER', onProgress);\n  },\n\n  // --- LEGACY ---\n  createOrder: async (orderData) => { const { addDoc, collection, serverTimestamp } = await import('firebase/firestore'); const docRef = await addDoc(collection(db, 'invoices'), { ...orderData, createdAt: serverTimestamp(), status: 'paid' }); return docRef.id; }\n};\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\src\\services\\promotionEngine.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\src\\utils\\cn.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\src\\utils\\sound.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\pos-gem\\vite.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\rebuild_src.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\setup_project.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\shared\\constants.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\App.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,23],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AppRouter' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"AppRouter"},"fix":{"range":[33,80],"text":""},"desc":"Remove unused variable 'AppRouter'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { AppRouter } from \"@/router/AppRouter\";\r\n\r\nexport default function App() {\r\n  return <AppRouter />;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\AppAuth.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,18],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ExistingApp' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"ExistingApp"},"fix":{"range":[34,51],"text":""},"desc":"Remove unused variable 'ExistingApp'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport ExistingApp from \"./App\";\n\nexport default function AppAuth() {\n  return <ExistingApp />;\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\AppShell.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\auth.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\AdminSettings.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Upload' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"Upload"},"fix":{"range":[91,98],"text":""},"desc":"Remove unused variable 'Upload'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Database' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"Database"},"fix":{"range":[97,107],"text":""},"desc":"Remove unused variable 'Database'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'FileText' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"FileText"},"fix":{"range":[107,117],"text":""},"desc":"Remove unused variable 'FileText'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle"},"fix":{"range":[117,130],"text":""},"desc":"Remove unused variable 'CheckCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":62,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertCircle"},"fix":{"range":[130,143],"text":""},"desc":"Remove unused variable 'AlertCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'RefreshCw' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":64,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":73,"suggestions":[{"messageId":"removeVar","data":{"varName":"RefreshCw"},"fix":{"range":[143,154],"text":""},"desc":"Remove unused variable 'RefreshCw'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ArrowLeft' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":75,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":84,"suggestions":[{"messageId":"removeVar","data":{"varName":"ArrowLeft"},"fix":{"range":[154,165],"text":""},"desc":"Remove unused variable 'ArrowLeft'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Trash2' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":86,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":92,"suggestions":[{"messageId":"removeVar","data":{"varName":"Trash2"},"fix":{"range":[165,173],"text":""},"desc":"Remove unused variable 'Trash2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Lock' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":94,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":98,"suggestions":[{"messageId":"removeVar","data":{"varName":"Lock"},"fix":{"range":[173,179],"text":""},"desc":"Remove unused variable 'Lock'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Search' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":100,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":106,"suggestions":[{"messageId":"removeVar","data":{"varName":"Search"},"fix":{"range":[179,187],"text":""},"desc":"Remove unused variable 'Search'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'HelpCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":108,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":118,"suggestions":[{"messageId":"removeVar","data":{"varName":"HelpCircle"},"fix":{"range":[187,199],"text":""},"desc":"Remove unused variable 'HelpCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'UploadCard' is defined but never used. Allowed unused vars must match /^_/u.","line":257,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":257,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"UploadCard"},"fix":{"range":[11104,14143],"text":""},"desc":"Remove unused variable 'UploadCard'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport Papa from 'papaparse';\nimport { Upload, Database, FileText, CheckCircle, AlertCircle, RefreshCw, ArrowLeft, Trash2, Lock, Search, HelpCircle } from 'lucide-react';\nimport { posService } from '../services/posService';\nimport { cn } from '../utils/cn';\n\nexport default function AdminSettings({ onBack }) {\n  const [stats, setStats] = useState({ count: 0, lastUpdated: null });\n  const [hasMaster, setHasMaster] = useState(false);\n  \n  // Universal Search State\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [isSearching, setIsSearching] = useState(false);\n\n  // Upload States\n  const [uploadStatus, setUploadStatus] = useState({\n    master: { loading: false, progress: 0, log: null },\n    print: { loading: false, progress: 0, log: null },\n    maint: { loading: false, progress: 0, log: null }\n  });\n\n  useEffect(() => { loadStats(); }, []);\n\n  // Universal Search Handler\n  useEffect(() => {\n    const delayDebounceFn = setTimeout(async () => {\n      if (searchTerm.length >= 2) {\n        setIsSearching(true);\n        try {\n          const results = await posService.searchProducts(searchTerm);\n          setSearchResults(results);\n        } catch (error) {\n          console.error(\"Search failed:\", error);\n          setSearchResults([]);\n        } finally {\n          setIsSearching(false);\n        }\n      } else {\n        setSearchResults([]);\n      }\n    }, 500);\n\n    return () => clearTimeout(delayDebounceFn);\n  }, [searchTerm]);\n\n  const loadStats = async () => {\n    const s = await posService.getProductStats();\n    setStats(s);\n    setHasMaster(s.count > 0);\n  };\n\n  // 1. Handle ProductAllDept (CSV)\n  const handleMasterUpload = (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n    updateStatus('master', { loading: true, progress: 0, log: null });\n\n    Papa.parse(file, {\n      header: true, skipEmptyLines: true, worker: true,\n      complete: async (results) => {\n        try {\n          const data = results.data;\n          if (data.length === 0) throw new Error('‡πÑ‡∏ü‡∏•‡πå‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤');\n          \n          const count = await posService.uploadProductAllDept(data, (curr, total) => {\n            updateStatus('master', { progress: Math.round((curr/total)*100) });\n          });\n          \n          updateStatus('master', { loading: false, log: { type: 'success', msg: '‚úÖ Upload Complete: ' + count } });\n          loadStats();\n        } catch (err) {\n          updateStatus('master', { loading: false, log: { type: 'error', msg: err.message } });\n        }\n      },\n      error: () => updateStatus('master', { loading: false, log: { type: 'error', msg: 'Read CSV Failed' } })\n    });\n    e.target.value = '';\n  };\n\n  // 2. Handle ItemMasterPrintOnDeph (XLS)\n  const handlePrintUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n    updateStatus('print', { loading: true, progress: 0, log: null });\n    \n    try {\n      const count = await posService.uploadItemMasterPrint(file, (curr, total) => {\n         updateStatus('print', { progress: Math.round((curr/total)*100) });\n      });\n      updateStatus('print', { loading: false, log: { type: 'success', msg: '‚úÖ Updated ' + count + ' matched items' } });\n    } catch (err) {\n      updateStatus('print', { loading: false, log: { type: 'error', msg: err.message } });\n    }\n    e.target.value = '';\n  };\n\n  // 3. Handle ItemMaintananceEvent (XLS)\n  const handleMaintUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n    updateStatus('maint', { loading: true, progress: 0, log: null });\n\n    try {\n      const count = await posService.uploadItemMaintenance(file, (curr, total) => {\n         updateStatus('maint', { progress: Math.round((curr/total)*100) });\n      });\n      updateStatus('maint', { loading: false, log: { type: 'success', msg: '‚úÖ Updated ' + count + ' matched items' } });\n    } catch (err) {\n      updateStatus('maint', { loading: false, log: { type: 'error', msg: err.message } });\n    }\n    e.target.value = '';\n  };\n\n  const updateStatus = (key, val) => {\n    setUploadStatus(prev => ({ ...prev, [key]: { ...prev[key], ...val } }));\n  };\n\n  const handleClearDatabase = async () => {\n    if (!window.confirm('‚ö†Ô∏è ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?')) return;\n    updateStatus('master', { loading: true, log: { type: 'info', msg: 'Deleting...' } });\n    await posService.clearDatabase();\n    updateStatus('master', { loading: false, log: { type: 'success', msg: 'Deleted All' } });\n    loadStats();\n  };\n\n  return (\n    <div className=\"min-h-screen bg-slate-100 p-6 font-sans\">\n      <div className=\"max-w-5xl mx-auto space-y-6\">\n        \n        {/* Header Section */}\n        <div className=\"flex justify-between items-center bg-white p-4 rounded-xl shadow-sm\">\n          <div className=\"flex items-center gap-4\">\n            <button onClick={onBack} className=\"p-2 bg-slate-50 hover:bg-slate-100 rounded-full transition-colors\"><ArrowLeft size={24} className=\"text-slate-600\" /></button>\n            <div>\n              <h1 className=\"text-2xl font-bold text-boots-base\">Data Management Center</h1>\n              <p className=\"text-sm text-slate-500\">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-4 bg-slate-50 px-5 py-3 rounded-xl border border-slate-100\">\n             <div className=\"flex flex-col items-end\">\n                <span className=\"text-xs font-bold text-slate-400 uppercase tracking-wider\">Total Items</span>\n                <span className=\"font-bold text-slate-800 text-xl\">{stats.count.toLocaleString()}</span>\n             </div>\n             <a\n               href=\"/readme.html\"\n               target=\"_blank\"\n               rel=\"noreferrer\"\n               className=\"inline-flex items-center justify-center h-9 w-9 rounded-full bg-white/70 backdrop-blur border border-white/60 text-slate-500 hover:text-boots-base hover:bg-white/90 transition-colors shadow-sm\"\n               aria-label=\"Open readme menu\"\n               title=\"Readme menu\"\n             >\n               <HelpCircle size={18} />\n             </a>\n             <Database size={24} className=\"text-blue-500\"/>\n             {hasMaster && <button onClick={handleClearDatabase} className=\"ml-4 text-red-400 hover:text-red-600 hover:bg-red-50 p-2 rounded-lg transition-colors\"><Trash2 size={20}/></button>}\n          </div>\n        </div>\n\n        {/* Universal Search Section */}\n        <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-slate-100\">\n            <h2 className=\"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2\">\n                <Search size={20} className=\"text-boots-base\" /> Universal Search\n            </h2>\n            <div className=\"relative\">\n                <input \n                    type=\"text\" \n                    placeholder=\"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢ ‡∏ä‡∏∑‡πà‡∏≠, ‡∏£‡∏´‡∏±‡∏™, ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î...\" \n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"w-full pl-12 pr-4 py-3 rounded-xl border-2 border-slate-200 focus:border-boots-base outline-none transition-colors text-lg\"\n                />\n                <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400\" size={24} />\n                {isSearching && <div className=\"absolute right-4 top-1/2 -translate-y-1/2\"><RefreshCw className=\"animate-spin text-boots-base\" size={20} /></div>}\n            </div>\n            \n            {/* Search Results */}\n            {searchTerm.length >= 2 && (\n                <div className=\"mt-4 border rounded-xl overflow-hidden shadow-sm\">\n                    <table className=\"w-full text-left border-collapse\">\n                        <thead className=\"bg-slate-50 text-slate-500 text-sm uppercase\">\n                            <tr>\n                                <th className=\"p-3 border-b\">SKU</th>\n                                <th className=\"p-3 border-b\">Description</th>\n                                <th className=\"p-3 border-b text-right\">Price</th>\n                                <th className=\"p-3 border-b text-center\">Status</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {searchResults.length > 0 ? (\n                                searchResults.map((item) => (\n                                    <tr key={item.sku} className=\"border-b last:border-0 hover:bg-blue-50 transition-colors\">\n                                        <td className=\"p-3 font-mono text-sm text-slate-600\">{item.sku}</td>\n                                        <td className=\"p-3 font-medium text-slate-800\">{item.name}</td>\n                                        <td className=\"p-3 text-right font-bold text-slate-700\">‡∏ø{item.price.toLocaleString()}</td>\n                                        <td className=\"p-3 text-center\">\n                                            <span className=\"bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full font-bold\">Active</span>\n                                        </td>\n                                    </tr>\n                                ))\n                            ) : (\n                                <tr>\n                                    <td colSpan=\"4\" className=\"p-8 text-center text-slate-400\">\n                                        {isSearching ? 'Searching...' : '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤'}\n                                    </td>\n                                </tr>\n                            )}\n                        </tbody>\n                    </table>\n                </div>\n            )}\n        </div>\n\n        {/* Upload Cards Grid */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          \n          {/* Card 1: ProductAllDept */}\n          <UploadCard \n            title=\"1. ProductAllDept\" \n            desc=\"Master File (.csv) - Contains core product data. Upload this first.\" \n            accept=\".csv\"\n            status={uploadStatus.master}\n            onChange={handleMasterUpload}\n            icon={<FileText size={32} />}\n            active={true}\n            required={!hasMaster}\n          />\n\n          {/* Card 2: ItemMasterPrintOnDeph */}\n          <UploadCard \n            title=\"2. ItemMasterPrintOnDeph\" \n            desc=\"Enrich Data (.xls) - Additional details for printing and display.\" \n            accept=\".xls,.xlsx\"\n            status={uploadStatus.print}\n            onChange={handlePrintUpload}\n            icon={<FileText size={32} />}\n            active={hasMaster}\n          />\n\n          {/* Card 3: ItemMaintananceEvent */}\n          <UploadCard \n            title=\"3. ItemMaintananceEvent\" \n            desc=\"Maintenance Data (.xls) - Update specific event triggers.\" \n            accept=\".xls,.xlsx\"\n            status={uploadStatus.maint}\n            onChange={handleMaintUpload}\n            icon={<FileText size={32} />}\n            active={hasMaster}\n          />\n\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction UploadCard({ title, desc, accept, status, onChange, icon, active, required }) {\n  return (\n    <div className={cn(\"bg-white rounded-2xl shadow-sm border overflow-hidden relative transition-all h-full flex flex-col\", active ? \"border-slate-200 hover:shadow-md hover:border-blue-200\" : \"border-slate-100 opacity-60 grayscale\")}>\n      {!active && (\n        <div className=\"absolute inset-0 z-10 bg-slate-100/50 flex flex-col items-center justify-center text-slate-400 backdrop-blur-[1px]\">\n          <Lock size={32} className=\"mb-2\" />\n          <span className=\"text-sm font-semibold\">Waiting for Master Data</span>\n        </div>\n      )}\n      \n      <div className=\"p-6 border-b border-slate-50 flex justify-between items-start bg-slate-50/50\">\n        <div>\n          <h3 className=\"text-lg font-bold text-slate-800\">{title}</h3>\n          {required && <span className=\"text-[10px] bg-red-100 text-red-600 px-2 py-0.5 rounded-full mt-1 inline-block font-bold\">REQUIRED FIRST</span>}\n        </div>\n        <div className={cn(\"w-12 h-12 rounded-xl flex items-center justify-center shadow-sm\", active ? \"bg-white text-boots-base border border-blue-100\" : \"bg-slate-100 text-slate-400\")}>{icon}</div>\n      </div>\n\n      <div className=\"p-6 flex-1 flex flex-col\">\n        <p className=\"text-sm text-slate-500 mb-6 flex-1\">{desc}</p>\n        \n        {!status.loading ? (\n          <div className=\"relative group cursor-pointer\">\n            <input type=\"file\" accept={accept} onChange={onChange} disabled={!active} className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20\" />\n            <div className=\"border-2 border-dashed border-slate-300 rounded-xl p-6 text-center group-hover:bg-blue-50 group-hover:border-blue-300 transition-all bg-slate-50\">\n              <Upload size={24} className=\"mx-auto text-slate-400 mb-2 group-hover:text-blue-500\" />\n              <span className=\"text-sm font-bold text-slate-600 group-hover:text-blue-600\">Click to Upload</span>\n              <div className=\"text-xs text-slate-400 mt-1\">{accept}</div>\n            </div>\n          </div>\n        ) : (\n          <div className=\"py-8 text-center bg-slate-50 rounded-xl border border-slate-100\">\n            <RefreshCw size={24} className=\"mx-auto animate-spin text-boots-base mb-3\" />\n            <div className=\"text-2xl font-bold text-slate-800\">{status.progress}%</div>\n            <div className=\"text-xs text-slate-500 mt-1\">Processing data...</div>\n          </div>\n        )}\n\n        {status.log && (\n          <div className={cn(\"mt-4 p-3 rounded-lg text-xs flex items-center gap-2 animate-in slide-in-from-bottom-2\", status.log.type === 'success' ? \"bg-green-50 text-green-700 border border-green-100\" : \"bg-red-50 text-red-700 border border-red-100\")}>\n            {status.log.type === 'success' ? <CheckCircle size={16} className=\"shrink-0\"/> : <AlertCircle size={16} className=\"shrink-0\"/>}\n            <span className=\"font-medium\">{status.log.msg}</span>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\ClockWidget.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\n\nexport default function ClockWidget() {\n  const [time, setTime] = useState(() => new Date());\n\n  useEffect(() => {\n    const timer = setInterval(() => setTime(new Date()), 1000);\n    return () => clearInterval(timer);\n  }, []);\n\n  const formatPart = (num) => num.toString().padStart(2, '0');\n\n  // Unity Theme: Glass capsule style\n  return (\n    <div className=\"flex items-center gap-3 px-4 py-2 rounded-xl bg-white/50 dark:bg-black/20 border border-slate-200/60 dark:border-white/10 backdrop-blur-md shadow-sm select-none\">\n      <div className=\"flex flex-col items-end leading-none\">\n        <span className=\"text-[10px] uppercase font-bold text-slate-400 dark:text-slate-500 tracking-wider\">\n          {time.toLocaleDateString('en-GB', { weekday: 'short' })}\n        </span>\n        <span className=\"text-xs font-semibold text-slate-600 dark:text-slate-300\">\n          {time.toLocaleDateString('en-GB', { day: '2-digit', month: 'short' })}\n        </span>\n      </div>\n\n      <div className=\"h-8 w-[1px] bg-slate-200 dark:bg-white/10\"></div>\n\n      <div className=\"flex items-baseline gap-0.5 font-mono text-xl font-bold text-slate-700 dark:text-white\">\n        <span>{formatPart(time.getHours())}</span>\n        <span className=\"animate-pulse text-blue-500\">:</span>\n        <span>{formatPart(time.getMinutes())}</span>\n        <span className=\"text-sm text-slate-400 dark:text-slate-500 ml-1 font-medium\">\n          {formatPart(time.getSeconds())}\n        </span>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\DailyReportModal.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"X"},"fix":{"range":[74,76],"text":""},"desc":"Remove unused variable 'X'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Calendar' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"Calendar"},"fix":{"range":[75,85],"text":""},"desc":"Remove unused variable 'Calendar'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Printer' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"Printer"},"fix":{"range":[85,94],"text":""},"desc":"Remove unused variable 'Printer'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Search' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"Search"},"fix":{"range":[94,102],"text":""},"desc":"Remove unused variable 'Search'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Trash2' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"Trash2"},"fix":{"range":[102,110],"text":""},"desc":"Remove unused variable 'Trash2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ChevronDown' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":59,"suggestions":[{"messageId":"removeVar","data":{"varName":"ChevronDown"},"fix":{"range":[110,123],"text":""},"desc":"Remove unused variable 'ChevronDown'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ChevronUp' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":61,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":70,"suggestions":[{"messageId":"removeVar","data":{"varName":"ChevronUp"},"fix":{"range":[123,134],"text":""},"desc":"Remove unused variable 'ChevronUp'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"Ôªøimport React, { useState, useEffect, useCallback } from 'react';\nimport { X, Calendar, Printer, Search, Trash2, ChevronDown, ChevronUp } from 'lucide-react';\nimport { posService } from '../services/posService';\nimport { cn } from '../utils/cn';\nimport JsBarcode from 'jsbarcode';\n\nexport default function DailyReportModal({ onClose }) {\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [expandedRow, setExpandedRow] = useState(null);\n  const [summary, setSummary] = useState({ totalSales: 0, totalVoid: 0, count: 0, totalItems: 0, totalDiscount: 0 });\n\n  // Filter States (Default to Bangkok Today)\n  const getBangkokDate = () => {\n    // Returns YYYY-MM-DD in Bangkok timezone\n    const d = new Date().toLocaleString('en-CA', { timeZone: 'Asia/Bangkok' });\n    return d.split(',')[0]; \n  };\n\n  const [selectedDate, setSelectedDate] = useState(getBangkokDate());\n  const [startTime, setStartTime] = useState('00:00');\n  const [endTime, setEndTime] = useState('23:59');\n\n  useEffect(() => { loadData(); }, [loadData]);\n\n  // Generate barcodes (optimized with cleanup)\n  useEffect(() => {\n    if (orders.length === 0) return;\n\n    // Debounce to prevent excessive re-renders\n    const timer = setTimeout(() => {\n      orders.forEach((order) => {\n        order.items?.forEach((item, index) => {\n          try {\n            const barcodeValue = item.barcode || item.sku;\n            if (!barcodeValue || barcodeValue === '-') return;\n\n            const canvasId = `barcode-${order.id}-${index}`;\n            const canvas = document.getElementById(canvasId);\n            \n            if (canvas && canvas.getContext) {\n              // Clear previous barcode\n              const ctx = canvas.getContext('2d');\n              ctx.clearRect(0, 0, canvas.width, canvas.height);\n              \n              // Generate new barcode\n              JsBarcode(canvas, barcodeValue, {\n                format: 'CODE128',\n                width: 1,\n                height: 20,\n                displayValue: false,\n                margin: 0,\n                background: 'transparent'\n              });\n            }\n          } catch (err) {\n            console.error(`Barcode generation failed for ${item.sku}:`, err.message);\n          }\n        });\n      });\n    }, 100); // 100ms debounce\n\n    // Cleanup\n    return () => clearTimeout(timer);\n  }, [orders]);\n\n  const loadData = useCallback(async () => {\n    setLoading(true);\n    setExpandedRow(null);\n    try {\n        // Validate date inputs\n        if (!selectedDate || !startTime || !endTime) {\n          throw new Error('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');\n        }\n\n        const start = new Date(`${selectedDate}T${startTime}:00`);\n        const end = new Date(`${selectedDate}T${endTime}:59`);\n        \n        // Validate date objects\n        if (isNaN(start.getTime()) || isNaN(end.getTime())) {\n          throw new Error('‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');\n        }\n\n        if (start > end) {\n          throw new Error('‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î');\n        }\n\n        const data = await posService.getSalesReport(start, end);\n        \n        // Validate response data\n        if (!Array.isArray(data)) {\n          console.warn('Invalid data format received:', data);\n          setOrders([]);\n          setSummary({ totalSales: 0, totalVoid: 0, count: 0, totalItems: 0, totalDiscount: 0 });\n          return;\n        }\n\n        setOrders(data);\n        \n        // --- Calculate Summary with validation ---\n        const validOrders = data.filter(o => o && o.status !== 'void' && o.summary);\n        \n        const totalSales = validOrders.reduce((sum, o) => {\n          const subtotal = Number(o.summary?.subtotal);\n          return sum + (isNaN(subtotal) ? 0 : subtotal);\n        }, 0);\n\n        const totalItems = validOrders.reduce((sum, o) => {\n          const items = Number(o.summary?.totalItems);\n          return sum + (isNaN(items) ? 0 : items);\n        }, 0);\n        \n        const totalDiscount = validOrders.reduce((sum, o) => {\n            const billDiscount = (o.items || []).reduce((isum, item) => {\n                const price = Number(item.price) || 0;\n                const qty = Number(item.qty) || 0;\n                const normalTotal = price * qty;\n                const soldTotal = item.calculatedTotal !== undefined ? Number(item.calculatedTotal) || 0 : normalTotal;\n                return isum + Math.max(0, normalTotal - soldTotal); // Prevent negative discounts\n            }, 0);\n            const orderDiscount = Number(o.summary?.discount) || 0;\n            return sum + billDiscount + orderDiscount;\n        }, 0);\n        \n        setSummary({ \n          totalSales: Math.max(0, totalSales), \n          totalVoid: 0, \n          count: validOrders.length, \n          totalItems: Math.max(0, totalItems), \n          totalDiscount: Math.max(0, totalDiscount) \n        });\n    } catch (err) { \n      console.error(\"Report Error:\", err); \n      alert(`‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${err.message}`);\n      setOrders([]);\n      setSummary({ totalSales: 0, totalVoid: 0, count: 0, totalItems: 0, totalDiscount: 0 });\n    } finally {\n        setLoading(false);\n    }\n  }, [selectedDate, startTime, endTime]);\n\n  const handleVoid = async (orderId) => {\n    if (!window.confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏ö‡∏¥‡∏•‡∏ô‡∏µ‡πâ?')) return;\n    try { await posService.voidInvoice(orderId, 'User Cancelled'); loadData(); } catch (e) { alert(e.message); }\n  };\n\n  const toggleRow = (id) => { setExpandedRow(expandedRow === id ? null : id); };\n  const handlePrint = () => { window.print(); };\n\n  return (\n    <>\n      {/* üü¢ PRINT STYLING - NOTO SANS THAI */}\n      <style>{`\n        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700&display=swap');\n        \n        #print-section { display: none; }\n        \n        @media print {\n          @page { \n            margin: 1.5cm 1cm; \n            size: A4 portrait; \n          }\n          \n          body * { \n            visibility: hidden; \n          }\n          \n          #print-section, #print-section * { \n            visibility: visible !important; \n            color: #1a1a1a !important;\n            font-family: 'Noto Sans Thai', sans-serif !important;\n          }\n          \n          #print-section { \n            display: block !important; \n            position: fixed; \n            left: 0; \n            top: 0; \n            width: 100%; \n            height: 100%; \n            background: white !important; \n            z-index: 99999;\n            padding: 20px 30px;\n          }\n          \n          .modal-overlay { \n            display: none !important; \n          }\n          \n          /* Print-specific styling */\n          .print-header {\n            border-bottom: 3px solid #2563eb;\n            padding-bottom: 12px;\n            margin-bottom: 20px;\n          }\n          \n          .print-summary-box {\n            background: #f8fafc !important;\n            border: 1px solid #cbd5e1 !important;\n            border-radius: 8px;\n            padding: 12px 16px;\n            margin-bottom: 20px;\n          }\n          \n          .print-table th {\n            background: #f1f5f9 !important;\n            font-weight: 600;\n            padding: 10px 8px;\n          }\n          \n          .print-table td {\n            padding: 8px;\n          }\n          \n          .print-barcode {\n            opacity: 0.7;\n          }\n          \n          .print-footer-total {\n            background: #f8fafc !important;\n            font-weight: 700;\n          }\n        }\n      `}</style>\n\n      {/* --- SCREEN VIEW --- */}\n      <div className=\"modal-overlay fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-in fade-in duration-200 print:hidden font-sans\">\n        <div className=\"bg-white w-[95vw] h-[95vh] max-w-7xl rounded-2xl shadow-2xl overflow-hidden flex flex-col relative\">\n          \n          {/* Header */}\n          <div className=\"bg-slate-900 text-white p-6 shrink-0\">\n            <div className=\"flex justify-between items-start mb-6\">\n              <div className=\"flex items-center gap-4\">\n                <div className=\"p-3 bg-slate-800 rounded-xl\"><Calendar size={28} /></div>\n                <div><h2 className=\"text-2xl font-bold font-kanit\">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢</h2><p className=\"text-slate-400 text-sm\">Summary Sales Report</p></div>\n              </div>\n              <button onClick={onClose} className=\"p-2 hover:bg-slate-700 rounded-full\"><X size={24} /></button>\n            </div>\n\n            {/* Filters */}\n            <div className=\"bg-slate-800 p-4 rounded-xl border border-slate-700\">\n               <div className=\"flex flex-wrap items-end gap-4\">\n                   <div>\n                       <label className=\"text-xs text-slate-400 mb-1 block font-bold\">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (Date)</label>\n                       <input type=\"date\" value={selectedDate} onChange={(e) => setSelectedDate(e.target.value)} className=\"bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2 text-sm h-10\"/>\n                   </div>\n                   <div>\n                       <label className=\"text-xs text-slate-400 mb-1 block font-bold\">‡πÄ‡∏£‡∏¥‡πà‡∏° (Start)</label>\n                       <input type=\"time\" value={startTime} onChange={(e) => setStartTime(e.target.value)} className=\"bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2 text-sm h-10\"/>\n                   </div>\n                   <div>\n                       <label className=\"text-xs text-slate-400 mb-1 block font-bold\">‡∏ñ‡∏∂‡∏á (End)</label>\n                       <input type=\"time\" value={endTime} onChange={(e) => setEndTime(e.target.value)} className=\"bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2 text-sm h-10\"/>\n                   </div>\n                   <button onClick={loadData} disabled={loading} className=\"bg-blue-600 hover:bg-blue-500 text-white px-6 h-10 rounded-lg text-sm font-bold flex items-center gap-2 transition-all\">\n                       {loading ? '...' : <><Search size={16} /> ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</>}\n                   </button>\n                   <div className=\"flex-1 text-right\">\n                       <button onClick={handlePrint} disabled={orders.length === 0} className=\"bg-white text-slate-900 hover:bg-slate-100 border border-slate-200 px-6 h-10 rounded-lg text-sm font-bold inline-flex items-center gap-2 transition-all shadow-sm\">\n                           <Printer size={16} /> ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô\n                       </button>\n                   </div>\n               </div>\n            </div>\n          </div>\n\n          {/* Summary Cards */}\n          <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4 p-6 bg-slate-50 border-b border-slate-200 shrink-0\">\n             <div className=\"bg-white p-4 rounded-xl border border-slate-200 shadow-sm\"><div className=\"text-slate-500 text-xs font-bold mb-1\">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ö‡∏¥‡∏•</div><div className=\"text-2xl font-bold text-slate-800\">{summary.count}</div></div>\n             <div className=\"bg-white p-4 rounded-xl border border-slate-200 shadow-sm\"><div className=\"text-slate-500 text-xs font-bold mb-1\">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</div><div className=\"text-2xl font-bold text-slate-800\">{summary.totalItems}</div></div>\n             <div className=\"bg-white p-4 rounded-xl border border-slate-200 shadow-sm\"><div className=\"text-slate-500 text-xs font-bold mb-1\">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°</div><div className=\"text-2xl font-bold text-blue-600\">‡∏ø{(summary.totalSales + summary.totalDiscount).toLocaleString()}</div></div>\n             <div className=\"bg-white p-4 rounded-xl border border-slate-200 shadow-sm\"><div className=\"text-slate-500 text-xs font-bold mb-1\">‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏£‡∏ß‡∏°</div><div className=\"text-2xl font-bold text-red-500\">-‡∏ø{summary.totalDiscount.toLocaleString()}</div></div>\n             <div className=\"bg-white p-4 rounded-xl border border-green-200 bg-green-50 shadow-sm\"><div className=\"text-green-700 text-xs font-bold mb-1\">‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥ (Net)</div><div className=\"text-2xl font-bold text-green-700\">‡∏ø{summary.totalSales.toLocaleString()}</div></div>\n          </div>\n\n          {/* Table */}\n          <div className=\"flex-1 overflow-y-auto p-6 bg-slate-100\">\n              <div className=\"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden\">\n                <table className=\"w-full text-sm text-left\">\n                  <thead className=\"bg-slate-50 text-slate-500 font-bold uppercase tracking-wider border-b border-slate-200 sticky top-0\">\n                    <tr>\n                      <th className=\"p-4 w-10\"></th>\n                      <th className=\"p-4\">‡πÄ‡∏ß‡∏•‡∏≤</th>\n                      <th className=\"p-4\">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏•</th>\n                      <th className=\"p-4 text-center\">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>\n                      <th className=\"p-4 text-right\">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</th>\n                      <th className=\"p-4 text-center\">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>\n                      <th className=\"p-4 text-center\">Action</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-slate-100\">\n                    {orders.map((order) => (\n                      <React.Fragment key={order.id}>\n                        <tr className={cn(\"hover:bg-slate-50 cursor-pointer transition-colors\", expandedRow === order.id && \"bg-blue-50/50\")} onClick={() => toggleRow(order.id)}>\n                          <td className=\"p-4 text-center\">{expandedRow === order.id ? <ChevronUp size={16}/> : <ChevronDown size={16}/>}</td>\n                          <td className=\"p-4 text-slate-600\">{order.timestamp.toLocaleTimeString('th-TH', { hour: '2-digit', minute: '2-digit' })}</td>\n                          <td className=\"p-4 font-mono font-medium\">{order.id.slice(0, 8)}...</td>\n                          <td className=\"p-4 text-center\"><span className=\"bg-slate-100 px-2 py-1 rounded-full text-xs font-bold\">{order.summary?.totalItems}</span></td>\n                          <td className=\"p-4 text-right font-bold text-slate-800\">‡∏ø{(order.summary?.subtotal || 0).toLocaleString()}</td>\n                          <td className=\"p-4 text-center\">{order.status === 'void' ? <span className=\"text-red-600 font-bold text-xs bg-red-100 px-2 py-1 rounded\">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</span> : <span className=\"text-green-600 font-bold text-xs bg-green-100 px-2 py-1 rounded\">‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</span>}</td>\n                          <td className=\"p-4 text-center\">{order.status !== 'void' && <button onClick={(e) => { e.stopPropagation(); handleVoid(order.id); }} className=\"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded\"><Trash2 size={16}/></button>}</td>\n                        </tr>\n                        {expandedRow === order.id && (\n                          <tr>\n                            <td colSpan=\"7\" className=\"p-0\">\n                              <div className=\"bg-slate-50 p-4 border-b border-slate-100 shadow-inner\">\n                                <div className=\"bg-white rounded border border-slate-200 overflow-hidden\">\n                                  <table className=\"w-full text-xs\">\n                                    <thead className=\"bg-slate-100 text-slate-600 font-bold border-b border-slate-200\">\n                                      <tr>\n                                        <th className=\"p-2 text-left w-32\">‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>\n                                        <th className=\"p-2 text-left w-32\">‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î</th>\n                                        <th className=\"p-2 text-left\">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>\n                                        <th className=\"p-2 text-right\">‡∏£‡∏≤‡∏Ñ‡∏≤</th>\n                                        <th className=\"p-2 text-center\">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>\n                                        <th className=\"p-2 text-right text-red-500\">‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</th>\n                                        <th className=\"p-2 text-right\">‡∏£‡∏ß‡∏°</th>\n                                      </tr>\n                                    </thead>\n                                    <tbody className=\"divide-y divide-slate-50\">\n                                      {order.items?.map((item, i) => {\n                                         const normalTotal = (item.price * item.qty);\n                                         const finalTotal = item.calculatedTotal !== undefined ? item.calculatedTotal : normalTotal;\n                                         const discount = normalTotal - finalTotal;\n                                         return (\n                                            <tr key={i} className=\"hover:bg-slate-50\">\n                                              <td className=\"p-2 font-mono text-slate-500\">{item.sku}</td>\n                                              <td className=\"p-2 font-mono text-slate-500\">{item.barcode || '-'}</td>\n                                              <td className=\"p-2 font-medium\">{item.name || item.ProductDesc || item.sku}</td>\n                                              <td className=\"p-2 text-right\">{(item.price || 0).toLocaleString()}</td>\n                                              <td className=\"p-2 text-center font-bold\">{item.qty}</td>\n                                              <td className=\"p-2 text-right text-red-500\">{discount > 0 ? `-${discount.toLocaleString()}` : '-'}</td>\n                                              <td className=\"p-2 text-right font-bold\">{finalTotal.toLocaleString()}</td>\n                                            </tr>\n                                         );\n                                      })}\n                                    </tbody>\n                                  </table>\n                                </div>\n                              </div>\n                            </td>\n                          </tr>\n                        )}\n                      </React.Fragment>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n          </div>\n        </div>\n      </div>\n\n      {/* --- PRINT LAYOUT (MODERN DESIGN - NOTO SANS THAI) --- */}\n      <div id=\"print-section\" role=\"article\" aria-label=\"Daily Sales Report\">\n         {/* Header */}\n         <div className=\"print-header text-center\" role=\"banner\">\n            <h1 className=\"text-3xl font-bold mb-2\" style={{color: '#2563eb', letterSpacing: '-0.5px'}}>\n              ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢\n            </h1>\n            <p className=\"text-sm\" style={{color: '#64748b', fontWeight: '400'}}>\n              Daily Sales Report\n            </p>\n            <p className=\"text-xs mt-2\" style={{color: '#94a3b8'}} aria-label={`Report date: ${new Date(selectedDate).toLocaleDateString('th-TH')} from ${startTime} to ${endTime}`}>\n              ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: {new Date(selectedDate).toLocaleDateString('th-TH', { year: 'numeric', month: 'long', day: 'numeric' })} \n              {' '}| ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤: {startTime} - {endTime}\n            </p>\n         </div>\n\n         {/* Summary Box */}\n         <div className=\"print-summary-box\">\n            <div style={{display: 'grid', gridTemplateColumns: 'repeat(5, 1fr)', gap: '16px', fontSize: '11px'}}>\n               <div>\n                  <div style={{color: '#64748b', marginBottom: '4px', fontWeight: '500'}}>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ö‡∏¥‡∏•</div>\n                  <div style={{fontSize: '18px', fontWeight: '700', color: '#1e293b'}}>{summary.count}</div>\n               </div>\n               <div>\n                  <div style={{color: '#64748b', marginBottom: '4px', fontWeight: '500'}}>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</div>\n                  <div style={{fontSize: '18px', fontWeight: '700', color: '#1e293b'}}>{summary.totalItems}</div>\n               </div>\n               <div>\n                  <div style={{color: '#64748b', marginBottom: '4px', fontWeight: '500'}}>‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°</div>\n                  <div style={{fontSize: '18px', fontWeight: '700', color: '#2563eb'}}>\n                    ‡∏ø{(summary.totalSales + summary.totalDiscount).toLocaleString()}\n                  </div>\n               </div>\n               <div>\n                  <div style={{color: '#64748b', marginBottom: '4px', fontWeight: '500'}}>‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</div>\n                  <div style={{fontSize: '18px', fontWeight: '700', color: '#dc2626'}}>\n                    -‡∏ø{summary.totalDiscount.toLocaleString()}\n                  </div>\n               </div>\n               <div style={{borderLeft: '2px solid #cbd5e1', paddingLeft: '16px'}}>\n                  <div style={{color: '#64748b', marginBottom: '4px', fontWeight: '500'}}>‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</div>\n                  <div style={{fontSize: '20px', fontWeight: '700', color: '#059669'}}>\n                    ‡∏ø{summary.totalSales.toLocaleString()}\n                  </div>\n               </div>\n            </div>\n         </div>\n\n         {/* Table */}\n         <table className=\"print-table\" style={{width: '100%', borderCollapse: 'collapse', fontSize: '11px'}}>\n            <thead>\n               <tr style={{borderBottom: '2px solid #cbd5e1'}}>\n                  <th style={{textAlign: 'left', width: '60px', color: '#475569'}}>‡πÄ‡∏ß‡∏•‡∏≤</th>\n                  <th style={{textAlign: 'left', width: '80px', color: '#475569'}}>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏•</th>\n                  <th style={{textAlign: 'left', color: '#475569'}}>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>\n                  <th style={{textAlign: 'right', width: '100px', color: '#475569'}}>‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</th>\n               </tr>\n            </thead>\n            <tbody>\n               {orders.map((order) => (\n                  <tr key={order.id} style={{borderBottom: '1px solid #e2e8f0'}}>\n                     <td style={{verticalAlign: 'top', paddingTop: '12px', color: '#64748b', fontSize: '10px'}}>\n                        {order.timestamp.toLocaleTimeString('th-TH', { hour: '2-digit', minute: '2-digit' })}\n                     </td>\n                     <td style={{verticalAlign: 'top', paddingTop: '12px'}}>\n                        <div style={{fontFamily: 'monospace', fontSize: '9px', color: '#94a3b8'}}>\n                          {order.id.slice(0, 8)}\n                        </div>\n                     </td>\n                     <td style={{paddingTop: '12px', paddingBottom: '12px'}}>\n                         {order.items.map((item, i) => {\n                            const normalTotal = (item.price || 0) * (item.qty || 0);\n                            const finalTotal = item.calculatedTotal !== undefined ? Number(item.calculatedTotal) : normalTotal;\n                            const itemDiscount = normalTotal - finalTotal;\n\n                            return (\n                               <div key={i} style={{\n                                 display: 'flex', \n                                 justifyContent: 'space-between', \n                                 alignItems: 'flex-start',\n                                 marginBottom: i < order.items.length - 1 ? '10px' : '0',\n                                 paddingBottom: i < order.items.length - 1 ? '10px' : '0',\n                                 borderBottom: i < order.items.length - 1 ? '1px dashed #e2e8f0' : 'none'\n                               }}>\n                                  <div style={{display: 'flex', gap: '12px', flex: 1}}>\n                                     {/* Barcode */}\n                                     <div style={{width: '55px', flexShrink: 0}}>\n                                        {(item.barcode && item.barcode !== '-') ? (\n                                          <canvas \n                                            id={`barcode-${order.id}-${i}`} \n                                            className=\"print-barcode\"\n                                            style={{width: '100%', height: '22px'}}\n                                          ></canvas>\n                                        ) : (\n                                          <div style={{\n                                            fontSize: '8px', \n                                            color: '#cbd5e1', \n                                            fontFamily: 'monospace',\n                                            textAlign: 'center',\n                                            padding: '4px 0'\n                                          }}>\n                                            {item.sku}\n                                          </div>\n                                        )}\n                                     </div>\n                                     \n                                     {/* Product Info */}\n                                     <div style={{flex: 1}}>\n                                        <div style={{\n                                          fontWeight: '600', \n                                          color: '#1e293b',\n                                          marginBottom: '3px',\n                                          fontSize: '11px'\n                                        }}>\n                                          {item.name || item.ProductDesc || item.sku}\n                                        </div>\n                                        <div style={{\n                                          fontSize: '9px', \n                                          color: '#64748b',\n                                          display: 'flex',\n                                          gap: '8px',\n                                          alignItems: 'center'\n                                        }}>\n                                          <span>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: {item.qty}</span>\n                                          <span>√ó</span>\n                                          <span>‡∏ø{(item.price || 0).toLocaleString()}</span>\n                                          {itemDiscount > 0 && (\n                                            <span style={{\n                                              color: '#dc2626',\n                                              background: '#fee2e2',\n                                              padding: '2px 6px',\n                                              borderRadius: '3px',\n                                              fontSize: '8px',\n                                              fontWeight: '600'\n                                            }}>\n                                              ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î -‡∏ø{itemDiscount.toLocaleString()}\n                                            </span>\n                                          )}\n                                        </div>\n                                     </div>\n                                     \n                                     {/* Item Total */}\n                                     <div style={{\n                                       textAlign: 'right',\n                                       fontWeight: '600',\n                                       color: '#334155',\n                                       fontSize: '11px',\n                                       minWidth: '70px'\n                                     }}>\n                                        ‡∏ø{finalTotal.toLocaleString()}\n                                     </div>\n                                  </div>\n                               </div>\n                            );\n                         })}\n                     </td>\n                     <td style={{\n                       verticalAlign: 'top', \n                       textAlign: 'right', \n                       paddingTop: '12px',\n                       fontWeight: '700',\n                       fontSize: '12px',\n                       color: '#1e293b'\n                     }}>\n                         ‡∏ø{(order.summary?.subtotal || 0).toLocaleString()}\n                         {order.status === 'void' && (\n                           <div style={{\n                             fontSize: '8px',\n                             color: '#dc2626',\n                             border: '1px solid #dc2626',\n                             display: 'inline-block',\n                             padding: '2px 6px',\n                             borderRadius: '3px',\n                             marginTop: '4px',\n                             fontWeight: '600'\n                           }}>\n                             VOID\n                           </div>\n                         )}\n                     </td>\n                  </tr>\n               ))}\n            </tbody>\n            <tfoot>\n               <tr style={{borderTop: '2px solid #cbd5e1'}}>\n                  <td colSpan=\"3\" style={{\n                    textAlign: 'right', \n                    padding: '10px 8px',\n                    color: '#64748b',\n                    fontSize: '11px',\n                    fontWeight: '500'\n                  }}>\n                    ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏±‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î\n                  </td>\n                  <td style={{\n                    textAlign: 'right',\n                    padding: '10px 8px',\n                    fontSize: '12px',\n                    fontWeight: '600'\n                  }}>\n                    ‡∏ø{(summary.totalSales + summary.totalDiscount).toLocaleString()}\n                  </td>\n               </tr>\n               <tr>\n                  <td colSpan=\"3\" style={{\n                    textAlign: 'right',\n                    padding: '8px',\n                    color: '#dc2626',\n                    fontSize: '11px',\n                    fontWeight: '500'\n                  }}>\n                    ‡∏´‡∏±‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\n                  </td>\n                  <td style={{\n                    textAlign: 'right',\n                    padding: '8px',\n                    color: '#dc2626',\n                    fontSize: '12px',\n                    fontWeight: '600'\n                  }}>\n                    -‡∏ø{summary.totalDiscount.toLocaleString()}\n                  </td>\n               </tr>\n               <tr className=\"print-footer-total\" style={{borderTop: '2px solid #2563eb'}}>\n                  <td colSpan=\"3\" style={{\n                    textAlign: 'right',\n                    padding: '12px 8px',\n                    fontSize: '13px',\n                    fontWeight: '700',\n                    color: '#1e293b'\n                  }}>\n                    ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô (Grand Total)\n                  </td>\n                  <td style={{\n                    textAlign: 'right',\n                    padding: '12px 8px',\n                    fontSize: '16px',\n                    fontWeight: '700',\n                    color: '#059669'\n                  }}>\n                    ‡∏ø{summary.totalSales.toLocaleString()}\n                  </td>\n               </tr>\n            </tfoot>\n         </table>\n         \n         {/* Footer */}\n         <div style={{\n           marginTop: '30px',\n           paddingTop: '15px',\n           borderTop: '1px solid #e2e8f0',\n           textAlign: 'center',\n           fontSize: '9px',\n           color: '#94a3b8'\n         }}>\n            <div>Boots POS System | Store 4340</div>\n            <div style={{marginTop: '4px'}}>\n              ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠: {new Date().toLocaleString('th-TH', { \n                year: 'numeric', \n                month: 'long', \n                day: 'numeric',\n                hour: '2-digit',\n                minute: '2-digit'\n              })}\n            </div>\n         </div>\n      </div>\n    </>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\DemoUI.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ShoppingCart' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"ShoppingCart"},"fix":{"range":[61,74],"text":""},"desc":"Remove unused variable 'ShoppingCart'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Search' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"Search"},"fix":{"range":[73,81],"text":""},"desc":"Remove unused variable 'Search'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ScanBarcode' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"ScanBarcode"},"fix":{"range":[81,94],"text":""},"desc":"Remove unused variable 'ScanBarcode'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'User' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"User"},"fix":{"range":[94,100],"text":""},"desc":"Remove unused variable 'User'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Trash2' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":57,"suggestions":[{"messageId":"removeVar","data":{"varName":"Trash2"},"fix":{"range":[100,108],"text":""},"desc":"Remove unused variable 'Trash2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Loader2' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":59,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":66,"suggestions":[{"messageId":"removeVar","data":{"varName":"Loader2"},"fix":{"range":[108,117],"text":""},"desc":"Remove unused variable 'Loader2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":68,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":79,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertCircle"},"fix":{"range":[117,130],"text":""},"desc":"Remove unused variable 'AlertCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":81,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":82,"suggestions":[{"messageId":"removeVar","data":{"varName":"X"},"fix":{"range":[130,133],"text":""},"desc":"Remove unused variable 'X'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Tag' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":84,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":87,"suggestions":[{"messageId":"removeVar","data":{"varName":"Tag"},"fix":{"range":[133,138],"text":""},"desc":"Remove unused variable 'Tag'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Package' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":89,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":96,"suggestions":[{"messageId":"removeVar","data":{"varName":"Package"},"fix":{"range":[138,147],"text":""},"desc":"Remove unused variable 'Package'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Box' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":98,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":101,"suggestions":[{"messageId":"removeVar","data":{"varName":"Box"},"fix":{"range":[147,152],"text":""},"desc":"Remove unused variable 'Box'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'MinusCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":103,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":114,"suggestions":[{"messageId":"removeVar","data":{"varName":"MinusCircle"},"fix":{"range":[152,165],"text":""},"desc":"Remove unused variable 'MinusCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'FileText' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":116,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":124,"suggestions":[{"messageId":"removeVar","data":{"varName":"FileText"},"fix":{"range":[165,175],"text":""},"desc":"Remove unused variable 'FileText'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Settings' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":126,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":134,"suggestions":[{"messageId":"removeVar","data":{"varName":"Settings"},"fix":{"range":[175,185],"text":""},"desc":"Remove unused variable 'Settings'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Hash' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":136,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":140,"suggestions":[{"messageId":"removeVar","data":{"varName":"Hash"},"fix":{"range":[185,191],"text":""},"desc":"Remove unused variable 'Hash'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Percent' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":142,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":149,"suggestions":[{"messageId":"removeVar","data":{"varName":"Percent"},"fix":{"range":[191,200],"text":""},"desc":"Remove unused variable 'Percent'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Ticket' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":151,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":157,"suggestions":[{"messageId":"removeVar","data":{"varName":"Ticket"},"fix":{"range":[200,208],"text":""},"desc":"Remove unused variable 'Ticket'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Gift' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":159,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":163,"suggestions":[{"messageId":"removeVar","data":{"varName":"Gift"},"fix":{"range":[208,214],"text":""},"desc":"Remove unused variable 'Gift'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":165,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":176,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle"},"fix":{"range":[214,227],"text":""},"desc":"Remove unused variable 'CheckCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ReceiptModal' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"ReceiptModal"},"fix":{"range":[396,414],"text":""},"desc":"Remove unused variable 'ReceiptModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ProductLookupModal' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"ProductLookupModal"},"fix":{"range":[439,463],"text":""},"desc":"Remove unused variable 'ProductLookupModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DailyReportModal' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"DailyReportModal"},"fix":{"range":[494,516],"text":""},"desc":"Remove unused variable 'DailyReportModal'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":23,"fixableErrorCount":0,"fixableWarningCount":0,"source":"Ôªøimport React, { useState, useEffect } from 'react';\nimport { ShoppingCart, Search, ScanBarcode, User, Trash2, Loader2, AlertCircle, X, Tag, Package, Box, MinusCircle, FileText, Settings, Hash, Percent, Ticket, Gift, CheckCircle } from 'lucide-react';\nimport { cn } from '../utils/cn';\nimport { useCart } from '../hooks/useCart';\nimport { useScanListener } from '../hooks/useScanListener';\nimport ReceiptModal from './ReceiptModal';\nimport ProductLookupModal from './ProductLookupModal';\nimport DailyReportModal from './DailyReportModal';\nimport { posService } from '../services/posService';\n\nexport default function PosUI({ onAdminSettings }) {\n  const { \n    cartItems, addToCart: originalAddToCart, decreaseItem, removeFromCart, clearCart, \n    summary, lastScanned, isLoading, error,\n    setManualItemDiscount, updateBillDiscount, billDiscount,\n    addCoupon, removeCoupon, coupons,\n    updateAllowance, allowance\n  } = useCart();\n\n  const [lastOrder, setLastOrder] = useState(null);\n  const [isSaving, setIsSaving] = useState(false);\n  const [isVoidMode, setIsVoidMode] = useState(false);\n  const [nextQty, setNextQty] = useState(1);\n\n  // Modal States\n  const [suggestions, setSuggestions] = useState([]);\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [showProductLookup, setShowProductLookup] = useState(false);\n  const [showReport, setShowReport] = useState(false);\n  const [showDiscountModal, setShowDiscountModal] = useState(false);\n\n  // Discount Modal Inner State\n  const [activeTab, setActiveTab] = useState('discount'); // discount, coupon, allowance\n  const [discountSubTab, setDiscountSubTab] = useState('bill'); // bill, items\n  \n  // Coupon Input State\n  const [couponInput, setCouponInput] = useState({ type: '', value: '', code: '' });\n  const [showCouponInput, setShowCouponInput] = useState(false); \n\n  // Helper for Button Animation\n  const btnEffect = \"active:scale-95 transition-transform duration-100 ease-in-out shadow-sm hover:shadow-md active:shadow-none select-none\";\n\n  const lastItemDetail = lastScanned ? cartItems.find(i => (i.sku === lastScanned || i.id === lastScanned)) : null;\n\n  // --- Handlers ---\n\n  const handleScanAction = async (skuOrItem) => {\n    if (showCouponInput) {\n        setCouponInput(prev => ({ ...prev, code: typeof skuOrItem === 'string' ? skuOrItem : skuOrItem.sku }));\n        return;\n    }\n    \n    const quantityToApply = nextQty;\n    \n    if (isVoidMode) {\n       const sku = typeof skuOrItem === 'string' ? skuOrItem : (skuOrItem.sku || skuOrItem.id);\n       decreaseItem(sku); \n       setShowDropdown(false);\n       setInputValue('');\n       if (nextQty !== 1) setNextQty(1);\n       return;\n    }\n    \n    if (typeof skuOrItem === 'string') {\n       try {\n         const item = await posService.scanItem(skuOrItem);\n         await originalAddToCart(item, quantityToApply);\n       } catch (e) { console.error(e); }\n    } else {\n       await originalAddToCart(skuOrItem, quantityToApply);\n    }\n    \n    if (nextQty !== 1) setNextQty(1);\n    setShowDropdown(false);\n  };\n\n  const handleCheckout = async () => {\n    if (cartItems.length === 0) return;\n    const orderData = { \n        items: [...cartItems], \n        summary: summary, \n        cashier: 'Staff #01', \n        device: 'POS-Web',\n        adjustments: {\n            billDiscount,\n            coupons,\n            allowance\n        }\n    };\n    setIsSaving(true);\n    try {\n      const orderId = await posService.createOrder(orderData);\n      setLastOrder({ ...orderData, id: orderId, timestamp: new Date().toISOString() });\n      clearCart();\n    } catch (err) { alert('Error: ' + err.message); } \n    finally { setIsSaving(false); }\n  };\n\n  // ‡πÇ¬ú‚Ä¶ New Setting Handler\n  const handleAdminSettings = () => {\n    if (onAdminSettings) {\n      onAdminSettings();\n    } else {\n      alert('Admin Settings: Feature coming soon');\n    }\n  };\n\n  const { inputRef, inputValue, setInputValue, handleInputKeyDown, handleInputChange } = useScanListener(handleScanAction, !lastOrder ? handleCheckout : undefined);\n\n  const onInputChangeWrapper = (e) => {\n    const val = e.target.value;\n    if (val.endsWith('*')) {\n      const numberPart = val.slice(0, -1);\n      if (/^\\d+$/.test(numberPart)) {\n        const qty = parseInt(numberPart, 10);\n        if (qty > 0) {\n           setNextQty(qty);\n           setInputValue(''); \n        } else {\n           alert('‡πÄ‡∏ò¬à‡πÄ‡∏ò‡∏ì‡πÄ‡∏ò¬ô‡πÄ‡∏ò‡∏á‡πÄ‡∏ò¬ô‡πÄ‡∏ò‚Ä¢‡πÄ‡∏ô¬â‡πÄ‡∏ò‡∏ç‡πÄ‡∏ò¬á‡πÄ‡∏ò‡∏Å‡πÄ‡∏ò‡∏í‡πÄ‡∏ò¬Å‡πÄ‡∏ò¬Å‡πÄ‡∏ò‡∏á‡πÄ‡∏ô¬à‡πÄ‡∏ò‡∏í 0');\n           setInputValue('');\n        }\n      } else {\n        setInputValue(''); \n      }\n      return; \n    }\n    handleInputChange(e);\n  };\n\n  useEffect(() => {\n    const timer = setTimeout(async () => {\n      if (inputValue.length >= 2 && !isVoidMode && !showDiscountModal) { \n        const results = await posService.searchProducts(inputValue);\n        setSuggestions(results);\n        setShowDropdown(results.length > 0);\n      } else {\n        setSuggestions([]);\n        setShowDropdown(false);\n      }\n    }, 300);\n    return () => clearTimeout(timer);\n  }, [inputValue, isVoidMode, showDiscountModal]);\n\n  const handleSelectSuggestion = (sku) => {\n    posService.scanItem(sku).then(item => {\n        handleScanAction(item);\n    });\n  };\n\n  const openCouponInput = (type) => {\n      setCouponInput({ type, value: '', code: '' });\n      setShowCouponInput(true);\n  };\n\n  const handleSaveCoupon = () => {\n      if (!couponInput.value && couponInput.type !== 'boots') return;\n      let finalValue = parseFloat(couponInput.value) || 0;\n      let finalCode = couponInput.code;\n      if (couponInput.type === 'boots') {\n          if (finalValue === 0) {\n             const numbers = finalCode.match(/\\d+/);\n             finalValue = numbers ? parseInt(numbers[0]) : 50; \n          }\n      }\n      addCoupon({ couponType: couponInput.type, couponValue: finalValue, couponCode: finalCode });\n      setShowCouponInput(false);\n  };\n\n  return (\n    <div className=\"h-screen w-full bg-slate-100 p-4 font-sans flex gap-4 overflow-hidden\" onClick={() => setShowDropdown(false)}>\n      \n      {/* Modals */}\n      {lastOrder && <ReceiptModal order={lastOrder} onClose={() => setLastOrder(null)} />}\n      {showProductLookup && <ProductLookupModal onClose={() => setShowProductLookup(false)} />}\n      {showReport && <DailyReportModal onClose={() => setShowReport(false)} />}\n\n      {/* --- Discount Menu Modal --- */}\n      {showDiscountModal && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-in zoom-in-95 duration-200\">\n            <div className=\"bg-white w-full max-w-4xl h-[80vh] rounded-2xl shadow-2xl flex overflow-hidden\">\n                {/* Sidebar */}\n                <div className=\"w-64 bg-slate-100 p-4 border-r border-slate-200 flex flex-col gap-2\">\n                    <h2 className=\"text-xl font-bold text-slate-800 mb-4 px-2\">‡πÄ‡∏ô‚Ç¨‡πÄ‡∏ò‡∏Å‡πÄ‡∏ò¬ô‡πÄ‡∏ò‡∏ô‡πÄ‡∏ò‡∏ä‡πÄ‡∏ô¬à‡πÄ‡∏ò‡∏á‡πÄ‡∏ò¬ô‡πÄ‡∏ò‡∏Ö‡πÄ‡∏ò‚Äù</h2>\n                    <button onClick={() => setActiveTab('discount')} className={cn(\"text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition-colors\", activeTab === 'discount' ? \"bg-white shadow text-boots-base\" : \"text-slate-500 hover:bg-slate-200\")}>\n                        <Percent size={20}/> ‡πÄ‡∏ò‡∏ä‡πÄ‡∏ô¬à‡πÄ‡∏ò‡∏á‡πÄ‡∏ò¬ô‡πÄ‡∏ò‡∏Ö‡πÄ‡∏ò‚Äù (Discount)\n                    </button>\n                    <button onClick={() => setActiveTab('coupon')} className={cn(\"text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition-colors\", activeTab === 'coupon' ? \"bg-white shadow text-boots-base\" : \"text-slate-500 hover:bg-slate-200\")}>\n                        <Ticket size={20}/> ‡πÄ‡∏ò¬Ñ‡πÄ‡∏ò‡∏ô‡πÄ‡∏ò¬õ‡πÄ‡∏ò‡∏ç‡πÄ‡∏ò¬á (Coupons)\n                    </button>\n                    <button onClick={() => setActiveTab('allowance')} className={cn(\"text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition-colors\", activeTab === 'allowance' ? \"bg-white shadow text-boots-base\" : \"text-slate-500 hover:bg-slate-200\")}>\n                        <Gift size={20}/> Allowance\n                    </button>\n                    <div className=\"mt-auto\">\n                        <button onClick={() => setShowDiscountModal(false)} className=\"w-full py-3 bg-slate-800 text-white rounded-xl font-bold\">‡πÄ‡∏ò¬õ‡πÄ‡∏ò‡∏î‡πÄ‡∏ò‚Äù‡πÄ‡∏ò‡∏ã‡πÄ‡∏ò¬ô‡πÄ‡∏ô¬â‡πÄ‡∏ò‡∏í‡πÄ‡∏ò‚Ä¢‡πÄ‡∏ô¬à‡πÄ‡∏ò‡∏í‡πÄ‡∏ò¬á</button>\n                    </div>\n                </div>\n\n                {/* Content */}\n                <div className=\"flex-1 p-8 bg-white overflow-y-auto\">\n                    {/* --- TAB: DISCOUNT --- */}\n                    {activeTab === 'discount' && (\n                        <div>\n                            <div className=\"flex gap-4 mb-6 border-b border-slate-200 pb-4\">\n                                <button onClick={() => setDiscountSubTab('bill')} className={cn(\"px-6 py-2 rounded-lg font-bold transition-all\", discountSubTab === 'bill' ? \"bg-boots-base text-white shadow-md\" : \"bg-slate-100 text-slate-500\")}>‡πÄ‡∏ò‡∏Ö‡πÄ‡∏ò‚Äù‡πÄ‡∏ò‚Äî‡πÄ‡∏ò‡∏ë‡πÄ‡∏ô¬â‡πÄ‡∏ò¬á‡πÄ‡∏ò¬ö‡πÄ‡∏ò‡∏î‡πÄ‡∏ò‡∏Ö</button>\n                                <button onClick={() => setDiscountSubTab('items')} className={cn(\"px-6 py-2 rounded-lg font-bold transition-all\", discountSubTab === 'items' ? \"bg-boots-base text-white shadow-md\" : \"bg-slate-100 text-slate-500\")}>‡πÄ‡∏ò‡∏Ö‡πÄ‡∏ò‚Äù‡πÄ‡∏ò¬ö‡πÄ‡∏ò‡∏í‡πÄ‡∏ò¬á‡πÄ‡∏ò‡∏É‡πÄ‡∏ò‡∏í‡πÄ‡∏ò‡∏Ç‡πÄ‡∏ò¬Å‡πÄ‡∏ò‡∏í‡πÄ‡∏ò‡∏É</button>\n                            </div>\n\n                            {discountSubTab === 'bill' && (\n                                <div className=\"max-w-sm\">\n                                    <label className=\"block text-sm font-bold text-slate-700 mb-2\">‡πÄ‡∏ò‡∏ä‡πÄ‡∏ô¬à‡πÄ‡∏ò‡∏á‡πÄ‡∏ò¬ô‡πÄ‡∏ò‡∏Ö‡πÄ‡∏ò‚Äù‡πÄ‡∏ò‚Äî‡πÄ‡∏ò‡∏ë‡πÄ‡∏ô¬â‡πÄ‡∏ò¬á‡πÄ‡∏ò¬ö‡πÄ‡∏ò‡∏î‡πÄ‡∏ò‡∏Ö (%)</label>\n                                    <div className=\"flex gap-4\">\n                                        <input \n                                            type=\"number\" \n                                            value={billDiscount.percent} \n                                            onChange={(e) => updateBillDiscount(e.target.value)}\n                                            className=\"w-full border-2 border-slate-200 rounded-xl px-4 py-3 text-2xl font-bold focus:border-boots-base outline-none\" \n                                            placeholder=\"0\"\n                                        />\n                                        <div className=\"flex items-center text-slate-400 font-bold text-xl\">%</div>\n                                    </div>\n                                    <p className=\"text-sm text-slate-400 mt-2\">* ‡πÄ‡∏ò¬Ñ‡πÄ‡∏ò‡∏ì‡πÄ‡∏ò¬ô‡πÄ‡∏ò‡∏á‡πÄ‡∏ò‚Äú‡πÄ‡∏ò¬à‡πÄ‡∏ò‡∏í‡πÄ‡∏ò¬Å‡πÄ‡∏ò‡∏Ç‡πÄ‡∏ò‡∏ç‡πÄ‡∏ò‚Äù‡πÄ‡∏ò‡∏ã‡πÄ‡∏ò‡∏Ö‡πÄ‡∏ò‡∏ë‡πÄ‡∏ò¬á‡πÄ‡∏ò‡∏ã‡πÄ‡∏ò‡∏ë‡πÄ‡∏ò¬Å‡πÄ‡∏ô¬Ç‡πÄ‡∏ò¬õ‡πÄ‡∏ò‡∏É‡πÄ‡∏ô¬Ç‡πÄ‡∏ò‡∏Å‡πÄ‡∏ò¬ä‡πÄ‡∏ò‡∏ë‡πÄ‡∏ô¬à‡πÄ‡∏ò¬ô‡πÄ‡∏ô¬Å‡πÄ‡∏ò‡∏Ö‡πÄ‡∏ô¬â‡πÄ‡∏ò‡∏á</p>\n                                </div>\n                            )}\n\n                            {discountSubTab === 'items' && (\n                                <div>\n                                    <table className=\"w-full text-left border-collapse\">\n                                        <thead>\n                                            <tr className=\"border-b border-slate-200 text-slate-500 text-sm\"><th className=\"p-3\">‡πÄ‡∏ò‡∏ä‡πÄ‡∏ò‡∏î‡πÄ‡∏ò¬ô‡πÄ‡∏ò¬Ñ‡πÄ‡∏ô¬â‡πÄ‡∏ò‡∏í</th><th className=\"p-3 text-right\">‡πÄ‡∏ò‡∏Ç‡πÄ‡∏ò‡∏ç‡πÄ‡∏ò‚Äù‡πÄ‡∏ò¬Å‡πÄ‡∏ô¬à‡πÄ‡∏ò‡∏ç‡πÄ‡∏ò¬ô‡πÄ‡∏ò‡∏Ö‡πÄ‡∏ò‚Äù</th><th className=\"p-3 text-center w-32\">‡πÄ‡∏ò‡∏Ö‡πÄ‡∏ò‚Äù‡πÄ‡∏ô‚Ç¨‡πÄ‡∏ò¬û‡πÄ‡∏ò‡∏î‡πÄ‡∏ô¬à‡πÄ‡∏ò‡∏Å (%)</th></tr>\n                                        </thead>\n                                        <tbody>\n                                            {cartItems.map((item, idx) => (\n                                                <tr key={idx} className=\"border-b border-slate-100\">\n                                                    <td className=\"p-3 font-medium\">{item.name} <span className=\"text-slate-400 text-xs\">x{item.qty}</span></td>\n                                                    <td className=\"p-3 text-right font-mono\">{(item.price * item.qty).toLocaleString()}</td>\n                                                    <td className=\"p-3\">\n                                                        <input \n                                                            type=\"number\" \n                                                            value={item.manualDiscountPercent || ''}\n                                                            onChange={(e) => setManualItemDiscount(item.id || item.sku, e.target.value)}\n                                                            className=\"w-full border border-slate-300 rounded-lg px-2 py-1 text-center font-bold focus:border-boots-base outline-none\"\n                                                            placeholder=\"0\"\n                                                        />\n                                                    </td>\n                                                </tr>\n                                            ))}\n                                        </tbody>\n                                    </table>\n                                </div>\n                            )}\n                        </div>\n                    )}\n\n                    {/* --- TAB: COUPON --- */}\n                    {activeTab === 'coupon' && (\n                        <div>\n                            <h3 className=\"text-2xl font-bold mb-6 text-slate-800\">‡πÄ‡∏ô‚Ç¨‡πÄ‡∏ò‡∏Ö‡πÄ‡∏ò‡∏ó‡πÄ‡∏ò‡∏ç‡πÄ‡∏ò¬Å‡πÄ‡∏ò¬õ‡πÄ‡∏ò‡∏É‡πÄ‡∏ò‡∏ê‡πÄ‡∏ô‚Ç¨‡πÄ‡∏ò ‡πÄ‡∏ò‚Äî‡πÄ‡∏ò¬Ñ‡πÄ‡∏ò‡∏ô‡πÄ‡∏ò¬õ‡πÄ‡∏ò‡∏ç‡πÄ‡∏ò¬á</h3>\n                            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                                <button onClick={() => openCouponInput('store')} className={cn(\"h-40 rounded-2xl flex flex-col items-center justify-center gap-4 text-white text-xl font-bold bg-sky-400 hover:bg-sky-500 shadow-lg\", btnEffect)}>\n                                    <Ticket size={40} /> Store Coupon\n                                </button>\n                                <button onClick={() => openCouponInput('vendor')} className={cn(\"h-40 rounded-2xl flex flex-col items-center justify-center gap-4 text-white text-xl font-bold bg-pink-400 hover:bg-pink-500 shadow-lg\", btnEffect)}>\n                                    <Tag size={40} /> Vendor Coupon\n                                </button>\n                                <button onClick={() => openCouponInput('boots')} className={cn(\"h-40 rounded-2xl flex flex-col items-center justify-center gap-4 text-white text-xl font-bold bg-blue-900 hover:bg-blue-800 shadow-lg\", btnEffect)}>\n                                    <CheckCircle size={40} /> Boots Coupon\n                                </button>\n                            </div>\n\n                            <div className=\"mt-8\">\n                                <h4 className=\"font-bold text-slate-700 mb-4\">‡πÄ‡∏ò¬Ñ‡πÄ‡∏ò‡∏ô‡πÄ‡∏ò¬õ‡πÄ‡∏ò‡∏ç‡πÄ‡∏ò¬á‡πÄ‡∏ò‚Äî‡πÄ‡∏ò‡∏ï‡πÄ‡∏ô¬à‡πÄ‡∏ô¬É‡πÄ‡∏ò¬ä‡πÄ‡∏ô¬â‡πÄ‡∏ô¬Ñ‡πÄ‡∏ò¬õ ({coupons.length})</h4>\n                                {coupons.length === 0 ? <p className=\"text-slate-400\">‡πÄ‡∏ò‡∏Ç‡πÄ‡∏ò‡∏ë‡πÄ‡∏ò¬á‡πÄ‡∏ô¬Ñ‡πÄ‡∏ò‡∏Å‡πÄ‡∏ô¬à‡πÄ‡∏ò‡∏Å‡πÄ‡∏ò‡∏ï‡πÄ‡∏ò¬Ñ‡πÄ‡∏ò‡∏ô‡πÄ‡∏ò¬õ‡πÄ‡∏ò‡∏ç‡πÄ‡∏ò¬á</p> : (\n                                    <div className=\"flex flex-wrap gap-3\">\n                                        {coupons.map((c, i) => (\n                                            <div key={i} className=\"flex items-center gap-2 bg-slate-100 px-3 py-2 rounded-lg border border-slate-200\">\n                                                <div className=\"text-sm\">\n                                                    <span className=\"font-bold uppercase text-slate-700\">{c.couponType}</span> \n                                                    <span className=\"mx-2 text-slate-400\">|</span> \n                                                    Code: {c.couponCode} \n                                                    <span className=\"ml-2 font-bold text-red-500\">-‡πÄ‡∏ò‡∏ü{c.couponValue}</span>\n                                                </div>\n                                                <button onClick={() => removeCoupon(c.couponCode)} className=\"text-slate-400 hover:text-red-500\"><X size={16}/></button>\n                                            </div>\n                                        ))}\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n                    )}\n\n                    {/* --- TAB: ALLOWANCE --- */}\n                    {activeTab === 'allowance' && (\n                        <div className=\"max-w-sm\">\n                            <label className=\"block text-sm font-bold text-slate-700 mb-2\">‡πÄ‡∏ò¬à‡πÄ‡∏ò‡∏ì‡πÄ‡∏ò¬ô‡πÄ‡∏ò‡∏á‡πÄ‡∏ò¬ô‡πÄ‡∏ô‚Ç¨‡πÄ‡∏ò¬á‡πÄ‡∏ò‡∏î‡πÄ‡∏ò¬ô Allowance</label>\n                            <div className=\"relative\">\n                                <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold\">‡πÄ‡∏ò‡∏ü</span>\n                                <input \n                                    type=\"number\" \n                                    value={allowance}\n                                    onChange={(e) => updateAllowance(e.target.value)}\n                                    className=\"w-full border-2 border-slate-200 rounded-xl pl-10 pr-4 py-3 text-2xl font-bold focus:border-boots-base outline-none\" \n                                    placeholder=\"0.00\"\n                                />\n                            </div>\n                            <p className=\"text-sm text-slate-400 mt-2\">* ‡πÄ‡∏ò‡∏Ö‡πÄ‡∏ò‚Äù‡πÄ‡∏ò¬à‡πÄ‡∏ò‡∏í‡πÄ‡∏ò¬Å‡πÄ‡∏ò‡∏Ç‡πÄ‡∏ò‡∏ç‡πÄ‡∏ò‚Äù‡πÄ‡∏ò‡∏ä‡πÄ‡∏ò‡∏ò‡πÄ‡∏ò‚Äî‡πÄ‡∏ò¬ò‡πÄ‡∏ò‡∏î‡πÄ‡∏ò‚Äî‡πÄ‡∏ô¬â‡πÄ‡∏ò‡∏í‡πÄ‡∏ò‡∏Ç‡πÄ‡∏ò¬ö‡πÄ‡∏ò‡∏î‡πÄ‡∏ò‡∏Ö</p>\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            {/* --- Coupon Input Sub-Modal --- */}\n            {showCouponInput && (\n                <div className=\"absolute inset-0 z-[60] flex items-center justify-center bg-black/50\">\n                    <div className=\"bg-white p-6 rounded-xl w-96 shadow-2xl animate-in zoom-in-95\">\n                        <h3 className=\"text-lg font-bold mb-4 uppercase text-slate-700\">Add {couponInput.type} Coupon</h3>\n                        \n                        {couponInput.type !== 'boots' && (\n                            <div className=\"mb-4\">\n                                <label className=\"block text-xs font-bold text-slate-500 mb-1\">‡πÄ‡∏ò‡∏Å‡πÄ‡∏ò‡∏ô‡πÄ‡∏ò‡∏Ö‡πÄ‡∏ò¬Ñ‡πÄ‡∏ô¬à‡πÄ‡∏ò‡∏í‡πÄ‡∏ò¬Ñ‡πÄ‡∏ò‡∏ô‡πÄ‡∏ò¬õ‡πÄ‡∏ò‡∏ç‡πÄ‡∏ò¬á (‡πÄ‡∏ò¬ö‡πÄ‡∏ò‡∏í‡πÄ‡∏ò‚Äî)</label>\n                                <input autoFocus type=\"number\" className=\"w-full border border-slate-300 rounded-lg px-3 py-2 font-bold text-lg\" \n                                    value={couponInput.value} onChange={e => setCouponInput({...couponInput, value: e.target.value})} />\n                            </div>\n                        )}\n                        \n                        <div className=\"mb-6\">\n                            <label className=\"block text-xs font-bold text-slate-500 mb-1\">‡πÄ‡∏ò‡∏É‡πÄ‡∏ò‡∏ã‡πÄ‡∏ò‡∏ë‡πÄ‡∏ò‡∏ä‡πÄ‡∏ò¬Ñ‡πÄ‡∏ò‡∏ô‡πÄ‡∏ò¬õ‡πÄ‡∏ò‡∏ç‡πÄ‡∏ò¬á / Barcode</label>\n                            <input type=\"text\" className=\"w-full border border-slate-300 rounded-lg px-3 py-2 font-mono\" \n                                value={couponInput.code} onChange={e => setCouponInput({...couponInput, code: e.target.value})} \n                                placeholder=\"Scan or type...\"\n                            />\n                        </div>\n\n                        <div className=\"flex gap-2\">\n                            <button onClick={() => setShowCouponInput(false)} className=\"flex-1 py-2 bg-slate-200 rounded-lg font-bold text-slate-600\">‡πÄ‡∏ò‡∏Ç‡πÄ‡∏ò¬Å‡πÄ‡∏ô‚Ç¨‡πÄ‡∏ò‡∏Ö‡πÄ‡∏ò‡∏î‡πÄ‡∏ò¬Å</button>\n                            <button onClick={handleSaveCoupon} className=\"flex-1 py-2 bg-boots-base text-white rounded-lg font-bold\">‡πÄ‡∏ò¬ö‡πÄ‡∏ò‡∏ë‡πÄ‡∏ò¬ô‡πÄ‡∏ò‚Äî‡πÄ‡∏ò‡∏ñ‡πÄ‡∏ò¬Å</button>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </div>\n      )}\n\n      {/* LEFT SIDE */}\n      <div className=\"w-[35%] min-h-0 flex flex-col gap-4\">\n        {/* Input Section */}\n        <div className={cn(\"p-6 rounded-2xl shadow-sm border-2 relative z-40 transition-colors\", isVoidMode ? \"bg-red-50 border-red-300\" : \"bg-white border-slate-200\")}>\n           <div className=\"flex justify-between items-center mb-2\">\n             <h2 className={cn(\"text-sm font-bold uppercase tracking-wider flex items-center gap-2\", isVoidMode ? \"text-red-600\" : \"text-slate-400\")}>\n               {isVoidMode ? <><MinusCircle size={16}/> VOID MODE (‡πÄ‡∏ò‡∏ä‡πÄ‡∏ô¬Å‡πÄ‡∏ò¬Å‡πÄ‡∏ò¬ô‡πÄ‡∏ô‚Ç¨‡πÄ‡∏ò¬û‡πÄ‡∏ò‡∏ó‡πÄ‡∏ô¬à‡πÄ‡∏ò‡∏ç‡πÄ‡∏ò‡∏Ö‡πÄ‡∏ò¬ö)</> : <><ScanBarcode size={16}/> SCAN PRODUCT</>}\n             </h2>\n             <button \n               onClick={() => { setIsVoidMode(!isVoidMode); inputRef.current?.focus(); }}\n               className={cn(\"text-xs font-bold px-3 py-1.5 rounded-lg border\", btnEffect, isVoidMode ? \"bg-red-600 text-white border-red-600 shadow-red-200\" : \"bg-slate-100 text-slate-500 border-slate-200 hover:bg-red-50 hover:text-red-500 hover:border-red-200\")}\n             >\n               {isVoidMode ? 'EXIT VOID MODE' : 'SCAN TO VOID'}\n             </button>\n           </div>\n           \n           <div className=\"relative group\">\n            <div className=\"absolute left-4 top-1/2 -translate-y-1/2 transition-colors\">\n              {isLoading ? <Loader2 size={24} className=\"animate-spin text-boots-base\" /> : ( isVoidMode ? <Trash2 size={24} className=\"text-red-500\"/> : <Search size={24} className=\"text-slate-400\"/> )}\n            </div>\n            \n            <input \n              ref={inputRef}\n              value={inputValue}\n              onChange={onInputChangeWrapper}\n              onKeyDown={handleInputKeyDown}\n              disabled={isLoading || lastOrder || isSaving || showDiscountModal}\n              type=\"text\" \n              placeholder={isVoidMode ? \"‡πÄ‡∏ò‡∏ä‡πÄ‡∏ô¬Å‡πÄ‡∏ò¬Å‡πÄ‡∏ò¬ô‡πÄ‡∏ò‡∏ä‡πÄ‡∏ò‡∏î‡πÄ‡∏ò¬ô‡πÄ‡∏ò¬Ñ‡πÄ‡∏ô¬â‡πÄ‡∏ò‡∏í‡πÄ‡∏ô‚Ç¨‡πÄ‡∏ò¬û‡πÄ‡∏ò‡∏ó‡πÄ‡∏ô¬à‡πÄ‡∏ò‡∏ç‡πÄ‡∏ò‡∏Ö‡πÄ‡∏ò¬ö‡πÄ‡∏ò‡∏ç‡πÄ‡∏ò‡∏ç‡πÄ‡∏ò¬Å...\" : \"‡πÄ‡∏ò‡∏ä‡πÄ‡∏ô¬Å‡πÄ‡∏ò¬Å‡πÄ‡∏ò¬ô‡πÄ‡∏ò¬ö‡πÄ‡∏ò‡∏í‡πÄ‡∏ò‡∏É‡πÄ‡∏ô¬å‡πÄ‡∏ô¬Ç‡πÄ‡∏ò¬Ñ‡πÄ‡∏ô¬â‡πÄ‡∏ò‚Äù... (‡πÄ‡∏ò¬û‡πÄ‡∏ò‡∏î‡πÄ‡∏ò‡∏Å‡πÄ‡∏ò¬û‡πÄ‡∏ô¬å 3* ‡πÄ‡∏ô‚Ç¨‡πÄ‡∏ò¬û‡πÄ‡∏ò‡∏ó‡πÄ‡∏ô¬à‡πÄ‡∏ò‡∏ç‡πÄ‡∏ò‡∏É‡πÄ‡∏ò‡∏ê‡πÄ‡∏ò¬ö‡πÄ‡∏ò‡∏ò‡πÄ‡∏ò¬à‡πÄ‡∏ò‡∏ì‡πÄ‡∏ò¬ô‡πÄ‡∏ò‡∏á‡πÄ‡∏ò¬ô)\"}\n              autoComplete=\"off\"\n              className={cn(\"w-full pl-12 pr-4 py-4 rounded-xl border-2 outline-none transition-all shadow-inner text-xl font-bold placeholder:font-normal\", isVoidMode ? \"bg-white border-red-300 text-red-600 placeholder:text-red-200 focus:ring-4 focus:ring-red-500/10 focus:border-red-500\" : \"bg-slate-50 border-slate-200 text-boots-text placeholder:text-slate-300 focus:ring-4 focus:ring-boots-base/10 focus:border-boots-base\")}\n            />\n            {inputValue && <button onClick={() => setInputValue('')} className=\"absolute right-4 top-1/2 -translate-y-1/2 text-slate-300 hover:text-slate-500\"><X size={20} /></button>}\n            \n            {nextQty > 1 && (\n               <div className=\"absolute -top-3 right-0 bg-orange-500 text-white text-xs font-bold px-2 py-1 rounded-full shadow-md flex items-center gap-1 animate-in zoom-in\">\n                  <Hash size={12} /> Next Qty: {nextQty}\n               </div>\n            )}\n            \n            {showDropdown && !isVoidMode && (\n              <div className=\"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-xl border border-slate-100 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200 max-h-[300px] overflow-y-auto z-50\">\n                {suggestions.map((item) => (\n                  <div key={item.sku} onClick={() => handleSelectSuggestion(item.sku)} className=\"p-4 border-b border-slate-50 hover:bg-boots-light/30 cursor-pointer flex justify-between items-center group\">\n                    <div><div className=\"text-slate-800 font-bold\">{item.name}</div><div className=\"text-xs text-slate-400\">SKU: {item.sku}</div></div><div className=\"text-boots-base font-bold\">‡πÄ‡∏ò‡∏ü{item.price.toLocaleString()}</div>\n                  </div>\n                ))}\n              </div>\n            )}\n           </div>\n           {error && (<div className=\"mt-4 bg-red-50 text-red-600 px-4 py-3 rounded-xl border border-red-100 flex items-center gap-3 animate-in slide-in-from-top-2\"><AlertCircle size={20} /><span className=\"text-sm font-medium\">{error}</span></div>)}\n        </div>\n\n        {/* Monitor Section */}\n        <div className={cn(\"flex-1 rounded-2xl shadow-sm border p-6 flex flex-col relative overflow-hidden transition-colors\", isVoidMode ? \"bg-red-50/30 border-red-200\" : \"bg-white border-slate-200\")}>\n           <div className=\"absolute top-0 right-0 p-6 opacity-5 text-slate-400 pointer-events-none\"><Package size={180} /></div>\n           <h2 className=\"text-sm font-bold text-slate-400 uppercase tracking-wider mb-auto flex items-center gap-2\"><Box size={16} /> {isVoidMode ? 'Void Monitor' : 'Last Scanned'}</h2>\n           \n           {lastItemDetail ? (\n             <div className=\"mt-4 animate-in slide-in-from-right-4 duration-300 text-center relative z-10\">\n                <div className={cn(\"w-24 h-24 rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-inner text-white\", isVoidMode ? \"bg-red-500\" : \"bg-boots-light text-boots-base\")}>\n                   {isVoidMode ? <MinusCircle size={48}/> : <Package size={48} />}\n                </div>\n                <h3 className=\"text-2xl font-bold text-slate-800 leading-tight mb-2 line-clamp-2\">{lastItemDetail.name}</h3>\n                <div className=\"text-slate-400 font-mono mb-6\">{lastItemDetail.sku}</div>\n                \n                {isVoidMode ? (\n                  <div className=\"text-red-600 font-bold text-xl animate-pulse\">REMOVED -1</div>\n                ) : (\n                  <div className=\"flex flex-col items-center\">\n                    <div className=\"text-6xl font-bold text-boots-base tracking-tighter\">\n                       ‡πÄ‡∏ò‡∏ü{\n                         // [Safe Fix] Fallback if calculatedTotal is undefined (e.g. initial add)\n                         ((lastItemDetail.calculatedTotal !== undefined ? lastItemDetail.calculatedTotal : (lastItemDetail.price * lastItemDetail.qty)) / lastItemDetail.qty).toLocaleString(undefined, {minimumFractionDigits:0, maximumFractionDigits:2})\n                       }\n                    </div>\n                    <div className=\"text-sm text-slate-400 mt-1 font-medium\">(‡πÄ‡∏ò‡∏É‡πÄ‡∏ò‡∏í‡πÄ‡∏ò¬Ñ‡πÄ‡∏ò‡∏í‡πÄ‡∏ò¬õ‡πÄ‡∏ò¬Å‡πÄ‡∏ò‚Ä¢‡πÄ‡∏ò‡∏î)</div>\n                  </div>\n                )}\n             </div>\n           ) : (\n             <div className=\"flex-1 flex flex-col items-center justify-center text-slate-300\"><ScanBarcode size={64} className=\"mb-4 opacity-50\" /><p className=\"text-lg font-medium\">‡πÄ‡∏ò¬û‡πÄ‡∏ò‡∏É‡πÄ‡∏ô¬â‡πÄ‡∏ò‡∏ç‡πÄ‡∏ò‡∏Å‡πÄ‡∏ô¬É‡πÄ‡∏ò¬ä‡πÄ‡∏ô¬â‡πÄ‡∏ò¬á‡πÄ‡∏ò‡∏í‡πÄ‡∏ò¬ô</p></div>\n           )}\n           <div className=\"mt-auto pt-6 border-t border-slate-100 flex gap-2\">\n              <button onClick={() => setShowProductLookup(true)} className={cn(\"flex-1 py-3 bg-slate-50 hover:bg-boots-light text-slate-600 hover:text-boots-base rounded-xl font-bold flex items-center justify-center gap-2\", btnEffect)}><Search size={20} /> ‡πÄ‡∏ò¬Ñ‡πÄ‡∏ô¬â‡πÄ‡∏ò¬ô‡πÄ‡∏ò‡∏ã‡πÄ‡∏ò‡∏í‡πÄ‡∏ò‡∏ä‡πÄ‡∏ò‡∏î‡πÄ‡∏ò¬ô‡πÄ‡∏ò¬Ñ‡πÄ‡∏ô¬â‡πÄ‡∏ò‡∏í</button>\n           </div>\n        </div>\n      </div>\n\n      {/* RIGHT SIDE */}\n      <div className=\"w-[65%] flex flex-col bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden relative\">\n        \n        {/* Header */}\n        <div className=\"px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50\">\n           <div className=\"flex items-center gap-3\">\n              <img src=\"https://store.boots.co.th/images/boots-logo.png\" alt=\"Boots Logo\" className=\"h-8 w-auto object-contain\" />\n              <div className=\"h-6 w-px bg-slate-300\"></div>\n              <span className=\"font-bold text-slate-800 text-2xl\">‡πÄ‡∏ò‡∏É‡πÄ‡∏ò‡∏í‡πÄ‡∏ò‡∏Ç‡πÄ‡∏ò¬Å‡πÄ‡∏ò‡∏í‡πÄ‡∏ò‡∏É‡πÄ‡∏ò¬Ç‡πÄ‡∏ò‡∏í‡πÄ‡∏ò‡∏Ç</span>\n           </div>\n           \n           {/* BUTTON GROUP */}\n           <div className=\"flex items-center gap-2\">\n              <div className=\"flex items-center gap-2 text-sm text-slate-500 bg-white px-3 py-1 rounded-lg border border-slate-200 shadow-sm\"><User size={16} /> Staff #01</div>\n              \n              {/* Daily Report Button */}\n              <button onClick={() => setShowReport(true)} className={cn(\"px-4 py-1.5 bg-white text-slate-700 rounded-lg border border-slate-200 text-sm font-bold hover:bg-slate-50 hover:text-boots-base shadow-sm transition-all flex items-center gap-2\", btnEffect)} title=\"Daily Report\">\n                 <FileText size={16} /> Daily Report\n              </button>\n\n              {/* ‡πÇ¬ú‚Ä¶ SETTING BUTTON MOVED HERE */}\n              <button \n                 onClick={handleAdminSettings} \n                 className={cn(\"flex items-center gap-2 px-3 py-1.5 bg-white text-slate-700 rounded-lg border border-slate-200 text-sm font-bold hover:bg-slate-50 hover:text-boots-base shadow-sm transition-all\", btnEffect)}\n                 title=\"Admin Settings\"\n              >\n                 <Settings size={16} />\n                 <span>Setting</span>\n              </button>\n           </div>\n        </div>\n\n        {/* Table Head */}\n        <div className=\"grid grid-cols-12 gap-2 px-6 py-3 bg-slate-100/50 text-xs font-bold text-slate-500 uppercase tracking-wider border-b border-slate-200\">\n           <div className=\"col-span-1 text-center\">No.</div>\n           <div className=\"col-span-4\">‡πÄ‡∏ò‡∏ä‡πÄ‡∏ò‡∏î‡πÄ‡∏ò¬ô‡πÄ‡∏ò¬Ñ‡πÄ‡∏ô¬â‡πÄ‡∏ò‡∏í</div>\n           <div className=\"col-span-2 text-right\">‡πÄ‡∏ò‡∏É‡πÄ‡∏ò‡∏í‡πÄ‡∏ò¬Ñ‡πÄ‡∏ò‡∏í/‡πÄ‡∏ò‡∏ã‡πÄ‡∏ò¬ô‡πÄ‡∏ô¬à‡πÄ‡∏ò‡∏á‡πÄ‡∏ò‡∏Ç</div>\n           <div className=\"col-span-2 text-center\">‡πÄ‡∏ò¬à‡πÄ‡∏ò‡∏ì‡πÄ‡∏ò¬ô‡πÄ‡∏ò‡∏á‡πÄ‡∏ò¬ô</div>\n           <div className=\"col-span-1 text-right text-red-600\">‡πÄ‡∏ò‡∏ä‡πÄ‡∏ô¬à‡πÄ‡∏ò‡∏á‡πÄ‡∏ò¬ô‡πÄ‡∏ò‡∏Ö‡πÄ‡∏ò‚Äù</div>\n           <div className=\"col-span-2 text-right\">‡πÄ‡∏ò‡∏É‡πÄ‡∏ò‡∏á‡πÄ‡∏ò‡∏Å</div>\n        </div>\n\n        {/* Table Body */}\n        <div className=\"flex-1 overflow-y-auto px-4 py-2\">\n          {cartItems.length === 0 ? (\n            <div className=\"h-full flex flex-col items-center justify-center text-slate-300\"><ShoppingCart size={64} className=\"mb-4 opacity-50\" /><p className=\"text-xl font-medium\">‡πÄ‡∏ò‚Ä¢‡πÄ‡∏ò‡∏ê‡πÄ‡∏ò¬Å‡πÄ‡∏ò‡∏É‡πÄ‡∏ô¬â‡πÄ‡∏ò‡∏í‡πÄ‡∏ò‡∏á‡πÄ‡∏ô¬à‡πÄ‡∏ò‡∏í‡πÄ‡∏ò¬á‡πÄ‡∏ô‚Ç¨‡πÄ‡∏ò¬õ‡πÄ‡∏ò‡∏Ö‡πÄ‡∏ô¬à‡πÄ‡∏ò‡∏í</p></div>\n          ) : (\n            cartItems.map((item, index) => {\n              // [Safe Fix] Fallback to prevent NaN\n              const price = item.price || 0;\n              const qty = item.qty || 0;\n              const normalTotal = price * qty;\n              const lineTotal = item.calculatedTotal !== undefined ? item.calculatedTotal : normalTotal; \n              const discountVal = normalTotal - lineTotal;\n\n              return (\n              <div key={item.id || item.sku} className={cn(\"grid grid-cols-12 gap-2 p-3 border-b border-slate-50 items-center hover:bg-slate-50 transition-colors group relative\", lastScanned === item.sku && \"bg-blue-50/60\")}>\n                 <div className=\"col-span-1 flex justify-center\"><div className=\"w-6 h-6 rounded-full bg-slate-100 text-slate-500 flex items-center justify-center text-xs font-bold\">{cartItems.length - index}</div></div>\n                 \n                 <div className=\"col-span-4\">\n                    <div className=\"font-bold text-slate-800 text-base line-clamp-1\">{item.name}</div>\n                    <div className=\"text-xs text-slate-400 font-mono mb-1\">{item.sku}</div>\n                    \n                    {item.badgeText ? (\n                        <span className=\"inline-flex items-center gap-1 text-[10px] text-white px-2 py-0.5 rounded-md font-semibold shadow-sm mt-0.5\" style={{ backgroundColor: '#184290' }}>\n                          <Tag size={10} className=\"text-white\" /> {item.badgeText}\n                        </span>\n                    ) : ( item.promoTag && <span className=\"inline-flex items-center gap-1 text-[10px] bg-orange-100 text-orange-700 px-1.5 py-0.5 rounded font-bold mt-0.5\"><Tag size={10} /> {item.promoTag}</span> )}\n                 </div>\n\n                 <div className=\"col-span-2 text-right\">\n                    <div className=\"text-lg font-bold text-slate-600\">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤{price.toLocaleString()}</div>\n                 </div>\n\n                 <div className=\"col-span-2 flex justify-center\">\n                    <div className=\"bg-white border border-slate-200 px-2 py-1 rounded-lg font-bold text-slate-700 shadow-sm min-w-[3.5rem] text-center text-xl\">\n                        {qty}\n                    </div>\n                 </div>\n\n                 <div className=\"col-span-1 text-right\">\n                    {discountVal > 0 ? (\n                        <div className=\"text-sm font-bold text-red-600\">‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤{discountVal.toLocaleString(undefined, {minimumFractionDigits:0, maximumFractionDigits:2})}</div>\n                    ) : (\n                        <div className=\"text-slate-300\">-</div>\n                    )}\n                 </div>\n\n                 <div className=\"col-span-2 text-right relative pr-8\"> \n                    <div className=\"text-xl font-bold text-boots-base\">‡∏ä‡∏¥‡πâ‡∏ô{lineTotal.toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: 2})}</div>\n                    <button \n                        onClick={() => removeFromCart(item.id || item.sku)} \n                        className={cn(\"absolute right-0 top-1/2 -translate-y-1/2 p-2 bg-white text-red-500 rounded-full shadow border border-red-100 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-50\", btnEffect)}\n                    >\n                        <Trash2 size={18} />\n                    </button>\n                 </div>\n              </div>\n            )})\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"bg-slate-900 text-white p-6 shadow-[0_-10px_40px_-15px_rgba(0,0,0,0.3)] z-20\">\n           {/* Detailed Summary */}\n           <div className=\"flex justify-between items-end mb-4 border-b border-slate-700 pb-4\">\n              <div className=\"flex gap-8 text-sm\">\n                 <div>\n                    <div className=\"text-slate-400 mb-1\">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡∏≤</div>\n                    <div className=\"font-bold\">{(summary?.subtotal ?? 0).toLocaleString()}</div>\n                 </div>\n                 {summary.billDiscountAmount < 0 && (\n                     <div>\n                        <div className=\"text-slate-400 mb-1\">‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</div>\n                        <div className=\"font-bold text-orange-400\">{summary.billDiscountAmount.toLocaleString()}</div>\n                     </div>\n                 )}\n                 {summary.couponTotal < 0 && (\n                     <div>\n                        <div className=\"text-slate-400 mb-1\">‡∏•‡∏î‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á</div>\n                        <div className=\"font-bold text-orange-400\">{summary.couponTotal.toLocaleString()}</div>\n                     </div>\n                 )}\n                 {summary.allowance < 0 && (\n                     <div>\n                        <div className=\"text-slate-400 mb-1\">Allowance</div>\n                        <div className=\"font-bold text-orange-400\">{summary.allowance.toLocaleString()}</div>\n                     </div>\n                 )}\n              </div>\n              \n              {/* Discount Menu Button */}\n              <button \n                onClick={() => setShowDiscountModal(true)}\n                className={cn(\"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-xl font-bold text-sm shadow-md transition-all\", btnEffect)}\n              >\n                <Tag size={18} /> ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‚Äù (Discount)\n              </button>\n           </div>\n\n           <div className=\"flex justify-between items-start mb-6\">\n              <div className=\"flex gap-8\">\n                 <div><div className=\"text-slate-400 text-sm font-medium mb-1\">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</div><div className=\"text-4xl font-bold text-white\">{summary.totalItems} <span className=\"text-lg text-slate-500 font-normal\">Items</span></div></div>\n                 {(summary.discount > 0 || summary.billDiscountAmount < 0 || summary.couponTotal < 0 || summary.allowance < 0) && (\n                     <div>\n                        <div className=\"text-orange-400 text-sm font-medium mb-1\">‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</div>\n                        <div className=\"text-4xl font-bold text-orange-400\">\n                            -‡πÄ‡∏ò‡∏ü{(Math.abs(summary.discount + summary.billDiscountAmount + summary.couponTotal + summary.allowance)).toLocaleString()}\n                        </div>\n                     </div>\n                 )}\n              </div>\n              <div className=\"text-right\"><div className=\"text-slate-400 text-sm font-medium mb-1\">‡πÄ‡∏ò‡∏Ç‡πÄ‡∏ò‡∏ç‡πÄ‡∏ò‚Äù‡πÄ‡∏ò‡∏ä‡πÄ‡∏ò‡∏ò‡πÄ‡∏ò‚Äî‡πÄ‡∏ò¬ò‡πÄ‡∏ò‡∏î (Net Total)</div><div className=\"text-7xl font-bold tracking-tighter text-white leading-none\">‡πÄ‡∏ò‡∏ü{summary.netTotal.toLocaleString(undefined, { minimumFractionDigits: 2 })}</div></div>\n           </div>\n           \n           <button onClick={handleCheckout} disabled={cartItems.length === 0 || isLoading || isSaving} className={cn(\"w-full bg-boots-base hover:bg-blue-600 text-white h-20 rounded-xl text-2xl font-bold flex items-center justify-center gap-4 shadow-lg shadow-boots-base/30 disabled:opacity-50 disabled:cursor-not-allowed\", btnEffect)}>\n              {isSaving ? <Loader2 className=\"animate-spin w-8 h-8\" /> : <ShoppingCart className=\"w-8 h-8\" />}\n              <span>‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô(Checkout)</span>\n              <span className=\"bg-white/20 text-white text-sm px-3 py-1 rounded font-normal\">F12</span>\n           </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\ErrorBoundary.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\LoadingSpinner.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef } from \"react\";\nimport { cn } from \"../utils/cn\";\n\nexport default function LoadingSpinner({ label = \"Loading...\", size = 180, className }) {\n  const canvasRef = useRef(null);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return undefined;\n\n    const ctx = canvas.getContext(\"2d\");\n    if (!ctx) return undefined;\n\n    const cw = (canvas.width = 400);\n    const ch = (canvas.height = 300);\n    const rand = (a, b) => Math.floor(Math.random() * (b - a + 1)) + a;\n    const dToR = (degrees) => degrees * (Math.PI / 180);\n\n    const circle = {\n      x: cw / 2 + 5,\n      y: ch / 2 + 22,\n      radius: 90,\n      speed: 2,\n      rotation: 0,\n      angleStart: 270,\n      angleEnd: 90,\n      hue: 220,\n      thickness: 18,\n      blur: 25,\n    };\n\n    const particles = [];\n    const particleMax = 100;\n\n    const updateCircle = () => {\n      if (circle.rotation < 360) {\n        circle.rotation += circle.speed;\n      } else {\n        circle.rotation = 0;\n      }\n    };\n\n    let gradient1;\n    let gradient2;\n    let flareGradient;\n\n    const renderCircle = () => {\n      ctx.save();\n      ctx.translate(circle.x, circle.y);\n      ctx.rotate(dToR(circle.rotation));\n      ctx.beginPath();\n      ctx.arc(0, 0, circle.radius, dToR(circle.angleStart), dToR(circle.angleEnd), true);\n      ctx.lineWidth = circle.thickness;\n      ctx.strokeStyle = gradient1;\n      ctx.stroke();\n      ctx.restore();\n    };\n\n    const renderCircleBorder = () => {\n      ctx.save();\n      ctx.translate(circle.x, circle.y);\n      ctx.rotate(dToR(circle.rotation));\n      ctx.beginPath();\n      ctx.arc(\n        0,\n        0,\n        circle.radius + circle.thickness / 2,\n        dToR(circle.angleStart),\n        dToR(circle.angleEnd),\n        true\n      );\n      ctx.lineWidth = 2;\n      ctx.strokeStyle = gradient2;\n      ctx.stroke();\n      ctx.restore();\n    };\n\n    const renderCircleFlare = () => {\n      ctx.save();\n      ctx.translate(circle.x, circle.y);\n      ctx.rotate(dToR(circle.rotation));\n      ctx.beginPath();\n      ctx.arc(0, 0, circle.radius, dToR(circle.angleStart), dToR(circle.angleStart + 10), true);\n      ctx.strokeStyle = flareGradient;\n      ctx.lineWidth = circle.thickness / 2;\n      ctx.stroke();\n      ctx.restore();\n    };\n\n    const renderCircleFlare2 = () => {\n      ctx.save();\n      ctx.translate(circle.x, circle.y);\n      ctx.rotate(dToR(circle.rotation + 180));\n      ctx.beginPath();\n      ctx.arc(0, 0, circle.radius, dToR(circle.angleStart), dToR(circle.angleStart + 8), true);\n      ctx.strokeStyle = flareGradient;\n      ctx.lineWidth = circle.thickness / 3;\n      ctx.stroke();\n      ctx.restore();\n    };\n\n    const createParticles = () => {\n      if (particles.length < particleMax) {\n        particles.push({\n          x:\n            circle.x +\n            circle.radius * Math.cos(dToR(circle.rotation - 85)) +\n            (rand(0, circle.thickness * 2) - circle.thickness),\n          y:\n            circle.y +\n            circle.radius * Math.sin(dToR(circle.rotation - 85)) +\n            (rand(0, circle.thickness * 2) - circle.thickness),\n          vx: (rand(0, 100) - 50) / 1000,\n          vy: (rand(0, 100) - 50) / 1000,\n          radius: rand(1, 6) / 2,\n          alpha: rand(10, 20) / 100,\n        });\n      }\n    };\n\n    const updateParticles = () => {\n      let i = particles.length;\n      while (i--) {\n        const p = particles[i];\n        p.vx += (rand(0, 100) - 50) / 750;\n        p.vy += (rand(0, 100) - 50) / 750;\n        p.x += p.vx;\n        p.y += p.vy;\n        p.alpha -= 0.01;\n\n        if (p.alpha < 0.02) {\n          particles.splice(i, 1);\n        }\n      }\n    };\n\n    const renderParticles = () => {\n      let i = particles.length;\n      while (i--) {\n        const p = particles[i];\n        ctx.beginPath();\n        ctx.fillRect(p.x, p.y, p.radius, p.radius);\n        ctx.closePath();\n        ctx.fillStyle = `hsla(0, 0%, 100%, ${p.alpha})`;\n      }\n    };\n\n    const clear = () => {\n      ctx.globalCompositeOperation = \"destination-out\";\n      ctx.fillStyle = \"rgba(0, 0, 0, .1)\";\n      ctx.fillRect(0, 0, cw, ch);\n      ctx.globalCompositeOperation = \"lighter\";\n    };\n\n    const loop = () => {\n      clear();\n      updateCircle();\n      renderCircle();\n      renderCircleBorder();\n      renderCircleFlare();\n      renderCircleFlare2();\n      createParticles();\n      updateParticles();\n      renderParticles();\n    };\n\n    ctx.shadowBlur = circle.blur;\n    ctx.shadowColor = `hsla(${circle.hue}, 80%, 60%, 1)`;\n    ctx.lineCap = \"round\";\n\n    gradient1 = ctx.createLinearGradient(0, -circle.radius, 0, circle.radius);\n    gradient1.addColorStop(0, `hsla(${circle.hue}, 60%, 50%, .25)`);\n    gradient1.addColorStop(1, `hsla(${circle.hue}, 60%, 50%, 0)`);\n\n    gradient2 = ctx.createLinearGradient(0, -circle.radius, 0, circle.radius);\n    gradient2.addColorStop(0, `hsla(${circle.hue}, 100%, 50%, 0)`);\n    gradient2.addColorStop(0.1, `hsla(${circle.hue}, 100%, 100%, .7)`);\n    gradient2.addColorStop(1, `hsla(${circle.hue}, 100%, 50%, 0)`);\n\n    flareGradient = ctx.createRadialGradient(0, 0, circle.radius / 2, 0, 0, circle.radius + 40);\n    flareGradient.addColorStop(0, `hsla(${circle.hue}, 100%, 80%, .8)`);\n    flareGradient.addColorStop(1, `hsla(${circle.hue}, 100%, 50%, 0)`);\n\n    const intervalId = window.setInterval(loop, 16);\n    return () => window.clearInterval(intervalId);\n  }, []);\n\n  return (\n    <div\n      className={cn(\"flex flex-col items-center justify-center gap-3 text-slate-500\", className)}\n    >\n      <canvas\n        ref={canvasRef}\n        style={{ width: size, height: (size * 3) / 4 }}\n        aria-hidden=\"true\"\n      />\n      <span className=\"text-sm font-medium\" role=\"status\" aria-live=\"polite\">\n        {label}\n      </span>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\NeuClock.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"Ôªøimport React, { useEffect, useState } from \"react\";\n\nexport default function NeuClock() {\n  const [now, setNow] = useState(new Date());\n\n  useEffect(() => {\n    const t = setInterval(() => setNow(new Date()), 1000);\n    return () => clearInterval(t);\n  }, []);\n\n  const hh = String(now.getHours()).padStart(2, \"0\");\n  const mm = String(now.getMinutes()).padStart(2, \"0\");\n\n  return (\n    <div className=\"px-3 py-1.5 rounded-full border text-xs font-bold text-slate-500 bg-slate-100 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700\">\n      {hh}:{mm}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\PosTabContent.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ReceiptModal' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"ReceiptModal"},"fix":{"range":[48,66],"text":""},"desc":"Remove unused variable 'ReceiptModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ProductLookupModal' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"ProductLookupModal"},"fix":{"range":[91,115],"text":""},"desc":"Remove unused variable 'ProductLookupModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DailyReportModal' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"DailyReportModal"},"fix":{"range":[146,168],"text":""},"desc":"Remove unused variable 'DailyReportModal'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport ReceiptModal from './ReceiptModal';\nimport ProductLookupModal from './ProductLookupModal';\nimport DailyReportModal from './DailyReportModal';\n\nconst PosTabContent = () => {\n  const [lastOrder, setLastOrder] = useState(null);\n  const [showProductLookup, setShowProductLookup] = useState(false);\n  const [showReport, setShowReport] = useState(false);\n\n  return (\n    <div className=\"h-full w-full bg-slate-100 p-4 font-sans flex gap-4 overflow-hidden\">\n      {lastOrder && <ReceiptModal order={lastOrder} onClose={() => setLastOrder(null)} />}\n      {showProductLookup && <ProductLookupModal onClose={() => setShowProductLookup(false)} />}\n      {showReport && <DailyReportModal onClose={() => setShowReport(false)} />}\n\n      <div className=\"flex flex-col items-center justify-center w-full h-full text-slate-500\">\n        <p className=\"text-lg font-semibold\">POS workspace</p>\n        <p className=\"text-sm\">Add the full tab experience here.</p>\n      </div>\n    </div>\n  );\n};\n\nexport default PosTabContent;\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\PosUI.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ShoppingCart' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"ShoppingCart"},"fix":{"range":[61,74],"text":""},"desc":"Remove unused variable 'ShoppingCart'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Search' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"Search"},"fix":{"range":[73,81],"text":""},"desc":"Remove unused variable 'Search'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ScanBarcode' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"ScanBarcode"},"fix":{"range":[81,94],"text":""},"desc":"Remove unused variable 'ScanBarcode'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Trash2' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":51,"suggestions":[{"messageId":"removeVar","data":{"varName":"Trash2"},"fix":{"range":[94,102],"text":""},"desc":"Remove unused variable 'Trash2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Loader2' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"Loader2"},"fix":{"range":[102,111],"text":""},"desc":"Remove unused variable 'Loader2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Tag' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":65,"suggestions":[{"messageId":"removeVar","data":{"varName":"Tag"},"fix":{"range":[111,116],"text":""},"desc":"Remove unused variable 'Tag'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Package' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":67,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":74,"suggestions":[{"messageId":"removeVar","data":{"varName":"Package"},"fix":{"range":[116,125],"text":""},"desc":"Remove unused variable 'Package'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":99,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":110,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle"},"fix":{"range":[148,161],"text":""},"desc":"Remove unused variable 'CheckCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ReceiptModal' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"ReceiptModal"},"fix":{"range":[330,348],"text":""},"desc":"Remove unused variable 'ReceiptModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ProductLookupModal' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"ProductLookupModal"},"fix":{"range":[373,397],"text":""},"desc":"Remove unused variable 'ProductLookupModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DailyReportModal' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"DailyReportModal"},"fix":{"range":[428,450],"text":""},"desc":"Remove unused variable 'DailyReportModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'PosUploadModal' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"PosUploadModal"},"fix":{"range":[479,499],"text":""},"desc":"Remove unused variable 'PosUploadModal'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { ShoppingCart, Search, ScanBarcode, Trash2, Loader2, Tag, Package, Percent, Ticket, Gift, CheckCircle } from 'lucide-react';\nimport { cn } from '../utils/cn';\nimport { useCart } from '../hooks/useCart';\nimport { useScanListener } from '../hooks/useScanListener';\nimport ReceiptModal from './ReceiptModal';\nimport ProductLookupModal from './ProductLookupModal';\nimport DailyReportModal from './DailyReportModal';\nimport PosUploadModal from \"./PosUploadModal\"; \nimport { posService } from '../services/posService';\nimport { useTheme } from '../context/ThemeContext';\n\nexport default function PosUI({ isDarkMode: externalDarkMode }) {\n  // BEGIN: FUNCTION ZONE (DO NOT TOUCH)\n  const theme = useTheme();\n  const { \n    cartItems, addToCart: originalAddToCart, decreaseItem, removeFromCart, clearCart, \n    summary, lastScanned, isLoading,\n    setManualItemDiscount, updateBillDiscount, billDiscount,\n    addCoupon, coupons, allowance, topup\n  } = useCart();\n\n  const [lastOrder, setLastOrder] = useState(null);\n  const [isSaving, setIsSaving] = useState(false);\n  const [isVoidMode, setIsVoidMode] = useState(false);\n  const [nextQty, setNextQty] = useState(1);\n  \n  // Theme State\n  const isDarkMode = externalDarkMode ?? theme?.isDark ?? false;\n\n  // Modal States\n  const [suggestions, setSuggestions] = useState([]);\n  const [showDropdown, setShowDropdown] = useState(false);\n\n  // --- Search UX Enhancements (Arrow select + Enter pick + Search Hits) ---\n  const [selectedSuggestionIndex, setSelectedSuggestionIndex] = useState(0);\n  const [searchHits, setSearchHits] = useState(() => {\n    try { return JSON.parse(localStorage.getItem(\"pos_search_hits\") || \"{}\"); }\n    catch { return {}; }\n  });\n\n  const bumpSearchHit = (sku) => {\n    try {\n      const key = (sku || \"\").toString();\n      if (!key) return;\n      const next = { ...(searchHits || {}) };\n      next[key] = (next[key] || 0) + 1;\n      setSearchHits(next);\n      localStorage.setItem(\"pos_search_hits\", JSON.stringify(next));\n    } catch (err) {\n      console.debug(\"persist search hit failed\", err);\n    }\n  };\n\n  const [showProductLookup, setShowProductLookup] = useState(false);\n  const [showReport, setShowReport] = useState(false);\n  const [showDiscountModal, setShowDiscountModal] = useState(false);\n  const [showUploadModal, setShowUploadModal] = useState(false);\n\n  // Discount Modal Inner State\n  const [activeTab, setActiveTab] = useState('discount'); \n  const [discountSubTab, setDiscountSubTab] = useState('bill'); \n  const [discountCheckedItems, setDiscountCheckedItems] = useState(new Set());\n  \n  // Coupon Input State\n  const [couponInput, setCouponInput] = useState({ type: '', value: '', code: '' });\n  const [showCouponInput, setShowCouponInput] = useState(false); \n\n  const lastItemDetail = lastScanned ? cartItems.find(i => (i.sku === lastScanned || i.id === lastScanned)) : null;\n  const totalDiscountDisplay = Math.abs((summary?.discount || 0) + (summary?.billDiscountAmount || 0) + (summary?.couponTotal || 0) + (summary?.allowance || 0));\n\n  // --- Handlers ---\n  const toggleDiscountCheck = (id) => {\n    setDiscountCheckedItems(prev => {\n        const next = new Set(prev);\n        if (next.has(id)) next.delete(id);\n        else next.add(id);\n        return next;\n    });\n  };\n\n  const handleScanAction = async (skuOrItem) => {\n    if (showCouponInput) {\n        setCouponInput(prev => ({ ...prev, code: typeof skuOrItem === 'string' ? skuOrItem : skuOrItem.sku }));\n        return;\n    }\n    const quantityToApply = nextQty;\n    \n    if (isVoidMode) {\n       const sku = typeof skuOrItem === 'string' ? skuOrItem : (skuOrItem.sku || skuOrItem.id);\n       decreaseItem(sku); \n       setShowDropdown(false);\n       setInputValue('');\n       if (nextQty !== 1) setNextQty(1);\n       return;\n    }\n    \n    if (typeof skuOrItem === 'string') {\n        try {\n          const item = await posService.scanItem(skuOrItem);\n          await originalAddToCart(item, quantityToApply);\n        } catch (e) { console.error(e); }\n    } else {\n        await originalAddToCart(skuOrItem, quantityToApply);\n    }\n    \n    if (nextQty !== 1) setNextQty(1);\n    setShowDropdown(false);\n  };\n\n  const handleCheckout = async () => {\n    if (cartItems.length === 0) return;\n    const orderData = { \n        items: [...cartItems], \n        summary: summary, \n        cashier: 'Staff #01', \n        device: 'POS-Web',\n        adjustments: { billDiscount, coupons, allowance, topup }\n    };\n    setIsSaving(true);\n    try {\n      const orderId = await posService.createOrder(orderData);\n      setLastOrder({ ...orderData, id: orderId, timestamp: new Date().toISOString() });\n      clearCart();\n    } catch (err) { alert('Error: ' + err.message); } \n    finally { setIsSaving(false); }\n  };\n\n  const scanEnabled = !showDiscountModal && !showCouponInput && !showProductLookup && !showReport && !showUploadModal && !lastOrder;\n\n  const { inputRef, inputValue, setInputValue, handleInputKeyDown, handleInputChange } = useScanListener(\n    handleScanAction,\n    scanEnabled ? handleCheckout : undefined,\n    () => setShowProductLookup(true),\n    { enabled: scanEnabled }\n  );\n\n  const handleInputKeyDownWrapper = async (e) => {\n    if (scanEnabled && showDropdown && suggestions.length > 0 && !isVoidMode) {\n      if (e.key === \"ArrowDown\") { e.preventDefault(); setSelectedSuggestionIndex(i => Math.min(i + 1, suggestions.length - 1)); return; }\n      if (e.key === \"ArrowUp\")   { e.preventDefault(); setSelectedSuggestionIndex(i => Math.max(i - 1, 0)); return; }\n      if (e.key === \"Enter\") {\n        e.preventDefault();\n        const sel = suggestions[selectedSuggestionIndex];\n        if (sel?.sku) {\n          bumpSearchHit(sel.sku);\n          await handleSelectSuggestion(sel.sku);\n        }\n        return;\n      }\n    }\n    handleInputKeyDown(e);\n  };\n\n  const onInputChangeWrapper = (e) => {\n    const val = e.target.value;\n    if (val.endsWith('*')) {\n      const numberPart = val.slice(0, -1);\n      if (/^\\d+$/.test(numberPart)) {\n        const qty = parseInt(numberPart, 10);\n        if (qty > 0) { setNextQty(qty); setInputValue(''); } \n        else { alert('‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0'); setInputValue(''); }\n      } else { setInputValue(''); }\n      return; \n    }\n    handleInputChange(e);\n  };\n\n  useEffect(() => {\n    const timer = setTimeout(async () => {\n      if (inputValue.length >= 2 && scanEnabled && !isVoidMode) { \n        const results = await posService.searchProducts(inputValue);\n        const hits = (() => {\n          try { return JSON.parse(localStorage.getItem(\"pos_search_hits\") || \"{}\"); } catch { return {}; }\n        })();\n        const sorted = [...(results || [])].sort((a, b) => {\n          const ak = (a?.sku || a?.id || \"\").toString();\n          const bk = (b?.sku || b?.id || \"\").toString();\n          const ah = hits?.[ak] || 0;\n          const bh = hits?.[bk] || 0;\n          if (bh !== ah) return bh - ah;\n          const an = (a?.name || \"\").toString();\n          const bn = (b?.name || \"\").toString();\n          return an.localeCompare(bn, undefined, { sensitivity: \"base\" });\n        });\n        setSuggestions(sorted);\n        setSelectedSuggestionIndex(0);\n        setShowDropdown(sorted.length > 0);\n      } else { setSuggestions([]); setShowDropdown(false); }\n    }, 300);\n    return () => clearTimeout(timer);\n  }, [inputValue, isVoidMode, scanEnabled]);\n\n  const handleSelectSuggestion = async (sku) => {\n    if (!sku) return;\n    setInputValue('');\n    setShowDropdown(false);\n    try {\n      const item = await posService.scanItem(sku);\n      await handleScanAction(item);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  const handleSaveCoupon = () => {\n      if (!couponInput.value && couponInput.type !== 'boots') return;\n      let finalValue = parseFloat(couponInput.value) || 0;\n      let finalCode = couponInput.code;\n      if (couponInput.type === 'boots') {\n          if (finalValue === 0) {\n             const numbers = finalCode.match(/\\d+/);\n             finalValue = numbers ? parseInt(numbers[0]) : 50; \n          }\n      }\n      addCoupon({ couponType: couponInput.type, couponValue: finalValue, couponCode: finalCode });\n      setShowCouponInput(false);\n  };\n  // END:   FUNCTION ZONE (DO NOT TOUCH)\n\n  // Unity Theme UI\n  return (\n    <div className={cn(\n        \"h-full min-h-0 w-full font-sans flex gap-4 p-4 overflow-visible relative transition-colors duration-300\",\n        isDarkMode ? \"bg-[#0f1014] text-slate-100\" : \"bg-[#f8fafc] text-slate-800\"\n    )} onClick={() => setShowDropdown(false)}>\n\n      {/* --- LEFT SIDE: SCANNER & FOOTAGE --- */}\n      <div className=\"w-[35%] max-w-[450px] flex flex-col gap-4 min-h-0\">\n        \n        {/* 1. SCAN PRODUCT BOX (Glass Card) */}\n        <div className={cn(\"glass-panel p-5 relative transition-all duration-300 z-20\", \n             isVoidMode && \"border-red-500/50 bg-red-500/5\"\n        )}>\n            <div className=\"flex justify-between items-center mb-4\">\n               <div className=\"flex items-center gap-2 text-slate-500 dark:text-slate-400\">\n                  <div className=\"p-1.5 rounded-lg bg-slate-100 dark:bg-white/10\">\n                     <ScanBarcode size={18} />\n                  </div>\n                  <span className=\"text-[11px] font-bold tracking-widest uppercase\">Scanner</span>\n               </div>\n               \n               {isVoidMode && <span className=\"text-[10px] font-bold text-white bg-red-500 px-2 py-1 rounded shadow-sm shadow-red-500/20\">VOID MODE</span>}\n               \n                <button \n                   onClick={() => { setIsVoidMode(!isVoidMode); if (scanEnabled) inputRef.current?.focus(); }}\n                   className={cn(\"px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border\", \n                      isVoidMode \n                        ? \"bg-white/10 text-red-500 border-red-500/30 hover:bg-red-500 hover:text-white\" \n                        : \"bg-slate-100 dark:bg-white/5 border-slate-200 dark:border-white/10 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-white/10\"\n                   )}\n                >\n                   {isVoidMode ? 'CANCEL VOID' : 'VOID ITEM'}\n                </button>\n            </div>\n            \n            <div className=\"relative group\">\n              <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none group-focus-within:text-blue-500 transition-colors\" size={20} />\n              <input \n                  ref={inputRef}\n                  value={inputValue}\n                  onChange={onInputChangeWrapper}\n                  onKeyDown={handleInputKeyDownWrapper}\n                  disabled={isLoading || lastOrder || isSaving || showDiscountModal || showCouponInput || showProductLookup || showReport || showUploadModal}\n                  type=\"text\" \n                  placeholder={isVoidMode ? \"Scan to remove...\" : \"Scan barcode...\"}\n                  autoComplete=\"off\"\n                  aria-label=\"Scan or search product\"\n                  className={cn(\n                    \"glass-input pl-12 pr-12 text-lg font-bold placeholder:font-medium placeholder:text-base\", \n                    isVoidMode && \"border-red-500/50 text-red-600 focus:border-red-500 focus:ring-red-500/30\"\n                  )}\n              />\n              {/* Qty Badge */}\n              {nextQty > 1 && (\n                    <div className=\"absolute top-1/2 -translate-y-1/2 right-3 bg-blue-500/10 border border-blue-500/30 text-blue-600 dark:text-blue-400 text-xs font-bold px-2 py-1 rounded-md shadow-sm animate-in zoom-in\">\n                       x{nextQty}\n                    </div>\n              )}\n            </div>\n\n            {/* Hint */}\n            <div className=\"mt-3 flex items-center gap-2 text-[10px] text-slate-400 dark:text-slate-500\">\n               <span className=\"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 px-1.5 py-0.5 rounded border border-yellow-500/20\">Tip</span> Enter number + * for quantity (e.g. 5*)\n            </div>\n            \n            {/* Search Dropdown (Glass) */}\n            {showDropdown && !isVoidMode && (\n              <div\n                className=\"absolute top-full left-0 right-0 mt-2 mx-1 rounded-2xl shadow-2xl overflow-hidden z-[80] max-h-[300px] overflow-y-auto bg-white/90 dark:bg-[#1e2025]/95 backdrop-blur-xl border border-slate-200/50 dark:border-white/10 pointer-events-auto\"\n                onClick={(e) => e.stopPropagation()}\n              >\n                {suggestions.map((item, idx) => (\n                  <div\n                    key={item.sku}\n                    onMouseEnter={() => setSelectedSuggestionIndex(idx)}\n                    onClick={() => { bumpSearchHit(item.sku); handleSelectSuggestion(item.sku); }}\n                    className={cn(\n                      \"p-3 border-b border-slate-100 dark:border-white/5 cursor-pointer flex justify-between items-center transition-colors\",\n                      idx === selectedSuggestionIndex\n                        ? \"bg-blue-50 dark:bg-white/5\"\n                        : \"hover:bg-slate-50 dark:hover:bg-white/5\"\n                    )}\n                  >\n                    <div><div className=\"font-bold text-slate-800 dark:text-slate-200 text-sm\">{item.name}</div><div className=\"text-[10px] font-mono text-slate-400\">{item.sku}</div></div>\n                    <div className=\"text-blue-600 dark:text-blue-400 font-bold text-sm\">‡∏ø{item.price}</div>\n                  </div>\n                ))}\n              </div>\n            )}\n        </div>\n\n        {/* 2. LAST SCANNED (Glass Card) */}\n        <div className=\"glass-panel flex-1 min-h-0 relative overflow-hidden flex flex-col items-center justify-center p-6 bg-gradient-to-b from-white/60 to-white/40 dark:from-white/5 dark:to-transparent\">\n             <div className=\"absolute top-4 left-4 flex items-center gap-2 text-slate-400/80\">\n                <Package size={16} />\n                <span className=\"text-[10px] font-bold tracking-widest uppercase\">Review</span>\n             </div>\n\n            {lastItemDetail ? (\n               <div className=\"text-center w-full animate-in slide-in-from-bottom-4 fade-in duration-300 relative z-10\">\n                  <div className=\"mb-6 relative inline-block\">\n                     <div className={cn(\"w-28 h-28 rounded-3xl flex items-center justify-center shadow-xl mx-auto border border-white/20 dark:border-white/5\", \n                        isVoidMode ? \"bg-red-500/10 text-red-500\" : \"bg-gradient-to-br from-blue-500/20 to-cyan-500/20 text-blue-600 dark:text-blue-400\"\n                     )}>\n                        <Package size={56} strokeWidth={1.5} />\n                     </div>\n                     <div className=\"absolute -bottom-3 -right-3 bg-slate-800 dark:bg-white text-white dark:text-slate-900 text-sm font-bold w-8 h-8 flex items-center justify-center rounded-xl shadow-lg border-2 border-slate-50 dark:border-[#0f1014]\">\n                        {lastItemDetail.qty}\n                     </div>\n                  </div>\n                  \n                  <h3 className=\"text-lg font-bold leading-tight mb-2 line-clamp-2 px-2 text-slate-800 dark:text-white\">\n                     {lastItemDetail.name}\n                  </h3>\n                  \n                  <div className=\"text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-br from-slate-800 to-slate-600 dark:from-white dark:to-slate-400 tracking-tight mt-2\">\n                     ‡∏ø{((lastItemDetail.calculatedTotal !== undefined ? lastItemDetail.calculatedTotal : (lastItemDetail.price * lastItemDetail.qty))).toLocaleString()}\n                  </div>\n                  <div className=\"text-xs font-mono text-slate-400 mt-2 bg-slate-100 dark:bg-white/5 px-2 py-1 rounded-md inline-block\">\n                     {lastItemDetail.sku}\n                  </div>\n               </div>\n            ) : (\n               <div className=\"flex flex-col items-center justify-center opacity-30 select-none\">\n                  <div className=\"w-20 h-20 rounded-full border-2 border-dashed border-slate-400 flex items-center justify-center mb-4\">\n                     <ScanBarcode size={32} />\n                  </div>\n                  <span className=\"text-sm font-bold uppercase tracking-widest\">Ready to Scan</span>\n               </div>\n            )}\n         </div>\n      </div>\n\n      {/* --- RIGHT SIDE: CART (Glass Panel) --- */}\n      <div className=\"glass-panel flex-1 flex flex-col min-h-0 overflow-hidden shadow-2xl relative\">\n         \n         {/* CART HEADER */}\n         <div className=\"grid grid-cols-12 px-6 py-4 text-[11px] font-bold uppercase tracking-wider text-slate-500 dark:text-slate-400 border-b border-slate-200/50 dark:border-white/5 bg-slate-50/50 dark:bg-white/5 backdrop-blur-sm z-20\">\n             <div className=\"col-span-1\">#</div>\n             <div className=\"col-span-4\">Item</div>\n             <div className=\"col-span-2 text-right\">Unit Price</div>\n             <div className=\"col-span-1 text-center\">Qty</div>\n             <div className=\"col-span-2 text-center\">Discount</div>\n             <div className=\"col-span-2 text-right\">Total</div>\n         </div>\n\n         {/* CART LIST */}\n         <div className=\"flex-1 overflow-y-auto px-2 py-2\">\n            {cartItems.length === 0 ? (\n                <div className=\"h-full flex flex-col items-center justify-center text-slate-300 dark:text-slate-700 pb-10 select-none\">\n                   <div className=\"w-24 h-24 rounded-full bg-slate-100 dark:bg-white/5 flex items-center justify-center mb-6\">\n                      <ShoppingCart size={40} className=\"opacity-50\" />\n                   </div>\n                   <p className=\"font-medium\">Cart is empty</p>\n                   <p className=\"text-xs mt-2 opacity-60\">Scan items to start transaction</p>\n                </div>\n            ) : (\n                cartItems.map((item, index) => {\n                    const lineTotal = item.calculatedTotal !== undefined ? item.calculatedTotal : (item.price * item.qty);\n                    const normalTotal = item.normalPrice || (item.price * item.qty);\n                    const discountVal = Math.max(0, normalTotal - lineTotal);\n\n                    return (\n                       <div key={item.id || item.sku} className=\"grid grid-cols-12 px-4 py-3.5 items-center text-sm group hover:bg-white/40 dark:hover:bg-white/5 rounded-xl transition-colors border-b border-transparent hover:border-slate-200/50 dark:hover:border-white/5\">\n                          <div className=\"col-span-1 text-slate-400 text-xs font-mono\">{cartItems.length - index}</div>\n                          \n                          <div className=\"col-span-4 pr-2\">\n                             <div className=\"font-bold text-slate-800 dark:text-slate-200 truncate\">{item.name}</div>\n                             <div className=\"flex items-center gap-2 mt-0.5\">\n                                <span className=\"text-[10px] text-slate-400 font-mono\">{item.sku}</span>\n                                {item.badgeText && <span className=\"text-[9px] bg-red-100 dark:bg-red-500/20 text-red-600 dark:text-red-400 px-1.5 rounded-sm font-bold uppercase\">{item.badgeText}</span>}\n                             </div>\n                          </div>\n                          \n                          <div className=\"col-span-2 text-right font-medium text-slate-600 dark:text-slate-400 font-mono\">\n                             {item.price.toLocaleString()}\n                          </div>\n                          \n                          <div className=\"col-span-1 flex justify-center\">\n                             <div className=\"w-8 h-8 rounded-lg flex items-center justify-center bg-white dark:bg-white/10 border border-slate-200 dark:border-white/5 text-xs font-bold shadow-sm\">\n                                {item.qty}\n                             </div>\n                          </div>\n                          \n                          <div className=\"col-span-2 text-center\">\n                              {discountVal > 0 ? (\n                                  <span className=\"text-[10px] text-red-500 bg-red-100 dark:bg-red-500/10 border border-red-200 dark:border-red-500/20 px-2 py-0.5 rounded-full font-bold\">\n                                      -{discountVal.toLocaleString()}\n                                  </span>\n                              ) : (\n                                  <span className=\"text-slate-300 dark:text-slate-700\">-</span>\n                              )}\n                          </div>\n\n                          <div className=\"col-span-2 text-right font-bold text-slate-800 dark:text-white font-mono text-base relative group-hover:pr-8 transition-all\">\n                             {lineTotal.toLocaleString()}\n                             \n                             {/* Delete Action (Hover) */}\n                             <button \n                                onClick={(e) => { e.stopPropagation(); removeFromCart(item.id || item.sku); }}\n                                className=\"absolute right-0 top-1/2 -translate-y-1/2 w-7 h-7 flex items-center justify-center bg-red-50 dark:bg-red-500/10 text-red-500 rounded-lg opacity-0 group-hover:opacity-100 hover:bg-red-500 hover:text-white transition-all shadow-sm\"\n                                title=\"Remove Item\"\n                             >\n                                <Trash2 size={14} />\n                             </button>\n                          </div>\n                       </div>\n                    );\n                })\n            )}\n         </div>\n\n         {/* FOOTER (Glass Gradient) */}\n         <div className=\"relative z-20 bg-white/80 dark:bg-[#15171e]/90 backdrop-blur-xl border-t border-slate-200 dark:border-white/10 p-5 shadow-[0_-5px_20px_rgba(0,0,0,0.05)]\">\n             <div className=\"flex justify-between items-end mb-5\">\n                  <div className=\"flex flex-col gap-1\">\n                      <div className=\"text-xs font-bold text-slate-400 uppercase tracking-widest\">Total (Items: {summary?.totalItems || 0})</div>\n                      {totalDiscountDisplay > 0 && (\n                         <div className=\"flex items-center gap-1.5 text-xs font-bold text-red-500 bg-red-50 dark:bg-red-500/10 px-2 py-1 rounded-md self-start\">\n                            <Tag size={12} />\n                            Saved ‡∏ø{totalDiscountDisplay.toLocaleString()}\n                         </div>\n                      )}\n                  </div>\n\n                  <div className=\"flex flex-col items-end\">\n                      <div className=\"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1\">Net Total</div>\n                      <div className=\"flex items-baseline gap-1 text-slate-800 dark:text-white leading-none\">\n                         <span className=\"text-2xl font-bold\">‡∏ø</span>\n                         <span className=\"text-5xl font-extrabold tracking-tighter\">\n                            {Number(summary?.netTotal || 0).toLocaleString(undefined, { minimumFractionDigits: 2 })}\n                         </span>\n                      </div>\n                  </div>\n             </div>\n\n             <div className=\"grid grid-cols-[auto_1fr] gap-3\">\n                 <button \n                    onClick={() => setShowDiscountModal(true)}\n                    className=\"btn-secondary px-4 min-w-[100px]\"\n                 >\n                    <Tag size={18} />\n                    <span>Discounts</span>\n                    {totalDiscountDisplay > 0 && <span className=\"w-2 h-2 rounded-full bg-red-500 ml-1\" />}\n                 </button>\n\n                 <button \n                    onClick={handleCheckout} \n                    disabled={cartItems.length === 0 || isLoading || isSaving}\n                    className=\"btn-primary w-full text-lg shadow-blue-500/25\"\n                 >\n                    {isSaving ? <Loader2 className=\"animate-spin\" size={24}/> : <ShoppingCart size={24} />}\n                    <span>Checkout</span>\n                    <kbd className=\"hidden md:inline-flex items-center h-6 px-2 ml-3 text-[10px] font-sans font-medium text-blue-100 bg-blue-500/20 rounded\">F12</kbd>\n                 </button>\n             </div>\n         </div>\n      </div>\n\n      {/* --- MODALS --- */}\n      {lastOrder && <ReceiptModal order={lastOrder} onClose={() => setLastOrder(null)} />}\n      {showProductLookup && <ProductLookupModal onClose={() => setShowProductLookup(false)} />}\n      {showReport && <DailyReportModal onClose={() => setShowReport(false)} />}\n      <PosUploadModal\n        open={showUploadModal}\n        onClose={() => setShowUploadModal(false)}\n        isDarkMode={isDarkMode}\n        pricingReady={true} \n      />\n\n      {/* Simplified Inline Modal for Discounts (Redesigned) */}\n      {showDiscountModal && (\n        <div className=\"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in zoom-in-95 duration-200\">\n            <div className=\"glass-panel w-full max-w-4xl h-[80vh] flex overflow-hidden shadow-2xl relative\">\n                \n                {/* Modal Sidebar */}\n                <div className=\"w-64 p-6 border-r border-slate-200 dark:border-white/10 bg-slate-50/50 dark:bg-black/20 flex flex-col gap-2\">\n                    <h2 className=\"text-xl font-bold mb-6 flex items-center gap-2 text-slate-800 dark:text-white\">\n                        <Tag size={20} className=\"text-blue-500\" /> Discounts\n                    </h2>\n                    \n                    {[\n                      { id: 'discount', label: 'General', icon: Percent },\n                      { id: 'coupon', label: 'Coupons', icon: Ticket },\n                      { id: 'allowance', label: 'Allowance', icon: Gift }\n                    ].map(tab => (\n                      <button \n                        key={tab.id}\n                        onClick={() => setActiveTab(tab.id)} \n                        className={cn(\"flex items-center gap-3 px-4 py-3 rounded-xl font-semibold transition-all text-sm\", \n                           activeTab === tab.id \n                             ? \"bg-blue-600 text-white shadow-md shadow-blue-500/20\" \n                             : \"text-slate-500 dark:text-slate-400 hover:bg-white dark:hover:bg-white/5\"\n                        )}\n                      >\n                        <tab.icon size={18}/> {tab.label}\n                      </button>\n                    ))}\n\n                    <div className=\"mt-auto\">\n                        <button onClick={() => setShowDiscountModal(false)} className=\"w-full py-3 rounded-xl font-bold bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-white/20 transition-colors\">\n                           Close\n                        </button>\n                    </div>\n                </div>\n\n                {/* Modal Content */}\n                <div className=\"flex-1 p-8 overflow-y-auto bg-white/50 dark:bg-black/20\">\n                    {activeTab === 'discount' && (\n                        <div>\n                            <div className=\"flex gap-4 mb-8 border-b border-slate-200 dark:border-white/10 pb-6\">\n                                <button onClick={() => setDiscountSubTab('bill')} className={cn(\"px-6 py-2.5 rounded-xl font-bold transition-all text-sm\", discountSubTab === 'bill' ? \"bg-slate-800 dark:bg-white text-white dark:text-slate-900 shadow-lg\" : \"text-slate-500 hover:bg-slate-100 dark:hover:bg-white/5\")}>Bill Discount</button>\n                                <button onClick={() => setDiscountSubTab('items')} className={cn(\"px-6 py-2.5 rounded-xl font-bold transition-all text-sm\", discountSubTab === 'items' ? \"bg-slate-800 dark:bg-white text-white dark:text-slate-900 shadow-lg\" : \"text-slate-500 hover:bg-slate-100 dark:hover:bg-white/5\")}>Item Discount</button>\n                            </div>\n\n                            {discountSubTab === 'bill' && (\n                                <div className=\"max-w-xs\">\n                                    <label className=\"block text-sm font-bold mb-3 text-slate-500 uppercase tracking-wide\">Percentage (%)</label>\n                                    <div className=\"flex gap-4 items-center\">\n                                        <input \n                                            type=\"number\" \n                                            value={billDiscount.percent} \n                                            onChange={(e) => updateBillDiscount(e.target.value)}\n                                            className=\"glass-input text-4xl font-bold py-4 text-center\"\n                                            placeholder=\"0\"\n                                        />\n                                        <div className=\"text-2xl font-bold text-slate-400\">%</div>\n                                    </div>\n                                </div>\n                            )}\n\n                            {discountSubTab === 'items' && (\n                                <div>\n                                    <h3 className=\"font-bold mb-4 text-sm text-slate-500 uppercase\">Select items to discount</h3>\n                                    <div className=\"space-y-3\">\n                                        {cartItems.map((item, idx) => {\n                                            const isChecked = discountCheckedItems.has(item.id || item.sku);\n                                            return (\n                                                <div key={idx} \n                                                     onClick={() => toggleDiscountCheck(item.id || item.sku)}\n                                                     className={cn(\"flex items-center gap-4 p-4 rounded-xl border cursor-pointer transition-all\", \n                                                        isChecked \n                                                          ? \"border-blue-500 bg-blue-50/50 dark:bg-blue-500/10\" \n                                                          : \"border-slate-200 dark:border-white/10 hover:border-blue-300 dark:hover:border-white/20\"\n                                                     )}\n                                                >\n                                                    <div className={cn(\"w-6 h-6 rounded border flex items-center justify-center transition-colors\", isChecked ? \"bg-blue-500 border-blue-500 text-white\" : \"border-slate-300 dark:border-slate-600\")}>\n                                                        {isChecked && <CheckCircle size={14} />}\n                                                    </div>\n                                                    <div className=\"flex-1\">\n                                                        <div className=\"font-bold text-slate-800 dark:text-white\">{item.name}</div>\n                                                        <div className=\"text-xs text-slate-400 font-mono\">{item.sku}</div>\n                                                    </div>\n                                                    <div className=\"font-bold text-slate-600 dark:text-slate-400\">‡∏ø{(item.price * item.qty).toLocaleString()}</div>\n                                                    \n                                                    {isChecked && (\n                                                        <div className=\"animate-in zoom-in ml-4\">\n                                                            <input \n                                                                type=\"number\" autoFocus\n                                                                onClick={(e) => e.stopPropagation()}\n                                                                value={item.manualDiscountPercent || ''}\n                                                                onChange={(e) => setManualItemDiscount(item.id || item.sku, e.target.value)}\n                                                                className=\"w-16 h-10 rounded-lg border-2 border-orange-400 text-center font-bold outline-none focus:ring-2 focus:ring-orange-200\"\n                                                                placeholder=\"%\"\n                                                            />\n                                                        </div>\n                                                    )}\n                                                </div>\n                                            );\n                                        })}\n                                        {cartItems.length === 0 && <p className=\"text-slate-400 text-center py-8\">Cart is empty</p>}\n                                    </div>\n                                </div>\n                            )}\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n      )}\n      \n      {/* Coupon Input Modal */}\n      {showCouponInput && (\n        <div className=\"fixed inset-0 z-[70] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4\">\n            <div className=\"glass-panel w-full max-w-md p-8 animate-in zoom-in-95\">\n                <h3 className=\"text-xl font-bold mb-6 text-slate-800 dark:text-white\">Add Coupon ({couponInput.type})</h3>\n                <div className=\"space-y-4\">\n                  <input \n                    className=\"glass-input\" \n                    placeholder=\"Coupon Code\" \n                    value={couponInput.code} \n                    onChange={e=>setCouponInput({...couponInput, code:e.target.value})} \n                    autoFocus\n                  />\n                  {couponInput.type !== 'boots' && (\n                     <input \n                       className=\"glass-input\" \n                       type=\"number\" \n                       placeholder=\"Value\" \n                       value={couponInput.value} \n                       onChange={e=>setCouponInput({...couponInput, value:e.target.value})} \n                     />\n                   )}\n                </div>\n                <div className=\"flex gap-3 mt-8\">\n                     <button onClick={()=>setShowCouponInput(false)} className=\"btn-secondary flex-1\">Cancel</button>\n                     <button onClick={handleSaveCoupon} className=\"btn-primary flex-1\">Apply Coupon</button>\n                </div>\n            </div>\n        </div>\n      )}\n\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\PosUploadModal.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'UploadCloud' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"UploadCloud"},"fix":{"range":[70,82],"text":""},"desc":"Remove unused variable 'UploadCloud'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Loader2' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"Loader2"},"fix":{"range":[81,90],"text":""},"desc":"Remove unused variable 'Loader2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle"},"fix":{"range":[90,103],"text":""},"desc":"Remove unused variable 'CheckCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":56,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertCircle"},"fix":{"range":[103,116],"text":""},"desc":"Remove unused variable 'AlertCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":58,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":59,"suggestions":[{"messageId":"removeVar","data":{"varName":"X"},"fix":{"range":[116,119],"text":""},"desc":"Remove unused variable 'X'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Card' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"Card"},"fix":{"range":[389,1072],"text":""},"desc":"Remove unused variable 'Card'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useMemo, useState } from \"react\";\nimport { UploadCloud, Loader2, CheckCircle, AlertCircle, X } from \"lucide-react\";\nimport { cn } from \"../utils/cn\";\nimport { runUploadFlow, abortUploadFlow } from \"../services/uploadService\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { db } from \"../firebase\";\nimport { doc, getDoc } from \"firebase/firestore\";\n\n\nfunction Card({ title, subtitle, disabled, children, isDarkMode }) {\n  return (\n    <div\n      className={cn(\n        \"rounded-2xl border p-4 shadow-sm\",\n        disabled\n          ? (isDarkMode ? \"bg-slate-900/50 border-slate-800 opacity-60\" : \"bg-slate-50 border-slate-200 opacity-60\")\n          : (isDarkMode ? \"bg-slate-900 border-slate-800\" : \"bg-white border-slate-200\")\n      )}\n    >\n      <div className=\"mb-3\">\n        <div className={cn(\"text-lg font-bold\", isDarkMode ? \"text-white\" : \"text-slate-800\")}>{title}</div>\n        <div className={cn(\"text-xs\", isDarkMode ? \"text-slate-400\" : \"text-slate-500\")}>{subtitle}</div>\n      </div>\n      {children}\n    </div>\n  );\n}\n\nexport default function PosUploadModal({ open, onClose, isDarkMode = false }) {\n  const [busy, setBusy] = useState(false);\n  const [progress, setProgress] = useState({ phase: \"idle\", percent: 0, meta: null });\n  const [result, setResult] = useState(null);\n  const [err, setErr] = useState(\"\");\n  const [uploadMeta, setUploadMeta] = useState({});\n  const { role, lastIdCode, session } = useAuth();\n\n  const canSecondary = !!uploadMeta?.ItemMasterPrintOnDeph?.lastUploadAt;\n\n  const statusBadge = useMemo(() => {\n    if (busy) return { icon: <Loader2 className=\"animate-spin\" size={16} />, text: `${progress.phase} ${progress.percent}%` };\n    if (err) return { icon: <AlertCircle size={16} />, text: err };\n    if (result) return { icon: <CheckCircle size={16} />, text: \"Upload completed\" };\n    return { icon: <UploadCloud size={16} />, text: \"Ready\" };\n  }, [busy, progress, err, result]);\n\n  useEffect(() => {\n    if (!open) return;\n    let cancelled = false;\n\n    (async () => {\n      const keys = [\"ItemMasterPrintOnDeph\", \"ProductAllDept\", \"ItemMaintananceEvent\"];\n      const res = {};\n      await Promise.all(\n        keys.map(async (k) => {\n          const snap = await getDoc(doc(db, \"upload_meta\", k));\n          if (snap.exists()) res[k] = snap.data();\n        })\n      );\n      if (!cancelled) setUploadMeta(res);\n    })();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [open, result]);\n\n  if (!open) return null;\n\n\n  const onPick = async (type, file) => {\n    if (!file) return;\n    const actorIdCode = session?.idCode || lastIdCode || \"\";\n    if (role !== \"admin\") {\n      setErr(\"Admin only\");\n      return;\n    }\n    if (!actorIdCode) {\n      setErr(\"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ID ‡∏Å‡πà‡∏≠‡∏ô‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î\");\n      return;\n    }\n    setBusy(true); setErr(\"\"); setResult(null);\n    setProgress({ phase: \"starting\", percent: 1, meta: null });\n    try {\n      const summary = await runUploadFlow({ actorIdCode, type, file, onProgress: setProgress });\n      setResult({ type, summary });\n    } catch (e) {\n      setErr(e?.message || String(e));\n    } finally {\n      setBusy(false);\n    }\n  };\n\n  const abortNow = async () => {\n    const actorIdCode = session?.idCode || lastIdCode || \"\";\n    try {\n      await abortUploadFlow(actorIdCode);\n    } catch (e) {\n      console.warn(\"abort upload failed\", e);\n    }\n    setBusy(false);\n    setErr(\"Aborted\");\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-[80] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4\">\n      <div className={cn(\n        \"w-full max-w-4xl rounded-3xl shadow-2xl border overflow-hidden\",\n        isDarkMode ? \"bg-slate-950 border-slate-800 text-white\" : \"bg-white border-slate-200 text-slate-900\"\n      )}>\n        <div className={cn(\n          \"px-6 py-4 border-b flex items-center justify-between\",\n          isDarkMode ? \"border-slate-800\" : \"border-slate-200\"\n        )}>\n          <div className=\"flex items-center gap-3\">\n            <div className={cn(\n              \"p-2 rounded-xl border\",\n              isDarkMode ? \"bg-white border-white text-slate-900\" : \"bg-slate-50 border-slate-200 text-slate-700\"\n            )}>\n              {statusBadge.icon}\n            </div>\n            <div>\n              <div className=\"text-xl font-bold\">Product Data Upload</div>\n              <div className={cn(\"text-xs\", isDarkMode ? \"text-slate-400\" : \"text-slate-500\")}>{statusBadge.text}</div>\n            </div>\n          </div>\n\n          <button onClick={onClose} disabled={busy} className={cn(\n            \"p-2 rounded-xl border transition\",\n            isDarkMode ? \"border-slate-800 hover:bg-slate-900\" : \"border-slate-200 hover:bg-slate-50\",\n            busy && \"opacity-50 cursor-not-allowed\"\n          )}>\n            <X size={18} />\n          </button>\n        </div>\n\n        <div className={cn(\"px-6 py-4\", isDarkMode ? \"bg-slate-950\" : \"bg-white\")}>\n          <div className={cn(\"h-2 rounded-full overflow-hidden\", isDarkMode ? \"bg-slate-800\" : \"bg-slate-200\")}>\n            <div className=\"h-full bg-blue-600\" style={{ width: `${progress.percent || 0}%` }} />\n          </div>\n\n          {progress.meta && (\n            <div className={cn(\"mt-2 text-xs\", isDarkMode ? \"text-slate-400\" : \"text-slate-600\")}>\n              {JSON.stringify(progress.meta)}\n            </div>\n          )}\n\n          {result && (\n            <div className={cn(\"mt-3 p-3 rounded-xl border text-sm\",\n              isDarkMode ? \"bg-slate-900 border-slate-800\" : \"bg-slate-50 border-slate-200\"\n            )}>\n              <div className=\"font-bold mb-1\">Summary ({result.type})</div>\n              <div className=\"text-xs\">\n                processed: {result.summary.processed} | matched: {result.summary.matched} | skipped: {result.summary.skipped} | invalid: {result.summary.invalid}\n              </div>\n            </div>\n          )}\n\n          {err && (\n            <div className=\"mt-3 p-3 rounded-xl border border-red-500/30 bg-red-500/10 text-red-200 text-sm\">\n              {err}\n            </div>\n          )}\n        </div>\n\n        <div className=\"p-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <Card\n            title=\"1) Master (ProductAllDept .csv)\"\n            subtitle=\"‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏™‡∏°‡∏≠ (‡∏™‡∏£‡πâ‡∏≤‡∏á products + barcode_index)\"\n            disabled={busy}\n            isDarkMode={isDarkMode}\n          >\n            <input type=\"file\" accept=\".csv\" disabled={busy} onChange={(e) => onPick(\"master\", e.target.files?.[0])} className=\"w-full text-xs\" />\n          </Card>\n\n          <Card\n            title=\"2) Pricing (ItemMasterPrintOnDeph .xls/.xlsx)\"\n            subtitle={canSecondary ? \"merge ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ fields ‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î\" : \"‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î Master ‡∏Å‡πà‡∏≠‡∏ô\"}\n            disabled={busy || !canSecondary}\n            isDarkMode={isDarkMode}\n          >\n            <input type=\"file\" accept=\".xls,.xlsx\" disabled={busy || !canSecondary} onChange={(e) => onPick(\"pricing\", e.target.files?.[0])} className=\"w-full text-xs\" />\n          </Card>\n\n          <Card\n            title=\"3) Maintenance (ItemMaintananceEvent .xls/.xlsx)\"\n            subtitle={canSecondary ? \"merge ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ fields ‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î\" : \"‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î Master ‡∏Å‡πà‡∏≠‡∏ô\"}\n            disabled={busy || !canSecondary}\n            isDarkMode={isDarkMode}\n          >\n            <input type=\"file\" accept=\".xls,.xlsx\" disabled={busy || !canSecondary} onChange={(e) => onPick(\"maintenance\", e.target.files?.[0])} className=\"w-full text-xs\" />\n          </Card>\n        </div>\n\n        <div className=\"px-6 pb-6 flex justify-end gap-3\">\n          {busy && (\n            <button onClick={abortNow} className=\"px-4 py-2 rounded-xl border border-red-500/40 bg-red-500/10 text-red-200 font-bold\">\n              Abort\n            </button>\n          )}\n          <button onClick={onClose} disabled={busy} className={cn(\n            \"px-4 py-2 rounded-xl font-bold border\",\n            isDarkMode ? \"bg-slate-900 border-slate-800 hover:bg-slate-800\" : \"bg-white border-slate-200 hover:bg-slate-50\",\n            busy && \"opacity-50 cursor-not-allowed\"\n          )}>\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\ProductLookupModal.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"X"},"fix":{"range":[69,71],"text":""},"desc":"Remove unused variable 'X'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Search' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"Search"},"fix":{"range":[70,78],"text":""},"desc":"Remove unused variable 'Search'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Package' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"Package"},"fix":{"range":[78,87],"text":""},"desc":"Remove unused variable 'Package'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Database' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"Database"},"fix":{"range":[87,97],"text":""},"desc":"Remove unused variable 'Database'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'FileText' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":48,"suggestions":[{"messageId":"removeVar","data":{"varName":"FileText"},"fix":{"range":[97,107],"text":""},"desc":"Remove unused variable 'FileText'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Layers' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":50,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":56,"suggestions":[{"messageId":"removeVar","data":{"varName":"Layers"},"fix":{"range":[107,115],"text":""},"desc":"Remove unused variable 'Layers'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Box' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":58,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":61,"suggestions":[{"messageId":"removeVar","data":{"varName":"Box"},"fix":{"range":[115,120],"text":""},"desc":"Remove unused variable 'Box'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DetailItem' is defined but never used. Allowed unused vars must match /^_/u.","line":217,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":217,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"DetailItem"},"fix":{"range":[12810,13353],"text":""},"desc":"Remove unused variable 'DetailItem'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"Ôªøimport React, { useState, useEffect, useRef } from 'react';\nimport { X, Search, Package, Database, FileText, Layers, Box } from 'lucide-react';\nimport { posService } from '../services/posService';\nimport { cn } from '../utils/cn';\n\nexport default function ProductLookupModal({ onClose }) {\n  const [keyword, setKeyword] = useState('');\n  const [results, setResults] = useState([]);\n  const [selectedItem, setSelectedItem] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const inputRef = useRef(null);\n\n  useEffect(() => {\n    if (inputRef.current) inputRef.current.focus();\n  }, []);\n\n  useEffect(() => {\n    const timer = setTimeout(async () => {\n      if (keyword.length >= 2) {\n        setLoading(true);\n        try {\n          const items = await posService.searchProducts(keyword);\n          setResults(items);\n          if (items.length > 0 && !selectedItem) {\n            setSelectedItem(items[0]);\n          } else if (items.length === 0) {\n            setSelectedItem(null);\n          }\n        } catch (e) { console.error(e); } finally { setLoading(false); }\n      } else {\n        setResults([]);\n        setSelectedItem(null);\n      }\n    }, 300);\n    return () => clearTimeout(timer);\n  }, [keyword, selectedItem]);\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-in fade-in duration-200\">\n      \n      <div className=\"bg-white w-[95vw] h-[90vh] max-w-7xl rounded-2xl shadow-2xl overflow-hidden flex flex-row relative ring-1 ring-white/20\">\n        \n        {/* --- LEFT PANEL --- */}\n        <div className=\"w-[350px] flex flex-col border-r border-slate-200 bg-white shrink-0\">\n          <div className=\"p-4 border-b border-slate-100 bg-slate-50/50\">\n            <h2 className=\"text-lg font-bold text-slate-800 mb-3 flex items-center gap-2\">\n              <Search className=\"text-boots-base\" size={20} /> ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤\n            </h2>\n            <div className=\"relative group\">\n              <input \n                ref={inputRef}\n                type=\"text\" \n                value={keyword}\n                onChange={(e) => setKeyword(e.target.value)}\n                placeholder=\"‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠, ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î, ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™...\" \n                className=\"w-full pl-10 pr-4 py-3 bg-white border border-slate-300 rounded-xl focus:ring-2 focus:ring-boots-base focus:border-boots-base outline-none shadow-sm transition-all text-base\"\n              />\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-boots-base transition-colors\" size={18} />\n            </div>\n          </div>\n\n          <div className=\"flex-1 overflow-y-auto bg-slate-50 p-2 space-y-2\">\n            {loading ? (\n              <div className=\"text-center py-10 text-slate-400 animate-pulse\">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...</div>\n            ) : results.length === 0 ? (\n              <div className=\"text-center py-20 text-slate-400 flex flex-col items-center\">\n                <Box size={48} className=\"mb-2 opacity-20\" />\n                <span>{keyword.length < 2 ? '‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤' : '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤'}</span>\n              </div>\n            ) : (\n              results.map((item) => (\n                <div \n                  key={item.sku}\n                  onClick={() => setSelectedItem(item)}\n                  className={cn(\n                    \"p-3 rounded-lg cursor-pointer border transition-all relative overflow-hidden group\",\n                    selectedItem?.sku === item.sku \n                      ? \"bg-white border-boots-base shadow-md ring-1 ring-boots-base/20\" \n                      : \"bg-white border-slate-200 hover:border-boots-base/50 hover:shadow-sm\"\n                  )}\n                >\n                  {selectedItem?.sku === item.sku && <div className=\"absolute left-0 top-0 bottom-0 w-1 bg-boots-base\"></div>}\n                  <div className=\"pl-2\">\n                    <div className={cn(\"font-bold text-sm line-clamp-1\", selectedItem?.sku === item.sku ? \"text-boots-base\" : \"text-slate-700\")}>\n                      {item.ProductDesc}\n                    </div>\n                    <div className=\"flex justify-between items-end mt-1\">\n                      <div className=\"text-xs text-slate-500 font-mono bg-slate-100 px-1.5 py-0.5 rounded\">{item.sku}</div>\n                      <div className=\"font-bold text-slate-800\">‡∏ø{item.SellPrice?.toLocaleString()}</div>\n                    </div>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n          <div className=\"p-2 border-t border-slate-200 bg-white text-center text-xs text-slate-500 font-medium\">\n            ‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î {results.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£\n          </div>\n        </div>\n\n        {/* --- RIGHT PANEL (DETAILS) --- */}\n        <div className=\"flex-1 flex flex-col bg-slate-50/30 overflow-hidden relative\">\n          \n          <button onClick={onClose} className=\"absolute top-4 right-4 z-20 p-2 bg-white hover:bg-red-50 text-slate-400 hover:text-red-500 rounded-full shadow-sm border border-slate-100 transition-all hover:rotate-90\"><X size={24} /></button>\n\n          {selectedItem ? (\n            <div className=\"flex-1 overflow-y-auto p-6 lg:p-8\">\n              <div className=\"max-w-5xl mx-auto space-y-6 animate-in slide-in-from-bottom-4 duration-300\">\n                \n                {/* 1. MASTER INFO */}\n                <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 relative overflow-hidden\">\n                  <div className=\"absolute top-0 right-0 p-8 opacity-5 text-boots-base pointer-events-none\"><Package size={200} /></div>\n                  <div className=\"relative z-10 flex flex-col md:flex-row gap-6 justify-between items-start border-b border-slate-100 pb-6 mb-6\">\n                    <div>\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <span className=\"bg-boots-base text-white text-[10px] px-2 py-0.5 rounded-full font-bold tracking-wide uppercase\">Master Product</span>\n                        <span className={cn(\"text-[10px] px-2 py-0.5 rounded-full border font-bold\", selectedItem.ProductStatus?.startsWith('0') ? \"text-green-600 border-green-200 bg-green-50\" : \"text-red-600 border-red-200 bg-red-50\")}>{selectedItem.ProductStatus || 'Unknown'}</span>\n                      </div>\n                      <h1 className=\"text-2xl md:text-3xl font-bold text-slate-800 leading-tight mb-2\">{selectedItem.ProductDesc}</h1>\n                      <div className=\"flex flex-wrap gap-4 text-sm text-slate-500 font-mono mt-2\">\n                        <span className=\"flex items-center gap-1\"><Database size={14}/> ID: {selectedItem.sku}</span>\n                        <span className=\"w-px h-4 bg-slate-300\"></span>\n                        <span className=\"flex items-center gap-1\">Barcode: {selectedItem.barcode || '-'}</span>\n                      </div>\n                    </div>\n                    <div className=\"text-right bg-slate-50 p-4 rounded-xl border border-slate-100 min-w-[140px]\">\n                      <div className=\"text-xs text-slate-400 mb-1\">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏õ‡∏Å‡∏ï‡∏¥</div>\n                      <div className=\"text-4xl font-bold text-boots-base tracking-tight\">‡∏ø{selectedItem.SellPrice?.toLocaleString()}</div>\n                      <div className=\"text-[10px] text-slate-400 mt-1\">Vat ({selectedItem.VatRate}%)</div>\n                    </div>\n                  </div>\n                  <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-6\">\n                    <DetailItem label=\"Department\" value={selectedItem.DeptCode} sub={selectedItem.DeptDesc} />\n                    <DetailItem label=\"Group\" value={selectedItem.GroupCode} sub={selectedItem.GroupDesc} />\n                    <DetailItem label=\"Sub Group\" value={selectedItem.SubGroupCode} />\n                    <DetailItem label=\"Supplier\" value={selectedItem.SupplierCode} sub={selectedItem.SupplierName} />\n                  </div>\n                </div>\n\n                {/* 2. PRINT ON DEPT (FILE 2) - FULL FIELDS */}\n                <div className=\"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden\">\n                  <div className=\"px-6 py-4 border-b border-slate-100 bg-blue-50/30 flex items-center gap-2\">\n                    <FileText size={18} className=\"text-blue-500\" />\n                    <h3 className=\"font-bold text-slate-800\">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Print On Dept (‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ü‡∏¥‡∏•‡∏î‡πå)</h3>\n                  </div>\n                  <div className=\"p-6\">\n                    {/* Description Print */}\n                    <div className=\"mb-4 pb-4 border-b border-slate-50\">\n                       <DetailItem label=\"Description (Print)\" value={selectedItem.description_print} fullWidth />\n                    </div>\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-y-6 gap-x-4\">\n                      <DetailItem label=\"Dept\" value={selectedItem.dept} />\n                      <DetailItem label=\"Class\" value={selectedItem.class} />\n                      <DetailItem label=\"Brand\" value={selectedItem.brand_print} />\n                      <DetailItem label=\"Merchandise\" value={selectedItem.merchandise} />\n                      \n                      <DetailItem label=\"Reg Price\" value={selectedItem.regPrice_print} />\n                      <DetailItem label=\"Unit Price\" value={selectedItem.unitPrice_print} />\n                      <DetailItem label=\"Tax Code\" value={selectedItem.tax_print} />\n                      <DetailItem label=\"Method\" value={selectedItem.method_print} />\n                      \n                      <div className=\"col-span-2 bg-yellow-50 p-3 rounded-lg border border-yellow-100 flex justify-between items-center\">\n                         <DetailItem label=\"Deal Price\" value={selectedItem.dealPrice_print} highlight />\n                         <DetailItem label=\"Deal Qty\" value={selectedItem.dealQty_print} highlight />\n                         <DetailItem label=\"Limit\" value={selectedItem.limit_print} />\n                      </div>\n                      <DetailItem label=\"MPG\" value={selectedItem.mpg_print} />\n                    </div>\n                  </div>\n                </div>\n\n                {/* 3. MAINTENANCE EVENT (FILE 3) - FULL FIELDS */}\n                <div className=\"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden\">\n                  <div className=\"px-6 py-4 border-b border-slate-100 bg-orange-50/30 flex items-center gap-2\">\n                    <Layers size={18} className=\"text-orange-500\" />\n                    <h3 className=\"font-bold text-slate-800\">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Maintenance Event (‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ü‡∏¥‡∏•‡∏î‡πå)</h3>\n                  </div>\n                  <div className=\"p-6\">\n                     {/* Description Maint */}\n                    <div className=\"mb-4 pb-4 border-b border-slate-50\">\n                       <DetailItem label=\"Description (Maint)\" value={selectedItem.description_maint} fullWidth />\n                    </div>\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-y-6 gap-x-4\">\n                      <DetailItem label=\"Event Type\" value={selectedItem.type_maint} />\n                      <DetailItem label=\"Dept\" value={selectedItem.dept_maint} />\n                      <DetailItem label=\"Class\" value={selectedItem.class_maint} />\n                      <DetailItem label=\"MP Group\" value={selectedItem.mpGroup_maint} />\n                      \n                      <DetailItem label=\"Reg Price\" value={selectedItem.regPrice_maint} />\n                      <DetailItem label=\"Unit Price\" value={selectedItem.unitPrice_maint} />\n                      <DetailItem label=\"Method\" value={selectedItem.method_maint} />\n                      <div className=\"hidden md:block\"></div> {/* Spacer */}\n\n                      <div className=\"col-span-2 bg-orange-50 p-3 rounded-lg border border-orange-100 flex justify-between items-center\">\n                         <DetailItem label=\"Deal Price\" value={selectedItem.dealPrice_maint} highlight />\n                         <DetailItem label=\"Deal Qty\" value={selectedItem.dealQty_maint} highlight />\n                         <DetailItem label=\"Limit Qty\" value={selectedItem.limitQty_maint} />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n              </div>\n            </div>\n          ) : (\n            <div className=\"flex-1 flex flex-col items-center justify-center text-slate-400\">\n              <div className=\"w-24 h-24 bg-slate-100 rounded-full flex items-center justify-center mb-4\"><Search size={40} className=\"text-slate-300\" /></div>\n              <p className=\"text-lg font-medium text-slate-500\">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢</p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction DetailItem({ label, value, sub, highlight, fullWidth }) {\n  return (\n    <div className={cn(\"min-w-0\", fullWidth && \"w-full\")}>\n      <div className=\"text-[10px] uppercase tracking-wider text-slate-400 font-semibold mb-1\">{label}</div>\n      <div className={cn(\"font-medium truncate\", highlight ? \"text-slate-800 font-bold text-lg\" : \"text-slate-700\", !value && \"text-slate-300 italic\")}>\n        {value || '-'}\n      </div>\n      {sub && <div className=\"text-[10px] text-slate-400 truncate\" title={sub}>{sub}</div>}\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\ReceiptModal.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,18],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"X"},"fix":{"range":[36,38],"text":""},"desc":"Remove unused variable 'X'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Printer' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"Printer"},"fix":{"range":[37,46],"text":""},"desc":"Remove unused variable 'Printer'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle"},"fix":{"range":[46,59],"text":""},"desc":"Remove unused variable 'CheckCircle'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"Ôªøimport React from 'react';\nimport { X, Printer, CheckCircle } from 'lucide-react';\n\nexport default function ReceiptModal({ order, onClose }) {\n  if (!order) return null;\n\n  const handlePrint = () => {\n    window.print();\n  };\n\n  return (\n    <>\n      <style>{`\n        @media print {\n          body * { visibility: hidden; }\n          #receipt-area, #receipt-area * { visibility: visible !important; }\n          #receipt-area { \n            position: absolute !important; top: 0 !important; left: 0 !important; \n            width: 100% !important; height: auto !important; \n            background: white !important; display: block !important; padding: 20px; \n          }\n          .fixed.inset-0 { background: none !important; backdrop-filter: none !important; }\n        }\n      `}</style>\n\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200\">\n      \n      {/* Modal Container */}\n      <div className=\"bg-white w-full max-w-[380px] rounded-xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]\">\n        \n        {/* Header Actions (Non-printable) */}\n        <div className=\"bg-slate-100 p-3 flex justify-between items-center border-b border-slate-200 print:hidden\">\n          <div className=\"flex items-center gap-2 text-green-600 font-semibold text-sm\">\n            <CheckCircle size={16} /> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à\n          </div>\n          <div className=\"flex gap-2\">\n            <button onClick={handlePrint} className=\"p-2 hover:bg-white rounded-lg transition-colors text-slate-600\" title=\"Print\"><Printer size={18} /></button>\n            <button onClick={onClose} className=\"p-2 hover:bg-white rounded-lg transition-colors text-slate-600\" title=\"Close\"><X size={18} /></button>\n          </div>\n        </div>\n\n        {/* Receipt Content (Printable Area) */}\n        <div className=\"p-6 overflow-y-auto font-mono text-sm bg-white\" id=\"receipt-area\">\n          \n          {/* Logo & Header */}\n          <div className=\"text-center mb-6\">\n            <img src=\"https://store.boots.co.th/images/boots-logo.png\" alt=\"Boots\" className=\"h-6 mx-auto mb-2 grayscale opacity-80\" />\n            <div className=\"font-bold text-lg text-slate-800\">BOOTS RETAIL (THAILAND)</div>\n            <div className=\"text-xs text-slate-500\">TAX ID: 0105548105xxx</div>\n            <div className=\"text-xs text-slate-500\">Grand 5 Sukhumvit</div>\n            <div className=\"text-xs text-slate-500 mt-2\">POS ID: #01 &bull; CASHIER: STAFF</div>\n            <div className=\"text-xs text-slate-400 mt-1\">{new Date().toLocaleString('th-TH')}</div>\n          </div>\n\n          {/* Divider */}\n          <div className=\"border-b border-dashed border-slate-300 my-4\"></div>\n\n          {/* Items */}\n          <div className=\"space-y-2 mb-4\">\n            {order.items.map((item, i) => (\n              <div key={i} className=\"flex justify-between items-start\">\n                <div className=\"flex-1 pr-2\">\n                  <div className=\"text-slate-800\">{item.name}</div>\n                  <div className=\"text-xs text-slate-500\">{item.qty} x {item.price.toLocaleString()}</div>\n                </div>\n                <div className=\"text-slate-800 font-medium\">\n                  {(item.price * item.qty).toLocaleString()}\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {/* Divider */}\n          <div className=\"border-b border-dashed border-slate-300 my-4\"></div>\n\n          {/* Totals */}\n          <div className=\"space-y-1\">\n            <div className=\"flex justify-between text-slate-500 text-xs\">\n              <span>Subtotal (Excl. VAT)</span>\n              <span>{(order.summary.subtotal / 1.07).toLocaleString(undefined, { maximumFractionDigits: 2 })}</span>\n            </div>\n            <div className=\"flex justify-between text-slate-500 text-xs\">\n              <span>VAT (7%)</span>\n              <span>{(order.summary.subtotal - (order.summary.subtotal / 1.07)).toLocaleString(undefined, { maximumFractionDigits: 2 })}</span>\n            </div>\n\n            {/* Discount Breakdown */}\n            {order.adjustments?.coupons?.length > 0 && (\n              <div className=\"flex justify-between text-slate-500 text-xs\">\n                <span>Coupons</span>\n                <span className=\"text-red-600\">-{order.adjustments.coupons.reduce((a,c)=>a+c.couponValue,0).toLocaleString()}</span>\n              </div>\n            )}\n            {order.adjustments?.allowance > 0 && (\n              <div className=\"flex justify-between text-slate-500 text-xs\">\n                <span>Allowance</span>\n                <span className=\"text-red-600\">-{Number(order.adjustments.allowance).toLocaleString()}</span>\n              </div>\n            )}\n            {order.adjustments?.topup > 0 && (\n              <div className=\"flex justify-between text-slate-500 text-xs\">\n                <span>Topup Discount</span>\n                <span className=\"text-red-600\">-{Number(order.adjustments.topup).toLocaleString()}</span>\n              </div>\n            )}\n            {order.adjustments?.billDiscount?.amount > 0 && (\n               <div className=\"flex justify-between text-slate-500 text-xs\">\n                <span>Bill Discount ({order.adjustments.billDiscount.percent}%)</span>\n                <span className=\"text-red-600\">-{Number(order.adjustments.billDiscount.amount).toLocaleString()}</span>\n              </div>\n            )}\n\n            <div className=\"flex justify-between text-slate-800 font-bold text-lg mt-2\">\n              <span>TOTAL (Net)</span>\n              <span>‡∏ø{(order.summary.netTotal || order.summary.subtotal).toLocaleString()}</span>\n            </div>\n          </div>\n\n          {/* Footer */}\n          <div className=\"mt-8 text-center text-xs text-slate-400\">\n            <div>THANK YOU FOR SHOPPING WITH US</div>\n            <div className=\"mt-1\">** www.boots.co.th **</div>\n            <div className=\"mt-4 barcode font-serif tracking-widest text-slate-300\">\n              ||| || ||| || ||| |||| ||\n            </div>\n          </div>\n\n        </div>\n\n        {/* Footer Action (Non-printable) */}\n        <div className=\"p-4 bg-slate-50 border-t border-slate-100 print:hidden\">\n          <button onClick={onClose} className=\"w-full bg-slate-800 text-white py-3 rounded-lg font-medium hover:bg-slate-700 transition-colors\">\n            New Transaction (Enter)\n          </button>\n        </div>\n\n      </div>\n    </div>\n    </>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\ThemeToggle.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,23],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Moon' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"Moon"},"fix":{"range":[42,47],"text":""},"desc":"Remove unused variable 'Moon'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Sun' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"Sun"},"fix":{"range":[46,51],"text":""},"desc":"Remove unused variable 'Sun'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Button' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"Button"},"fix":{"range":[76,124],"text":""},"desc":"Remove unused variable 'Button'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { Moon, Sun } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useTheme } from \"@/providers/ThemeProvider\";\r\n\r\nexport function ThemeToggle() {\r\n  const { resolvedTheme, setTheme } = useTheme();\r\n\r\n  return (\r\n    <Button\r\n      variant=\"ghost\"\r\n      size=\"icon\"\r\n      onClick={() => setTheme(resolvedTheme === \"dark\" ? \"light\" : \"dark\")}\r\n      aria-label=\"Toggle theme\"\r\n      title=\"Toggle theme\"\r\n    >\r\n      <Sun className=\"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0\" />\r\n      <Moon className=\"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100\" />\r\n      <span className=\"sr-only\">Toggle theme</span>\r\n    </Button>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\auth\\AccessDenied.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,18],"text":""},"desc":"Remove unused variable 'React'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nexport default function AccessDenied({ message }) {\n  return (\n    <div className=\"h-full w-full flex items-center justify-center\">\n      <div className=\"rounded-2xl bg-white shadow-md border border-slate-200 p-8 text-center max-w-md\">\n        <h2 className=\"text-2xl font-bold text-slate-800\">Access Denied</h2>\n        <p className=\"text-slate-500 mt-2\">{message || 'You do not have permission to access this area.'}</p>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\auth\\AuthGate.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,18],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'GoogleSignIn' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"GoogleSignIn"},"fix":{"range":[87,105],"text":""},"desc":"Remove unused variable 'GoogleSignIn'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'IdPinLogin' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"IdPinLogin"},"fix":{"range":[130,146],"text":""},"desc":"Remove unused variable 'IdPinLogin'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'PinReset' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"PinReset"},"fix":{"range":[169,183],"text":""},"desc":"Remove unused variable 'PinReset'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'LoadingSpinner' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"LoadingSpinner"},"fix":{"range":[204,224],"text":""},"desc":"Remove unused variable 'LoadingSpinner'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { useAuth } from '../../context/AuthContext';\nimport GoogleSignIn from './GoogleSignIn';\nimport IdPinLogin from './IdPinLogin';\nimport PinReset from './PinReset';\nimport LoadingSpinner from '../LoadingSpinner';\n\nexport default function AuthGate({ children }) {\n  const { firebaseUser, authLoading, session } = useAuth();\n\n  if (authLoading) {\n    return (\n      <div className=\"min-h-dvh flex items-center justify-center bg-slate-50\">\n        <LoadingSpinner label=\"Preparing secure session...\" />\n      </div>\n    );\n  }\n\n  if (!firebaseUser) {\n    return <GoogleSignIn />;\n  }\n\n  if (!session) {\n    return <IdPinLogin />;\n  }\n\n  if (session.pinResetRequired) {\n    return <PinReset />;\n  }\n\n  return children;\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\auth\\GoogleSignIn.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Loader2' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"Loader2"},"fix":{"range":[114,122],"text":""},"desc":"Remove unused variable 'Loader2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Sun' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"Sun"},"fix":{"range":[121,126],"text":""},"desc":"Remove unused variable 'Sun'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Moon' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"Moon"},"fix":{"range":[126,132],"text":""},"desc":"Remove unused variable 'Moon'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle2' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle2"},"fix":{"range":[132,146],"text":""},"desc":"Remove unused variable 'CheckCircle2'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../../context/AuthContext';\nimport { Loader2, Sun, Moon, CheckCircle2 } from 'lucide-react';\n\nexport default function GoogleSignIn() {\n  // BEGIN: FUNCTION ZONE (DO NOT TOUCH)\n  const { signInWithGoogle, loginEmail, signupEmail, loginAnonymous } = useAuth();\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [displayName, setDisplayName] = useState('');\n  const [mode, setMode] = useState('signin'); // signin | signup\n  const [isDark, setIsDark] = useState(false); // UI State for theme\n\n  // Theme Sync Logic (Purely presentational, allowed in function zone to keep it clean)\n  useEffect(() => {\n    const savedTheme = localStorage.getItem('theme');\n    const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n    const initialDark = savedTheme === 'dark' || (!savedTheme && systemDark);\n    setIsDark(initialDark);\n    if (initialDark) document.documentElement.classList.add('dark');\n    else document.documentElement.classList.remove('dark');\n  }, []);\n\n  const toggleTheme = () => {\n    const newDark = !isDark;\n    setIsDark(newDark);\n    localStorage.setItem('theme', newDark ? 'dark' : 'light');\n    if (newDark) document.documentElement.classList.add('dark');\n    else document.documentElement.classList.remove('dark');\n  };\n\n  const handleSignIn = async () => {\n    console.log('üîç GoogleSignIn: Button clicked');\n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const result = await signInWithGoogle();\n      console.log('üîç GoogleSignIn: Result from signInWithGoogle:', result);\n      \n      if (!result.success) {\n        setError(result.error || 'Failed to sign in');\n      }\n    } catch (err) {\n      console.error('üîç GoogleSignIn: Caught error:', err);\n      setError(err.message || 'An unexpected error occurred');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleEmailSubmit = async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError(null);\n    try {\n      if (!email || !password) {\n        setError('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô');\n        return;\n      }\n      const res = mode === 'signup'\n        ? await signupEmail({ email, password, displayName })\n        : await loginEmail(email, password);\n      if (!res?.success) setError(res?.error || 'Login failed');\n    } catch (err) {\n      setError(err?.message || 'Login failed');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleGuest = async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const res = await loginAnonymous();\n      if (!res?.success) setError(res?.error || 'Guest login failed');\n    } catch (err) {\n      setError(err?.message || 'Guest login failed');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  // END:   FUNCTION ZONE (DO NOT TOUCH)\n\n  return (\n    <div className=\"min-h-dvh w-full relative overflow-hidden bg-[#f8fafc] dark:bg-[#0f1014] flex flex-col lg:flex-row font-sans transition-colors duration-300\">\n      \n      {/* Background Ambience */}\n      <div className=\"absolute inset-0 pointer-events-none overflow-hidden\">\n        <div className=\"absolute -top-[20%] -left-[10%] w-[50%] h-[50%] bg-blue-500/20 dark:bg-blue-600/10 rounded-full blur-[120px] animate-float opacity-70\" />\n        <div className=\"absolute top-[40%] -right-[10%] w-[40%] h-[60%] bg-cyan-400/20 dark:bg-cyan-600/10 rounded-full blur-[100px] animate-float opacity-60\" style={{ animationDelay: '2s' }} />\n      </div>\n\n      {/* Theme Toggle */}\n      <div className=\"absolute top-6 right-6 z-50\">\n        <button \n          onClick={toggleTheme}\n          aria-label=\"Toggle theme\"\n          className=\"p-3 rounded-full bg-white/50 dark:bg-black/30 backdrop-blur-md border border-slate-200 dark:border-white/10 text-slate-600 dark:text-slate-300 shadow-sm hover:scale-105 active:scale-95 transition-all\"\n        >\n          {isDark ? <Moon size={20} className=\"fill-current\" /> : <Sun size={20} className=\"fill-current\" />}\n        </button>\n      </div>\n\n      {/* Left Panel: Branding & Features */}\n      <div className=\"hidden lg:flex lg:w-[45%] flex-col relative z-10 p-12 justify-between\">\n        <div>\n           <div className=\"flex items-center gap-3\">\n             {/* Logo Placeholder */}\n             <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-600 to-blue-700 flex items-center justify-center text-white font-bold text-xl shadow-lg shadow-blue-600/30\">\n               B\n             </div>\n             <div className=\"text-xl font-bold text-slate-800 dark:text-white tracking-tight\">\n               Boots <span className=\"text-blue-600 font-light\">POS</span>\n             </div>\n           </div>\n        </div>\n\n        <div className=\"max-w-md\">\n          <div className=\"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-blue-100/50 dark:bg-blue-500/10 border border-blue-200 dark:border-blue-500/30 text-blue-700 dark:text-blue-300 text-xs font-semibold mb-6\">\n            <span className=\"relative flex h-2 w-2\">\n              <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75\"></span>\n              <span className=\"relative inline-flex rounded-full h-2 w-2 bg-blue-500\"></span>\n            </span>\n            System Online v2.5\n          </div>\n          <h1 className=\"text-4xl md:text-5xl font-bold text-slate-900 dark:text-white leading-tight mb-6\">\n            Manage your store with <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-cyan-500\">Confidence.</span>\n          </h1>\n          <p className=\"text-lg text-slate-600 dark:text-slate-400 mb-8 leading-relaxed\">\n            Fast, secure, and reliable Point of Sale system designed for modern retail performance.\n          </p>\n          \n          <div className=\"space-y-4\">\n            {[\n              \"Real-time Inventory Sync\",\n              \"Secure Staff Authentication\",\n              \"Smart Sales Reporting\",\n              \"Daily Automated Backups\"\n            ].map((feature, idx) => (\n              <div key={idx} className=\"flex items-center gap-3 text-slate-700 dark:text-slate-300 font-medium\">\n                <div className=\"p-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400\">\n                  <CheckCircle2 size={16} />\n                </div>\n                {feature}\n              </div>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"text-sm text-slate-500 dark:text-slate-500\">\n          ¬© 2026 Boots POS System. All rights reserved.\n        </div>\n      </div>\n\n      {/* Right Panel: Login Form */}\n      <div className=\"flex-1 flex flex-col items-center justify-center p-6 relative z-10 w-full sm:max-w-md mx-auto lg:max-w-none\">\n        \n        {/* Mobile Logo (Visible only on small screens) */}\n        <div className=\"lg:hidden mb-8 flex items-center gap-3\">\n             <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-600 to-blue-700 flex items-center justify-center text-white font-bold text-xl shadow-lg shadow-blue-600/30\">\n               B\n             </div>\n             <div className=\"text-xl font-bold text-slate-800 dark:text-white tracking-tight\">\n               Boots POS\n             </div>\n        </div>\n\n        <div className=\"glass-panel w-full max-w-[440px] p-8 md:p-10 relative overflow-hidden\">\n          {/* Decorative gradients inside card */}\n          <div className=\"absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -mr-10 -mt-10\" />\n          \n          <div className=\"relative\">\n            <h2 className=\"text-2xl font-bold text-slate-800 dark:text-white mb-2\">\n              {mode === 'signup' ? 'Create Account' : 'Welcome Back'}\n            </h2>\n            <p className=\"text-slate-500 dark:text-slate-400 text-sm mb-8\">\n              {mode === 'signup' ? 'Register a new account to get started' : 'Sign in to access your terminal'}\n            </p>\n\n            {/* Google Login */}\n            <button\n              onClick={handleSignIn}\n              disabled={isLoading}\n              aria-busy={isLoading}\n              className=\"w-full bg-white dark:bg-[#2c2e33] text-slate-700 dark:text-white border border-slate-200 dark:border-white/10 hover:bg-slate-50 dark:hover:bg-[#32343a] active:bg-slate-100 dark:active:bg-[#25262b] relative h-[52px] rounded-xl font-semibold transition-all shadow-sm flex items-center justify-center gap-3 mb-6 group overflow-hidden\"\n            >\n              {isLoading ? (\n                <span className=\"flex items-center gap-2\" role=\"status\" aria-live=\"polite\">\n                  <Loader2 className=\"animate-spin text-blue-600\" size={20} />\n                  <span className=\"text-sm text-slate-500\">Signing in‚Ä¶</span>\n                </span>\n              ) : (\n                <>\n                  <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n                    <path\n                      d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"\n                      fill=\"#4285F4\"\n                    />\n                    <path\n                      d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"\n                      fill=\"#34A853\"\n                    />\n                    <path\n                      d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"\n                      fill=\"#FBBC05\"\n                    />\n                    <path\n                      d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"\n                      fill=\"#EA4335\"\n                    />\n                  </svg>\n                  <span>Sign in with Google</span>\n                </>\n              )}\n            </button>\n\n            <div className=\"relative flex py-4 items-center\">\n              <div className=\"flex-grow border-t border-slate-200 dark:border-white/10\"></div>\n              <span className=\"flex-shrink-0 mx-4 text-slate-400 text-xs uppercase tracking-wider font-medium\">Or continue with</span>\n              <div className=\"flex-grow border-t border-slate-200 dark:border-white/10\"></div>\n            </div>\n\n            {/* Email Form */}\n            <form onSubmit={handleEmailSubmit} className=\"space-y-4\">\n              {mode === 'signup' && (\n                <div className=\"space-y-1\">\n                  <label className=\"text-xs font-semibold text-slate-500 uppercase ml-1\" htmlFor=\"gs-display-name\">Display Name</label>\n                  <input\n                    id=\"gs-display-name\"\n                    className=\"glass-input\"\n                    placeholder=\"Enter your name\"\n                    value={displayName}\n                    onChange={(e) => setDisplayName(e.target.value)}\n                  />\n                </div>\n              )}\n              \n              <div className=\"space-y-1\">\n                <label className=\"text-xs font-semibold text-slate-500 uppercase ml-1\" htmlFor=\"gs-email\">Email Address</label>\n                <input\n                  id=\"gs-email\"\n                  className=\"glass-input\"\n                  type=\"email\"\n                  placeholder=\"name@company.com\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                />\n              </div>\n              \n              <div className=\"space-y-1\">\n                <label className=\"text-xs font-semibold text-slate-500 uppercase ml-1\" htmlFor=\"gs-password\">Password</label>\n                <input\n                  id=\"gs-password\"\n                  className=\"glass-input\"\n                  type=\"password\"\n                  placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                />\n              </div>\n\n              {error && (\n                <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-500/30 text-red-600 dark:text-red-400 px-4 py-3 rounded-xl text-sm flex items-start gap-2\">\n                  <div className=\"mt-0.5\">‚ö†Ô∏è</div>\n                  <div>{error}</div>\n                </div>\n              )}\n\n              <button\n                type=\"submit\"\n                disabled={isLoading}\n                aria-busy={isLoading}\n                className=\"btn-primary w-full mt-2\"\n              >\n                {isLoading ? (\n                  <Loader2 className=\"animate-spin text-white\" size={20} />\n                ) : (\n                  mode === 'signup' ? 'Create Account' : 'Sign In'\n                )}\n              </button>\n            </form>\n\n            <div className=\"mt-6 flex flex-col gap-3\">\n               <button\n                  type=\"button\"\n                  onClick={handleGuest}\n                  disabled={isLoading}\n                  className=\"btn-ghost w-full text-sm\"\n                >\n                  {isLoading ? 'Processing...' : 'Continue as Guest'}\n                </button>\n\n                <div className=\"text-center text-sm\">\n                  <span className=\"text-slate-500 dark:text-slate-400\">\n                    {mode === 'signup' ? 'Already have an account?' : 'Don\\'t have an account?'}\n                  </span>\n                  {' '}\n                  <button\n                    className=\"text-blue-600 dark:text-blue-400 font-semibold hover:underline\"\n                    onClick={() => setMode(mode === 'signup' ? 'signin' : 'signup')}\n                    type=\"button\"\n                  >\n                    {mode === 'signup' ? 'Sign in' : 'Sign up'}\n                  </button>\n                </div>\n            </div>\n\n            {/* Trust Badges */}\n            <div className=\"mt-8 pt-6 border-t border-slate-200 dark:border-white/5 flex items-center justify-center gap-4 opacity-60 grayscale hover:grayscale-0 transition-all duration-500\">\n               <div className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest text-center w-full\">Trusted Access</div>\n            </div>\n\n          </div>\n        </div>\n      </div>\n\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\auth\\IdPinLogin.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ShieldCheck' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"ShieldCheck"},"fix":{"range":[70,82],"text":""},"desc":"Remove unused variable 'ShieldCheck'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'LogOut' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"LogOut"},"fix":{"range":[81,89],"text":""},"desc":"Remove unused variable 'LogOut'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'KeySquare' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"KeySquare"},"fix":{"range":[89,100],"text":""},"desc":"Remove unused variable 'KeySquare'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'User' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"User"},"fix":{"range":[100,106],"text":""},"desc":"Remove unused variable 'User'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Moon' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":52,"suggestions":[{"messageId":"removeVar","data":{"varName":"Moon"},"fix":{"range":[106,112],"text":""},"desc":"Remove unused variable 'Moon'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Sun' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":57,"suggestions":[{"messageId":"removeVar","data":{"varName":"Sun"},"fix":{"range":[112,117],"text":""},"desc":"Remove unused variable 'Sun'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Loader2' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":59,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":66,"suggestions":[{"messageId":"removeVar","data":{"varName":"Loader2"},"fix":{"range":[117,126],"text":""},"desc":"Remove unused variable 'Loader2'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useMemo, useState } from 'react';\nimport { ShieldCheck, LogOut, KeySquare, User, Moon, Sun, Loader2 } from 'lucide-react';\nimport { useAuth } from '../../context/AuthContext';\nimport { bootstrapAdmin } from '../../services/rbacService';\n\nexport default function IdPinLogin() {\n  // BEGIN: FUNCTION ZONE (DO NOT TOUCH)\n  const { firebaseUser, ids, lastIdCode, setLastIdCode, loadIds, verifyPin, signOut } = useAuth();\n  const [selectedId, setSelectedId] = useState(lastIdCode || '');\n  const [pin, setPin] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [idsLoading, setIdsLoading] = useState(true);\n  const [bootstrapId, setBootstrapId] = useState('');\n  const [bootstrapPin, setBootstrapPin] = useState('');\n  const [bootstrapError, setBootstrapError] = useState('');\n  const [bootstrapLoading, setBootstrapLoading] = useState(false);\n  const [isDark, setIsDark] = useState(false); // Valid UI state\n\n  useEffect(() => {\n    let active = true;\n    setIdsLoading(true);\n    loadIds()\n      .catch((err) => { console.error('loadIds failed:', err); setError(err?.message || 'Failed to load IDs'); })\n      .finally(() => {\n        if (active) setIdsLoading(false);\n      });\n    return () => {\n      active = false;\n    };\n  }, [loadIds]);\n\n  useEffect(() => {\n    if (!selectedId && lastIdCode) setSelectedId(lastIdCode);\n  }, [lastIdCode, selectedId]);\n\n  // Theme Sync Logic\n  useEffect(() => {\n    const savedTheme = localStorage.getItem('theme');\n    const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n    const initialDark = savedTheme === 'dark' || (!savedTheme && systemDark);\n    setIsDark(initialDark);\n    if (initialDark) document.documentElement.classList.add('dark');\n    else document.documentElement.classList.remove('dark');\n  }, []);\n\n  const toggleTheme = () => {\n    const newDark = !isDark;\n    setIsDark(newDark);\n    localStorage.setItem('theme', newDark ? 'dark' : 'light');\n    if (newDark) document.documentElement.classList.add('dark');\n    else document.documentElement.classList.remove('dark');\n  };\n\n  const activeIds = useMemo(() => ids.filter((id) => id.status !== 'disabled'), [ids]);\n  const showBootstrap = !idsLoading && activeIds.length === 0;\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    if (!selectedId || !pin) {\n      setError('Please select ID and enter PIN');\n      return;\n    }\n    setLoading(true);\n    try {\n      await verifyPin(selectedId, pin);\n      setLastIdCode(selectedId);\n      setPin('');\n    } catch (err) {\n      setError(err?.message || 'Invalid PIN');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleBootstrap = async (e) => {\n    e.preventDefault();\n    setBootstrapError('');\n    if (!bootstrapId || !bootstrapPin) {\n      setBootstrapError('Please enter ID and PIN');\n      return;\n    }\n    setBootstrapLoading(true);\n    try {\n      await bootstrapAdmin({ idCode: bootstrapId, pin: bootstrapPin });\n      await loadIds();\n      setSelectedId(bootstrapId);\n      setBootstrapPin('');\n    } catch (err) {\n      setBootstrapError(err?.message || 'Failed to create admin ID');\n    } finally {\n      setBootstrapLoading(false);\n    }\n  };\n  // END:   FUNCTION ZONE (DO NOT TOUCH)\n\n  return (\n    <div className=\"min-h-dvh w-full relative overflow-hidden bg-[#f8fafc] dark:bg-[#0f1014] flex flex-col items-center justify-center p-4 font-sans transition-colors duration-300\">\n      \n      {/* Background Ambience */}\n      <div className=\"absolute inset-0 pointer-events-none overflow-hidden\">\n        <div className=\"absolute top-[10%] left-[20%] w-[60%] h-[60%] bg-blue-500/10 dark:bg-blue-600/10 rounded-full blur-[120px] animate-float opacity-70\" />\n      </div>\n\n       {/* Theme Toggle */}\n       <div className=\"absolute top-6 right-6 z-50\">\n        <button \n          onClick={toggleTheme}\n          aria-label=\"Toggle theme\"\n          className=\"p-3 rounded-full bg-white/50 dark:bg-black/30 backdrop-blur-md border border-slate-200 dark:border-white/10 text-slate-600 dark:text-slate-300 shadow-sm hover:scale-105 active:scale-95 transition-all\"\n        >\n          {isDark ? <Moon size={20} className=\"fill-current\" /> : <Sun size={20} className=\"fill-current\" />}\n        </button>\n      </div>\n\n      <div className=\"glass-panel w-full max-w-4xl grid md:grid-cols-2 overflow-hidden shadow-2xl relative z-10\">\n        \n        {/* Left: Info & User Card */}\n        <div className=\"p-8 md:p-10 flex flex-col justify-between bg-gradient-to-br from-blue-600 to-blue-800 text-white relative overflow-hidden\">\n           {/* Decor */}\n           <div className=\"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none\" />\n           \n           <div>\n             <div className=\"inline-flex items-center gap-2 px-3 py-1 bg-white/20 backdrop-blur-sm rounded-full text-xs font-semibold border border-white/20 mb-6\">\n                <ShieldCheck size={14} />\n                <span>Secure Terminal Access</span>\n             </div>\n             \n             <h1 className=\"text-3xl font-bold leading-tight mb-2\">\n               {showBootstrap ? 'Setup Admin' : 'Select Identifier'}\n             </h1>\n             <p className=\"text-blue-100/80 text-sm\">\n               Choose your profile to securely access the POS terminal.\n             </p>\n           </div>\n\n           <div className=\"mt-12 space-y-6\">\n              <div className=\"p-4 rounded-xl bg-white/10 border border-white/10 backdrop-blur-sm\">\n                 <div className=\"text-xs text-blue-200 uppercase tracking-wider mb-2\">Current Session</div>\n                 <div className=\"flex items-center gap-3\">\n                    <div className=\"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center font-bold\">\n                       {firebaseUser?.email?.[0].toUpperCase()}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                       <div className=\"font-semibold truncate\">{firebaseUser?.email}</div>\n                       <div className=\"text-xs text-blue-200\">Authenticated via Google</div>\n                    </div>\n                 </div>\n                 <button \n                   onClick={signOut}\n                   className=\"mt-4 w-full py-2 rounded-lg bg-white/10 hover:bg-white/20 text-xs font-semibold transition-colors flex items-center justify-center gap-2\"\n                 >\n                   <LogOut size={14} /> Sign Out\n                 </button>\n              </div>\n\n               <div className=\"grid grid-cols-2 gap-3 text-center\">\n                  <div className=\"p-3 bg-white/5 rounded-lg\">\n                     <div className=\"text-2xl font-bold\">{ids.length}</div>\n                     <div className=\"text-xs text-blue-200 uppercase\">Profiles</div>\n                  </div>\n                   <div className=\"p-3 bg-white/5 rounded-lg\">\n                     <div className=\"text-2xl font-bold\">{activeIds.length}</div>\n                     <div className=\"text-xs text-blue-200 uppercase\">Active</div>\n                  </div>\n               </div>\n           </div>\n        </div>\n\n        {/* Right: Form */}\n        <div className=\"p-8 md:p-10 bg-white/50 dark:bg-black/40 backdrop-blur-md flex flex-col justify-center\">\n            {idsLoading ? (\n              <div className=\"flex flex-col items-center justify-center py-12 gap-4\">\n                 <Loader2 className=\"animate-spin text-blue-600\" size={32} />\n                 <div className=\"text-sm text-slate-500\" role=\"status\" aria-live=\"polite\">Loading authorized profiles...</div>\n              </div>\n            ) : showBootstrap ? (\n              <form onSubmit={handleBootstrap} className=\"space-y-5\">\n                 <div className=\"space-y-1\">\n                   <label className=\"text-xs font-semibold text-slate-500 uppercase ml-1\">New Admin ID</label>\n                   <div className=\"relative\">\n                      <User className=\"absolute left-4 top-3.5 text-slate-400\" size={18} />\n                      <input \n                         className=\"glass-input pl-11\" \n                         placeholder=\"Create an ID code\"\n                         value={bootstrapId}\n                         onChange={(e) => setBootstrapId(e.target.value)}\n                         autoFocus\n                      />\n                   </div>\n                 </div>\n                 <div className=\"space-y-1\">\n                   <label className=\"text-xs font-semibold text-slate-500 uppercase ml-1\">Set PIN</label>\n                   <div className=\"relative\">\n                      <KeySquare className=\"absolute left-4 top-3.5 text-slate-400\" size={18} />\n                      <input \n                         type=\"password\"\n                         inputMode=\"numeric\"\n                         className=\"glass-input pl-11 tracking-widest\" \n                         placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                         value={bootstrapPin}\n                         onChange={(e) => setBootstrapPin(e.target.value)}\n                         maxLength={20}\n                      />\n                   </div>\n                 </div>\n                 \n                 {bootstrapError && (\n                    <div className=\"text-xs text-red-500 font-medium px-1 pt-1\">{bootstrapError}</div>\n                 )}\n\n                 <button\n                   type=\"submit\"\n                   disabled={bootstrapLoading}\n                   className=\"btn-primary w-full\"\n                 >\n                   {bootstrapLoading ? <Loader2 className=\"animate-spin\" size={20} /> : 'Create Admin Profile'}\n                 </button>\n              </form>\n            ) : (\n               <form onSubmit={handleSubmit} className=\"space-y-6\">\n                 <div className=\"space-y-2\">\n                   <label className=\"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase ml-1\">Select Profile</label>\n                   <div className=\"relative\">\n                      <User className=\"absolute left-4 top-3.5 text-slate-400\" size={18} />\n                      <select \n                         className=\"glass-input pl-11 appearance-none cursor-pointer\" \n                         value={selectedId}\n                         onChange={(e) => setSelectedId(e.target.value)}\n                      >\n                         <option value=\"\">Choose an ID...</option>\n                         {activeIds.map((id) => (\n                           <option key={id.idCode} value={id.idCode}>\n                             {id.idCode} ‚Äî {id.role}\n                           </option>\n                         ))}\n                      </select>\n                      <div className=\"absolute right-4 top-4 pointer-events-none border-l-[5px] border-l-transparent border-r-[5px] border-r-transparent border-t-[5px] border-t-slate-400\"></div>\n                   </div>\n                 </div>\n\n                 <div className=\"space-y-2\">\n                   <label className=\"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase ml-1\">Security PIN</label>\n                   <div className=\"relative\">\n                      <KeySquare className=\"absolute left-4 top-3.5 text-slate-400\" size={18} />\n                      <input \n                         type=\"password\"\n                         inputMode=\"numeric\"\n                         className=\"glass-input pl-11 tracking-widest text-lg font-bold\" \n                         placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                         value={pin}\n                         onChange={(e) => setPin(e.target.value)}\n                         maxLength={20}\n                         aria-label=\"Enter security PIN\"\n                      />\n                   </div>\n                 </div>\n\n                 {error && (\n                    <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-500/30 text-red-600 dark:text-red-400 px-4 py-3 rounded-xl text-sm flex items-center gap-2\">\n                       <div className=\"w-1.5 h-1.5 rounded-full bg-red-500\"></div>\n                       {error}\n                    </div>\n                 )}\n\n                 <button\n                   type=\"submit\"\n                   disabled={loading}\n                   className=\"btn-primary w-full\"\n                 >\n                   {loading ? <Loader2 className=\"animate-spin\" size={20} /> : 'Access Terminal'}\n                 </button>\n\n                 <div className=\"text-center\">\n                    <button type=\"button\" className=\"text-xs text-slate-400 hover:text-blue-500 transition-colors\">\n                       Forgot PIN? Contact Manager\n                    </button>\n                 </div>\n               </form>\n            )}\n        </div>\n\n      </div>\n      \n      <div className=\"mt-8 text-xs text-slate-400 dark:text-slate-600 font-mono\">\n         Boots-POS Gemini ‚Ä¢ Secure Environment\n      </div>\n\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\auth\\PinReset.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { useAuth } from '../../context/AuthContext';\n\nexport default function PinReset() {\n  const { session, setPin } = useAuth();\n  const [currentPin, setCurrentPin] = useState('');\n  const [newPin, setNewPin] = useState('');\n  const [confirmPin, setConfirmPin] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    if (!currentPin || !newPin) {\n      setError('Please enter PIN');\n      return;\n    }\n    if (newPin !== confirmPin) {\n      setError('PIN confirmation does not match');\n      return;\n    }\n    setLoading(true);\n    try {\n      await setPin(session?.idCode, currentPin, newPin);\n      setCurrentPin('');\n      setNewPin('');\n      setConfirmPin('');\n    } catch (err) {\n      setError(err?.message || 'Failed to set PIN');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-dvh flex items-center justify-center bg-slate-50 px-4\">\n      <div className=\"w-full max-w-md rounded-2xl bg-white shadow-lg border border-slate-200 p-8\">\n        <h1 className=\"text-2xl font-bold text-slate-800\">Reset PIN</h1>\n        <p className=\"text-slate-500 mt-2\">Your PIN must be updated before continuing.</p>\n\n        <form onSubmit={handleSubmit} className=\"mt-6 space-y-4\">\n          <div>\n            <label className=\"text-sm font-semibold text-slate-600\">Current PIN</label>\n            <input\n              type=\"password\"\n              inputMode=\"numeric\"\n              value={currentPin}\n              onChange={(e) => setCurrentPin(e.target.value)}\n              className=\"mt-2 w-full rounded-xl border border-slate-200 px-4 py-3 text-slate-700\"\n            />\n          </div>\n\n          <div>\n            <label className=\"text-sm font-semibold text-slate-600\">New PIN</label>\n            <input\n              type=\"password\"\n              inputMode=\"numeric\"\n              value={newPin}\n              onChange={(e) => setNewPin(e.target.value)}\n              className=\"mt-2 w-full rounded-xl border border-slate-200 px-4 py-3 text-slate-700\"\n            />\n          </div>\n\n          <div>\n            <label className=\"text-sm font-semibold text-slate-600\">Confirm PIN</label>\n            <input\n              type=\"password\"\n              inputMode=\"numeric\"\n              value={confirmPin}\n              onChange={(e) => setConfirmPin(e.target.value)}\n              className=\"mt-2 w-full rounded-xl border border-slate-200 px-4 py-3 text-slate-700\"\n            />\n          </div>\n\n          {error && <div className=\"text-sm text-red-600\">{error}</div>}\n\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full rounded-xl bg-blue-600 text-white font-semibold py-3 hover:bg-blue-500 disabled:opacity-50\"\n          >\n            {loading ? 'Saving...' : 'Set new PIN'}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\layout\\AppShell.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,23],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'NavLink' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"NavLink"},"fix":{"range":[42,50],"text":""},"desc":"Remove unused variable 'NavLink'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Outlet' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"Outlet"},"fix":{"range":[49,57],"text":""},"desc":"Remove unused variable 'Outlet'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'motion' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[108,115],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"AnimatePresence"},"fix":{"range":[114,131],"text":""},"desc":"Remove unused variable 'AnimatePresence'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Container' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"Container"},"fix":{"range":[157,206],"text":""},"desc":"Remove unused variable 'Container'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ThemeToggle' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"ThemeToggle"},"fix":{"range":[208,263],"text":""},"desc":"Remove unused variable 'ThemeToggle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'NavItem' is defined but never used. Allowed unused vars must match /^_/u.","line":15,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"NavItem"},"fix":{"range":[487,903],"text":""},"desc":"Remove unused variable 'NavItem'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { NavLink, Outlet, useLocation } from \"react-router-dom\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { Container } from \"@/components/ui/grid\";\r\nimport { ThemeToggle } from \"@/components/ThemeToggle\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst navItems = [\r\n  { to: \"/\", label: \"Dashboard\" },\r\n  { to: \"/pos\", label: \"POS Terminal\" },\r\n  { to: \"/reports\", label: \"Daily\" },\r\n  { to: \"/settings\", label: \"Setting\" },\r\n];\r\n\r\nfunction NavItem({ to, label }) {\r\n  return (\r\n    <NavLink\r\n      to={to}\r\n      end={to === \"/\"}\r\n      className={({ isActive }) =>\r\n        cn(\r\n          \"text-sm px-3 py-2 rounded-md border transition-colors\",\r\n          \"hover:bg-accent hover:text-accent-foreground\",\r\n          isActive ? \"bg-accent text-accent-foreground\" : \"bg-background\"\r\n        )\r\n      }\r\n    >\r\n      {label}\r\n    </NavLink>\r\n  );\r\n}\r\n\r\nexport function AppShell() {\r\n  const location = useLocation();\r\n\r\n  return (\r\n    <div className=\"min-h-screen\">\r\n      {/* Header */}\r\n      <header className=\"border-b bg-slate-50/70 dark:bg-black/40 backdrop-blur-md\">\r\n        <Container className=\"py-4 px-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <img src=\"https://store.boots.co.th/images/boots-logo.png\" alt=\"Boots Logo\" className=\"h-8 w-auto object-contain\" />\r\n            <span className=\"font-bold text-xl text-slate-800 dark:text-slate-200\">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</span>\r\n          </div>\r\n          <nav className=\"flex flex-wrap gap-2 items-center\">\r\n            {navItems.map((it) => (\r\n              <NavItem key={it.to} to={it.to} label={it.label} />\r\n            ))}\r\n          </nav>\r\n          <div className=\"flex items-center gap-2\">\r\n            <ThemeToggle />\r\n          </div>\r\n        </Container>\r\n      </header>\r\n\r\n      <main>\r\n        <AnimatePresence mode=\"wait\">\r\n          <motion.div\r\n            key={location.pathname}\r\n            initial={{ opacity: 0, y: 10, scale: 0.99 }}\r\n            animate={{ opacity: 1, y: 0, scale: 1 }}\r\n            exit={{ opacity: 0, y: -10, scale: 0.99 }}\r\n            transition={{ duration: 0.35, ease: \"circOut\" }}\r\n          >\r\n            <Outlet />\r\n          </motion.div>\r\n        </AnimatePresence>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\nav\\DynamicNav.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\skeletons\\TabSkeleton.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'LoadingSpinner' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"LoadingSpinner"},"fix":{"range":[7,27],"text":""},"desc":"Remove unused variable 'LoadingSpinner'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import LoadingSpinner from \"../LoadingSpinner\";\n\nexport default function TabSkeleton() {\n  return (\n    <div className=\"flex flex-col items-center justify-center gap-6 p-6 min-h-[60vh]\">\n      <LoadingSpinner label=\"Loading page...\" size={32} />\n      <div className=\"w-full max-w-5xl space-y-4 animate-pulse\">\n        <div className=\"h-8 bg-gray-200 rounded w-1/3\"></div>\n        <div className=\"h-64 bg-gray-200 rounded\"></div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\toaster.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,23],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'SonnerToaster' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"SonnerToaster"},"fix":{"range":[33,83],"text":""},"desc":"Remove unused variable 'SonnerToaster'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { Toaster as SonnerToaster } from \"sonner\";\r\n\r\nexport function Toaster() {\r\n  return (\r\n    <SonnerToaster\r\n      position=\"top-right\"\r\n      richColors\r\n      closeButton\r\n      duration={2500}\r\n    />\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\ui\\badge.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,23],"text":""},"desc":"Remove unused variable 'React'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { cva } from \"class-variance-authority\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-md border px-2 py-0.5 text-xs font-medium transition-colors\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground border-transparent\",\r\n        secondary: \"bg-secondary text-secondary-foreground border-transparent\",\r\n        outline: \"bg-background text-foreground\",\r\n        destructive: \"bg-destructive text-destructive-foreground border-transparent\",\r\n        muted: \"bg-muted text-muted-foreground border-transparent\"\r\n      }\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\"\r\n    }\r\n  }\r\n);\r\n\r\nexport function Badge({ className, variant, ...props }) {\r\n  return <span className={cn(badgeVariants({ variant }), className)} {...props} />;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\ui\\button.jsx","messages":[{"ruleId":"no-dupe-keys","severity":2,"message":"Duplicate key 'discount'.","line":20,"column":9,"nodeType":"ObjectExpression","messageId":"unexpected","endLine":20,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'Comp' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":40,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"Comp"},"fix":{"range":[1605,1644],"text":""},"desc":"Remove unused variable 'Comp'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { cva } from \"class-variance-authority\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors \" +\r\n    \"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 \" +\r\n    \"disabled:pointer-events-none disabled:opacity-50\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:opacity-90\",\r\n        destructive: \"bg-destructive text-destructive-foreground hover:opacity-90\",\r\n        outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary: \"bg-secondary text-secondary-foreground hover:opacity-90\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n        discount: \"bg-discount text-discount-foreground border border-discount hover:bg-discount/90\",\r\n        discount: \"bg-discount text-discount-foreground border border-discount hover:bg-discount/90\"\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 rounded-md px-3\",\r\n        lg: \"h-11 rounded-md px-8\",\r\n        icon: \"h-10 w-10\"\r\n      }\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\"\r\n    }\r\n  }\r\n);\r\n\r\nconst Button = React.forwardRef(function Button(\r\n  { className, variant, size, asChild = false, ...props },\r\n  ref\r\n) {\r\n  const Comp = asChild ? Slot : \"button\";\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      className={cn(buttonVariants({ variant, size }), className)}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\n\r\nexport { Button, buttonVariants };\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\ui\\card.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\ui\\dialog.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"X"},"fix":{"range":[128,161],"text":""},"desc":"Remove unused variable 'X'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { X } from \"lucide-react\";\r\n\r\nexport const Dialog = DialogPrimitive.Root;\r\nexport const DialogTrigger = DialogPrimitive.Trigger;\r\nexport const DialogPortal = DialogPrimitive.Portal;\r\nexport const DialogClose = DialogPrimitive.Close;\r\n\r\nexport const DialogOverlay = React.forwardRef(function DialogOverlay({ className, ...props }, ref) {\r\n  return (\r\n    <DialogPrimitive.Overlay\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed inset-0 z-50 bg-black/50\",\r\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out\",\r\n        \"data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\n\r\nexport const DialogContent = React.forwardRef(function DialogContent({ className, children, ...props }, ref) {\r\n  return (\r\n    <DialogPortal>\r\n      <DialogOverlay />\r\n      <DialogPrimitive.Content\r\n        ref={ref}\r\n        className={cn(\r\n          \"fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4\",\r\n          \"border bg-background p-6 shadow-lg sm:rounded-lg\",\r\n          \"data-[state=open]:animate-in data-[state=closed]:animate-out\",\r\n          \"data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n          \"data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95\",\r\n          \"data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%]\",\r\n          \"data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        {children}\r\n        <DialogPrimitive.Close\r\n          className={cn(\r\n            \"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity\",\r\n            \"hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n            \"disabled:pointer-events-none\"\r\n          )}\r\n          aria-label=\"Close\"\r\n        >\r\n          <X className=\"h-4 w-4\" />\r\n        </DialogPrimitive.Close>\r\n      </DialogPrimitive.Content>\r\n    </DialogPortal>\r\n  );\r\n});\r\n\r\nexport function DialogHeader({ className, ...props }) {\r\n  return <div className={cn(\"flex flex-col space-y-1.5 text-center sm:text-left\", className)} {...props} />;\r\n}\r\n\r\nexport function DialogFooter({ className, ...props }) {\r\n  return <div className={cn(\"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\", className)} {...props} />;\r\n}\r\n\r\nexport const DialogTitle = React.forwardRef(function DialogTitle({ className, ...props }, ref) {\r\n  return (\r\n    <DialogPrimitive.Title\r\n      ref={ref}\r\n      className={cn(\"text-lg font-semibold leading-none tracking-tight\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\n\r\nexport const DialogDescription = React.forwardRef(function DialogDescription({ className, ...props }, ref) {\r\n  return (\r\n    <DialogPrimitive.Description\r\n      ref={ref}\r\n      className={cn(\"text-sm text-muted-foreground\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\ui\\grid.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,23],"text":""},"desc":"Remove unused variable 'React'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { cva } from \"class-variance-authority\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst gridVariants = cva(\"grid\", {\r\n  variants: {\r\n    cols: {\r\n      1: \"grid-cols-1\",\r\n      2: \"grid-cols-1 sm:grid-cols-2\",\r\n      3: \"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3\",\r\n      4: \"grid-cols-1 sm:grid-cols-2 lg:grid-cols-4\",\r\n      5: \"grid-cols-2 sm:grid-cols-3 lg:grid-cols-5\",\r\n      6: \"grid-cols-2 sm:grid-cols-3 lg:grid-cols-6\"\r\n    },\r\n    gap: {\r\n      none: \"gap-0\",\r\n      sm: \"gap-2\",\r\n      md: \"gap-4\",\r\n      lg: \"gap-6\",\r\n      xl: \"gap-8\"\r\n    }\r\n  },\r\n  defaultVariants: {\r\n    cols: 3,\r\n    gap: \"md\"\r\n  }\r\n});\r\n\r\nfunction Grid({ className, cols, gap, ...props }) {\r\n  return <div className={cn(gridVariants({ cols, gap }), className)} {...props} />;\r\n}\r\n\r\nconst containerVariants = cva(\"mx-auto w-full px-4 sm:px-6 lg:px-8\", {\r\n  variants: {\r\n    size: {\r\n      sm: \"max-w-screen-sm\",\r\n      md: \"max-w-screen-md\",\r\n      lg: \"max-w-screen-lg\",\r\n      xl: \"max-w-screen-xl\",\r\n      \"2xl\": \"max-w-screen-2xl\",\r\n      full: \"max-w-full\"\r\n    }\r\n  },\r\n  defaultVariants: {\r\n    size: \"xl\"\r\n  }\r\n});\r\n\r\nfunction Container({ className, size, ...props }) {\r\n  return <div className={cn(containerVariants({ size }), className)} {...props} />;\r\n}\r\n\r\nexport { Grid, Container };\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\ui\\input.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\ui\\label.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\components\\ui\\table.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,23],"text":""},"desc":"Remove unused variable 'React'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport function Table({ className, ...props }) {\r\n  return <div className={cn(\"w-full overflow-auto\", className)} {...props} />;\r\n}\r\n\r\nexport function TableRoot({ className, ...props }) {\r\n  return <table className={cn(\"w-full caption-bottom text-sm\", className)} {...props} />;\r\n}\r\n\r\nexport function TableHeader({ className, ...props }) {\r\n  return <thead className={cn(\"[&_tr]:border-b\", className)} {...props} />;\r\n}\r\n\r\nexport function TableBody({ className, ...props }) {\r\n  return <tbody className={cn(\"[&_tr:last-child]:border-0\", className)} {...props} />;\r\n}\r\n\r\nexport function TableFooter({ className, ...props }) {\r\n  return <tfoot className={cn(\"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\", className)} {...props} />;\r\n}\r\n\r\nexport function TableRow({ className, ...props }) {\r\n  return <tr className={cn(\"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\", className)} {...props} />;\r\n}\r\n\r\nexport function TableHead({ className, ...props }) {\r\n  return <th className={cn(\"h-10 px-2 text-left align-middle font-medium text-muted-foreground\", className)} {...props} />;\r\n}\r\n\r\nexport function TableCell({ className, ...props }) {\r\n  return <td className={cn(\"p-2 align-middle\", className)} {...props} />;\r\n}\r\n\r\nexport function TableCaption({ className, ...props }) {\r\n  return <caption className={cn(\"mt-4 text-sm text-muted-foreground\", className)} {...props} />;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\config\\firebaseConfig.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\constants\\appMeta.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\context\\AuthContext.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, {\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\";\nimport {\n  onAuthStateChanged,\n  signInWithPopup,\n  signInWithRedirect,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  signInAnonymously,\n  updateProfile,\n  signOut as fbSignOut,\n} from \"firebase/auth\";\nimport { auth, googleProvider } from \"../firebase\";\nimport {\n  listMyIds,\n  verifyIdPin,\n  setPin as setPinService,\n} from \"../services/rbacService\";\n\nconst AuthContext = createContext(null);\n\nconst safeLocalGet = (key, fallback = \"\") => {\n  try {\n    return localStorage.getItem(key) || fallback;\n  } catch {\n    return fallback;\n  }\n};\nconst safeLocalSet = (key, val) => {\n  try {\n    localStorage.setItem(key, val || \"\");\n  } catch {\n    /* ignore */\n  }\n};\n\nexport function AuthProvider({ children }) {\n  const [firebaseUser, setFirebaseUser] = useState(null);\n  const [session, setSession] = useState(null);\n  const [ids, setIds] = useState([]);\n  const [authLoading, setAuthLoading] = useState(true);\n  const [lastIdCode, _setLastIdCode] = useState(() =>\n    safeLocalGet(\"lastIdCode\", \"\")\n  );\n\n  const setLastIdCode = useCallback((val) => {\n    _setLastIdCode(val || \"\");\n    safeLocalSet(\"lastIdCode\", val || \"\");\n  }, []);\n\n  const loadIds = useCallback(async () => {\n    if (!auth.currentUser) {\n      setIds([]);\n      return [];\n    }\n    try {\n      const list = await listMyIds();\n      setIds(list);\n      return list;\n    } catch (err) {\n      console.error(\"listMyIds failed:\", err);\n      setIds([]);\n      return [];\n    }\n  }, []);\n\n  const verifyPin = useCallback(async (idCode, pin) => {\n    const sessionRes = await verifyIdPin({ idCode, pin });\n    if (!sessionRes) {\n      throw new Error(\"Invalid session\");\n    }\n    setSession(sessionRes);\n    setLastIdCode(idCode);\n    return sessionRes;\n  }, [setLastIdCode]);\n\n  const setPin = useCallback(\n    async (idCode, currentPin, newPin) => {\n      await setPinService({ idCode, currentPin, newPin });\n      setSession((prev) =>\n        prev ? { ...prev, pinResetRequired: false } : prev\n      );\n    },\n    []\n  );\n\n  const signOut = useCallback(async () => {\n    await fbSignOut(auth);\n    setSession(null);\n    setIds([]);\n    setLastIdCode(\"\");\n  }, [setLastIdCode]);\n\n  const signInWithGoogle = useCallback(async () => {\n    try {\n      const res = await signInWithPopup(auth, googleProvider);\n      return { success: true, data: res.user, error: null };\n    } catch (err) {\n      if (\n        err?.code === \"auth/popup-blocked\" ||\n        err?.code === \"auth/operation-not-supported-in-this-environment\"\n      ) {\n        await signInWithRedirect(auth, googleProvider);\n        return { success: true, data: null, error: null };\n      }\n      return {\n        success: false,\n        data: null,\n        error: `${err?.code || \"error\"}: ${err?.message || String(err)}`,\n      };\n    }\n  }, []);\n\n  const loginEmail = useCallback(async (email, password) => {\n    try {\n      const res = await signInWithEmailAndPassword(auth, email, password);\n      return { success: true, data: res.user, error: null };\n    } catch (err) {\n      return {\n        success: false,\n        data: null,\n        error: err?.message || \"Login failed\",\n      };\n    }\n  }, []);\n\n  const signupEmail = useCallback(async ({ email, password, displayName }) => {\n    try {\n      const res = await createUserWithEmailAndPassword(auth, email, password);\n      if (displayName) {\n        await updateProfile(res.user, { displayName });\n      }\n      return { success: true, data: res.user, error: null };\n    } catch (err) {\n      return {\n        success: false,\n        data: null,\n        error: err?.message || \"Signup failed\",\n      };\n    }\n  }, []);\n\n  const loginAnonymous = useCallback(async () => {\n    try {\n      const res = await signInAnonymously(auth);\n      return { success: true, data: res.user, error: null };\n    } catch (err) {\n      return {\n        success: false,\n        data: null,\n        error: err?.message || \"Anonymous login failed\",\n      };\n    }\n  }, []);\n\n  useEffect(() => {\n    const unsub = onAuthStateChanged(auth, async (u) => {\n      setAuthLoading(true);\n      setFirebaseUser(u || null);\n      setSession(null);\n      setIds([]);\n      try {\n        if (u) {\n          await loadIds();\n        }\n      } finally {\n        setAuthLoading(false);\n      }\n    });\n    return () => unsub();\n  }, [loadIds]);\n\n  const lockTerminal = useCallback(() => {\n    setSession(null);\n  }, []);\n\n  const value = useMemo(\n    () => ({\n      firebaseUser,\n      session,\n      role: session?.role || null,\n      allowedMenus: session?.permissions?.allowedMenus || [],\n      isAuthed: !!firebaseUser,\n      authLoading,\n      loading: authLoading,\n      ids,\n      lastIdCode,\n      setLastIdCode,\n      loadIds,\n      verifyPin,\n      setPin,\n      signOut,\n      logout: signOut,\n      lockTerminal, // Add here\n      signInWithGoogle,\n      loginEmail,\n      signupEmail,\n      loginAnonymous,\n      signIn: loginEmail, // backward compatibility\n      profile: session,\n    }),\n    [\n      firebaseUser,\n      session,\n      authLoading,\n      ids,\n      lastIdCode,\n      setLastIdCode,\n      loadIds,\n      verifyPin,\n      setPin,\n      signOut,\n      lockTerminal, // Add here\n      signInWithGoogle,\n      loginEmail,\n      signupEmail,\n      loginAnonymous,\n    ]\n  );\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n}\n\nexport function useAuth() {\n  const ctx = useContext(AuthContext);\n  if (!ctx) throw new Error(\"useAuth must be used within AuthProvider\");\n  return ctx;\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\context\\CartContext.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useMemo, useCallback } from 'react';\nimport { useCart as useCartLogic } from '../hooks/useCart';\n\n// Context wrapper that exposes the rich cart state from hooks/useCart\nconst CartContext = createContext(null);\n\nexport const useCart = () => {\n  const ctx = useContext(CartContext);\n  if (!ctx) throw new Error('useCart must be used within CartProvider');\n  return ctx;\n};\n\nexport const CartProvider = ({ children }) => {\n  const cart = useCartLogic();\n\n  const getCartCount = useCallback(() => cart.summary.totalItems || 0, [cart.summary.totalItems]);\n\n  const value = useMemo(() => ({\n    ...cart,\n    getCartCount\n  }), [cart, getCartCount]);\n\n  return (\n    <CartContext.Provider value={value}>\n      {children}\n    </CartContext.Provider>\n  );\n};\n\nexport default CartContext;\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\context\\ThemeContext.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useEffect, useState } from 'react';\n\nconst ThemeContext = createContext();\n\nexport function ThemeProvider({ children }) {\n  const [isDark, setIsDark] = useState(() => {\n    // Check localStorage first\n    const saved = localStorage.getItem('theme-mode');\n    if (saved === 'dark') return true;\n    if (saved === 'light') return false;\n    // Default to light mode\n    return false;\n  });\n\n  useEffect(() => {\n    const root = window.document.documentElement;\n    if (isDark) {\n      root.classList.add('dark');\n      localStorage.setItem('theme-mode', 'dark');\n    } else {\n      root.classList.remove('dark');\n      localStorage.setItem('theme-mode', 'light');\n    }\n  }, [isDark]);\n\n  const toggleTheme = () => setIsDark(!isDark);\n\n  return (\n    <ThemeContext.Provider value={{ isDark, toggleTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n\nexport const useTheme = () => useContext(ThemeContext);\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\features\\admin\\dataUpload\\excelUploadUtils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\features\\admin\\dataUpload\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\features\\auth\\services\\authService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\features\\orders\\services\\orderService.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'storeId' is assigned a value but never used. Allowed unused args must match /^_/u.","line":2,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"storeId"},"fix":{"range":[52,60],"text":""},"desc":"Remove unused variable 'storeId'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'dateFrom' is assigned a value but never used. Allowed unused args must match /^_/u.","line":2,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"dateFrom"},"fix":{"range":[59,69],"text":""},"desc":"Remove unused variable 'dateFrom'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'dateTo' is assigned a value but never used. Allowed unused args must match /^_/u.","line":2,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"dateTo"},"fix":{"range":[69,77],"text":""},"desc":"Remove unused variable 'dateTo'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export const orderService = {\r\n  async listOrders({ storeId, dateFrom, dateTo } = {}) {\r\n    // TODO: Firestore query by storeId + createdAt\r\n    return { items: [] };\r\n  }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\features\\pos\\components\\ProductLookupModal.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Dialog' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"Dialog"},"fix":{"range":[42,49],"text":""},"desc":"Remove unused variable 'Dialog'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DialogTrigger' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"DialogTrigger"},"fix":{"range":[48,63],"text":""},"desc":"Remove unused variable 'DialogTrigger'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DialogContent' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"DialogContent"},"fix":{"range":[63,78],"text":""},"desc":"Remove unused variable 'DialogContent'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DialogHeader' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"DialogHeader"},"fix":{"range":[78,92],"text":""},"desc":"Remove unused variable 'DialogHeader'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DialogTitle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":73,"suggestions":[{"messageId":"removeVar","data":{"varName":"DialogTitle"},"fix":{"range":[92,105],"text":""},"desc":"Remove unused variable 'DialogTitle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DialogDescription' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":75,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":92,"suggestions":[{"messageId":"removeVar","data":{"varName":"DialogDescription"},"fix":{"range":[105,124],"text":""},"desc":"Remove unused variable 'DialogDescription'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DialogFooter' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":94,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":106,"suggestions":[{"messageId":"removeVar","data":{"varName":"DialogFooter"},"fix":{"range":[124,138],"text":""},"desc":"Remove unused variable 'DialogFooter'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Button' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"Button"},"fix":{"range":[173,221],"text":""},"desc":"Remove unused variable 'Button'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Input' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Input"},"fix":{"range":[223,269],"text":""},"desc":"Remove unused variable 'Input'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Badge' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Badge"},"fix":{"range":[271,317],"text":""},"desc":"Remove unused variable 'Badge'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Table' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Table"},"fix":{"range":[328,334],"text":""},"desc":"Remove unused variable 'Table'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TableRoot' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"TableRoot"},"fix":{"range":[333,344],"text":""},"desc":"Remove unused variable 'TableRoot'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TableHeader' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"TableHeader"},"fix":{"range":[344,357],"text":""},"desc":"Remove unused variable 'TableHeader'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TableBody' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":50,"suggestions":[{"messageId":"removeVar","data":{"varName":"TableBody"},"fix":{"range":[357,368],"text":""},"desc":"Remove unused variable 'TableBody'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TableRow' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"TableRow"},"fix":{"range":[368,378],"text":""},"desc":"Remove unused variable 'TableRow'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TableHead' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":71,"suggestions":[{"messageId":"removeVar","data":{"varName":"TableHead"},"fix":{"range":[378,389],"text":""},"desc":"Remove unused variable 'TableHead'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TableCell' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":73,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":82,"suggestions":[{"messageId":"removeVar","data":{"varName":"TableCell"},"fix":{"range":[389,400],"text":""},"desc":"Remove unused variable 'TableCell'."}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: 'load'. Either include it or remove the dependency array.","line":27,"column":6,"nodeType":"ArrayExpression","endLine":27,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [load, open]","fix":{"range":[1201,1207],"text":"[load, open]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has missing dependencies: 'load' and 'open'. Either include them or remove the dependency array.","line":34,"column":6,"nodeType":"ArrayExpression","endLine":34,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [q, category, open, load]","fix":{"range":[1411,1424],"text":"[q, category, open, load]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { Dialog, DialogTrigger, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Table, TableRoot, TableHeader, TableBody, TableRow, TableHead, TableCell } from \"@/components/ui/table\";\r\nimport { productService } from \"@/features/products/services/productService\";\r\n\r\nexport function ProductLookupModal({ onPick, triggerLabel = \"Add Product\" }) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [q, setQ] = React.useState(\"\");\r\n  const [category, setCategory] = React.useState(\"All\");\r\n  const [categories, setCategories] = React.useState([\"All\"]);\r\n  const [items, setItems] = React.useState([]);\r\n\r\n  async function load() {\r\n    const cats = await productService.listCategories();\r\n    setCategories(cats);\r\n    const res = await productService.listProducts({ q, category });\r\n    setItems(res.items);\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    if (!open) return;\r\n    load();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [open]);\r\n\r\n  React.useEffect(() => {\r\n    if (!open) return;\r\n    const t = setTimeout(() => load(), 150);\r\n    return () => clearTimeout(t);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [q, category]);\r\n\r\n  function pick(p) {\r\n    onPick?.(p);\r\n    setOpen(false);\r\n  }\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={setOpen}>\r\n      <DialogTrigger asChild>\r\n        <Button variant=\"outline\">{triggerLabel}</Button>\r\n      </DialogTrigger>\r\n\r\n      <DialogContent className=\"max-w-3xl\">\r\n        <DialogHeader>\r\n          <DialogTitle>Product Lookup</DialogTitle>\r\n          <DialogDescription>Search and add products to cart.</DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <div className=\"flex flex-col md:flex-row gap-3\">\r\n          <Input\r\n            id=\"product-search\"\r\n            placeholder=\"Search name or SKU...\"\r\n            value={q}\r\n            onChange={(e) => setQ(e.target.value)}\r\n          />\r\n          <select\r\n            className=\"h-10 rounded-md border border-input bg-background px-3 text-sm\"\r\n            value={category}\r\n            onChange={(e) => setCategory(e.target.value)}\r\n            aria-label=\"Category\"\r\n          >\r\n            {categories.map((c) => (\r\n              <option key={c} value={c}>{c}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <Table className=\"border rounded-lg\">\r\n          <TableRoot>\r\n            <TableHeader>\r\n              <TableRow>\r\n                <TableHead>Product</TableHead>\r\n                <TableHead className=\"w-28\">Category</TableHead>\r\n                <TableHead className=\"w-24 text-right\">Price</TableHead>\r\n                <TableHead className=\"w-28 text-right\">Action</TableHead>\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {items.map((p) => (\r\n                <TableRow key={p.id}>\r\n                  <TableCell className=\"font-medium\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <span>{p.name}</span>\r\n                      <Badge variant=\"muted\">{p.sku}</Badge>\r\n                    </div>\r\n                    <div className=\"text-xs text-muted-foreground\">\r\n                      Barcode: {p.barcode?.[0] || \"-\"}\r\n                    </div>\r\n                  </TableCell>\r\n                  <TableCell>{p.category}</TableCell>\r\n                  <TableCell className=\"text-right\">‡∏ø{p.price}</TableCell>\r\n                  <TableCell className=\"text-right\">\r\n                    <Button size=\"sm\" onClick={() => pick(p)}>Add</Button>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n\r\n              {!items.length && (\r\n                <TableRow>\r\n                  <TableCell colSpan={4} className=\"text-muted-foreground\">\r\n                    No products found.\r\n                  </TableCell>\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </TableRoot>\r\n        </Table>\r\n\r\n        <DialogFooter>\r\n          <Button variant=\"outline\" onClick={() => setOpen(false)}>Close</Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\features\\pos\\components\\ReceiptDialog.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,23],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Dialog' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"Dialog"},"fix":{"range":[42,49],"text":""},"desc":"Remove unused variable 'Dialog'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DialogContent' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"DialogContent"},"fix":{"range":[48,63],"text":""},"desc":"Remove unused variable 'DialogContent'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DialogHeader' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"DialogHeader"},"fix":{"range":[63,77],"text":""},"desc":"Remove unused variable 'DialogHeader'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DialogTitle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":58,"suggestions":[{"messageId":"removeVar","data":{"varName":"DialogTitle"},"fix":{"range":[77,90],"text":""},"desc":"Remove unused variable 'DialogTitle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DialogDescription' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":60,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":77,"suggestions":[{"messageId":"removeVar","data":{"varName":"DialogDescription"},"fix":{"range":[90,109],"text":""},"desc":"Remove unused variable 'DialogDescription'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DialogFooter' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":79,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":91,"suggestions":[{"messageId":"removeVar","data":{"varName":"DialogFooter"},"fix":{"range":[109,123],"text":""},"desc":"Remove unused variable 'DialogFooter'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Button' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"Button"},"fix":{"range":[158,206],"text":""},"desc":"Remove unused variable 'Button'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Table' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Table"},"fix":{"range":[217,223],"text":""},"desc":"Remove unused variable 'Table'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TableRoot' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"TableRoot"},"fix":{"range":[222,233],"text":""},"desc":"Remove unused variable 'TableRoot'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TableHeader' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"TableHeader"},"fix":{"range":[233,246],"text":""},"desc":"Remove unused variable 'TableHeader'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TableBody' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":50,"suggestions":[{"messageId":"removeVar","data":{"varName":"TableBody"},"fix":{"range":[246,257],"text":""},"desc":"Remove unused variable 'TableBody'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TableRow' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"TableRow"},"fix":{"range":[257,267],"text":""},"desc":"Remove unused variable 'TableRow'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TableHead' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":71,"suggestions":[{"messageId":"removeVar","data":{"varName":"TableHead"},"fix":{"range":[267,278],"text":""},"desc":"Remove unused variable 'TableHead'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TableCell' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":73,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":82,"suggestions":[{"messageId":"removeVar","data":{"varName":"TableCell"},"fix":{"range":[278,289],"text":""},"desc":"Remove unused variable 'TableCell'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Badge' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Badge"},"fix":{"range":[323,369],"text":""},"desc":"Remove unused variable 'Badge'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Table, TableRoot, TableHeader, TableBody, TableRow, TableHead, TableCell } from \"@/components/ui/table\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\n\r\nexport function ReceiptDialog({ open, onOpenChange, order }) {\r\n  if (!order) return null;\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-xl\">\r\n        <DialogHeader>\r\n          <DialogTitle>Receipt</DialogTitle>\r\n          <DialogDescription>Order ID: <span className=\"font-medium\">{order.id}</span></DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <div className=\"text-sm space-y-2\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className=\"text-muted-foreground\">Created</span>\r\n            <span>{new Date(order.createdAt).toLocaleString()}</span>\r\n          </div>\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className=\"text-muted-foreground\">Payment</span>\r\n            <Badge variant=\"secondary\">{order.paymentMethod}</Badge>\r\n          </div>\r\n        </div>\r\n\r\n        <Table className=\"border rounded-lg\">\r\n          <TableRoot>\r\n            <TableHeader>\r\n              <TableRow>\r\n                <TableHead>Item</TableHead>\r\n                <TableHead className=\"w-20 text-right\">Qty</TableHead>\r\n                <TableHead className=\"w-28 text-right\">Price</TableHead>\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {order.items.map((it) => (\r\n                <TableRow key={it.id}>\r\n                  <TableCell className=\"font-medium\">{it.name}</TableCell>\r\n                  <TableCell className=\"text-right\">{it.qty}</TableCell>\r\n                  <TableCell className=\"text-right\">‡∏ø{it.price}</TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </TableRoot>\r\n        </Table>\r\n\r\n        <div className=\"text-sm space-y-1\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className=\"text-muted-foreground\">Subtotal</span>\r\n            <span>‡∏ø{order.totals.subtotal}</span>\r\n          </div>\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className=\"text-muted-foreground\">Discount</span>\r\n            <span>- ‡∏ø{order.totals.discountValue}</span>\r\n          </div>\r\n          <div className=\"flex items-center justify-between font-semibold\">\r\n            <span>Total</span>\r\n            <span>‡∏ø{order.totals.total}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <DialogFooter>\r\n          <Button variant=\"outline\" onClick={() => window.print()}>Print (stub)</Button>\r\n          <Button onClick={() => onOpenChange(false)}>Close</Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\features\\pos\\hooks\\useCart.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\features\\pos\\hooks\\useScanListener.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\features\\pos\\services\\posCalc.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\features\\pos\\services\\posOrderService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\features\\pos\\services\\posService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\features\\products\\services\\productService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\features\\reports\\services\\reportService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\features\\settings\\services\\settingsService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\features\\uiMenus\\firestoreUiMenus.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\features\\uiMenus\\hooks.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\features\\uiMenus\\placement.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\features\\uiMenus\\rbac.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\firebase.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\hooks\\useCart.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\hooks\\useScanListener.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\icons\\lucide.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\layouts\\MainLayout.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\legacy\\PosUI.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ShoppingCart' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"ShoppingCart"},"fix":{"range":[62,75],"text":""},"desc":"Remove unused variable 'ShoppingCart'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Search' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"Search"},"fix":{"range":[74,82],"text":""},"desc":"Remove unused variable 'Search'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ScanBarcode' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"ScanBarcode"},"fix":{"range":[82,95],"text":""},"desc":"Remove unused variable 'ScanBarcode'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Trash2' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":51,"suggestions":[{"messageId":"removeVar","data":{"varName":"Trash2"},"fix":{"range":[95,103],"text":""},"desc":"Remove unused variable 'Trash2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Loader2' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"Loader2"},"fix":{"range":[103,112],"text":""},"desc":"Remove unused variable 'Loader2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Tag' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":65,"suggestions":[{"messageId":"removeVar","data":{"varName":"Tag"},"fix":{"range":[112,117],"text":""},"desc":"Remove unused variable 'Tag'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Package' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":67,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":74,"suggestions":[{"messageId":"removeVar","data":{"varName":"Package"},"fix":{"range":[117,126],"text":""},"desc":"Remove unused variable 'Package'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":99,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":110,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle"},"fix":{"range":[149,162],"text":""},"desc":"Remove unused variable 'CheckCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ReceiptModal' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"ReceiptModal"},"fix":{"range":[335,353],"text":""},"desc":"Remove unused variable 'ReceiptModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ProductLookupModal' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"ProductLookupModal"},"fix":{"range":[379,403],"text":""},"desc":"Remove unused variable 'ProductLookupModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DailyReportModal' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"DailyReportModal"},"fix":{"range":[435,457],"text":""},"desc":"Remove unused variable 'DailyReportModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'PosUploadModal' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"PosUploadModal"},"fix":{"range":[487,507],"text":""},"desc":"Remove unused variable 'PosUploadModal'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { ShoppingCart, Search, ScanBarcode, Trash2, Loader2, Tag, Package, Percent, Ticket, Gift, CheckCircle } from 'lucide-react';\r\nimport { cn } from '../utils/cn';\r\nimport { useCart } from '../hooks/useCart';\r\nimport { useScanListener } from '../hooks/useScanListener';\r\nimport ReceiptModal from './ReceiptModal';\r\nimport ProductLookupModal from './ProductLookupModal';\r\nimport DailyReportModal from './DailyReportModal';\r\nimport PosUploadModal from \"./PosUploadModal\"; \r\nimport { posService } from '../services/posService';\r\nimport { useTheme } from '../context/ThemeContext';\r\n\r\nexport default function PosUI({ isDarkMode: externalDarkMode }) {\r\n  // BEGIN: FUNCTION ZONE (DO NOT TOUCH)\r\n  const theme = useTheme();\r\n  const { \r\n    cartItems, addToCart: originalAddToCart, decreaseItem, removeFromCart, clearCart, \r\n    summary, lastScanned, isLoading,\r\n    setManualItemDiscount, updateBillDiscount, billDiscount,\r\n    addCoupon, coupons, allowance, topup\r\n  } = useCart();\r\n\r\n  const [lastOrder, setLastOrder] = useState(null);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [isVoidMode, setIsVoidMode] = useState(false);\r\n  const [nextQty, setNextQty] = useState(1);\r\n  \r\n  // Theme State\r\n  const isDarkMode = externalDarkMode ?? theme?.isDark ?? false;\r\n\r\n  // Modal States\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  const [showDropdown, setShowDropdown] = useState(false);\r\n\r\n  // --- Search UX Enhancements (Arrow select + Enter pick + Search Hits) ---\r\n  const [selectedSuggestionIndex, setSelectedSuggestionIndex] = useState(0);\r\n  const [searchHits, setSearchHits] = useState(() => {\r\n    try { return JSON.parse(localStorage.getItem(\"pos_search_hits\") || \"{}\"); }\r\n    catch { return {}; }\r\n  });\r\n\r\n  const bumpSearchHit = (sku) => {\r\n    try {\r\n      const key = (sku || \"\").toString();\r\n      if (!key) return;\r\n      const next = { ...(searchHits || {}) };\r\n      next[key] = (next[key] || 0) + 1;\r\n      setSearchHits(next);\r\n      localStorage.setItem(\"pos_search_hits\", JSON.stringify(next));\r\n    } catch (err) {\r\n      console.debug(\"persist search hit failed\", err);\r\n    }\r\n  };\r\n\r\n  const [showProductLookup, setShowProductLookup] = useState(false);\r\n  const [showReport, setShowReport] = useState(false);\r\n  const [showDiscountModal, setShowDiscountModal] = useState(false);\r\n  const [showUploadModal, setShowUploadModal] = useState(false);\r\n\r\n  // Discount Modal Inner State\r\n  const [activeTab, setActiveTab] = useState('discount'); \r\n  const [discountSubTab, setDiscountSubTab] = useState('bill'); \r\n  const [discountCheckedItems, setDiscountCheckedItems] = useState(new Set());\r\n  \r\n  // Coupon Input State\r\n  const [couponInput, setCouponInput] = useState({ type: '', value: '', code: '' });\r\n  const [showCouponInput, setShowCouponInput] = useState(false); \r\n\r\n  const lastItemDetail = lastScanned ? cartItems.find(i => (i.sku === lastScanned || i.id === lastScanned)) : null;\r\n  const totalDiscountDisplay = Math.abs((summary?.discount || 0) + (summary?.billDiscountAmount || 0) + (summary?.couponTotal || 0) + (summary?.allowance || 0));\r\n\r\n  // --- Handlers ---\r\n  const toggleDiscountCheck = (id) => {\r\n    setDiscountCheckedItems(prev => {\r\n        const next = new Set(prev);\r\n        if (next.has(id)) next.delete(id);\r\n        else next.add(id);\r\n        return next;\r\n    });\r\n  };\r\n\r\n  const handleScanAction = async (skuOrItem) => {\r\n    if (showCouponInput) {\r\n        setCouponInput(prev => ({ ...prev, code: typeof skuOrItem === 'string' ? skuOrItem : skuOrItem.sku }));\r\n        return;\r\n    }\r\n    const quantityToApply = nextQty;\r\n    \r\n    if (isVoidMode) {\r\n       const sku = typeof skuOrItem === 'string' ? skuOrItem : (skuOrItem.sku || skuOrItem.id);\r\n       decreaseItem(sku); \r\n       setShowDropdown(false);\r\n       setInputValue('');\r\n       if (nextQty !== 1) setNextQty(1);\r\n       return;\r\n    }\r\n    \r\n    if (typeof skuOrItem === 'string') {\r\n        try {\r\n          const item = await posService.scanItem(skuOrItem);\r\n          await originalAddToCart(item, quantityToApply);\r\n        } catch (e) { console.error(e); }\r\n    } else {\r\n        await originalAddToCart(skuOrItem, quantityToApply);\r\n    }\r\n    \r\n    if (nextQty !== 1) setNextQty(1);\r\n    setShowDropdown(false);\r\n  };\r\n\r\n  const handleCheckout = async () => {\r\n    if (cartItems.length === 0) return;\r\n    const orderData = { \r\n        items: [...cartItems], \r\n        summary: summary, \r\n        cashier: 'Staff #01', \r\n        device: 'POS-Web',\r\n        adjustments: { billDiscount, coupons, allowance, topup }\r\n    };\r\n    setIsSaving(true);\r\n    try {\r\n      const orderId = await posService.createOrder(orderData);\r\n      setLastOrder({ ...orderData, id: orderId, timestamp: new Date().toISOString() });\r\n      clearCart();\r\n    } catch (err) { alert('Error: ' + err.message); } \r\n    finally { setIsSaving(false); }\r\n  };\r\n\r\n  const scanEnabled = !showDiscountModal && !showCouponInput && !showProductLookup && !showReport && !showUploadModal && !lastOrder;\r\n\r\n  const { inputRef, inputValue, setInputValue, handleInputKeyDown, handleInputChange } = useScanListener(\r\n    handleScanAction,\r\n    scanEnabled ? handleCheckout : undefined,\r\n    () => setShowProductLookup(true),\r\n    { enabled: scanEnabled }\r\n  );\r\n\r\n  const handleInputKeyDownWrapper = async (e) => {\r\n    if (scanEnabled && showDropdown && suggestions.length > 0 && !isVoidMode) {\r\n      if (e.key === \"ArrowDown\") { e.preventDefault(); setSelectedSuggestionIndex(i => Math.min(i + 1, suggestions.length - 1)); return; }\r\n      if (e.key === \"ArrowUp\")   { e.preventDefault(); setSelectedSuggestionIndex(i => Math.max(i - 1, 0)); return; }\r\n      if (e.key === \"Enter\") {\r\n        e.preventDefault();\r\n        const sel = suggestions[selectedSuggestionIndex];\r\n        if (sel?.sku) {\r\n          bumpSearchHit(sel.sku);\r\n          await handleSelectSuggestion(sel.sku);\r\n        }\r\n        return;\r\n      }\r\n    }\r\n    handleInputKeyDown(e);\r\n  };\r\n\r\n  const onInputChangeWrapper = (e) => {\r\n    const val = e.target.value;\r\n    if (val.endsWith('*')) {\r\n      const numberPart = val.slice(0, -1);\r\n      if (/^\\d+$/.test(numberPart)) {\r\n        const qty = parseInt(numberPart, 10);\r\n        if (qty > 0) { setNextQty(qty); setInputValue(''); } \r\n        else { alert('‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0'); setInputValue(''); }\r\n      } else { setInputValue(''); }\r\n      return; \r\n    }\r\n    handleInputChange(e);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(async () => {\r\n      if (inputValue.length >= 2 && scanEnabled && !isVoidMode) { \r\n        const results = await posService.searchProducts(inputValue);\r\n        const hits = (() => {\r\n          try { return JSON.parse(localStorage.getItem(\"pos_search_hits\") || \"{}\"); } catch { return {}; }\r\n        })();\r\n        const sorted = [...(results || [])].sort((a, b) => {\r\n          const ak = (a?.sku || a?.id || \"\").toString();\r\n          const bk = (b?.sku || b?.id || \"\").toString();\r\n          const ah = hits?.[ak] || 0;\r\n          const bh = hits?.[bk] || 0;\r\n          if (bh !== ah) return bh - ah;\r\n          const an = (a?.name || \"\").toString();\r\n          const bn = (b?.name || \"\").toString();\r\n          return an.localeCompare(bn, undefined, { sensitivity: \"base\" });\r\n        });\r\n        setSuggestions(sorted);\r\n        setSelectedSuggestionIndex(0);\r\n        setShowDropdown(sorted.length > 0);\r\n      } else { setSuggestions([]); setShowDropdown(false); }\r\n    }, 300);\r\n    return () => clearTimeout(timer);\r\n  }, [inputValue, isVoidMode, scanEnabled]);\r\n\r\n  const handleSelectSuggestion = async (sku) => {\r\n    if (!sku) return;\r\n    setInputValue('');\r\n    setShowDropdown(false);\r\n    try {\r\n      const item = await posService.scanItem(sku);\r\n      await handleScanAction(item);\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  };\r\n\r\n  const handleSaveCoupon = () => {\r\n      if (!couponInput.value && couponInput.type !== 'boots') return;\r\n      let finalValue = parseFloat(couponInput.value) || 0;\r\n      let finalCode = couponInput.code;\r\n      if (couponInput.type === 'boots') {\r\n          if (finalValue === 0) {\r\n             const numbers = finalCode.match(/\\d+/);\r\n             finalValue = numbers ? parseInt(numbers[0]) : 50; \r\n          }\r\n      }\r\n      addCoupon({ couponType: couponInput.type, couponValue: finalValue, couponCode: finalCode });\r\n      setShowCouponInput(false);\r\n  };\r\n  // END:   FUNCTION ZONE (DO NOT TOUCH)\r\n\r\n  // Unity Theme UI\r\n  return (\r\n    <div className={cn(\r\n        \"h-full min-h-0 w-full font-sans flex gap-4 p-4 overflow-visible relative transition-colors duration-300\",\r\n        isDarkMode ? \"bg-[#0f1014] text-slate-100\" : \"bg-[#f8fafc] text-slate-800\"\r\n    )} onClick={() => setShowDropdown(false)}>\r\n\r\n      {/* --- LEFT SIDE: SCANNER & FOOTAGE --- */}\r\n      <div className=\"w-[35%] max-w-[450px] flex flex-col gap-4 min-h-0\">\r\n        \r\n        {/* 1. SCAN PRODUCT BOX (Glass Card) */}\r\n        <div className={cn(\"glass-panel p-5 relative transition-all duration-300 z-20\", \r\n             isVoidMode && \"border-red-500/50 bg-red-500/5\"\r\n        )}>\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n               <div className=\"flex items-center gap-2 text-slate-500 dark:text-slate-400\">\r\n                  <div className=\"p-1.5 rounded-lg bg-slate-100 dark:bg-white/10\">\r\n                     <ScanBarcode size={18} />\r\n                  </div>\r\n                  <span className=\"text-[11px] font-bold tracking-widest uppercase\">Scanner</span>\r\n               </div>\r\n               \r\n               {isVoidMode && <span className=\"text-[10px] font-bold text-white bg-red-500 px-2 py-1 rounded shadow-sm shadow-red-500/20\">VOID MODE</span>}\r\n               \r\n                <button \r\n                   onClick={() => { setIsVoidMode(!isVoidMode); if (scanEnabled) inputRef.current?.focus(); }}\r\n                   className={cn(\"px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border\", \r\n                      isVoidMode \r\n                        ? \"bg-white/10 text-red-500 border-red-500/30 hover:bg-red-500 hover:text-white\" \r\n                        : \"bg-slate-100 dark:bg-white/5 border-slate-200 dark:border-white/10 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-white/10\"\r\n                   )}\r\n                >\r\n                   {isVoidMode ? 'CANCEL VOID' : 'VOID ITEM'}\r\n                </button>\r\n            </div>\r\n            \r\n            <div className=\"relative group\">\r\n              <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none group-focus-within:text-blue-500 transition-colors\" size={20} />\r\n              <input \r\n                  ref={inputRef}\r\n                  value={inputValue}\r\n                  onChange={onInputChangeWrapper}\r\n                  onKeyDown={handleInputKeyDownWrapper}\r\n                  disabled={isLoading || lastOrder || isSaving || showDiscountModal || showCouponInput || showProductLookup || showReport || showUploadModal}\r\n                  type=\"text\" \r\n                  placeholder={isVoidMode ? \"Scan to remove...\" : \"Scan barcode...\"}\r\n                  autoComplete=\"off\"\r\n                  aria-label=\"Scan or search product\"\r\n                  className={cn(\r\n                    \"glass-input pl-12 pr-12 text-lg font-bold placeholder:font-medium placeholder:text-base\", \r\n                    isVoidMode && \"border-red-500/50 text-red-600 focus:border-red-500 focus:ring-red-500/30\"\r\n                  )}\r\n              />\r\n              {/* Qty Badge */}\r\n              {nextQty > 1 && (\r\n                    <div className=\"absolute top-1/2 -translate-y-1/2 right-3 bg-blue-500/10 border border-blue-500/30 text-blue-600 dark:text-blue-400 text-xs font-bold px-2 py-1 rounded-md shadow-sm animate-in zoom-in\">\r\n                       x{nextQty}\r\n                    </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Hint */}\r\n            <div className=\"mt-3 flex items-center gap-2 text-[10px] text-slate-400 dark:text-slate-500\">\r\n               <span className=\"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 px-1.5 py-0.5 rounded border border-yellow-500/20\">Tip</span> Enter number + * for quantity (e.g. 5*)\r\n            </div>\r\n            \r\n            {/* Search Dropdown (Glass) */}\r\n            {showDropdown && !isVoidMode && (\r\n              <div\r\n                className=\"absolute top-full left-0 right-0 mt-2 mx-1 rounded-2xl shadow-2xl overflow-hidden z-[80] max-h-[300px] overflow-y-auto bg-white/90 dark:bg-[#1e2025]/95 backdrop-blur-xl border border-slate-200/50 dark:border-white/10 pointer-events-auto\"\r\n                onClick={(e) => e.stopPropagation()}\r\n              >\r\n                {suggestions.map((item, idx) => (\r\n                  <div\r\n                    key={item.sku}\r\n                    onMouseEnter={() => setSelectedSuggestionIndex(idx)}\r\n                    onClick={() => { bumpSearchHit(item.sku); handleSelectSuggestion(item.sku); }}\r\n                    className={cn(\r\n                      \"p-3 border-b border-slate-100 dark:border-white/5 cursor-pointer flex justify-between items-center transition-colors\",\r\n                      idx === selectedSuggestionIndex\r\n                        ? \"bg-blue-50 dark:bg-white/5\"\r\n                        : \"hover:bg-slate-50 dark:hover:bg-white/5\"\r\n                    )}\r\n                  >\r\n                    <div><div className=\"font-bold text-slate-800 dark:text-slate-200 text-sm\">{item.name}</div><div className=\"text-[10px] font-mono text-slate-400\">{item.sku}</div></div>\r\n                    <div className=\"text-blue-600 dark:text-blue-400 font-bold text-sm\">‡∏ø{item.price}</div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n        </div>\r\n\r\n        {/* 2. LAST SCANNED (Glass Card) */}\r\n        <div className=\"glass-panel flex-1 min-h-0 relative overflow-hidden flex flex-col items-center justify-center p-6 bg-gradient-to-b from-white/60 to-white/40 dark:from-white/5 dark:to-transparent\">\r\n             <div className=\"absolute top-4 left-4 flex items-center gap-2 text-slate-400/80\">\r\n                <Package size={16} />\r\n                <span className=\"text-[10px] font-bold tracking-widest uppercase\">Review</span>\r\n             </div>\r\n\r\n            {lastItemDetail ? (\r\n               <div className=\"text-center w-full animate-in slide-in-from-bottom-4 fade-in duration-300 relative z-10\">\r\n                  <div className=\"mb-6 relative inline-block\">\r\n                     <div className={cn(\"w-28 h-28 rounded-3xl flex items-center justify-center shadow-xl mx-auto border border-white/20 dark:border-white/5\", \r\n                        isVoidMode ? \"bg-red-500/10 text-red-500\" : \"bg-gradient-to-br from-blue-500/20 to-cyan-500/20 text-blue-600 dark:text-blue-400\"\r\n                     )}>\r\n                        <Package size={56} strokeWidth={1.5} />\r\n                     </div>\r\n                     <div className=\"absolute -bottom-3 -right-3 bg-slate-800 dark:bg-white text-white dark:text-slate-900 text-sm font-bold w-8 h-8 flex items-center justify-center rounded-xl shadow-lg border-2 border-slate-50 dark:border-[#0f1014]\">\r\n                        {lastItemDetail.qty}\r\n                     </div>\r\n                  </div>\r\n                  \r\n                  <h3 className=\"text-lg font-bold leading-tight mb-2 line-clamp-2 px-2 text-slate-800 dark:text-white\">\r\n                     {lastItemDetail.name}\r\n                  </h3>\r\n                  \r\n                  <div className=\"text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-br from-slate-800 to-slate-600 dark:from-white dark:to-slate-400 tracking-tight mt-2\">\r\n                     ‡∏ø{((lastItemDetail.calculatedTotal !== undefined ? lastItemDetail.calculatedTotal : (lastItemDetail.price * lastItemDetail.qty))).toLocaleString()}\r\n                  </div>\r\n                  <div className=\"text-xs font-mono text-slate-400 mt-2 bg-slate-100 dark:bg-white/5 px-2 py-1 rounded-md inline-block\">\r\n                     {lastItemDetail.sku}\r\n                  </div>\r\n               </div>\r\n            ) : (\r\n               <div className=\"flex flex-col items-center justify-center opacity-30 select-none\">\r\n                  <div className=\"w-20 h-20 rounded-full border-2 border-dashed border-slate-400 flex items-center justify-center mb-4\">\r\n                     <ScanBarcode size={32} />\r\n                  </div>\r\n                  <span className=\"text-sm font-bold uppercase tracking-widest\">Ready to Scan</span>\r\n               </div>\r\n            )}\r\n         </div>\r\n      </div>\r\n\r\n      {/* --- RIGHT SIDE: CART (Glass Panel) --- */}\r\n      <div className=\"glass-panel flex-1 flex flex-col min-h-0 overflow-hidden shadow-2xl relative\">\r\n         \r\n         {/* CART HEADER */}\r\n         <div className=\"grid grid-cols-12 px-6 py-4 text-[11px] font-bold uppercase tracking-wider text-slate-500 dark:text-slate-400 border-b border-slate-200/50 dark:border-white/5 bg-slate-50/50 dark:bg-white/5 backdrop-blur-sm z-20\">\r\n             <div className=\"col-span-1\">#</div>\r\n             <div className=\"col-span-4\">Item</div>\r\n             <div className=\"col-span-2 text-right\">Unit Price</div>\r\n             <div className=\"col-span-1 text-center\">Qty</div>\r\n             <div className=\"col-span-2 text-center\">Discount</div>\r\n             <div className=\"col-span-2 text-right\">Total</div>\r\n         </div>\r\n\r\n         {/* CART LIST */}\r\n         <div className=\"flex-1 overflow-y-auto px-2 py-2\">\r\n            {cartItems.length === 0 ? (\r\n                <div className=\"h-full flex flex-col items-center justify-center text-slate-300 dark:text-slate-700 pb-10 select-none\">\r\n                   <div className=\"w-24 h-24 rounded-full bg-slate-100 dark:bg-white/5 flex items-center justify-center mb-6\">\r\n                      <ShoppingCart size={40} className=\"opacity-50\" />\r\n                   </div>\r\n                   <p className=\"font-medium\">Cart is empty</p>\r\n                   <p className=\"text-xs mt-2 opacity-60\">Scan items to start transaction</p>\r\n                </div>\r\n            ) : (\r\n                cartItems.map((item, index) => {\r\n                    const lineTotal = item.calculatedTotal !== undefined ? item.calculatedTotal : (item.price * item.qty);\r\n                    const normalTotal = item.normalPrice || (item.price * item.qty);\r\n                    const discountVal = Math.max(0, normalTotal - lineTotal);\r\n\r\n                    return (\r\n                       <div key={item.id || item.sku} className=\"grid grid-cols-12 px-4 py-3.5 items-center text-sm group hover:bg-white/40 dark:hover:bg-white/5 rounded-xl transition-colors border-b border-transparent hover:border-slate-200/50 dark:hover:border-white/5\">\r\n                          <div className=\"col-span-1 text-slate-400 text-xs font-mono\">{cartItems.length - index}</div>\r\n                          \r\n                          <div className=\"col-span-4 pr-2\">\r\n                             <div className=\"font-bold text-slate-800 dark:text-slate-200 truncate\">{item.name}</div>\r\n                             <div className=\"flex items-center gap-2 mt-0.5\">\r\n                                <span className=\"text-[10px] text-slate-400 font-mono\">{item.sku}</span>\r\n                                {item.badgeText && <span className=\"text-[9px] bg-red-100 dark:bg-red-500/20 text-red-600 dark:text-red-400 px-1.5 rounded-sm font-bold uppercase\">{item.badgeText}</span>}\r\n                             </div>\r\n                          </div>\r\n                          \r\n                          <div className=\"col-span-2 text-right font-medium text-slate-600 dark:text-slate-400 font-mono\">\r\n                             {item.price.toLocaleString()}\r\n                          </div>\r\n                          \r\n                          <div className=\"col-span-1 flex justify-center\">\r\n                             <div className=\"w-8 h-8 rounded-lg flex items-center justify-center bg-white dark:bg-white/10 border border-slate-200 dark:border-white/5 text-xs font-bold shadow-sm\">\r\n                                {item.qty}\r\n                             </div>\r\n                          </div>\r\n                          \r\n                          <div className=\"col-span-2 text-center\">\r\n                              {discountVal > 0 ? (\r\n                                  <span className=\"text-[10px] text-red-500 bg-red-100 dark:bg-red-500/10 border border-red-200 dark:border-red-500/20 px-2 py-0.5 rounded-full font-bold\">\r\n                                      -{discountVal.toLocaleString()}\r\n                                  </span>\r\n                              ) : (\r\n                                  <span className=\"text-slate-300 dark:text-slate-700\">-</span>\r\n                              )}\r\n                          </div>\r\n\r\n                          <div className=\"col-span-2 text-right font-bold text-slate-800 dark:text-white font-mono text-base relative group-hover:pr-8 transition-all\">\r\n                             {lineTotal.toLocaleString()}\r\n                             \r\n                             {/* Delete Action (Hover) */}\r\n                             <button \r\n                                onClick={(e) => { e.stopPropagation(); removeFromCart(item.id || item.sku); }}\r\n                                className=\"absolute right-0 top-1/2 -translate-y-1/2 w-7 h-7 flex items-center justify-center bg-red-50 dark:bg-red-500/10 text-red-500 rounded-lg opacity-0 group-hover:opacity-100 hover:bg-red-500 hover:text-white transition-all shadow-sm\"\r\n                                title=\"Remove Item\"\r\n                             >\r\n                                <Trash2 size={14} />\r\n                             </button>\r\n                          </div>\r\n                       </div>\r\n                    );\r\n                })\r\n            )}\r\n         </div>\r\n\r\n         {/* FOOTER (Glass Gradient) */}\r\n         <div className=\"relative z-20 bg-white/80 dark:bg-[#15171e]/90 backdrop-blur-xl border-t border-slate-200 dark:border-white/10 p-5 shadow-[0_-5px_20px_rgba(0,0,0,0.05)]\">\r\n             <div className=\"flex justify-between items-end mb-5\">\r\n                  <div className=\"flex flex-col gap-1\">\r\n                      <div className=\"text-xs font-bold text-slate-400 uppercase tracking-widest\">Total (Items: {summary?.totalItems || 0})</div>\r\n                      {totalDiscountDisplay > 0 && (\r\n                         <div className=\"flex items-center gap-1.5 text-xs font-bold text-red-500 bg-red-50 dark:bg-red-500/10 px-2 py-1 rounded-md self-start\">\r\n                            <Tag size={12} />\r\n                            Saved ‡∏ø{totalDiscountDisplay.toLocaleString()}\r\n                         </div>\r\n                      )}\r\n                  </div>\r\n\r\n                  <div className=\"flex flex-col items-end\">\r\n                      <div className=\"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1\">Net Total</div>\r\n                      <div className=\"flex items-baseline gap-1 text-slate-800 dark:text-white leading-none\">\r\n                         <span className=\"text-2xl font-bold\">‡∏ø</span>\r\n                         <span className=\"text-5xl font-extrabold tracking-tighter\">\r\n                            {Number(summary?.netTotal || 0).toLocaleString(undefined, { minimumFractionDigits: 2 })}\r\n                         </span>\r\n                      </div>\r\n                  </div>\r\n             </div>\r\n\r\n             <div className=\"grid grid-cols-[auto_1fr] gap-3\">\r\n                 <button \r\n                    onClick={() => setShowDiscountModal(true)}\r\n                    className=\"btn-secondary px-4 min-w-[100px]\"\r\n                 >\r\n                    <Tag size={18} />\r\n                    <span>Discounts</span>\r\n                    {totalDiscountDisplay > 0 && <span className=\"w-2 h-2 rounded-full bg-red-500 ml-1\" />}\r\n                 </button>\r\n\r\n                 <button \r\n                    onClick={handleCheckout} \r\n                    disabled={cartItems.length === 0 || isLoading || isSaving}\r\n                    className=\"btn-primary w-full text-lg shadow-blue-500/25\"\r\n                 >\r\n                    {isSaving ? <Loader2 className=\"animate-spin\" size={24}/> : <ShoppingCart size={24} />}\r\n                    <span>Checkout</span>\r\n                    <kbd className=\"hidden md:inline-flex items-center h-6 px-2 ml-3 text-[10px] font-sans font-medium text-blue-100 bg-blue-500/20 rounded\">F12</kbd>\r\n                 </button>\r\n             </div>\r\n         </div>\r\n      </div>\r\n\r\n      {/* --- MODALS --- */}\r\n      {lastOrder && <ReceiptModal order={lastOrder} onClose={() => setLastOrder(null)} />}\r\n      {showProductLookup && <ProductLookupModal onClose={() => setShowProductLookup(false)} />}\r\n      {showReport && <DailyReportModal onClose={() => setShowReport(false)} />}\r\n      <PosUploadModal\r\n        open={showUploadModal}\r\n        onClose={() => setShowUploadModal(false)}\r\n        isDarkMode={isDarkMode}\r\n        pricingReady={true} \r\n      />\r\n\r\n      {/* Simplified Inline Modal for Discounts (Redesigned) */}\r\n      {showDiscountModal && (\r\n        <div className=\"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in zoom-in-95 duration-200\">\r\n            <div className=\"glass-panel w-full max-w-4xl h-[80vh] flex overflow-hidden shadow-2xl relative\">\r\n                \r\n                {/* Modal Sidebar */}\r\n                <div className=\"w-64 p-6 border-r border-slate-200 dark:border-white/10 bg-slate-50/50 dark:bg-black/20 flex flex-col gap-2\">\r\n                    <h2 className=\"text-xl font-bold mb-6 flex items-center gap-2 text-slate-800 dark:text-white\">\r\n                        <Tag size={20} className=\"text-blue-500\" /> Discounts\r\n                    </h2>\r\n                    \r\n                    {[\r\n                      { id: 'discount', label: 'General', icon: Percent },\r\n                      { id: 'coupon', label: 'Coupons', icon: Ticket },\r\n                      { id: 'allowance', label: 'Allowance', icon: Gift }\r\n                    ].map(tab => (\r\n                      <button \r\n                        key={tab.id}\r\n                        onClick={() => setActiveTab(tab.id)} \r\n                        className={cn(\"flex items-center gap-3 px-4 py-3 rounded-xl font-semibold transition-all text-sm\", \r\n                           activeTab === tab.id \r\n                             ? \"bg-blue-600 text-white shadow-md shadow-blue-500/20\" \r\n                             : \"text-slate-500 dark:text-slate-400 hover:bg-white dark:hover:bg-white/5\"\r\n                        )}\r\n                      >\r\n                        <tab.icon size={18}/> {tab.label}\r\n                      </button>\r\n                    ))}\r\n\r\n                    <div className=\"mt-auto\">\r\n                        <button onClick={() => setShowDiscountModal(false)} className=\"w-full py-3 rounded-xl font-bold bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-white/20 transition-colors\">\r\n                           Close\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Modal Content */}\r\n                <div className=\"flex-1 p-8 overflow-y-auto bg-white/50 dark:bg-black/20\">\r\n                    {activeTab === 'discount' && (\r\n                        <div>\r\n                            <div className=\"flex gap-4 mb-8 border-b border-slate-200 dark:border-white/10 pb-6\">\r\n                                <button onClick={() => setDiscountSubTab('bill')} className={cn(\"px-6 py-2.5 rounded-xl font-bold transition-all text-sm\", discountSubTab === 'bill' ? \"bg-slate-800 dark:bg-white text-white dark:text-slate-900 shadow-lg\" : \"text-slate-500 hover:bg-slate-100 dark:hover:bg-white/5\")}>Bill Discount</button>\r\n                                <button onClick={() => setDiscountSubTab('items')} className={cn(\"px-6 py-2.5 rounded-xl font-bold transition-all text-sm\", discountSubTab === 'items' ? \"bg-slate-800 dark:bg-white text-white dark:text-slate-900 shadow-lg\" : \"text-slate-500 hover:bg-slate-100 dark:hover:bg-white/5\")}>Item Discount</button>\r\n                            </div>\r\n\r\n                            {discountSubTab === 'bill' && (\r\n                                <div className=\"max-w-xs\">\r\n                                    <label className=\"block text-sm font-bold mb-3 text-slate-500 uppercase tracking-wide\">Percentage (%)</label>\r\n                                    <div className=\"flex gap-4 items-center\">\r\n                                        <input \r\n                                            type=\"number\" \r\n                                            value={billDiscount.percent} \r\n                                            onChange={(e) => updateBillDiscount(e.target.value)}\r\n                                            className=\"glass-input text-4xl font-bold py-4 text-center\"\r\n                                            placeholder=\"0\"\r\n                                        />\r\n                                        <div className=\"text-2xl font-bold text-slate-400\">%</div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {discountSubTab === 'items' && (\r\n                                <div>\r\n                                    <h3 className=\"font-bold mb-4 text-sm text-slate-500 uppercase\">Select items to discount</h3>\r\n                                    <div className=\"space-y-3\">\r\n                                        {cartItems.map((item, idx) => {\r\n                                            const isChecked = discountCheckedItems.has(item.id || item.sku);\r\n                                            return (\r\n                                                <div key={idx} \r\n                                                     onClick={() => toggleDiscountCheck(item.id || item.sku)}\r\n                                                     className={cn(\"flex items-center gap-4 p-4 rounded-xl border cursor-pointer transition-all\", \r\n                                                        isChecked \r\n                                                          ? \"border-blue-500 bg-blue-50/50 dark:bg-blue-500/10\" \r\n                                                          : \"border-slate-200 dark:border-white/10 hover:border-blue-300 dark:hover:border-white/20\"\r\n                                                     )}\r\n                                                >\r\n                                                    <div className={cn(\"w-6 h-6 rounded border flex items-center justify-center transition-colors\", isChecked ? \"bg-blue-500 border-blue-500 text-white\" : \"border-slate-300 dark:border-slate-600\")}>\r\n                                                        {isChecked && <CheckCircle size={14} />}\r\n                                                    </div>\r\n                                                    <div className=\"flex-1\">\r\n                                                        <div className=\"font-bold text-slate-800 dark:text-white\">{item.name}</div>\r\n                                                        <div className=\"text-xs text-slate-400 font-mono\">{item.sku}</div>\r\n                                                    </div>\r\n                                                    <div className=\"font-bold text-slate-600 dark:text-slate-400\">‡∏ø{(item.price * item.qty).toLocaleString()}</div>\r\n                                                    \r\n                                                    {isChecked && (\r\n                                                        <div className=\"animate-in zoom-in ml-4\">\r\n                                                            <input \r\n                                                                type=\"number\" autoFocus\r\n                                                                onClick={(e) => e.stopPropagation()}\r\n                                                                value={item.manualDiscountPercent || ''}\r\n                                                                onChange={(e) => setManualItemDiscount(item.id || item.sku, e.target.value)}\r\n                                                                className=\"w-16 h-10 rounded-lg border-2 border-orange-400 text-center font-bold outline-none focus:ring-2 focus:ring-orange-200\"\r\n                                                                placeholder=\"%\"\r\n                                                            />\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n                                            );\r\n                                        })}\r\n                                        {cartItems.length === 0 && <p className=\"text-slate-400 text-center py-8\">Cart is empty</p>}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Coupon Input Modal */}\r\n      {showCouponInput && (\r\n        <div className=\"fixed inset-0 z-[70] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4\">\r\n            <div className=\"glass-panel w-full max-w-md p-8 animate-in zoom-in-95\">\r\n                <h3 className=\"text-xl font-bold mb-6 text-slate-800 dark:text-white\">Add Coupon ({couponInput.type})</h3>\r\n                <div className=\"space-y-4\">\r\n                  <input \r\n                    className=\"glass-input\" \r\n                    placeholder=\"Coupon Code\" \r\n                    value={couponInput.code} \r\n                    onChange={e=>setCouponInput({...couponInput, code:e.target.value})} \r\n                    autoFocus\r\n                  />\r\n                  {couponInput.type !== 'boots' && (\r\n                     <input \r\n                       className=\"glass-input\" \r\n                       type=\"number\" \r\n                       placeholder=\"Value\" \r\n                       value={couponInput.value} \r\n                       onChange={e=>setCouponInput({...couponInput, value:e.target.value})} \r\n                     />\r\n                   )}\r\n                </div>\r\n                <div className=\"flex gap-3 mt-8\">\r\n                     <button onClick={()=>setShowCouponInput(false)} className=\"btn-secondary flex-1\">Cancel</button>\r\n                     <button onClick={handleSaveCoupon} className=\"btn-primary flex-1\">Apply Coupon</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n      )}\r\n\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\lib\\firebase.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\lib\\utils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\main.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,18],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'App' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"App"},"fix":{"range":[79,88],"text":""},"desc":"Remove unused variable 'App'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ThemeProvider' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"ThemeProvider"},"fix":{"range":[136,194],"text":""},"desc":"Remove unused variable 'ThemeProvider'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Toaster' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"Toaster"},"fix":{"range":[196,243],"text":""},"desc":"Remove unused variable 'Toaster'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport ReactDOM from \"react-dom/client\";\r\n\r\nimport App from \"./App.jsx\";\r\nimport \"./styles/globals.css\";\r\n\r\nimport { ThemeProvider } from \"@/providers/ThemeProvider\";\r\nimport { Toaster } from \"@/components/toaster\";\r\n\r\nReactDOM.createRoot(document.getElementById(\"root\")).render(\r\n  <React.StrictMode>\r\n    <ThemeProvider defaultTheme=\"system\" storageKey=\"theme\">\r\n      <App />\r\n      <Toaster />\r\n    </ThemeProvider>\r\n  </React.StrictMode>\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\mockProducts.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\pages\\AdminSettingsPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Upload' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"Upload"},"fix":{"range":[91,98],"text":""},"desc":"Remove unused variable 'Upload'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Database' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"Database"},"fix":{"range":[97,107],"text":""},"desc":"Remove unused variable 'Database'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'FileText' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"FileText"},"fix":{"range":[107,117],"text":""},"desc":"Remove unused variable 'FileText'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle"},"fix":{"range":[117,130],"text":""},"desc":"Remove unused variable 'CheckCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":62,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertCircle"},"fix":{"range":[130,143],"text":""},"desc":"Remove unused variable 'AlertCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'RefreshCw' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":64,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":73,"suggestions":[{"messageId":"removeVar","data":{"varName":"RefreshCw"},"fix":{"range":[143,154],"text":""},"desc":"Remove unused variable 'RefreshCw'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ArrowLeft' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":75,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":84,"suggestions":[{"messageId":"removeVar","data":{"varName":"ArrowLeft"},"fix":{"range":[154,165],"text":""},"desc":"Remove unused variable 'ArrowLeft'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Trash2' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":86,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":92,"suggestions":[{"messageId":"removeVar","data":{"varName":"Trash2"},"fix":{"range":[165,173],"text":""},"desc":"Remove unused variable 'Trash2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Lock' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":94,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":98,"suggestions":[{"messageId":"removeVar","data":{"varName":"Lock"},"fix":{"range":[173,179],"text":""},"desc":"Remove unused variable 'Lock'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'HelpCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":100,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":110,"suggestions":[{"messageId":"removeVar","data":{"varName":"HelpCircle"},"fix":{"range":[179,191],"text":""},"desc":"Remove unused variable 'HelpCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Server' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":112,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":118,"suggestions":[{"messageId":"removeVar","data":{"varName":"Server"},"fix":{"range":[191,199],"text":""},"desc":"Remove unused variable 'Server'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Settings' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":120,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":128,"suggestions":[{"messageId":"removeVar","data":{"varName":"Settings"},"fix":{"range":[199,209],"text":""},"desc":"Remove unused variable 'Settings'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Save' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":130,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":134,"suggestions":[{"messageId":"removeVar","data":{"varName":"Save"},"fix":{"range":[209,215],"text":""},"desc":"Remove unused variable 'Save'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'HardDrive' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":136,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":145,"suggestions":[{"messageId":"removeVar","data":{"varName":"HardDrive"},"fix":{"range":[215,226],"text":""},"desc":"Remove unused variable 'HardDrive'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'LoadingSpinner' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"LoadingSpinner"},"fix":{"range":[344,364],"text":""},"desc":"Remove unused variable 'LoadingSpinner'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'UploadCard' is defined but never used. Allowed unused vars must match /^_/u.","line":387,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":387,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"UploadCard"},"fix":{"range":[18019,22342],"text":""},"desc":"Remove unused variable 'UploadCard'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport Papa from 'papaparse';\nimport { Upload, Database, FileText, CheckCircle, AlertCircle, RefreshCw, ArrowLeft, Trash2, Lock, HelpCircle, Server, Settings, Save, HardDrive } from 'lucide-react';\nimport { posService } from '../services/posService';\nimport { cn } from '../utils/cn';\nimport LoadingSpinner from '../components/LoadingSpinner';\n\nexport default function AdminSettingsPage({ onBack }) {\n  // BEGIN: FUNCTION ZONE (DO NOT TOUCH)\n  const [activeSubTab, setActiveSubTab] = useState('uploads'); // Default to uploads as it has the main logic\n  const [features, setFeatures] = useState({\n    multiStoreMode: true,\n    advancedPromotions: false,\n    couponScanning: true,\n    voidManagerOnly: false,\n    autoReport: true,\n    lowStockAlerts: false,\n    thaiLanguagePriority: true,\n  });\n\n  const [stats, setStats] = useState({ count: 0, lastUpdated: null });\n  const [hasMaster, setHasMaster] = useState(false);\n  const [uploadMeta, setUploadMeta] = useState({});\n  const [statsLoading, setStatsLoading] = useState(true);\n\n  // Upload States\n  const [uploadStatus, setUploadStatus] = useState({\n    master: { loading: false, progress: 0, log: null },\n    print: { loading: false, progress: 0, log: null },\n    maint: { loading: false, progress: 0, log: null }\n  });\n\n  useEffect(() => { loadStats(); }, []);\n\n  const loadStats = async () => {\n    setStatsLoading(true);\n    try {\n      const s = await posService.getProductStats();\n      setStats(s || { count: 0, lastUpdated: null });\n      setHasMaster((s?.count || 0) > 0);\n      setUploadMeta(s?.uploads || {});\n    } catch (e) {\n      console.error(\"Failed to load stats\", e);\n    } finally {\n      setStatsLoading(false);\n    }\n  };\n\n  const updateStatus = (key, val) => {\n    setUploadStatus(prev => ({ ...prev, [key]: { ...prev[key], ...val } }));\n  };\n\n  // 1. Handle ProductAllDept (CSV)\n  const handleMasterUpload = (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n    updateStatus('master', { loading: true, progress: 0, log: null });\n\n    Papa.parse(file, {\n      header: true, skipEmptyLines: true, worker: true,\n      complete: async (results) => {\n        try {\n          const data = results.data;\n          if (data.length === 0) throw new Error('File is empty');\n          \n          const count = await posService.uploadProductAllDept(data, (curr, total) => {\n            updateStatus('master', { progress: Math.round((curr/total)*100) });\n          });\n          \n          updateStatus('master', { loading: false, log: { type: 'success', msg: '‚úÖ Upload Complete: ' + count } });\n          loadStats();\n        } catch (err) {\n          updateStatus('master', { loading: false, log: { type: 'error', msg: err.message } });\n        }\n      },\n      error: () => updateStatus('master', { loading: false, log: { type: 'error', msg: 'Read CSV Failed' } })\n    });\n    e.target.value = '';\n  };\n\n  // 2. Handle ItemMasterPrintOnDeph (XLS)\n  const handlePrintUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n    updateStatus('print', { loading: true, progress: 0, log: null });\n    \n    try {\n      const count = await posService.uploadItemMasterPrint(file, (curr, total) => {\n         updateStatus('print', { progress: Math.round((curr/total)*100) });\n      });\n      updateStatus('print', { loading: false, log: { type: 'success', msg: '‚úÖ Updated ' + count + ' items' } });\n    } catch (err) {\n      updateStatus('print', { loading: false, log: { type: 'error', msg: err.message } });\n    }\n    e.target.value = '';\n  };\n\n  // 3. Handle ItemMaintananceEvent (XLS)\n  const handleMaintUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n    updateStatus('maint', { loading: true, progress: 0, log: null });\n\n    try {\n      const count = await posService.uploadItemMaintenance(file, (curr, total) => {\n         updateStatus('maint', { progress: Math.round((curr/total)*100) });\n      });\n      updateStatus('maint', { loading: false, log: { type: 'success', msg: '‚úÖ Updated ' + count + ' items' } });\n    } catch (err) {\n      updateStatus('maint', { loading: false, log: { type: 'error', msg: err.message } });\n    }\n    e.target.value = '';\n  };\n\n  const handleClearDatabase = async () => {\n    if (!window.confirm('‚ö†Ô∏è Are you sure you want to DELETE ALL DATA?')) return;\n    updateStatus('master', { loading: true, log: { type: 'info', msg: 'Deleting...' } });\n    try {\n      await posService.clearDatabase();\n      updateStatus('master', { loading: false, log: { type: 'success', msg: 'Database Cleared' } });\n      loadStats();\n    } catch (e) {\n      console.error('clearDatabase failed:', e);\n      updateStatus('master', { loading: false, log: { type: 'error', msg: e?.message || 'Failed to clear database' } });\n    }\n  };\n\n  const handleFeatureToggle = (featureName) => {\n    setFeatures(prev => ({ ...prev, [featureName]: !prev[featureName] }));\n  };\n  \n  const handleSaveFeatures = () => {\n      alert(\"Feature settings saved locally (demo).\");\n  };\n\n  const formatDate = (value) => {\n    if (!value) return 'Not available';\n    try {\n      const date = value?.seconds ? new Date(value.seconds * 1000) : new Date(value);\n      if (isNaN(date.getTime())) return 'Not available';\n      return date.toLocaleString();\n    } catch {\n      return 'Not available';\n    }\n  };\n\n  const uploadEntries = [\n    { key: 'master', title: 'ProductAllDept', hint: 'Master dataset' },\n    { key: 'print', title: 'Print Data', hint: 'Label & print details' },\n    { key: 'maint', title: 'Maintenance', hint: 'Event triggers' },\n  ];\n  // END:   FUNCTION ZONE (DO NOT TOUCH)\n\n\n  // Unity Theme UI\n  return (\n    <div className=\"h-full p-6 md:p-8 animate-fade-in-up flex flex-col gap-6 max-w-screen-2xl mx-auto w-full\">\n      \n      {/* Header */}\n      <div className=\"flex items-center gap-4\">\n         <div className=\"h-14 w-14 rounded-2xl bg-gradient-to-br from-slate-700 to-slate-900 dark:from-white/10 dark:to-white/5 text-white shadow-lg flex items-center justify-center\">\n             <Settings size={28} />\n         </div>\n         <div className=\"flex-1\">\n             <h1 className=\"text-3xl font-bold text-slate-800 dark:text-white\">System Settings</h1>\n             <p className=\"text-slate-500 dark:text-slate-400\">Configure global POS features and manage data</p>\n         </div>\n         {onBack && (\n            <button onClick={onBack} className=\"btn-secondary\">\n                <ArrowLeft size={18} /> Back\n            </button>\n         )}\n      </div>\n\n      {/* Tabs */}\n      <div className=\"flex p-1 bg-slate-100 dark:bg-white/5 rounded-xl self-start\">\n         <button\n           onClick={() => setActiveSubTab('uploads')}\n           className={cn(\"px-6 py-2.5 rounded-lg text-sm font-bold transition-all flex items-center gap-2\", \n             activeSubTab === 'uploads' \n               ? \"bg-white dark:bg-white/10 text-blue-600 dark:text-blue-400 shadow-sm\" \n               : \"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300\"\n           )}\n         >\n           <Database size={18} /> Data Management\n         </button>\n         <button\n           onClick={() => setActiveSubTab('features')}\n           className={cn(\"px-6 py-2.5 rounded-lg text-sm font-bold transition-all flex items-center gap-2\", \n             activeSubTab === 'features' \n               ? \"bg-white dark:bg-white/10 text-blue-600 dark:text-blue-400 shadow-sm\" \n               : \"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300\"\n           )}\n         >\n           <Server size={18} /> Features\n         </button>\n      </div>\n\n      {/* Content Area */}\n      <div className=\"glass-panel flex-1 p-8 rounded-3xl min-h-[500px]\">\n        \n        {/* Data Uploads & Overview */}\n        {activeSubTab === 'uploads' && (\n          <div className=\"animate-fade-in-up space-y-8\">\n             \n             {/* Stats & Last Uploads */}\n             <div className=\"grid lg:grid-cols-2 gap-6\">\n                 {/* Last Uploads */}\n                 <div className=\"p-6 rounded-2xl bg-white dark:bg-black/20 border border-slate-200 dark:border-white/10 shadow-sm flex flex-col gap-4\">\n                    <h2 className=\"text-lg font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2\">\n                        <RefreshCw size={20} className=\"text-blue-500\" /> Data Sync Activity\n                    </h2>\n                    <div className=\"space-y-3\">\n                      {statsLoading ? (\n                        <div className=\"py-10 flex justify-center\">\n                          <LoadingSpinner label=\"Loading system status...\" />\n                        </div>\n                      ) : (\n                        uploadEntries.map((entry) => {\n                          const meta = uploadMeta?.[entry.key];\n                          return (\n                            <div key={entry.key} className=\"p-3 rounded-xl border border-slate-100 dark:border-white/10 bg-slate-50/50 dark:bg-white/5 flex flex-col gap-1\">\n                              <div className=\"flex items-center justify-between gap-3\">\n                                <div className=\"min-w-0\">\n                                  <div className=\"text-sm font-bold text-slate-800 dark:text-white\">{entry.title}</div>\n                                  <div className=\"text-xs text-slate-500 dark:text-slate-400\">{entry.hint}</div>\n                                </div>\n                                <span className=\"text-[11px] px-2 py-1 rounded-full bg-blue-50 dark:bg-blue-500/15 text-blue-600 dark:text-blue-300 font-semibold border border-blue-100 dark:border-blue-500/30\">\n                                  {meta?.count ? `${meta.count.toLocaleString()} rows` : \"Pending\"}\n                                </span>\n                              </div>\n                              <div className=\"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-2\">\n                                <span className=\"w-2 h-2 rounded-full bg-green-500/80\"></span>\n                                <span className=\"font-medium\">Last upload:</span>\n                                <span className=\"font-mono\">{formatDate(meta?.lastUploadAt)}</span>\n                              </div>\n                            </div>\n                          );\n                        })\n                      )}\n                    </div>\n                 </div>\n\n                 {/* System Stats */}\n                 <div className=\"p-6 rounded-2xl bg-slate-50 dark:bg-white/5 border border-slate-100 dark:border-white/5 flex flex-col justify-between relative overflow-hidden\">\n                     <div className=\"absolute top-0 right-0 p-4 opacity-5\">\n                        <Database size={120} />\n                     </div>\n                     \n                     <div className=\"relative z-10\">\n                         <div className=\"text-sm font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-1\">Database Stats</div>\n                         {statsLoading ? (\n                           <div className=\"py-6\">\n                             <LoadingSpinner label=\"Syncing database stats...\" />\n                           </div>\n                         ) : (\n                           <>\n                             <div className=\"flex items-baseline gap-2\">\n                               <div className=\"text-4xl font-extrabold text-slate-800 dark:text-white\">{stats.count.toLocaleString()}</div>\n                               <div className=\"text-slate-500 dark:text-slate-400 font-medium\">products</div>\n                             </div>\n                             <div className=\"text-xs text-slate-500 dark:text-slate-400 mt-2\">\n                                Last updated: <span className=\"font-mono\">{formatDate(stats.lastUpdated)}</span>\n                             </div>\n                           </>\n                         )}\n                     </div>\n                     \n                     <div className=\"flex flex-wrap gap-2 mt-6 relative z-10\">\n                         {hasMaster && (\n                            <button onClick={handleClearDatabase} className=\"btn-secondary border-red-200 text-red-600 hover:bg-red-50 dark:border-red-500/30 dark:text-red-400 dark:hover:bg-red-500/10 text-sm py-2\">\n                                <Trash2 size={16} /> Clear Database\n                            </button>\n                         )}\n                         <a href=\"/readme.html\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"btn-secondary text-sm py-2 ml-auto\">\n                             <HelpCircle size={16} /> Help\n                         </a>\n                     </div>\n                 </div>\n             </div>\n             \n             {/* Upload Cards */}\n             <div>\n                <h3 className=\"text-lg font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2\">\n                    <HardDrive size={20} className=\"text-blue-500\" /> Data Imports\n                </h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6\">\n                    <UploadCard \n                        title=\"1. ProductAllDept\" \n                        desc=\"Master CSV File - Required First\" \n                        accept=\".csv\"\n                        status={uploadStatus.master}\n                        meta={uploadMeta.master}\n                        onChange={handleMasterUpload}\n                        icon={<FileText size={32} />}\n                        active={true}\n                        required={!hasMaster}\n                    />\n\n                    <UploadCard \n                        title=\"2. Print Data\" \n                        desc=\"Label Printing Details (.xls)\" \n                        accept=\".xls,.xlsx\"\n                        status={uploadStatus.print}\n                        meta={uploadMeta.print}\n                        onChange={handlePrintUpload}\n                        icon={<FileText size={32} />}\n                        active={hasMaster} // Only active if master exists\n                    />\n\n                    <UploadCard \n                        title=\"3. Maintenance\" \n                        desc=\"Event Triggers (.xls)\" \n                        accept=\".xls,.xlsx\"\n                        status={uploadStatus.maint}\n                        meta={uploadMeta.maint}\n                        onChange={handleMaintUpload}\n                        icon={<FileText size={32} />}\n                        active={hasMaster} // Only active if master exists\n                    />\n                </div>\n             </div>\n\n          </div>\n        )}\n        \n        {/* Feature Toggles */}\n        {activeSubTab === 'features' && (\n          <div className=\"max-w-3xl animate-fade-in-up\">\n            <h2 className=\"text-xl font-bold text-slate-800 dark:text-white mb-6 flex items-center gap-2\">\n               <Server size={22} className=\"text-blue-500\" /> Feature Configuration\n            </h2>\n            \n            <div className=\"grid gap-4\">\n              {[\n                { key: 'multiStoreMode', label: 'Multi-Store Mode', desc: 'Enable syncing data across multiple branch locations' },\n                { key: 'advancedPromotions', label: 'Advanced Promotions', desc: 'Allow complex discount rules and buy-1-get-1 logic' },\n                { key: 'couponScanning', label: 'Coupon Scanning', desc: 'Enable barcode scanner support for physical coupons' },\n                { key: 'voidManagerOnly', label: 'Manager Void Approval', desc: 'Require manager PIN to void items (Security)' },\n                { key: 'autoReport', label: 'Auto-Send Reports', desc: 'Automatically email daily sales reports at closing' },\n                { key: 'lowStockAlerts', label: 'Low Stock Alerts', desc: 'Notify cashier when inventory drops below threshold' },\n                { key: 'thaiLanguagePriority', label: 'Thai Language Priority', desc: 'Default to Thai language for product names and receipts' },\n              ].map(({ key, label, desc }) => (\n                <div key={key} className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-3 p-4 rounded-xl border border-slate-100 dark:border-white/5 hover:bg-slate-50 dark:hover:bg-white/5 transition-colors group\">\n                   <div className=\"pr-0 sm:pr-4 min-w-0 space-y-1\">\n                      <div className=\"font-bold text-slate-800 dark:text-white leading-snug break-words\">{label}</div>\n                      <div className=\"text-sm text-slate-500 dark:text-slate-400 leading-snug break-words\">{desc}</div>\n                   </div>\n                   <button \n                     onClick={() => handleFeatureToggle(key)}\n                     className={cn(\"relative inline-flex h-7 w-12 items-center rounded-full transition-colors self-start sm:self-center\", \n                        features[key] ? \"bg-blue-600\" : \"bg-slate-200 dark:bg-white/10\"\n                     )}\n                   >\n                     <span className={cn(\"inline-block h-5 w-5 transform rounded-full bg-white transition-transform shadow-md\", \n                        features[key] ? \"translate-x-6\" : \"translate-x-1\"\n                     )} />\n                   </button>\n                </div>\n              ))}\n            </div>\n\n            <div className=\"mt-8 pt-6 border-t border-slate-200 dark:border-white/10\">\n              <button onClick={handleSaveFeatures} className=\"btn-primary shadow-blue-500/20\">\n                <Save size={20} /> Save Configuration\n              </button>\n            </div>\n          </div>\n        )}\n\n      </div>\n    </div>\n  );\n}\n\nconst formatUploadDate = (value) => {\n  if (!value) return 'Not available';\n  try {\n    const date = value?.seconds ? new Date(value.seconds * 1000) : new Date(value);\n    if (isNaN(date.getTime())) return 'Not available';\n    return date.toLocaleString();\n  } catch {\n    return 'Not available';\n  }\n};\n\nfunction UploadCard({ title, desc, accept, status, onChange, icon, active, required, meta }) {\n  return (\n    <div className={cn(\"bg-white dark:bg-black/20 rounded-2xl shadow-sm border overflow-hidden relative transition-all h-full flex flex-col\", active ? \"border-slate-200 dark:border-white/10 hover:shadow-md hover:border-blue-200 dark:hover:border-blue-500/30\" : \"border-slate-100 dark:border-white/5 opacity-60 grayscale\")}>\n      {!active && (\n        <div className=\"absolute inset-0 z-10 bg-slate-100/50 dark:bg-black/50 flex flex-col items-center justify-center text-slate-400 backdrop-blur-[1px]\">\n          <Lock size={32} className=\"mb-2\" />\n          <span className=\"text-sm font-semibold\">Waiting for Master Data</span>\n        </div>\n      )}\n      \n      <div className=\"p-6 border-b border-slate-50 dark:border-white/5 flex justify-between items-start bg-slate-50/50 dark:bg-white/5\">\n        <div>\n          <h3 className=\"text-lg font-bold text-slate-800 dark:text-white\">{title}</h3>\n          {required && <span className=\"text-[10px] bg-red-100 dark:bg-red-500/20 text-red-600 dark:text-red-400 px-2 py-0.5 rounded-full mt-1 inline-block font-bold\">REQUIRED FIRST</span>}\n        </div>\n        <div className={cn(\"w-12 h-12 rounded-xl flex items-center justify-center shadow-sm\", active ? \"bg-white dark:bg-white/10 text-boots-base dark:text-blue-400 border border-blue-100 dark:border-white/10\" : \"bg-slate-100 dark:bg-white/5 text-slate-400\")}>{icon}</div>\n      </div>\n\n      <div className=\"p-6 flex-1 flex flex-col min-w-0\">\n        <p className=\"text-sm text-slate-500 dark:text-slate-400 mb-4 flex-1 leading-relaxed break-words\">{desc}</p>\n        <div className=\"text-xs text-slate-500 dark:text-slate-400 mb-4 flex items-center gap-2 flex-wrap\">\n          <RefreshCw size={14} className=\"text-blue-500\" />\n          <span className=\"font-medium\">Last upload:</span>\n          <span className=\"font-mono\">{formatUploadDate(meta?.lastUploadAt)}</span>\n          {meta?.count ? <span className=\"px-2 py-0.5 rounded-full bg-slate-100 dark:bg-white/10 border border-slate-200 dark:border-white/10 font-semibold text-[11px] text-slate-700 dark:text-slate-200\">{meta.count.toLocaleString()} rows</span> : null}\n        </div>\n        \n        {!status.loading ? (\n          <div className=\"relative group cursor-pointer\">\n            <input type=\"file\" accept={accept} onChange={onChange} disabled={!active} className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20\" />\n            <div className=\"border-2 border-dashed border-slate-300 dark:border-white/10 rounded-xl p-6 text-center group-hover:bg-blue-50 dark:group-hover:bg-blue-500/10 group-hover:border-blue-300 dark:group-hover:border-blue-500/30 transition-all bg-slate-50 dark:bg-white/5\">\n              <Upload size={24} className=\"mx-auto text-slate-400 mb-2 group-hover:text-blue-500\" />\n              <span className=\"text-sm font-bold text-slate-600 dark:text-slate-300 group-hover:text-blue-600 dark:group-hover:text-blue-400\">Click to Upload</span>\n              <div className=\"text-xs text-slate-400 mt-1\">{accept}</div>\n            </div>\n          </div>\n        ) : (\n          <div className=\"py-8 text-center bg-slate-50 dark:bg-white/5 rounded-xl border border-slate-100 dark:border-white/10\">\n            <RefreshCw size={24} className=\"mx-auto animate-spin text-boots-base dark:text-blue-400 mb-3\" />\n            <div className=\"text-2xl font-bold text-slate-800 dark:text-white\">{status.progress}%</div>\n            <div className=\"text-xs text-slate-500 dark:text-slate-400 mt-1\">Processing data...</div>\n          </div>\n        )}\n\n        {status.log && (\n          <div className={cn(\"mt-4 p-3 rounded-lg text-xs flex items-center gap-2 animate-in slide-in-from-bottom-2\", status.log.type === 'success' ? \"bg-green-50 dark:bg-green-500/10 text-green-700 dark:text-green-400 border border-green-100 dark:border-green-500/20\" : \"bg-red-50 dark:bg-red-500/10 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-500/20\")}>\n            {status.log.type === 'success' ? <CheckCircle size={16} className=\"shrink-0\"/> : <AlertCircle size={16} className=\"shrink-0\"/>}\n            <span className=\"font-medium\">{status.log.msg}</span>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\pages\\CheckoutPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'LoadingSpinner' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"LoadingSpinner"},"fix":{"range":[99,119],"text":""},"desc":"Remove unused variable 'LoadingSpinner'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react';\nimport { useCart } from '../context/CartContext';\nimport LoadingSpinner from '../components/LoadingSpinner';\n\nconst CheckoutPage = () => {\n  const { state, dispatch } = useCart();\n  const { items, loading, error } = state;\n\n  useEffect(() => {\n    dispatch({ type: 'SET_LOADING', payload: true });\n    // Simulate data fetching\n    setTimeout(() => {\n      dispatch({ type: 'SET_LOADING', payload: false });\n    }, 1000);\n  }, [dispatch]);\n\n  const handleAddItem = (item) => {\n    dispatch({ type: 'ADD_ITEM', payload: item });\n  };\n\n  const handleRemoveItem = (itemId) => {\n    dispatch({ type: 'REMOVE_ITEM', payload: itemId });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-[50vh] flex items-center justify-center\">\n        <LoadingSpinner label=\"Loading checkout...\" />\n      </div>\n    );\n  }\n  if (error) return <div>Error: {error}</div>;\n  if (items.length === 0) return <div>Your cart is empty.</div>;\n\n  return (\n    <div>\n      <h1>Checkout</h1>\n      <ul>\n        {items.map(item => (\n          <li key={item.id}>\n            {item.name} - ${item.price}\n            <button onClick={() => handleRemoveItem(item.id)}>Remove</button>\n          </li>\n        ))}\n      </ul>\n      <button onClick={() => handleAddItem({ id: 1, name: 'Sample Item', price: 10 })}>\n        Add Sample Item\n      </button>\n    </div>\n  );\n};\n\nexport default CheckoutPage;\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\pages\\Cloudupload.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\pages\\DashboardPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,18],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Activity' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":52,"suggestions":[{"messageId":"removeVar","data":{"varName":"Activity"},"fix":{"range":[68,78],"text":""},"desc":"Remove unused variable 'Activity'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { TrendingUp, ShoppingBag, Package, Activity } from 'lucide-react';\n\nexport default function DashboardPage() {\n  // Mock data for display - in real app would come from stats hook\n  const stats = [\n    { label: \"Today's Sales\", value: \"‡∏ø42,590.00\", icon: TrendingUp, color: \"text-green-500\", bg: \"bg-green-500/10\" },\n    { label: \"Transactions\", value: \"142\", icon: ShoppingBag, color: \"text-blue-500\", bg: \"bg-blue-500/10\" },\n    { label: \"Items Sold\", value: \"356\", icon: Package, color: \"text-orange-500\", bg: \"bg-orange-500/10\" },\n  ];\n\n  return (\n    <div className=\"p-6 md:p-8 w-full max-w-7xl mx-auto space-y-8 animate-fade-in-up\">\n      \n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n         <div>\n            <h1 className=\"text-3xl font-bold text-slate-800 dark:text-white mb-2\">Dashboard</h1>\n            <p className=\"text-slate-500 dark:text-slate-400\">Overview of store performance</p>\n         </div>\n         <div className=\"flex gap-2\">\n            <span className=\"glass-panel px-3 py-1 text-xs font-semibold flex items-center gap-2\">\n               <span className=\"w-2 h-2 rounded-full bg-green-500 animate-pulse\"></span> Live\n            </span>\n         </div>\n      </div>\n\n      {/* Stats Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        {stats.map((stat, idx) => (\n          <div key={idx} className=\"glass-panel p-6 relative overflow-hidden group hover:scale-[1.01] transition-transform\">\n            <div className={`absolute top-0 right-0 p-4 opacity-50`}>\n               <stat.icon size={64} className={`${stat.color} opacity-10 group-hover:scale-110 transition-transform`} />\n            </div>\n            <div className=\"relative z-10\">\n               <div className={`w-12 h-12 rounded-xl ${stat.bg} ${stat.color} flex items-center justify-center mb-4`}>\n                 <stat.icon size={24} />\n               </div>\n               <h3 className=\"text-slate-500 dark:text-slate-400 font-medium mb-1\">{stat.label}</h3>\n               <p className=\"text-3xl font-bold text-slate-800 dark:text-white\">{stat.value}</p>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Recent Activity */}\n      <div className=\"glass-panel p-6 rounded-2xl min-h-[300px]\">\n        <div className=\"flex items-center gap-3 mb-6\">\n            <div className=\"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400\">\n               <Activity size={20} />\n            </div>\n            <h2 className=\"text-xl font-bold text-slate-800 dark:text-white\">Recent Activity</h2>\n        </div>\n        \n        <div className=\"flex flex-col items-center justify-center h-48 text-slate-400 dark:text-slate-500\">\n           <Activity size={48} className=\"mb-4 opacity-20\" />\n           <p>No recent activity to display</p>\n        </div>\n      </div>\n    \n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\pages\\FileUploadPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'UploadCloud' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"UploadCloud"},"fix":{"range":[50,62],"text":""},"desc":"Remove unused variable 'UploadCloud'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'File' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"File"},"fix":{"range":[61,67],"text":""},"desc":"Remove unused variable 'File'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"X"},"fix":{"range":[67,70],"text":""},"desc":"Remove unused variable 'X'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'HardDrive' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"HardDrive"},"fix":{"range":[70,81],"text":""},"desc":"Remove unused variable 'HardDrive'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"Ôªøimport React, { useState } from \"react\";\nimport { UploadCloud, File, X, HardDrive } from \"lucide-react\";\n\nexport default function FileUploadPage() {\n  // BEGIN: FUNCTION ZONE\n  const [files, setFiles] = useState([]);\n  // END:   FUNCTION ZONE\n\n  return (\n    <div className=\"h-full p-6 md:p-8 animate-fade-in-up flex flex-col gap-6 max-w-4xl mx-auto\">\n       \n       <div className=\"flex items-center gap-4\">\n          <div className=\"h-14 w-14 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 text-white shadow-lg shadow-indigo-500/20 flex items-center justify-center\">\n             <UploadCloud size={28} />\n          </div>\n          <div>\n             <h1 className=\"text-3xl font-bold text-slate-800 dark:text-white\">File Upload</h1>\n             <p className=\"text-slate-500 dark:text-slate-400\">Import external data files into the system</p>\n          </div>\n       </div>\n\n       <div className=\"glass-panel p-8 rounded-3xl min-h-[400px] flex flex-col items-center justify-center border-dashed border-2 border-slate-300 dark:border-white/10 bg-slate-50/50 dark:bg-white/5 relative\">\n          \n          <input\n            type=\"file\"\n            multiple\n            onChange={(e) => setFiles(Array.from(e.target.files || []))}\n            className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10\"\n          />\n          \n          <div className=\"flex flex-col items-center text-center gap-4 pointer-events-none\">\n             <div className=\"w-24 h-24 rounded-full bg-blue-50 dark:bg-blue-900/20 text-blue-500 flex items-center justify-center mb-2 animate-bounce-slow\">\n                <UploadCloud size={48} />\n             </div>\n             \n             <div>\n                <h3 className=\"text-xl font-bold text-slate-800 dark:text-white\">Click or Drop Files Here</h3>\n                <p className=\"text-slate-500 dark:text-slate-400 mt-1 max-w-sm mx-auto\">\n                   Support for CSV, XLSX, and JSON files. Maximum file size 50MB.\n                </p>\n             </div>\n          </div>\n\n          {files.length > 0 && (\n             <div className=\"mt-8 w-full max-w-lg z-20 relative\">\n                 <div className=\"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 pl-1\">Selected Files ({files.length})</div>\n                 <div className=\"space-y-2\">\n                    {files.map((f, i) => (\n                       <div key={i} className=\"flex items-center gap-3 p-3 bg-white dark:bg-black/40 rounded-xl border border-slate-200 dark:border-white/10 shadow-sm animate-in slide-in-from-bottom-2 fade-in\">\n                          <div className=\"p-2 rounded-lg bg-slate-100 dark:bg-white/10 text-slate-500\">\n                             <File size={16} />\n                          </div>\n                          <div className=\"flex-1 min-w-0\">\n                             <div className=\"font-bold text-sm text-slate-800 dark:text-white truncate\">{f.name}</div>\n                             <div className=\"text-xs text-slate-400 font-mono\">{(f.size / 1024).toFixed(1)} KB</div>\n                          </div>\n                          <button className=\"text-slate-400 hover:text-red-500\" onClick={(e) => {\n                             e.preventDefault(); // Prevent opening file dialog again\n                             setFiles(prev => prev.filter((_, idx) => idx !== i));\n                          }}>\n                             <X size={16} />\n                          </button>\n                       </div>\n                    ))}\n                 </div>\n                 \n                 <button\n                    type=\"button\"\n                    className=\"btn-primary w-full mt-6 shadow-xl shadow-blue-500/20\"\n                    onClick={(e) => {\n                       e.stopPropagation(); // prevent file input click\n                       console.warn(\"Upload not implemented yet.\");\n                       alert(\"Upload processing is not yet implemented.\");\n                    }}\n                  >\n                    <HardDrive size={18} /> Start Upload Process\n                  </button>\n             </div>\n          )}\n       </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\pages\\HomePage.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,23],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Container' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"Container"},"fix":{"range":[33,82],"text":""},"desc":"Remove unused variable 'Container'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Card' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"Card"},"fix":{"range":[93,98],"text":""},"desc":"Remove unused variable 'Card'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardHeader' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardHeader"},"fix":{"range":[97,109],"text":""},"desc":"Remove unused variable 'CardHeader'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardTitle' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardTitle"},"fix":{"range":[109,120],"text":""},"desc":"Remove unused variable 'CardTitle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardDescription' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardDescription"},"fix":{"range":[120,137],"text":""},"desc":"Remove unused variable 'CardDescription'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardContent' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":56,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":67,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardContent"},"fix":{"range":[137,150],"text":""},"desc":"Remove unused variable 'CardContent'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Button' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"Button"},"fix":{"range":[183,231],"text":""},"desc":"Remove unused variable 'Button'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { Container } from \"@/components/ui/grid\";\r\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\nexport function HomePage() {\r\n  return (\r\n    <Container className=\"py-10 space-y-6\">\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>Baseline Ready ‚úÖ</CardTitle>\r\n          <CardDescription>Modules created: auth, pos, products, orders, reports, settings.</CardDescription>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-3\">\r\n          <p className=\"text-sm text-muted-foreground\">\r\n            Next: implement Auth + Products import + POS cart flow.\r\n          </p>\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            <Button onClick={() => location.assign(\"/pos\")}>Go to POS</Button>\r\n            <Button variant=\"outline\" onClick={() => location.assign(\"/products\")}>Products</Button>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </Container>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\pages\\InventoryPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,18],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Package' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"Package"},"fix":{"range":[36,44],"text":""},"desc":"Remove unused variable 'Package'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Plus' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"Plus"},"fix":{"range":[43,49],"text":""},"desc":"Remove unused variable 'Plus'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Search' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"Search"},"fix":{"range":[49,57],"text":""},"desc":"Remove unused variable 'Search'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Filter' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"Filter"},"fix":{"range":[57,65],"text":""},"desc":"Remove unused variable 'Filter'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Package, Plus, Search, Filter } from 'lucide-react';\n\nexport default function InventoryPage() {\n  return (\n    <div className=\"h-full p-6 md:p-8 animate-fade-in-up flex flex-col gap-6\">\n      \n      {/* Header */}\n      <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n         <div className=\"flex items-center gap-3\">\n             <div className=\"h-12 w-12 rounded-2xl bg-gradient-to-br from-orange-500 to-red-500 text-white shadow-lg shadow-orange-500/30 flex items-center justify-center\">\n                 <Package size={24} />\n             </div>\n             <div>\n                 <h1 className=\"text-2xl font-bold text-slate-800 dark:text-white\">Inventory</h1>\n                 <p className=\"text-sm text-slate-500 dark:text-slate-400\">Manage stock levels and products</p>\n             </div>\n         </div>\n         \n         <button className=\"btn-primary shadow-orange-500/20 bg-orange-600 hover:bg-orange-500\">\n             <Plus size={18} />\n             <span>Add Product</span>\n         </button>\n      </div>\n\n      {/* Toolbar */}\n      <div className=\"glass-panel p-2 flex items-center gap-2\">\n         <div className=\"relative flex-1\">\n             <Search size={18} className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\" />\n             <input className=\"w-full pl-10 pr-4 py-2.5 bg-transparent outline-none text-slate-700 dark:text-slate-200 placeholder-slate-400\" placeholder=\"Search inventory...\" />\n         </div>\n         <div className=\"h-8 w-[1px] bg-slate-200 dark:bg-white/10\"></div>\n         <button className=\"p-2.5 rounded-lg text-slate-500 hover:bg-slate-100 dark:hover:bg-white/5 transition-colors\">\n            <Filter size={18} />\n         </button>\n      </div>\n\n      {/* Main Content (Placeholder Table) */}\n      <div className=\"glass-panel flex-1 overflow-hidden flex flex-col\">\n         \n         {/* Table Header */}\n         <div className=\"grid grid-cols-12 gap-4 p-4 border-b border-slate-200 dark:border-white/5 bg-slate-50/50 dark:bg-white/5 text-xs font-bold uppercase tracking-wider text-slate-500 dark:text-slate-400\">\n             <div className=\"col-span-2\">SKU</div>\n             <div className=\"col-span-4\">Product Name</div>\n             <div className=\"col-span-2 text-right\">Price</div>\n             <div className=\"col-span-2 text-center\">Stock</div>\n             <div className=\"col-span-2 text-center\">Actions</div>\n         </div>\n\n         {/* Empty State / Placeholder Rows */}\n         <div className=\"flex-1 flex flex-col items-center justify-center p-12 text-slate-400 gap-4 opacity-60\">\n             <div className=\"w-20 h-20 rounded-2xl bg-slate-100 dark:bg-white/5 flex items-center justify-center\">\n                 <Package size={40} />\n             </div>\n             <div className=\"text-center\">\n                 <h3 className=\"font-bold text-lg text-slate-600 dark:text-slate-300\">No Products Found</h3>\n                 <p className=\"max-w-xs mt-1 text-sm\">Upload your product catalog in Admin Settings to populate inventory.</p>\n             </div>\n         </div>\n\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\pages\\LoginPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Toaster' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"Toaster"},"fix":{"range":[70,78],"text":""},"desc":"Remove unused variable 'Toaster'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'User' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"User"},"fix":{"range":[269,274],"text":""},"desc":"Remove unused variable 'User'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Lock' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"Lock"},"fix":{"range":[273,279],"text":""},"desc":"Remove unused variable 'Lock'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Eye' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"Eye"},"fix":{"range":[279,284],"text":""},"desc":"Remove unused variable 'Eye'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'EyeOff' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"EyeOff"},"fix":{"range":[284,292],"text":""},"desc":"Remove unused variable 'EyeOff'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'LogIn' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"LogIn"},"fix":{"range":[292,299],"text":""},"desc":"Remove unused variable 'LogIn'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ShieldCheck' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":53,"suggestions":[{"messageId":"removeVar","data":{"varName":"ShieldCheck"},"fix":{"range":[299,312],"text":""},"desc":"Remove unused variable 'ShieldCheck'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Activity' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":55,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":63,"suggestions":[{"messageId":"removeVar","data":{"varName":"Activity"},"fix":{"range":[312,322],"text":""},"desc":"Remove unused variable 'Activity'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Server' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":65,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":71,"suggestions":[{"messageId":"removeVar","data":{"varName":"Server"},"fix":{"range":[322,330],"text":""},"desc":"Remove unused variable 'Server'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Info' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":73,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":77,"suggestions":[{"messageId":"removeVar","data":{"varName":"Info"},"fix":{"range":[330,336],"text":""},"desc":"Remove unused variable 'Info'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useMemo, useState } from \"react\";\nimport { Toaster, toast } from \"react-hot-toast\";\nimport { doc, getDoc } from \"firebase/firestore\";\nimport { db } from \"../firebase\";\nimport { APP_VERSION, APP_UPDATED } from \"../constants/appMeta\";\nimport { User, Lock, Eye, EyeOff, LogIn, ShieldCheck, Activity, Server, Info } from \"lucide-react\";\nimport { cn } from \"../utils/cn\";\n\nexport default function LoginPage({ onLogin }) {\n  const [showPassword, setShowPassword] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [loginId, setLoginId] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [promoText, setPromoText] = useState(\"‚Äî\");\n  const [maintenanceText, setMaintenanceText] = useState(\"‚Äî\");\n  const versionDisplay = APP_VERSION || \"‚Äî\";\n  const updatedDisplay = APP_UPDATED || \"‚Äî\";\n  const storeName = \"Store 4340\";\n  const terminalId = \"4340\";\n  const heartbeat = \"SYSTEM ONLINE\";\n\n  useEffect(() => {\n    let active = true;\n    const loadMeta = async () => {\n      try {\n        const snap = await getDoc(doc(db, \"system_metadata\", \"login_ui\"));\n        if (!snap.exists()) return;\n        const data = snap.data() || {};\n        if (!active) return;\n        const promo = String(data.promotionUpdateText || \"\").trim();\n        setPromoText(promo || \"‚Äî\");\n        const maint = data.maintenanceLastUploadAt;\n        if (maint?.toDate) {\n          setMaintenanceText(maint.toDate().toLocaleString());\n        } else if (typeof maint === \"string\" && maint) {\n          setMaintenanceText(new Date(maint).toLocaleString());\n        } else {\n          setMaintenanceText(\"‚Äî\");\n        }\n      } catch {\n        /* silent */\n      }\n    };\n    loadMeta();\n    return () => {\n      active = false;\n    };\n  }, []);\n\n  const canSubmit = useMemo(() => {\n    return !!loginId.trim() && !!password.trim() && !isLoading;\n  }, [loginId, password, isLoading]);\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    if (!loginId.trim() || !password.trim()) {\n      toast.error(\"Please enter ID/Email and Password\");\n      return;\n    }\n\n    try {\n      setIsLoading(true);\n\n      if (typeof onLogin === \"function\") {\n        await onLogin(loginId.trim(), password);\n        toast.success(\"Authentication Successful\");\n      } else {\n        // fallback demo behavior\n        await new Promise((r) => setTimeout(r, 900));\n        toast.success(\"Authentication Successful\");\n      }\n    } catch (err) {\n      const msg =\n        (err && (err.message || err?.code)) ? String(err.message || err.code) : \"Login failed\";\n      toast.error(msg);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen w-full flex font-sans bg-slate-50 dark:bg-[#1a1b1e] text-slate-900 dark:text-white overflow-hidden\">\n      <Toaster position=\"top-center\" />\n\n      {/* LEFT PANEL - BRANDING */}\n      <div className=\"hidden lg:flex w-1/2 relative bg-boots-base overflow-hidden flex-col justify-between p-12 text-white\">\n        {/* Background Patterns */}\n        <div className=\"absolute top-[-20%] left-[-20%] w-[80%] h-[80%] rounded-full bg-white/5 blur-3xl pointer-events-none\" />\n        <div className=\"absolute bottom-[-20%] right-[-20%] w-[80%] h-[80%] rounded-full bg-blue-500/20 blur-3xl pointer-events-none\" />\n        <div className=\"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 brightness-100 contrast-150 pointer-events-none mix-blend-overlay\"></div>\n\n        <div className=\"relative z-10\">\n            <div className=\"flex items-center gap-3 mb-8\">\n                <div className=\"w-12 h-12 bg-white rounded-xl text-boots-base flex items-center justify-center font-bold text-2xl shadow-lg\">B</div>\n                <div>\n                    <h1 className=\"text-2xl font-bold leading-none\">Boots POS</h1>\n                    <p className=\"text-blue-200 text-sm font-medium\">Enterprise System</p>\n                </div>\n            </div>\n            \n            <div className=\"mt-12 space-y-6\">\n                 <div>\n                    <h2 className=\"text-4xl font-bold mb-2\">Welcome Back</h2>\n                    <p className=\"text-blue-100 text-lg opacity-90 max-w-md\">Access your store dashboard, inventory, and sales reports in one secure place.</p>\n                 </div>\n\n                 <div className=\"grid grid-cols-2 gap-4 max-w-lg mt-8\">\n                     <div className=\"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20\">\n                         <div className=\"flex items-center gap-2 text-blue-200 mb-2\">\n                             <Activity size={18} />\n                             <span className=\"text-xs font-bold uppercase tracking-wider\">Status</span>\n                         </div>\n                         <div className=\"flex items-center gap-2\">\n                             <span className=\"w-2 h-2 rounded-full bg-green-400 animate-pulse\"></span>\n                             <span className=\"font-semibold\">{heartbeat}</span>\n                         </div>\n                     </div>\n                     <div className=\"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20\">\n                         <div className=\"flex items-center gap-2 text-blue-200 mb-2\">\n                             <Server size={18} />\n                             <span className=\"text-xs font-bold uppercase tracking-wider\">Terminal</span>\n                         </div>\n                         <div className=\"font-semibold\">{terminalId}</div>\n                     </div>\n                 </div>\n            </div>\n        </div>\n\n        <div className=\"relative z-10 text-sm text-blue-200/60 flex flex-col gap-1\">\n             <div className=\"flex items-center justify-between border-t border-white/10 pt-6\">\n                <div>\n                     <p>version {versionDisplay}</p>\n                     <p>updated {updatedDisplay}</p>\n                </div>\n                <div className=\"text-right\">\n                    <p>{storeName}</p>\n                    <p className=\"opacity-70\">Authorized Personnel Only</p>\n                </div>\n             </div>\n        </div>\n      </div>\n\n      {/* RIGHT PANEL - LOGIN FORM */}\n      <div className=\"w-full lg:w-1/2 bg-slate-50 dark:bg-[#1a1b1e] flex items-center justify-center p-6 relative\">\n          \n         {/* Mobile Header (Visible only on small screens) */}\n         <div className=\"lg:hidden absolute top-0 left-0 right-0 p-6 flex justify-between items-center text-boots-base\">\n            <div className=\"flex items-center gap-2\">\n                <div className=\"w-8 h-8 bg-boots-base text-white rounded-lg flex items-center justify-center font-bold\">B</div>\n                <span className=\"font-bold text-lg\">Boots POS</span>\n            </div>\n         </div>\n\n         <div className=\"w-full max-w-[420px]\">\n            <div className=\"text-center mb-10\">\n                <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-blue-50 dark:bg-blue-900/20 text-boots-base dark:text-blue-400 mb-4 ring-8 ring-blue-50/50 dark:ring-blue-900/10\">\n                    <LogIn size={32} />\n                </div>\n                <h2 className=\"text-3xl font-bold text-slate-900 dark:text-white mb-2\">Sign in</h2>\n                <p className=\"text-slate-500 dark:text-slate-400\">Enter your Employee ID and Password</p>\n            </div>\n\n            <form onSubmit={handleLogin} className=\"space-y-6\">\n                <div className=\"space-y-1.5\">\n                    <label className=\"text-sm font-semibold text-slate-700 dark:text-slate-300\">User ID / Email</label>\n                    <div className=\"relative group\">\n                        <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-slate-400 group-focus-within:text-boots-base transition-colors\">\n                            <User size={20} />\n                        </div>\n                        <input\n                            type=\"text\"\n                            value={loginId}\n                            onChange={(e) => setLoginId(e.target.value)}\n                            className=\"w-full pl-12 pr-4 py-3.5 bg-white dark:bg-[#25262b] border border-slate-200 dark:border-slate-700 rounded-xl text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-boots-base/20 focus:border-boots-base transition-all font-medium\"\n                            placeholder=\"e.g. 6705067\"\n                            required\n                        />\n                    </div>\n                </div>\n\n                <div className=\"space-y-1.5\">\n                    <div className=\"flex items-center justify-between\">\n                         <label className=\"text-sm font-semibold text-slate-700 dark:text-slate-300\">Password</label>\n                    </div>\n                    <div className=\"relative group\">\n                        <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-slate-400 group-focus-within:text-boots-base transition-colors\">\n                            <Lock size={20} />\n                        </div>\n                        <input\n                            type={showPassword ? \"text\" : \"password\"}\n                            value={password}\n                            onChange={(e) => setPassword(e.target.value)}\n                            className=\"w-full pl-12 pr-12 py-3.5 bg-white dark:bg-[#25262b] border border-slate-200 dark:border-slate-700 rounded-xl text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-boots-base/20 focus:border-boots-base transition-all font-medium\"\n                            placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                            required\n                        />\n                        <button\n                            type=\"button\"\n                            onClick={() => setShowPassword(!showPassword)}\n                            className=\"absolute inset-y-0 right-0 pr-4 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors\"\n                        >\n                            {showPassword ? <EyeOff size={20} /> : <Eye size={20} />}\n                        </button>\n                    </div>\n                </div>\n\n                <button\n                    type=\"submit\"\n                    disabled={!canSubmit}\n                    className={cn(\n                        \"w-full py-4 rounded-xl font-bold bg-boots-base text-white shadow-lg shadow-blue-900/20 hover:shadow-blue-900/30 hover:bg-boots-hover transition-all active:scale-[0.98] flex items-center justify-center gap-2\",\n                        !canSubmit && \"opacity-70 cursor-not-allowed grayscale\"\n                    )}\n                >\n                    {isLoading ? (\n                         <div className=\"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin\"></div>\n                    ) : (\n                        <>\n                        <span>Secure Login</span>\n                        <ShieldCheck size={20} className=\"opacity-80\" />\n                        </>\n                    )}\n                </button>\n            </form>\n            \n            <div className=\"mt-10 pt-6 border-t border-slate-100 dark:border-slate-800\">\n                <div className=\"flex items-start gap-3\">\n                    <div className=\"mt-1 min-w-[16px] text-blue-600 dark:text-blue-400\">\n                         <Info size={16} />\n                    </div>\n                    <div className=\"text-xs text-slate-500 dark:text-slate-400 leading-relaxed\">\n                        <p className=\"mb-1\"><span className=\"font-semibold text-slate-700 dark:text-slate-300\">Daily Promotion:</span> {promoText}</p>\n                        <p><span className=\"font-semibold text-slate-700 dark:text-slate-300\">Maintenance:</span> Last sync at {maintenanceText}</p>\n                    </div>\n                </div>\n            </div>\n\n         </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\pages\\MainPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,18],"text":""},"desc":"Remove unused variable 'React'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\n\nexport default function MainPage() {\n  return (\n    <div className=\"p-6\">\n      <h1 className=\"text-xl font-bold\">Boots POS</h1>\n      <p className=\"text-sm text-slate-600 dark:text-slate-300\">\n        This placeholder page exists to satisfy linting; wire it up when a main landing page is needed.\n      </p>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\pages\\ManagementConsole.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AccessDenied' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"AccessDenied"},"fix":{"range":[204,222],"text":""},"desc":"Remove unused variable 'AccessDenied'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Shield' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"Shield"},"fix":{"range":[266,273],"text":""},"desc":"Remove unused variable 'Shield'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Search' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"Search"},"fix":{"range":[272,280],"text":""},"desc":"Remove unused variable 'Search'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'UserPlus' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"UserPlus"},"fix":{"range":[280,290],"text":""},"desc":"Remove unused variable 'UserPlus'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Edit' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":40,"suggestions":[{"messageId":"removeVar","data":{"varName":"Edit"},"fix":{"range":[290,296],"text":""},"desc":"Remove unused variable 'Edit'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Key' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"Key"},"fix":{"range":[296,301],"text":""},"desc":"Remove unused variable 'Key'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'History' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"History"},"fix":{"range":[301,310],"text":""},"desc":"Remove unused variable 'History'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Save' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":56,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"Save"},"fix":{"range":[310,316],"text":""},"desc":"Remove unused variable 'Save'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'RefreshCw' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":71,"suggestions":[{"messageId":"removeVar","data":{"varName":"RefreshCw"},"fix":{"range":[316,327],"text":""},"desc":"Remove unused variable 'RefreshCw'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":73,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":84,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle"},"fix":{"range":[327,340],"text":""},"desc":"Remove unused variable 'CheckCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":86,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":97,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertCircle"},"fix":{"range":[340,353],"text":""},"desc":"Remove unused variable 'AlertCircle'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo, useState } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { createId, getAuditLogs, resetPin, searchIds, updateId } from '../services/rbacService';\nimport AccessDenied from '../components/auth/AccessDenied';\nimport { Shield, Search, UserPlus, Edit, Key, History, Save, RefreshCw, CheckCircle, AlertCircle } from 'lucide-react';\nimport { cn } from '../utils/cn';\n\nfunction __requireIdCodePin__(payload) {\n  const idCode = payload?.idCode ?? payload?.id ?? payload?.code;\n  const pin = payload?.pin ?? payload?.PIN;\n  if (!idCode || !pin) {\n    throw new Error(\"idCode and pin required\");\n  }\n  return { idCode, pin };\n}\n\nconst MENU_OPTIONS = [\"dashboard\", \"pos\", \"report\", \"inventory\", \"orders\", \"settings\", \"Upload\", \"management\"];\nconst ROLE_OPTIONS = [\"admin\", \"SM-SGM\", \"user\"];\n\n// Additional Icon mapping for nice UI\nexport default function ManagementConsole() {\n  // BEGIN: FUNCTION ZONE (DO NOT TOUCH)\n  const { session } = useAuth();\n  const [searchEmail, setSearchEmail] = useState('');\n  const [searchIdCode, setSearchIdCode] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [auditLogs, setAuditLogs] = useState([]);\n  const [statusMessage, setStatusMessage] = useState('');\n\n  const [newEmail, setNewEmail] = useState(session?.email || '');\n  const [newIdCode, setNewIdCode] = useState('');\n  const [newRole, setNewRole] = useState('user');\n  const [newPin, setNewPin] = useState('');\n  const [newMenus, setNewMenus] = useState([]);\n\n  const [editIdCode, setEditIdCode] = useState('');\n  const [editRole, setEditRole] = useState('');\n  const [editStatus, setEditStatus] = useState('');\n  const [editMenus, setEditMenus] = useState([]);\n\n  const isAdmin = session?.role === 'admin';\n  const isSgm = session?.role === 'SM-SGM';\n\n  const canAccess = isAdmin || isSgm;\n  const roleOptions = useMemo(() => (isAdmin ? ROLE_OPTIONS : ROLE_OPTIONS.filter((r) => r !== 'admin')), [isAdmin]);\n\n  if (!canAccess) {\n    return <AccessDenied message=\"You do not have access to management console.\" />;\n  }\n\n  const handleSearch = async () => {\n    setStatusMessage('');\n    const ids = await searchIds({\n      actorIdCode: session.idCode,\n      email: searchEmail || undefined,\n      idCode: searchIdCode || undefined\n    });\n    setSearchResults(ids);\n  };\n\n  const handleCreate = async () => {\n    setStatusMessage('');\n    const payload = {\n      actorIdCode: session.idCode,\n      email: newEmail || session.email,\n      idCode: newIdCode,\n      role: newRole,\n      pin: newPin,\n      permissions: { allowedMenus: newMenus }\n    };\n    try {\n        __requireIdCodePin__(payload);\n        await createId(payload);\n        setStatusMessage('Created ID successfully');\n        setNewIdCode('');\n        setNewPin('');\n    } catch(e) {\n        setStatusMessage('Error creating ID: ' + e.message);\n    }\n  };\n\n  const handleUpdate = async () => {\n    setStatusMessage('');\n    const payload = {\n      actorIdCode: session.idCode,\n      idCode: editIdCode,\n      role: editRole || undefined,\n      status: editStatus || undefined,\n      permissions: editMenus.length ? { allowedMenus: editMenus } : undefined\n    };\n    try {\n        await updateId(payload);\n        setStatusMessage('Updated ID successfully');\n    } catch(e) {\n        setStatusMessage('Error updating ID: ' + e.message);\n    }\n  };\n\n  const handleResetPin = async (idCode) => {\n    try {\n        const res = await resetPin({ actorIdCode: session.idCode, idCode });\n        setStatusMessage(`Temporary PIN for ${idCode}: ${res.tempPin}`);\n    } catch(e) {\n        setStatusMessage('Error resetting PIN: ' + e.message);\n    }\n  };\n\n  const handleLoadAudit = async () => {\n    try {\n        const logs = await getAuditLogs({ actorIdCode: session.idCode, email: isAdmin ? searchEmail || undefined : session.email });\n        setAuditLogs(logs);\n    } catch(e) {\n        setAuditLogs([]);\n        setStatusMessage('Error loading logs: ' + e.message);\n    }\n  };\n  // END:   FUNCTION ZONE (DO NOT TOUCH)\n\n  // Unity Theme UI\n  return (\n    <div className=\"h-full p-6 md:p-8 animate-fade-in-up flex flex-col gap-8 max-w-7xl mx-auto\">\n      \n      {/* Header */}\n      <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n         <div className=\"flex items-center gap-3\">\n             <div className=\"h-12 w-12 rounded-2xl bg-gradient-to-br from-slate-700 to-slate-900 dark:from-white/10 dark:to-white/5 text-white shadow-lg flex items-center justify-center\">\n                 <Shield size={24} />\n             </div>\n             <div>\n                 <h1 className=\"text-2xl font-bold text-slate-800 dark:text-white\">\n                    {isAdmin ? 'Admin Console' : 'Management Console'}\n                 </h1>\n                 <p className=\"text-sm text-slate-500 dark:text-slate-400\">Manage user IDs, roles, and system permissions</p>\n             </div>\n         </div>\n         <div className=\"flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-white/5 rounded-full border border-slate-200 dark:border-white/10\">\n            <div className=\"w-2 h-2 rounded-full bg-green-500 animate-pulse\"></div>\n            <span className=\"text-xs font-mono text-slate-500 dark:text-slate-400\">Signed in as: <span className=\"font-bold text-slate-700 dark:text-slate-200\">{session?.email}</span></span>\n         </div>\n      </div>\n\n      {statusMessage && (\n        <div className=\"p-4 rounded-xl bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 text-blue-700 dark:text-blue-300 flex items-center gap-3 animate-fade-in-up\">\n            <AlertCircle size={20} />\n            <span className=\"font-medium\">{statusMessage}</span>\n        </div>\n      )}\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          \n          {/* SEARCH CARD */}\n          <div className=\"glass-panel p-6 flex flex-col gap-4\">\n              <div className=\"flex items-center gap-2 mb-2 pb-2 border-b border-slate-100 dark:border-white/5\">\n                  <Search size={20} className=\"text-slate-400\" />\n                  <h2 className=\"font-bold text-slate-700 dark:text-slate-200\">Search Staff IDs</h2>\n              </div>\n              \n              <div className=\"grid grid-cols-2 gap-3\">\n                  <input\n                    className=\"glass-input\"\n                    placeholder=\"Search by Email\"\n                    aria-label=\"Search by Email\"\n                    value={searchEmail}\n                    onChange={(e) => setSearchEmail(e.target.value)}\n                  />\n                  <input\n                    className=\"glass-input\"\n                    placeholder=\"Search by ID Code\"\n                    aria-label=\"Search by ID Code\"\n                    value={searchIdCode}\n                    onChange={(e) => setSearchIdCode(e.target.value)}\n                  />\n              </div>\n              \n              <button onClick={handleSearch} className=\"btn-primary w-full\">\n                  <Search size={18} /> Search Database\n              </button>\n              \n              {searchResults.length > 0 && (\n                  <div className=\"mt-2 p-3 rounded-xl bg-slate-50 dark:bg-white/5 max-h-40 overflow-y-auto space-y-2\">\n                      <div className=\"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2\">Results ({searchResults.length})</div>\n                      {searchResults.map((id, idx) => (\n                          <div key={idx} className=\"flex justify-between items-center text-sm p-2 bg-white dark:bg-black/20 rounded-lg border border-slate-100 dark:border-white/5\">\n                              <div>\n                                  <div className=\"font-semibold text-slate-800 dark:text-white\">{id.idCode}</div>\n                                  <div className=\"text-xs text-slate-500\">{id.email}</div>\n                              </div>\n                              <div className=\"px-2 py-1 rounded bg-slate-100 dark:bg-white/10 text-xs font-bold uppercase\">{id.role}</div>\n                          </div>\n                      ))}\n                  </div>\n              )}\n          </div>\n\n          {/* CREATE CARD */}\n          <div className=\"glass-panel p-6 flex flex-col gap-4\">\n              <div className=\"flex items-center gap-2 mb-2 pb-2 border-b border-slate-100 dark:border-white/5\">\n                  <UserPlus size={20} className=\"text-emerald-500\" />\n                  <h2 className=\"font-bold text-slate-700 dark:text-slate-200\">Create New ID</h2>\n              </div>\n\n              <div className=\"space-y-3\">\n                  <input\n                    className=\"glass-input\"\n                    placeholder=\"Email\"\n                    value={newEmail}\n                    onChange={(e) => setNewEmail(e.target.value)}\n                    disabled={!isAdmin}\n                  />\n                  <div className=\"grid grid-cols-2 gap-3\">\n                      <input\n                        className=\"glass-input\"\n                        placeholder=\"New ID Code\"\n                        value={newIdCode}\n                        onChange={(e) => setNewIdCode(e.target.value)}\n                      />\n                      <input\n                        className=\"glass-input\"\n                        placeholder=\"Initial PIN\"\n                        value={newPin}\n                        onChange={(e) => setNewPin(e.target.value)}\n                      />\n                  </div>\n                  <select \n                     className=\"glass-input\"\n                     value={newRole} \n                     onChange={(e) => setNewRole(e.target.value)}\n                  >\n                    {roleOptions.map((role) => <option key={role} value={role}>{role.toUpperCase()}</option>)}\n                  </select>\n                  \n                  <div className=\"p-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-100 dark:border-white/10\">\n                      <div className=\"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3\">Permissions</div>\n                      <div className=\"flex flex-wrap gap-2\">\n                        {MENU_OPTIONS.map((menu) => (\n                          <label key={menu} className={cn(\"text-xs border rounded-lg px-2 py-1.5 cursor-pointer flex items-center gap-2 transition-all\", \n                              newMenus.includes(menu) \n                                ? \"bg-blue-500 text-white border-blue-500 shadow-sm\" \n                                : \"bg-white dark:bg-white/5 border-slate-200 dark:border-white/10 text-slate-600 dark:text-slate-400 hover:border-slate-300\"\n                          )}>\n                            <input\n                              type=\"checkbox\"\n                              className=\"hidden\"\n                              checked={newMenus.includes(menu)}\n                              onChange={(e) => setNewMenus((prev) => e.target.checked ? [...prev, menu] : prev.filter((m) => m !== menu))}\n                            />\n                            {newMenus.includes(menu) && <CheckCircle size={10} />} {menu}\n                          </label>\n                        ))}\n                      </div>\n                  </div>\n                  \n                  <button onClick={handleCreate} className=\"btn-primary w-full bg-emerald-600 hover:bg-emerald-500 shadow-emerald-500/20\">\n                      <UserPlus size={18} /> Create Account\n                  </button>\n              </div>\n          </div>\n\n          {/* UPDATE CARD */}\n          <div className=\"glass-panel p-6 flex flex-col gap-4\">\n              <div className=\"flex items-center gap-2 mb-2 pb-2 border-b border-slate-100 dark:border-white/5\">\n                  <Edit size={20} className=\"text-blue-500\" />\n                  <h2 className=\"font-bold text-slate-700 dark:text-slate-200\">Update Existing ID</h2>\n              </div>\n              \n              <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3\">\n                  <input \n                     className=\"glass-input\" \n                     placeholder=\"Target ID Code\" \n                     value={editIdCode} \n                     onChange={(e) => setEditIdCode(e.target.value)} \n                  />\n                  <select \n                     className=\"glass-input\" \n                     value={editRole} \n                     onChange={(e) => setEditRole(e.target.value)}\n                  >\n                    <option value=\"\">Role (No Change)</option>\n                    {roleOptions.map((role) => <option key={role} value={role}>{role.toUpperCase()}</option>)}\n                  </select>\n                  <select \n                     className=\"glass-input\"\n                     value={editStatus} \n                     onChange={(e) => setEditStatus(e.target.value)}\n                  >\n                    <option value=\"\">Status (No Change)</option>\n                    <option value=\"active\">Active</option>\n                    <option value=\"disabled\">Disabled</option>\n                  </select>\n              </div>\n\n               <div className=\"p-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-100 dark:border-white/10\">\n                  <div className=\"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3\">Update Permissions</div>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {MENU_OPTIONS.map((menu) => (\n                      <label key={menu} className={cn(\"text-xs border rounded-lg px-2 py-1.5 cursor-pointer flex items-center gap-2 transition-all\", \n                          editMenus.includes(menu) \n                            ? \"bg-blue-500 text-white border-blue-500 shadow-sm\" \n                            : \"bg-white dark:bg-white/5 border-slate-200 dark:border-white/10 text-slate-600 dark:text-slate-400 hover:border-slate-300\"\n                      )}>\n                        <input\n                          type=\"checkbox\"\n                          className=\"hidden\"\n                          checked={editMenus.includes(menu)}\n                          onChange={(e) => setEditMenus((prev) => e.target.checked ? [...prev, menu] : prev.filter((m) => m !== menu))}\n                        />\n                        {editMenus.includes(menu) && <CheckCircle size={10} />} {menu}\n                      </label>\n                    ))}\n                  </div>\n              </div>\n\n              <div className=\"flex gap-3\">\n                  <button onClick={handleUpdate} className=\"btn-primary flex-1\">\n                      <Save size={18} /> Update ID\n                  </button>\n                  <button onClick={() => handleResetPin(editIdCode)} className=\"btn-secondary flex-1 border-orange-200 text-orange-600 hover:bg-orange-50 dark:border-orange-500/30 dark:text-orange-400 dark:hover:bg-orange-500/10\">\n                      <Key size={18} /> Reset PIN\n                  </button>\n              </div>\n          </div>\n\n          {/* AUDIT LOGS CARD */}\n          <div className=\"glass-panel p-6 flex flex-col gap-4 relative overflow-hidden\">\n               <div className=\"flex items-center justify-between mb-2 pb-2 border-b border-slate-100 dark:border-white/5\">\n                  <div className=\"flex items-center gap-2\">\n                      <History size={20} className=\"text-purple-500\" />\n                      <h2 className=\"font-bold text-slate-700 dark:text-slate-200\">System Logs</h2>\n                  </div>\n                  <button onClick={handleLoadAudit} className=\"text-xs font-bold px-2 py-1 rounded bg-slate-100 dark:bg-white/10 hover:bg-slate-200 dark:hover:bg-white/20 transition-colors flex items-center gap-1\">\n                      <RefreshCw size={12} /> Refresh\n                  </button>\n              </div>\n              \n              <div className=\"flex-1 overflow-auto rounded-xl border border-slate-200 dark:border-white/10 bg-white/50 dark:bg-black/20 min-h-[200px]\">\n                  {auditLogs.length === 0 ? (\n                    <div className=\"h-full flex flex-col items-center justify-center text-slate-400 gap-2 opacity-60\">\n                        <History size={32} />\n                        <span className=\"text-sm\">No recent activity logs found</span>\n                    </div>\n                  ) : (\n                    <table className=\"w-full text-left text-xs\">\n                      <thead className=\"bg-slate-50 dark:bg-white/5 text-slate-500 dark:text-slate-400 uppercase tracking-wider sticky top-0 backdrop-blur-sm\">\n                        <tr>\n                          <th className=\"p-3 font-semibold\">Action</th>\n                          <th className=\"p-3 font-semibold\">Target</th>\n                          <th className=\"p-3 font-semibold\">Actor</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {auditLogs.map((log) => (\n                          <tr key={log.id} className=\"border-t border-slate-100 dark:border-white/5 hover:bg-slate-50 dark:hover:bg-white/5 transition-colors\">\n                            <td className=\"p-3 font-bold text-slate-700 dark:text-slate-300\">{log.action}</td>\n                            <td className=\"p-3 text-slate-500 dark:text-slate-400 font-mono\">{log.targetIdCode || log.targetEmail}</td>\n                            <td className=\"p-3 text-slate-500 dark:text-slate-400 relative\">\n                                {log.actorIdCode || log.actorEmail}\n                                <span className=\"absolute right-2 top-1/2 -translate-y-1/2 w-1.5 h-1.5 rounded-full bg-slate-300\"></span>\n                            </td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                  )}\n              </div>\n          </div>\n\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\pages\\NotFoundPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,23],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Container' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"Container"},"fix":{"range":[33,82],"text":""},"desc":"Remove unused variable 'Container'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Card' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"Card"},"fix":{"range":[93,98],"text":""},"desc":"Remove unused variable 'Card'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardHeader' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardHeader"},"fix":{"range":[97,109],"text":""},"desc":"Remove unused variable 'CardHeader'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardTitle' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardTitle"},"fix":{"range":[109,120],"text":""},"desc":"Remove unused variable 'CardTitle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardDescription' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardDescription"},"fix":{"range":[120,137],"text":""},"desc":"Remove unused variable 'CardDescription'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardContent' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":56,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":67,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardContent"},"fix":{"range":[137,150],"text":""},"desc":"Remove unused variable 'CardContent'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Button' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"Button"},"fix":{"range":[183,231],"text":""},"desc":"Remove unused variable 'Button'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { Container } from \"@/components/ui/grid\";\r\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\nexport function NotFoundPage() {\r\n  return (\r\n    <Container className=\"py-10\">\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>404</CardTitle>\r\n          <CardDescription>Page not found.</CardDescription>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-3\">\r\n          <Button onClick={() => location.assign(\"/\")}>Go Home</Button>\r\n        </CardContent>\r\n      </Card>\r\n    </Container>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\pages\\OrdersPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,23],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Container' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"Container"},"fix":{"range":[33,82],"text":""},"desc":"Remove unused variable 'Container'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Card' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"Card"},"fix":{"range":[93,98],"text":""},"desc":"Remove unused variable 'Card'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardHeader' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardHeader"},"fix":{"range":[97,109],"text":""},"desc":"Remove unused variable 'CardHeader'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardTitle' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardTitle"},"fix":{"range":[109,120],"text":""},"desc":"Remove unused variable 'CardTitle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardDescription' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardDescription"},"fix":{"range":[120,137],"text":""},"desc":"Remove unused variable 'CardDescription'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardContent' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":56,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":67,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardContent"},"fix":{"range":[137,150],"text":""},"desc":"Remove unused variable 'CardContent'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { Container } from \"@/components/ui/grid\";\r\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent } from \"@/components/ui/card\";\r\n\r\nexport function OrdersPage() {\r\n  return (\r\n    <Container className=\"py-10\">\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>Orders (Skeleton)</CardTitle>\r\n          <CardDescription>Next: order history, refunds, status.</CardDescription>\r\n        </CardHeader>\r\n        <CardContent className=\"text-sm text-muted-foreground\">\r\n          Placeholder page.\r\n        </CardContent>\r\n      </Card>\r\n    </Container>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\pages\\PosPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Container' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"Container"},"fix":{"range":[68,117],"text":""},"desc":"Remove unused variable 'Container'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Card' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"Card"},"fix":{"range":[128,133],"text":""},"desc":"Remove unused variable 'Card'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardHeader' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardHeader"},"fix":{"range":[132,144],"text":""},"desc":"Remove unused variable 'CardHeader'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardTitle' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardTitle"},"fix":{"range":[144,155],"text":""},"desc":"Remove unused variable 'CardTitle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardDescription' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardDescription"},"fix":{"range":[155,172],"text":""},"desc":"Remove unused variable 'CardDescription'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardContent' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":56,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":67,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardContent"},"fix":{"range":[172,185],"text":""},"desc":"Remove unused variable 'CardContent'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Button' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"Button"},"fix":{"range":[218,266],"text":""},"desc":"Remove unused variable 'Button'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Badge' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Badge"},"fix":{"range":[268,314],"text":""},"desc":"Remove unused variable 'Badge'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Input' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Input"},"fix":{"range":[316,362],"text":""},"desc":"Remove unused variable 'Input'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Table' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Table"},"fix":{"range":[373,379],"text":""},"desc":"Remove unused variable 'Table'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TableRoot' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"TableRoot"},"fix":{"range":[378,389],"text":""},"desc":"Remove unused variable 'TableRoot'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TableHeader' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"TableHeader"},"fix":{"range":[389,402],"text":""},"desc":"Remove unused variable 'TableHeader'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TableBody' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":50,"suggestions":[{"messageId":"removeVar","data":{"varName":"TableBody"},"fix":{"range":[402,413],"text":""},"desc":"Remove unused variable 'TableBody'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TableRow' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"TableRow"},"fix":{"range":[413,423],"text":""},"desc":"Remove unused variable 'TableRow'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TableHead' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":71,"suggestions":[{"messageId":"removeVar","data":{"varName":"TableHead"},"fix":{"range":[423,434],"text":""},"desc":"Remove unused variable 'TableHead'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'TableCell' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":73,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":82,"suggestions":[{"messageId":"removeVar","data":{"varName":"TableCell"},"fix":{"range":[434,445],"text":""},"desc":"Remove unused variable 'TableCell'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Dialog' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"Dialog"},"fix":{"range":[488,495],"text":""},"desc":"Remove unused variable 'Dialog'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DialogTrigger' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"DialogTrigger"},"fix":{"range":[494,509],"text":""},"desc":"Remove unused variable 'DialogTrigger'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DialogContent' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"DialogContent"},"fix":{"range":[509,524],"text":""},"desc":"Remove unused variable 'DialogContent'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DialogHeader' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"DialogHeader"},"fix":{"range":[524,538],"text":""},"desc":"Remove unused variable 'DialogHeader'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DialogTitle' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":73,"suggestions":[{"messageId":"removeVar","data":{"varName":"DialogTitle"},"fix":{"range":[538,551],"text":""},"desc":"Remove unused variable 'DialogTitle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DialogDescription' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":75,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":92,"suggestions":[{"messageId":"removeVar","data":{"varName":"DialogDescription"},"fix":{"range":[551,570],"text":""},"desc":"Remove unused variable 'DialogDescription'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DialogFooter' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":94,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":106,"suggestions":[{"messageId":"removeVar","data":{"varName":"DialogFooter"},"fix":{"range":[570,584],"text":""},"desc":"Remove unused variable 'DialogFooter'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ProductLookupModal' is defined but never used. Allowed unused vars must match /^_/u.","line":15,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"ProductLookupModal"},"fix":{"range":[830,912],"text":""},"desc":"Remove unused variable 'ProductLookupModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ReceiptDialog' is defined but never used. Allowed unused vars must match /^_/u.","line":16,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"ReceiptDialog"},"fix":{"range":[914,986],"text":""},"desc":"Remove unused variable 'ReceiptDialog'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":25,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { toast } from \"sonner\";\r\n\r\nimport { Container } from \"@/components/ui/grid\";\r\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Table, TableRoot, TableHeader, TableBody, TableRow, TableHead, TableCell } from \"@/components/ui/table\";\r\nimport { Dialog, DialogTrigger, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from \"@/components/ui/dialog\";\r\n\r\nimport { useCart } from \"@/features/pos/hooks/useCart\";\r\nimport { useScanListener } from \"@/features/pos/hooks/useScanListener\";\r\nimport { productService } from \"@/features/products/services/productService\";\r\nimport { ProductLookupModal } from \"@/features/pos/components/ProductLookupModal\";\r\nimport { ReceiptDialog } from \"@/features/pos/components/ReceiptDialog\";\r\nimport { calcTotals } from \"@/features/pos/services/posCalc\";\r\nimport { posOrderService } from \"@/features/pos/services/posOrderService\";\r\n\r\nexport function PosPage() {\r\n  const cart = useCart();\r\n\r\n  const [discountType, setDiscountType] = React.useState(\"percent\"); // percent | amount\r\n  const [discountValue, setDiscountValue] = React.useState(0);\r\n  const discount = React.useMemo(() => ({ type: discountType, value: Number(discountValue) || 0 }), [discountType, discountValue]);\r\n\r\n  const totals = React.useMemo(() => calcTotals(cart.items, discount), [cart.items, discount]);\r\n\r\n  const [checkoutOpen, setCheckoutOpen] = React.useState(false);\r\n  const [paymentMethod, setPaymentMethod] = React.useState(\"cash\"); // cash | transfer | card (future)\r\n  const [received, setReceived] = React.useState(\"\");\r\n  const [lastOrder, setLastOrder] = React.useState(null);\r\n  const [receiptOpen, setReceiptOpen] = React.useState(false);\r\n\r\n  // Scan -> lookup product by barcode -> add to cart\r\n  useScanListener(async (code) => {\r\n    const p = await productService.getProductByBarcode(code);\r\n    if (!p) {\r\n      toast.error(\"Product not found\", { description: code });\r\n      return;\r\n    }\r\n    cart.addItem(p, 1);\r\n    toast.success(\"Added\", { description: p.name });\r\n  });\r\n\r\n  function onPickProduct(p) {\r\n    cart.addItem(p, 1);\r\n    toast.success(\"Added\", { description: p.name });\r\n  }\r\n\r\n  async function checkoutConfirm() {\r\n    if (!cart.items.length) {\r\n      toast.error(\"Cart is empty\");\r\n      return;\r\n    }\r\n\r\n    const rec = Number(received) || 0;\r\n    if (paymentMethod === \"cash\" && rec < totals.total) {\r\n      toast.error(\"Insufficient cash\", { description: `Need ‡∏ø${totals.total}` });\r\n      return;\r\n    }\r\n\r\n    const order = await posOrderService.createOrder({\r\n      paymentMethod,\r\n      receivedAmount: paymentMethod === \"cash\" ? rec : null,\r\n      change: paymentMethod === \"cash\" ? Math.max(0, rec - totals.total) : null,\r\n      discount,\r\n      totals,\r\n      items: cart.items\r\n    });\r\n\r\n    setLastOrder(order);\r\n    setReceiptOpen(true);\r\n    setCheckoutOpen(false);\r\n    cart.clear();\r\n    setReceived(\"\");\r\n    toast.success(\"Order created\", { description: order.id });\r\n  }\r\n\r\n  return (\r\n    <Container className=\"py-10 space-y-6\">\r\n      <Card>\r\n        <CardHeader>\r\n          <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-3\">\r\n            <div>\r\n              <CardTitle>POS v1</CardTitle>\r\n              <CardDescription>\r\n                Scan barcode / lookup products / discount / checkout / receipt (localStorage).\r\n              </CardDescription>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <Badge variant=\"secondary\">Items: {cart.items.reduce((s, it) => s + (it.qty || 0), 0)}</Badge>\r\n              <Badge variant=\"outline\">Subtotal: ‡∏ø{totals.subtotal}</Badge>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n\r\n        <CardContent className=\"space-y-4\">\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            <ProductLookupModal onPick={onPickProduct} />\r\n            <Button onClick={() => cart.addItem({ id: \"demo\", name: \"Demo item\", category: \"Demo\", price: 99 }, 1)}>\r\n              Add Demo\r\n            </Button>\r\n\r\n            <Dialog open={checkoutOpen} onOpenChange={setCheckoutOpen}>\r\n              <DialogTrigger asChild>\r\n                <Button variant=\"outline\" disabled={!cart.items.length}>Checkout</Button>\r\n              </DialogTrigger>\r\n\r\n              <DialogContent className=\"max-w-xl\">\r\n                <DialogHeader>\r\n                  <DialogTitle>Checkout</DialogTitle>\r\n                  <DialogDescription>Confirm payment and create order.</DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <div className=\"space-y-3 text-sm\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-muted-foreground\">Subtotal</span>\r\n                    <span>‡∏ø{totals.subtotal}</span>\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-muted-foreground\">Discount</span>\r\n                    <span>- ‡∏ø{totals.discountValue}</span>\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between font-semibold\">\r\n                    <span>Total</span>\r\n                    <span>‡∏ø{totals.total}</span>\r\n                  </div>\r\n\r\n                  <div className=\"pt-2 space-y-2\">\r\n                    <div className=\"text-xs text-muted-foreground\">Payment method</div>\r\n                    <div className=\"flex gap-2\">\r\n                      <Button\r\n                        type=\"button\"\r\n                        variant={paymentMethod === \"cash\" ? \"default\" : \"outline\"}\r\n                        size=\"sm\"\r\n                        onClick={() => setPaymentMethod(\"cash\")}\r\n                      >\r\n                        Cash\r\n                      </Button>\r\n                      <Button\r\n                        type=\"button\"\r\n                        variant={paymentMethod === \"transfer\" ? \"default\" : \"outline\"}\r\n                        size=\"sm\"\r\n                        onClick={() => setPaymentMethod(\"transfer\")}\r\n                      >\r\n                        Transfer\r\n                      </Button>\r\n                      <Button\r\n                        type=\"button\"\r\n                        variant={paymentMethod === \"card\" ? \"default\" : \"outline\"}\r\n                        size=\"sm\"\r\n                        onClick={() => setPaymentMethod(\"card\")}\r\n                      >\r\n                        Card\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {paymentMethod === \"cash\" && (\r\n                    <div className=\"space-y-2\">\r\n                      <div className=\"text-xs text-muted-foreground\">Received amount</div>\r\n                      <Input\r\n                        id=\"received\"\r\n                        inputMode=\"numeric\"\r\n                        placeholder={`>= ${totals.total}`}\r\n                        value={received}\r\n                        onChange={(e) => setReceived(e.target.value)}\r\n                      />\r\n                      <div className=\"text-xs text-muted-foreground\">\r\n                        Change: ‡∏ø{Math.max(0, (Number(received) || 0) - totals.total)}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <DialogFooter>\r\n                  <Button variant=\"outline\" onClick={() => setCheckoutOpen(false)}>Cancel</Button>\r\n                  <Button onClick={checkoutConfirm}>Confirm</Button>\r\n                </DialogFooter>\r\n              </DialogContent>\r\n            </Dialog>\r\n\r\n            <Button variant=\"destructive\" onClick={() => { cart.clear(); toast(\"Cart cleared\"); }} disabled={!cart.items.length}>\r\n              Clear Cart\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Discount controls */}\r\n          <div className=\"border rounded-lg p-3 space-y-3\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"text-sm font-medium\">Discount</div>\r\n              <Badge variant=\"muted\">\r\n                - ‡∏ø{totals.discountValue} ({discountType === \"percent\" ? `${discountValue}%` : `‡∏ø${discountValue}`})\r\n              </Badge>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col md:flex-row gap-2\">\r\n              <select\r\n                className=\"h-10 rounded-md border border-input bg-background px-3 text-sm md:w-48\"\r\n                value={discountType}\r\n                onChange={(e) => setDiscountType(e.target.value)}\r\n                aria-label=\"Discount type\"\r\n              >\r\n                <option value=\"percent\">Percent (%)</option>\r\n                <option value=\"amount\">Amount (‡∏ø)</option>\r\n              </select>\r\n\r\n              <Input\r\n                id=\"discount\"\r\n                inputMode=\"numeric\"\r\n                placeholder={discountType === \"percent\" ? \"0 - 100\" : \"Amount\"}\r\n                value={discountValue}\r\n                onChange={(e) => setDiscountValue(e.target.value)}\r\n              />\r\n\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => { setDiscountValue(0); toast(\"Discount reset\"); }}\r\n              >\r\n                Reset\r\n              </Button>\r\n\r\n              <div className=\"ml-auto text-sm font-semibold flex items-center\">\r\n                Total: ‡∏ø{totals.total}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Cart table */}\r\n          <Table className=\"border rounded-lg\">\r\n            <TableRoot>\r\n              <TableHeader>\r\n                <TableRow>\r\n                  <TableHead>Item</TableHead>\r\n                  <TableHead className=\"w-28 text-right\">Qty</TableHead>\r\n                  <TableHead className=\"w-28 text-right\">Price</TableHead>\r\n                  <TableHead className=\"w-28 text-right\">Actions</TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                {cart.items.map((it) => (\r\n                  <TableRow key={it.id}>\r\n                    <TableCell className=\"font-medium\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span>{it.name}</span>\r\n                        {it.sku && <Badge variant=\"muted\">{it.sku}</Badge>}\r\n                      </div>\r\n                      <div className=\"text-xs text-muted-foreground\">{it.category || \"\"}</div>\r\n                    </TableCell>\r\n                    <TableCell className=\"text-right\">\r\n                      <div className=\"inline-flex items-center gap-1\">\r\n                        <Button size=\"sm\" variant=\"outline\" onClick={() => cart.dec(it.id)}>-</Button>\r\n                        <span className=\"min-w-6 text-center\">{it.qty}</span>\r\n                        <Button size=\"sm\" variant=\"outline\" onClick={() => cart.inc(it.id)}>+</Button>\r\n                      </div>\r\n                    </TableCell>\r\n                    <TableCell className=\"text-right\">‡∏ø{it.price}</TableCell>\r\n                    <TableCell className=\"text-right\">\r\n                      <Button size=\"sm\" variant=\"destructive\" onClick={() => cart.removeItem(it.id)}>Remove</Button>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))}\r\n\r\n                {!cart.items.length && (\r\n                  <TableRow>\r\n                    <TableCell colSpan={4} className=\"text-muted-foreground\">\r\n                      Scan a barcode or use lookup. Demo barcodes:\r\n                      <div className=\"mt-2 flex flex-wrap gap-2\">\r\n                        {[\"8850000000001\",\"8850000000002\",\"8850000000003\"].map((b) => (\r\n                          <Button key={b} size=\"sm\" variant=\"outline\" onClick={() => window.__emitScan?.(b)}>{b}</Button>\r\n                        ))}\r\n                      </div>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                )}\r\n              </TableBody>\r\n            </TableRoot>\r\n          </Table>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <ReceiptDialog open={receiptOpen} onOpenChange={setReceiptOpen} order={lastOrder} />\r\n    </Container>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\pages\\PosUI.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ShoppingCart' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"ShoppingCart"},"fix":{"range":[61,74],"text":""},"desc":"Remove unused variable 'ShoppingCart'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Search' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"Search"},"fix":{"range":[73,81],"text":""},"desc":"Remove unused variable 'Search'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ScanBarcode' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"ScanBarcode"},"fix":{"range":[81,94],"text":""},"desc":"Remove unused variable 'ScanBarcode'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Trash2' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":51,"suggestions":[{"messageId":"removeVar","data":{"varName":"Trash2"},"fix":{"range":[94,102],"text":""},"desc":"Remove unused variable 'Trash2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Loader2' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"Loader2"},"fix":{"range":[102,111],"text":""},"desc":"Remove unused variable 'Loader2'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Tag' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":65,"suggestions":[{"messageId":"removeVar","data":{"varName":"Tag"},"fix":{"range":[111,116],"text":""},"desc":"Remove unused variable 'Tag'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Package' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":67,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":74,"suggestions":[{"messageId":"removeVar","data":{"varName":"Package"},"fix":{"range":[116,125],"text":""},"desc":"Remove unused variable 'Package'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":99,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":110,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle"},"fix":{"range":[148,161],"text":""},"desc":"Remove unused variable 'CheckCircle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ReceiptModal' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"ReceiptModal"},"fix":{"range":[330,348],"text":""},"desc":"Remove unused variable 'ReceiptModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ProductLookupModal' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"ProductLookupModal"},"fix":{"range":[373,397],"text":""},"desc":"Remove unused variable 'ProductLookupModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'DailyReportModal' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"DailyReportModal"},"fix":{"range":[428,450],"text":""},"desc":"Remove unused variable 'DailyReportModal'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'PosUploadModal' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"PosUploadModal"},"fix":{"range":[479,499],"text":""},"desc":"Remove unused variable 'PosUploadModal'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { ShoppingCart, Search, ScanBarcode, Trash2, Loader2, Tag, Package, Percent, Ticket, Gift, CheckCircle } from 'lucide-react';\nimport { cn } from '../utils/cn';\nimport { useCart } from '../hooks/useCart';\nimport { useScanListener } from '../hooks/useScanListener';\nimport ReceiptModal from './ReceiptModal';\nimport ProductLookupModal from './ProductLookupModal';\nimport DailyReportModal from './DailyReportModal';\nimport PosUploadModal from \"./PosUploadModal\"; \nimport { posService } from '../services/posService';\nimport { useTheme } from '../context/ThemeContext';\n\nexport default function PosUI({ isDarkMode: externalDarkMode }) {\n  // BEGIN: FUNCTION ZONE (DO NOT TOUCH)\n  const theme = useTheme();\n  const { \n    cartItems, addToCart: originalAddToCart, decreaseItem, removeFromCart, clearCart, \n    summary, lastScanned, isLoading,\n    setManualItemDiscount, updateBillDiscount, billDiscount,\n    addCoupon, coupons, allowance, topup\n  } = useCart();\n\n  const [lastOrder, setLastOrder] = useState(null);\n  const [isSaving, setIsSaving] = useState(false);\n  const [isVoidMode, setIsVoidMode] = useState(false);\n  const [nextQty, setNextQty] = useState(1);\n  \n  // Theme State\n  const isDarkMode = externalDarkMode ?? theme?.isDark ?? false;\n\n  // Modal States\n  const [suggestions, setSuggestions] = useState([]);\n  const [showDropdown, setShowDropdown] = useState(false);\n\n  // --- Search UX Enhancements (Arrow select + Enter pick + Search Hits) ---\n  const [selectedSuggestionIndex, setSelectedSuggestionIndex] = useState(0);\n  const [searchHits, setSearchHits] = useState(() => {\n    try { return JSON.parse(localStorage.getItem(\"pos_search_hits\") || \"{}\"); }\n    catch { return {}; }\n  });\n\n  const bumpSearchHit = (sku) => {\n    try {\n      const key = (sku || \"\").toString();\n      if (!key) return;\n      const next = { ...(searchHits || {}) };\n      next[key] = (next[key] || 0) + 1;\n      setSearchHits(next);\n      localStorage.setItem(\"pos_search_hits\", JSON.stringify(next));\n    } catch (err) {\n      console.debug(\"persist search hit failed\", err);\n    }\n  };\n\n  const [showProductLookup, setShowProductLookup] = useState(false);\n  const [showReport, setShowReport] = useState(false);\n  const [showDiscountModal, setShowDiscountModal] = useState(false);\n  const [showUploadModal, setShowUploadModal] = useState(false);\n\n  // Discount Modal Inner State\n  const [activeTab, setActiveTab] = useState('discount'); \n  const [discountSubTab, setDiscountSubTab] = useState('bill'); \n  const [discountCheckedItems, setDiscountCheckedItems] = useState(new Set());\n  \n  // Coupon Input State\n  const [couponInput, setCouponInput] = useState({ type: '', value: '', code: '' });\n  const [showCouponInput, setShowCouponInput] = useState(false); \n\n  const lastItemDetail = lastScanned ? cartItems.find(i => (i.sku === lastScanned || i.id === lastScanned)) : null;\n  const totalDiscountDisplay = Math.abs((summary?.discount || 0) + (summary?.billDiscountAmount || 0) + (summary?.couponTotal || 0) + (summary?.allowance || 0));\n\n  // --- Handlers ---\n  const toggleDiscountCheck = (id) => {\n    setDiscountCheckedItems(prev => {\n        const next = new Set(prev);\n        if (next.has(id)) next.delete(id);\n        else next.add(id);\n        return next;\n    });\n  };\n\n  const handleScanAction = async (skuOrItem) => {\n    if (showCouponInput) {\n        setCouponInput(prev => ({ ...prev, code: typeof skuOrItem === 'string' ? skuOrItem : skuOrItem.sku }));\n        return;\n    }\n    const quantityToApply = nextQty;\n    \n    if (isVoidMode) {\n       const sku = typeof skuOrItem === 'string' ? skuOrItem : (skuOrItem.sku || skuOrItem.id);\n       decreaseItem(sku); \n       setShowDropdown(false);\n       setInputValue('');\n       if (nextQty !== 1) setNextQty(1);\n       return;\n    }\n    \n    if (typeof skuOrItem === 'string') {\n        try {\n          const item = await posService.scanItem(skuOrItem);\n          await originalAddToCart(item, quantityToApply);\n        } catch (e) { console.error(e); }\n    } else {\n        await originalAddToCart(skuOrItem, quantityToApply);\n    }\n    \n    if (nextQty !== 1) setNextQty(1);\n    setShowDropdown(false);\n  };\n\n  const handleCheckout = async () => {\n    if (cartItems.length === 0) return;\n    const orderData = { \n        items: [...cartItems], \n        summary: summary, \n        cashier: 'Staff #01', \n        device: 'POS-Web',\n        adjustments: { billDiscount, coupons, allowance, topup }\n    };\n    setIsSaving(true);\n    try {\n      const orderId = await posService.createOrder(orderData);\n      setLastOrder({ ...orderData, id: orderId, timestamp: new Date().toISOString() });\n      clearCart();\n    } catch (err) { alert('Error: ' + err.message); } \n    finally { setIsSaving(false); }\n  };\n\n  const scanEnabled = !showDiscountModal && !showCouponInput && !showProductLookup && !showReport && !showUploadModal && !lastOrder;\n\n  const { inputRef, inputValue, setInputValue, handleInputKeyDown, handleInputChange } = useScanListener(\n    handleScanAction,\n    scanEnabled ? handleCheckout : undefined,\n    () => setShowProductLookup(true),\n    { enabled: scanEnabled }\n  );\n\n  const handleInputKeyDownWrapper = async (e) => {\n    if (scanEnabled && showDropdown && suggestions.length > 0 && !isVoidMode) {\n      if (e.key === \"ArrowDown\") { e.preventDefault(); setSelectedSuggestionIndex(i => Math.min(i + 1, suggestions.length - 1)); return; }\n      if (e.key === \"ArrowUp\")   { e.preventDefault(); setSelectedSuggestionIndex(i => Math.max(i - 1, 0)); return; }\n      if (e.key === \"Enter\") {\n        e.preventDefault();\n        const sel = suggestions[selectedSuggestionIndex];\n        if (sel?.sku) {\n          bumpSearchHit(sel.sku);\n          await handleSelectSuggestion(sel.sku);\n        }\n        return;\n      }\n    }\n    handleInputKeyDown(e);\n  };\n\n  const onInputChangeWrapper = (e) => {\n    const val = e.target.value;\n    if (val.endsWith('*')) {\n      const numberPart = val.slice(0, -1);\n      if (/^\\d+$/.test(numberPart)) {\n        const qty = parseInt(numberPart, 10);\n        if (qty > 0) { setNextQty(qty); setInputValue(''); } \n        else { alert('‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0'); setInputValue(''); }\n      } else { setInputValue(''); }\n      return; \n    }\n    handleInputChange(e);\n  };\n\n  useEffect(() => {\n    const timer = setTimeout(async () => {\n      if (inputValue.length >= 2 && scanEnabled && !isVoidMode) { \n        const results = await posService.searchProducts(inputValue);\n        const hits = (() => {\n          try { return JSON.parse(localStorage.getItem(\"pos_search_hits\") || \"{}\"); } catch { return {}; }\n        })();\n        const sorted = [...(results || [])].sort((a, b) => {\n          const ak = (a?.sku || a?.id || \"\").toString();\n          const bk = (b?.sku || b?.id || \"\").toString();\n          const ah = hits?.[ak] || 0;\n          const bh = hits?.[bk] || 0;\n          if (bh !== ah) return bh - ah;\n          const an = (a?.name || \"\").toString();\n          const bn = (b?.name || \"\").toString();\n          return an.localeCompare(bn, undefined, { sensitivity: \"base\" });\n        });\n        setSuggestions(sorted);\n        setSelectedSuggestionIndex(0);\n        setShowDropdown(sorted.length > 0);\n      } else { setSuggestions([]); setShowDropdown(false); }\n    }, 300);\n    return () => clearTimeout(timer);\n  }, [inputValue, isVoidMode, scanEnabled]);\n\n  const handleSelectSuggestion = async (sku) => {\n    if (!sku) return;\n    setInputValue('');\n    setShowDropdown(false);\n    try {\n      const item = await posService.scanItem(sku);\n      await handleScanAction(item);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  const handleSaveCoupon = () => {\n      if (!couponInput.value && couponInput.type !== 'boots') return;\n      let finalValue = parseFloat(couponInput.value) || 0;\n      let finalCode = couponInput.code;\n      if (couponInput.type === 'boots') {\n          if (finalValue === 0) {\n             const numbers = finalCode.match(/\\d+/);\n             finalValue = numbers ? parseInt(numbers[0]) : 50; \n          }\n      }\n      addCoupon({ couponType: couponInput.type, couponValue: finalValue, couponCode: finalCode });\n      setShowCouponInput(false);\n  };\n  // END:   FUNCTION ZONE (DO NOT TOUCH)\n\n  // Unity Theme UI\n  return (\n    <div className={cn(\n        \"h-full min-h-0 w-full font-sans flex gap-4 p-4 overflow-visible relative transition-colors duration-300\",\n        isDarkMode ? \"bg-[#0f1014] text-slate-100\" : \"bg-[#f8fafc] text-slate-800\"\n    )} onClick={() => setShowDropdown(false)}>\n\n      {/* --- LEFT SIDE: SCANNER & FOOTAGE --- */}\n      <div className=\"w-[35%] max-w-[450px] flex flex-col gap-4 min-h-0\">\n        \n        {/* 1. SCAN PRODUCT BOX (Glass Card) */}\n        <div className={cn(\"glass-panel p-5 relative transition-all duration-300 z-20\", \n             isVoidMode && \"border-red-500/50 bg-red-500/5\"\n        )}>\n            <div className=\"flex justify-between items-center mb-4\">\n               <div className=\"flex items-center gap-2 text-slate-500 dark:text-slate-400\">\n                  <div className=\"p-1.5 rounded-lg bg-slate-100 dark:bg-white/10\">\n                     <ScanBarcode size={18} />\n                  </div>\n                  <span className=\"text-[11px] font-bold tracking-widest uppercase\">Scanner</span>\n               </div>\n               \n               {isVoidMode && <span className=\"text-[10px] font-bold text-white bg-red-500 px-2 py-1 rounded shadow-sm shadow-red-500/20\">VOID MODE</span>}\n               \n                <button \n                   onClick={() => { setIsVoidMode(!isVoidMode); if (scanEnabled) inputRef.current?.focus(); }}\n                   className={cn(\"px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border\", \n                      isVoidMode \n                        ? \"bg-white/10 text-red-500 border-red-500/30 hover:bg-red-500 hover:text-white\" \n                        : \"bg-slate-100 dark:bg-white/5 border-slate-200 dark:border-white/10 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-white/10\"\n                   )}\n                >\n                   {isVoidMode ? 'CANCEL VOID' : 'VOID ITEM'}\n                </button>\n            </div>\n            \n            <div className=\"relative group\">\n              <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none group-focus-within:text-blue-500 transition-colors\" size={20} />\n              <input \n                  ref={inputRef}\n                  value={inputValue}\n                  onChange={onInputChangeWrapper}\n                  onKeyDown={handleInputKeyDownWrapper}\n                  disabled={isLoading || lastOrder || isSaving || showDiscountModal || showCouponInput || showProductLookup || showReport || showUploadModal}\n                  type=\"text\" \n                  placeholder={isVoidMode ? \"Scan to remove...\" : \"Scan barcode...\"}\n                  autoComplete=\"off\"\n                  aria-label=\"Scan or search product\"\n                  className={cn(\n                    \"glass-input pl-12 pr-12 text-lg font-bold placeholder:font-medium placeholder:text-base\", \n                    isVoidMode && \"border-red-500/50 text-red-600 focus:border-red-500 focus:ring-red-500/30\"\n                  )}\n              />\n              {/* Qty Badge */}\n              {nextQty > 1 && (\n                    <div className=\"absolute top-1/2 -translate-y-1/2 right-3 bg-blue-500/10 border border-blue-500/30 text-blue-600 dark:text-blue-400 text-xs font-bold px-2 py-1 rounded-md shadow-sm animate-in zoom-in\">\n                       x{nextQty}\n                    </div>\n              )}\n            </div>\n\n            {/* Hint */}\n            <div className=\"mt-3 flex items-center gap-2 text-[10px] text-slate-400 dark:text-slate-500\">\n               <span className=\"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 px-1.5 py-0.5 rounded border border-yellow-500/20\">Tip</span> Enter number + * for quantity (e.g. 5*)\n            </div>\n            \n            {/* Search Dropdown (Glass) */}\n            {showDropdown && !isVoidMode && (\n              <div\n                className=\"absolute top-full left-0 right-0 mt-2 mx-1 rounded-2xl shadow-2xl overflow-hidden z-[80] max-h-[300px] overflow-y-auto bg-white/90 dark:bg-[#1e2025]/95 backdrop-blur-xl border border-slate-200/50 dark:border-white/10 pointer-events-auto\"\n                onClick={(e) => e.stopPropagation()}\n              >\n                {suggestions.map((item, idx) => (\n                  <div\n                    key={item.sku}\n                    onMouseEnter={() => setSelectedSuggestionIndex(idx)}\n                    onClick={() => { bumpSearchHit(item.sku); handleSelectSuggestion(item.sku); }}\n                    className={cn(\n                      \"p-3 border-b border-slate-100 dark:border-white/5 cursor-pointer flex justify-between items-center transition-colors\",\n                      idx === selectedSuggestionIndex\n                        ? \"bg-blue-50 dark:bg-white/5\"\n                        : \"hover:bg-slate-50 dark:hover:bg-white/5\"\n                    )}\n                  >\n                    <div><div className=\"font-bold text-slate-800 dark:text-slate-200 text-sm\">{item.name}</div><div className=\"text-[10px] font-mono text-slate-400\">{item.sku}</div></div>\n                    <div className=\"text-blue-600 dark:text-blue-400 font-bold text-sm\">‡∏ø{item.price}</div>\n                  </div>\n                ))}\n              </div>\n            )}\n        </div>\n\n        {/* 2. LAST SCANNED (Glass Card) */}\n        <div className=\"glass-panel flex-1 min-h-0 relative overflow-hidden flex flex-col items-center justify-center p-6 bg-gradient-to-b from-white/60 to-white/40 dark:from-white/5 dark:to-transparent\">\n             <div className=\"absolute top-4 left-4 flex items-center gap-2 text-slate-400/80\">\n                <Package size={16} />\n                <span className=\"text-[10px] font-bold tracking-widest uppercase\">Review</span>\n             </div>\n\n            {lastItemDetail ? (\n               <div className=\"text-center w-full animate-in slide-in-from-bottom-4 fade-in duration-300 relative z-10\">\n                  <div className=\"mb-6 relative inline-block\">\n                     <div className={cn(\"w-28 h-28 rounded-3xl flex items-center justify-center shadow-xl mx-auto border border-white/20 dark:border-white/5\", \n                        isVoidMode ? \"bg-red-500/10 text-red-500\" : \"bg-gradient-to-br from-blue-500/20 to-cyan-500/20 text-blue-600 dark:text-blue-400\"\n                     )}>\n                        <Package size={56} strokeWidth={1.5} />\n                     </div>\n                     <div className=\"absolute -bottom-3 -right-3 bg-slate-800 dark:bg-white text-white dark:text-slate-900 text-sm font-bold w-8 h-8 flex items-center justify-center rounded-xl shadow-lg border-2 border-slate-50 dark:border-[#0f1014]\">\n                        {lastItemDetail.qty}\n                     </div>\n                  </div>\n                  \n                  <h3 className=\"text-lg font-bold leading-tight mb-2 line-clamp-2 px-2 text-slate-800 dark:text-white\">\n                     {lastItemDetail.name}\n                  </h3>\n                  \n                  <div className=\"text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-br from-slate-800 to-slate-600 dark:from-white dark:to-slate-400 tracking-tight mt-2\">\n                     ‡∏ø{((lastItemDetail.calculatedTotal !== undefined ? lastItemDetail.calculatedTotal : (lastItemDetail.price * lastItemDetail.qty))).toLocaleString()}\n                  </div>\n                  <div className=\"text-xs font-mono text-slate-400 mt-2 bg-slate-100 dark:bg-white/5 px-2 py-1 rounded-md inline-block\">\n                     {lastItemDetail.sku}\n                  </div>\n               </div>\n            ) : (\n               <div className=\"flex flex-col items-center justify-center opacity-30 select-none\">\n                  <div className=\"w-20 h-20 rounded-full border-2 border-dashed border-slate-400 flex items-center justify-center mb-4\">\n                     <ScanBarcode size={32} />\n                  </div>\n                  <span className=\"text-sm font-bold uppercase tracking-widest\">Ready to Scan</span>\n               </div>\n            )}\n         </div>\n      </div>\n\n      {/* --- RIGHT SIDE: CART (Glass Panel) --- */}\n      <div className=\"glass-panel flex-1 flex flex-col min-h-0 overflow-hidden shadow-2xl relative\">\n         \n         {/* CART HEADER */}\n         <div className=\"grid grid-cols-12 px-6 py-4 text-[11px] font-bold uppercase tracking-wider text-slate-500 dark:text-slate-400 border-b border-slate-200/50 dark:border-white/5 bg-slate-50/50 dark:bg-white/5 backdrop-blur-sm z-20\">\n             <div className=\"col-span-1\">#</div>\n             <div className=\"col-span-4\">Item</div>\n             <div className=\"col-span-2 text-right\">Unit Price</div>\n             <div className=\"col-span-1 text-center\">Qty</div>\n             <div className=\"col-span-2 text-center\">Discount</div>\n             <div className=\"col-span-2 text-right\">Total</div>\n         </div>\n\n         {/* CART LIST */}\n         <div className=\"flex-1 overflow-y-auto px-2 py-2\">\n            {cartItems.length === 0 ? (\n                <div className=\"h-full flex flex-col items-center justify-center text-slate-300 dark:text-slate-700 pb-10 select-none\">\n                   <div className=\"w-24 h-24 rounded-full bg-slate-100 dark:bg-white/5 flex items-center justify-center mb-6\">\n                      <ShoppingCart size={40} className=\"opacity-50\" />\n                   </div>\n                   <p className=\"font-medium\">Cart is empty</p>\n                   <p className=\"text-xs mt-2 opacity-60\">Scan items to start transaction</p>\n                </div>\n            ) : (\n                cartItems.map((item, index) => {\n                    const lineTotal = item.calculatedTotal !== undefined ? item.calculatedTotal : (item.price * item.qty);\n                    const normalTotal = item.normalPrice || (item.price * item.qty);\n                    const discountVal = Math.max(0, normalTotal - lineTotal);\n\n                    return (\n                       <div key={item.id || item.sku} className=\"grid grid-cols-12 px-4 py-3.5 items-center text-sm group hover:bg-white/40 dark:hover:bg-white/5 rounded-xl transition-colors border-b border-transparent hover:border-slate-200/50 dark:hover:border-white/5\">\n                          <div className=\"col-span-1 text-slate-400 text-xs font-mono\">{cartItems.length - index}</div>\n                          \n                          <div className=\"col-span-4 pr-2\">\n                             <div className=\"font-bold text-slate-800 dark:text-slate-200 truncate\">{item.name}</div>\n                             <div className=\"flex items-center gap-2 mt-0.5\">\n                                <span className=\"text-[10px] text-slate-400 font-mono\">{item.sku}</span>\n                                {item.badgeText && <span className=\"text-[9px] bg-red-100 dark:bg-red-500/20 text-red-600 dark:text-red-400 px-1.5 rounded-sm font-bold uppercase\">{item.badgeText}</span>}\n                             </div>\n                          </div>\n                          \n                          <div className=\"col-span-2 text-right font-medium text-slate-600 dark:text-slate-400 font-mono\">\n                             {item.price.toLocaleString()}\n                          </div>\n                          \n                          <div className=\"col-span-1 flex justify-center\">\n                             <div className=\"w-8 h-8 rounded-lg flex items-center justify-center bg-white dark:bg-white/10 border border-slate-200 dark:border-white/5 text-xs font-bold shadow-sm\">\n                                {item.qty}\n                             </div>\n                          </div>\n                          \n                          <div className=\"col-span-2 text-center\">\n                              {discountVal > 0 ? (\n                                  <span className=\"text-[10px] text-red-500 bg-red-100 dark:bg-red-500/10 border border-red-200 dark:border-red-500/20 px-2 py-0.5 rounded-full font-bold\">\n                                      -{discountVal.toLocaleString()}\n                                  </span>\n                              ) : (\n                                  <span className=\"text-slate-300 dark:text-slate-700\">-</span>\n                              )}\n                          </div>\n\n                          <div className=\"col-span-2 text-right font-bold text-slate-800 dark:text-white font-mono text-base relative group-hover:pr-8 transition-all\">\n                             {lineTotal.toLocaleString()}\n                             \n                             {/* Delete Action (Hover) */}\n                             <button \n                                onClick={(e) => { e.stopPropagation(); removeFromCart(item.id || item.sku); }}\n                                className=\"absolute right-0 top-1/2 -translate-y-1/2 w-7 h-7 flex items-center justify-center bg-red-50 dark:bg-red-500/10 text-red-500 rounded-lg opacity-0 group-hover:opacity-100 hover:bg-red-500 hover:text-white transition-all shadow-sm\"\n                                title=\"Remove Item\"\n                             >\n                                <Trash2 size={14} />\n                             </button>\n                          </div>\n                       </div>\n                    );\n                })\n            )}\n         </div>\n\n         {/* FOOTER (Glass Gradient) */}\n         <div className=\"relative z-20 bg-white/80 dark:bg-[#15171e]/90 backdrop-blur-xl border-t border-slate-200 dark:border-white/10 p-5 shadow-[0_-5px_20px_rgba(0,0,0,0.05)]\">\n             <div className=\"flex justify-between items-end mb-5\">\n                  <div className=\"flex flex-col gap-1\">\n                      <div className=\"text-xs font-bold text-slate-400 uppercase tracking-widest\">Total (Items: {summary?.totalItems || 0})</div>\n                      {totalDiscountDisplay > 0 && (\n                         <div className=\"flex items-center gap-1.5 text-xs font-bold text-red-500 bg-red-50 dark:bg-red-500/10 px-2 py-1 rounded-md self-start\">\n                            <Tag size={12} />\n                            Saved ‡∏ø{totalDiscountDisplay.toLocaleString()}\n                         </div>\n                      )}\n                  </div>\n\n                  <div className=\"flex flex-col items-end\">\n                      <div className=\"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1\">Net Total</div>\n                      <div className=\"flex items-baseline gap-1 text-slate-800 dark:text-white leading-none\">\n                         <span className=\"text-2xl font-bold\">‡∏ø</span>\n                         <span className=\"text-5xl font-extrabold tracking-tighter\">\n                            {Number(summary?.netTotal || 0).toLocaleString(undefined, { minimumFractionDigits: 2 })}\n                         </span>\n                      </div>\n                  </div>\n             </div>\n\n             <div className=\"grid grid-cols-[auto_1fr] gap-3\">\n                 <button \n                    onClick={() => setShowDiscountModal(true)}\n                    className=\"btn-secondary px-4 min-w-[100px]\"\n                 >\n                    <Tag size={18} />\n                    <span>Discounts</span>\n                    {totalDiscountDisplay > 0 && <span className=\"w-2 h-2 rounded-full bg-red-500 ml-1\" />}\n                 </button>\n\n                 <button \n                    onClick={handleCheckout} \n                    disabled={cartItems.length === 0 || isLoading || isSaving}\n                    className=\"btn-primary w-full text-lg shadow-blue-500/25\"\n                 >\n                    {isSaving ? <Loader2 className=\"animate-spin\" size={24}/> : <ShoppingCart size={24} />}\n                    <span>Checkout</span>\n                    <kbd className=\"hidden md:inline-flex items-center h-6 px-2 ml-3 text-[10px] font-sans font-medium text-blue-100 bg-blue-500/20 rounded\">F12</kbd>\n                 </button>\n             </div>\n         </div>\n      </div>\n\n      {/* --- MODALS --- */}\n      {lastOrder && <ReceiptModal order={lastOrder} onClose={() => setLastOrder(null)} />}\n      {showProductLookup && <ProductLookupModal onClose={() => setShowProductLookup(false)} />}\n      {showReport && <DailyReportModal onClose={() => setShowReport(false)} />}\n      <PosUploadModal\n        open={showUploadModal}\n        onClose={() => setShowUploadModal(false)}\n        isDarkMode={isDarkMode}\n        pricingReady={true} \n      />\n\n      {/* Simplified Inline Modal for Discounts (Redesigned) */}\n      {showDiscountModal && (\n        <div className=\"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in zoom-in-95 duration-200\">\n            <div className=\"glass-panel w-full max-w-4xl h-[80vh] flex overflow-hidden shadow-2xl relative\">\n                \n                {/* Modal Sidebar */}\n                <div className=\"w-64 p-6 border-r border-slate-200 dark:border-white/10 bg-slate-50/50 dark:bg-black/20 flex flex-col gap-2\">\n                    <h2 className=\"text-xl font-bold mb-6 flex items-center gap-2 text-slate-800 dark:text-white\">\n                        <Tag size={20} className=\"text-blue-500\" /> Discounts\n                    </h2>\n                    \n                    {[\n                      { id: 'discount', label: 'General', icon: Percent },\n                      { id: 'coupon', label: 'Coupons', icon: Ticket },\n                      { id: 'allowance', label: 'Allowance', icon: Gift }\n                    ].map(tab => (\n                      <button \n                        key={tab.id}\n                        onClick={() => setActiveTab(tab.id)} \n                        className={cn(\"flex items-center gap-3 px-4 py-3 rounded-xl font-semibold transition-all text-sm\", \n                           activeTab === tab.id \n                             ? \"bg-blue-600 text-white shadow-md shadow-blue-500/20\" \n                             : \"text-slate-500 dark:text-slate-400 hover:bg-white dark:hover:bg-white/5\"\n                        )}\n                      >\n                        <tab.icon size={18}/> {tab.label}\n                      </button>\n                    ))}\n\n                    <div className=\"mt-auto\">\n                        <button onClick={() => setShowDiscountModal(false)} className=\"w-full py-3 rounded-xl font-bold bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-white/20 transition-colors\">\n                           Close\n                        </button>\n                    </div>\n                </div>\n\n                {/* Modal Content */}\n                <div className=\"flex-1 p-8 overflow-y-auto bg-white/50 dark:bg-black/20\">\n                    {activeTab === 'discount' && (\n                        <div>\n                            <div className=\"flex gap-4 mb-8 border-b border-slate-200 dark:border-white/10 pb-6\">\n                                <button onClick={() => setDiscountSubTab('bill')} className={cn(\"px-6 py-2.5 rounded-xl font-bold transition-all text-sm\", discountSubTab === 'bill' ? \"bg-slate-800 dark:bg-white text-white dark:text-slate-900 shadow-lg\" : \"text-slate-500 hover:bg-slate-100 dark:hover:bg-white/5\")}>Bill Discount</button>\n                                <button onClick={() => setDiscountSubTab('items')} className={cn(\"px-6 py-2.5 rounded-xl font-bold transition-all text-sm\", discountSubTab === 'items' ? \"bg-slate-800 dark:bg-white text-white dark:text-slate-900 shadow-lg\" : \"text-slate-500 hover:bg-slate-100 dark:hover:bg-white/5\")}>Item Discount</button>\n                            </div>\n\n                            {discountSubTab === 'bill' && (\n                                <div className=\"max-w-xs\">\n                                    <label className=\"block text-sm font-bold mb-3 text-slate-500 uppercase tracking-wide\">Percentage (%)</label>\n                                    <div className=\"flex gap-4 items-center\">\n                                        <input \n                                            type=\"number\" \n                                            value={billDiscount.percent} \n                                            onChange={(e) => updateBillDiscount(e.target.value)}\n                                            className=\"glass-input text-4xl font-bold py-4 text-center\"\n                                            placeholder=\"0\"\n                                        />\n                                        <div className=\"text-2xl font-bold text-slate-400\">%</div>\n                                    </div>\n                                </div>\n                            )}\n\n                            {discountSubTab === 'items' && (\n                                <div>\n                                    <h3 className=\"font-bold mb-4 text-sm text-slate-500 uppercase\">Select items to discount</h3>\n                                    <div className=\"space-y-3\">\n                                        {cartItems.map((item, idx) => {\n                                            const isChecked = discountCheckedItems.has(item.id || item.sku);\n                                            return (\n                                                <div key={idx} \n                                                     onClick={() => toggleDiscountCheck(item.id || item.sku)}\n                                                     className={cn(\"flex items-center gap-4 p-4 rounded-xl border cursor-pointer transition-all\", \n                                                        isChecked \n                                                          ? \"border-blue-500 bg-blue-50/50 dark:bg-blue-500/10\" \n                                                          : \"border-slate-200 dark:border-white/10 hover:border-blue-300 dark:hover:border-white/20\"\n                                                     )}\n                                                >\n                                                    <div className={cn(\"w-6 h-6 rounded border flex items-center justify-center transition-colors\", isChecked ? \"bg-blue-500 border-blue-500 text-white\" : \"border-slate-300 dark:border-slate-600\")}>\n                                                        {isChecked && <CheckCircle size={14} />}\n                                                    </div>\n                                                    <div className=\"flex-1\">\n                                                        <div className=\"font-bold text-slate-800 dark:text-white\">{item.name}</div>\n                                                        <div className=\"text-xs text-slate-400 font-mono\">{item.sku}</div>\n                                                    </div>\n                                                    <div className=\"font-bold text-slate-600 dark:text-slate-400\">‡∏ø{(item.price * item.qty).toLocaleString()}</div>\n                                                    \n                                                    {isChecked && (\n                                                        <div className=\"animate-in zoom-in ml-4\">\n                                                            <input \n                                                                type=\"number\" autoFocus\n                                                                onClick={(e) => e.stopPropagation()}\n                                                                value={item.manualDiscountPercent || ''}\n                                                                onChange={(e) => setManualItemDiscount(item.id || item.sku, e.target.value)}\n                                                                className=\"w-16 h-10 rounded-lg border-2 border-orange-400 text-center font-bold outline-none focus:ring-2 focus:ring-orange-200\"\n                                                                placeholder=\"%\"\n                                                            />\n                                                        </div>\n                                                    )}\n                                                </div>\n                                            );\n                                        })}\n                                        {cartItems.length === 0 && <p className=\"text-slate-400 text-center py-8\">Cart is empty</p>}\n                                    </div>\n                                </div>\n                            )}\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n      )}\n      \n      {/* Coupon Input Modal */}\n      {showCouponInput && (\n        <div className=\"fixed inset-0 z-[70] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4\">\n            <div className=\"glass-panel w-full max-w-md p-8 animate-in zoom-in-95\">\n                <h3 className=\"text-xl font-bold mb-6 text-slate-800 dark:text-white\">Add Coupon ({couponInput.type})</h3>\n                <div className=\"space-y-4\">\n                  <input \n                    className=\"glass-input\" \n                    placeholder=\"Coupon Code\" \n                    value={couponInput.code} \n                    onChange={e=>setCouponInput({...couponInput, code:e.target.value})} \n                    autoFocus\n                  />\n                  {couponInput.type !== 'boots' && (\n                     <input \n                       className=\"glass-input\" \n                       type=\"number\" \n                       placeholder=\"Value\" \n                       value={couponInput.value} \n                       onChange={e=>setCouponInput({...couponInput, value:e.target.value})} \n                     />\n                   )}\n                </div>\n                <div className=\"flex gap-3 mt-8\">\n                     <button onClick={()=>setShowCouponInput(false)} className=\"btn-secondary flex-1\">Cancel</button>\n                     <button onClick={handleSaveCoupon} className=\"btn-primary flex-1\">Apply Coupon</button>\n                </div>\n            </div>\n        </div>\n      )}\n\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\pages\\ProductSearchPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Search' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"Search"},"fix":{"range":[69,76],"text":""},"desc":"Remove unused variable 'Search'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'InfoCard' is defined but never used. Allowed unused vars must match /^_/u.","line":193,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":193,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"InfoCard"},"fix":{"range":[9641,10239],"text":""},"desc":"Remove unused variable 'InfoCard'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Icon' is defined but never used. Allowed unused args must match /^_/u.","line":193,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":193,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"Icon"},"fix":{"range":[9661,9672],"text":""},"desc":"Remove unused variable 'Icon'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState, useRef } from \"react\";\nimport { Search, Package, Tag, Barcode, Layers, Archive, Info } from \"lucide-react\";\nimport { posService } from \"../services/posService\";\nimport { cn } from \"../utils/cn\";\n\nexport default function ProductSearchPage() {\n  // BEGIN: FUNCTION ZONE (DO NOT TOUCH)\n  const [keyword, setKeyword] = useState(\"\");\n  const [results, setResults] = useState([]);\n  const [selectedItem, setSelectedItem] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const inputRef = useRef(null);\n\n  useEffect(() => {\n    inputRef.current?.focus();\n  }, []);\n\n  useEffect(() => {\n    const t = setTimeout(async () => {\n      if (keyword.length >= 2) {\n        setLoading(true);\n        try {\n          const items = await posService.searchProducts(keyword);\n          setResults(items);\n          if (items.length > 0) {\n            setSelectedItem(items[0]);\n          } else {\n            setSelectedItem(null);\n          }\n        } catch (e) {\n          console.error(e);\n        } finally {\n          setLoading(false);\n        }\n      } else {\n        setResults([]);\n        setSelectedItem(null);\n      }\n    }, 250);\n    return () => clearTimeout(t);\n  }, [keyword]);\n  // END:   FUNCTION ZONE (DO NOT TOUCH)\n\n  // Unity Theme Redesign\n  return (\n    <div className=\"h-full flex flex-col gap-6 p-6 md:p-8 animate-fade-in-up\">\n      {/* Header & Search */}\n      <div className=\"flex flex-col gap-4\">\n        <div className=\"flex items-center gap-3\">\n           <div className=\"h-12 w-12 rounded-2xl bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/30 flex items-center justify-center\">\n             <Search size={22} />\n           </div>\n           <div>\n             <h1 className=\"text-2xl font-bold text-slate-800 dark:text-white\">Product Search</h1>\n             <p className=\"text-sm text-slate-500 dark:text-slate-400\">Find items by name, barcode, or SKU ID</p>\n           </div>\n        </div>\n        \n        <div className=\"relative max-w-2xl\">\n           <div className=\"absolute left-4 top-1/2 -translate-y-1/2 p-1.5 rounded-lg bg-slate-100 dark:bg-white/10 text-slate-500 dark:text-slate-400\">\n             <Search size={16} />\n           </div>\n           <input\n             ref={inputRef}\n             value={keyword}\n             onChange={(e) => setKeyword(e.target.value)}\n             placeholder=\"Search products...\"\n             aria-label=\"Search products\"\n             className=\"glass-input pl-14 text-lg font-medium\"\n           />\n           {loading && (\n             <div className=\"absolute right-4 top-1/2 -translate-y-1/2\">\n               <span className=\"flex h-3 w-3 relative\">\n                  <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75\"></span>\n                  <span className=\"relative inline-flex rounded-full h-3 w-3 bg-blue-500\"></span>\n               </span>\n             </div>\n           )}\n        </div>\n      </div>\n\n      <div className=\"flex-1 grid lg:grid-cols-[380px_1fr] gap-6 min-h-0\">\n        \n        {/* Results List */}\n        <div className=\"glass-panel flex flex-col overflow-hidden\">\n           <div className=\"p-4 border-b border-slate-200/50 dark:border-white/5 bg-slate-50/50 dark:bg-white/5 backdrop-blur-sm\">\n             <div className=\"text-xs font-bold uppercase tracking-widest text-slate-500 dark:text-slate-400\">\n               Results ({results.length})\n             </div>\n           </div>\n           \n           <div className=\"flex-1 overflow-y-auto p-2 space-y-1\">\n             {loading ? (\n                <div className=\"py-12 flex flex-col items-center text-slate-400 gap-3\">\n                   <div className=\"w-8 h-8 rounded-full border-2 border-slate-200 border-t-blue-500 animate-spin\" />\n                   <span className=\"text-sm font-medium\">Searching database...</span>\n                </div>\n             ) : results.length === 0 ? (\n                <div className=\"py-20 flex flex-col items-center text-slate-400 gap-4 opacity-70\">\n                   <Search size={48} strokeWidth={1.5} />\n                   <span className=\"text-sm font-medium\">{keyword.length < 2 ? \"Enter keywords to start\" : \"No products found\"}</span>\n                </div>\n             ) : (\n                results.map((item) => (\n                   <button\n                     key={item.sku}\n                     onClick={() => setSelectedItem(item)}\n                     className={cn(\n                       \"w-full text-left p-3 rounded-xl transition-all border border-transparent group relative overflow-hidden\",\n                       selectedItem?.sku === item.sku\n                         ? \"bg-blue-600 text-white shadow-md shadow-blue-500/20\"\n                         : \"hover:bg-slate-100 dark:hover:bg-white/5 text-slate-700 dark:text-slate-300\"\n                     )}\n                   >\n                     <div className=\"flex justify-between items-start gap-2 relative z-10\">\n                        <div className=\"flex-1 min-w-0\">\n                           <div className=\"font-bold truncate text-sm\">{item.ProductDesc || item.name}</div>\n                           <div className={cn(\"text-xs font-mono mt-0.5 flex items-center gap-1\", selectedItem?.sku === item.sku ? \"text-blue-200\" : \"text-slate-400\")}>\n                             <Barcode size={10} /> {item.sku}\n                           </div>\n                        </div>\n                        <div className={cn(\"font-bold text-sm\", selectedItem?.sku === item.sku ? \"text-white\" : \"text-blue-600 dark:text-blue-400\")}>\n                           ‡∏ø{item.SellPrice?.toLocaleString()}\n                        </div>\n                     </div>\n                   </button>\n                ))\n             )}\n           </div>\n        </div>\n\n        {/* Detail View */}\n        <div className=\"glass-panel text-slate-800 dark:text-white relative overflow-hidden flex flex-col\">\n            {selectedItem ? (\n               <div className=\"h-full flex flex-col p-6 md:p-8 overflow-y-auto\">\n                  \n                  {/* Hero Header */}\n                  <div className=\"flex items-start justify-between mb-8\">\n                     <div>\n                        <div className=\"flex items-center gap-2 mb-2\">\n                           {selectedItem.ProductStatus === \"Active\" ? (\n                              <span className=\"px-2 py-0.5 rounded-full bg-green-500/10 text-green-600 dark:text-green-400 text-[10px] font-bold uppercase tracking-wide border border-green-500/20\">Active</span>\n                           ) : (\n                              <span className=\"px-2 py-0.5 rounded-full bg-slate-100 text-slate-500 text-[10px] font-bold uppercase tracking-wide\">Inactive</span>\n                           )}\n                           <span className=\"text-xs text-slate-400 font-mono\">#{selectedItem.sku}</span>\n                        </div>\n                        <h2 className=\"text-3xl md:text-4xl font-bold leading-tight\">{selectedItem.ProductDesc || selectedItem.name}</h2>\n                     </div>\n                     \n                     <div className=\"text-right\">\n                        <div className=\"text-sm text-slate-500 dark:text-slate-400 uppercase font-bold tracking-wider mb-1\">Price</div>\n                        <div className=\"text-4xl font-bold text-blue-600 dark:text-blue-400 tracking-tight\">\n                           ‡∏ø{selectedItem.SellPrice?.toLocaleString()}\n                        </div>\n                     </div>\n                  </div>\n\n                  {/* Info Grid */}\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8\">\n                     <InfoCard icon={Barcode} label=\"Barcode\" value={selectedItem.barcode} />\n                     <InfoCard icon={Layers} label=\"Department\" value={selectedItem.DeptDesc || selectedItem.dept} />\n                     <InfoCard icon={Tag} label=\"Class\" value={selectedItem.class} />\n                     <InfoCard icon={Package} label=\"Brand\" value={selectedItem.brand_print} />\n                     <InfoCard icon={Archive} label=\"Merchandise\" value={selectedItem.merchandise} />\n                     <InfoCard icon={Info} label=\"Tax Type\" value={selectedItem.tax_print} />\n                  </div>\n\n                  {/* Actions / Scannable Area Placeholder */}\n                  <div className=\"mt-auto p-6 rounded-2xl bg-slate-50 dark:bg-white/5 border border-dashed border-slate-300 dark:border-white/10 flex flex-col items-center justify-center text-center gap-2\">\n                      <Barcode size={48} className=\"opacity-20\" />\n                      <div className=\"text-sm font-bold text-slate-400\">Scan Code Visualization</div>\n                      <div className=\"text-xs font-mono text-slate-300\">{selectedItem.barcode || selectedItem.sku}</div>\n                  </div>\n\n               </div>\n            ) : (\n               <div className=\"h-full flex flex-col items-center justify-center text-slate-400 opacity-60\">\n                  <div className=\"w-24 h-24 rounded-3xl bg-slate-100 dark:bg-white/5 flex items-center justify-center mb-6 rotate-12\">\n                     <Package size={48} strokeWidth={1} />\n                  </div>\n                  <h3 className=\"text-xl font-bold text-slate-600 dark:text-slate-300\">Select a Product</h3>\n                  <p className=\"max-w-xs text-center mt-2\">Choose an item from the list to view detailed specifications and pricing.</p>\n               </div>\n            )}\n        </div>\n\n      </div>\n    </div>\n  );\n}\n\nfunction InfoCard({ icon: Icon, label, value }) {\n  return (\n    <div className=\"p-4 rounded-xl bg-slate-50/50 dark:bg-white/5 border border-slate-100 dark:border-white/5 flex items-start gap-3\">\n       <div className=\"p-2 rounded-lg bg-white dark:bg-black/20 text-slate-400 shadow-sm\">\n          <Icon size={16} />\n       </div>\n       <div>\n          <div className=\"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5\">{label}</div>\n          <div className=\"font-semibold text-slate-800 dark:text-slate-200 text-sm truncate\">{value || \"-\"}</div>\n       </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\pages\\ProductsPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Container' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"Container"},"fix":{"range":[33,82],"text":""},"desc":"Remove unused variable 'Container'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Card' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"Card"},"fix":{"range":[93,98],"text":""},"desc":"Remove unused variable 'Card'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardHeader' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardHeader"},"fix":{"range":[97,109],"text":""},"desc":"Remove unused variable 'CardHeader'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardTitle' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardTitle"},"fix":{"range":[109,120],"text":""},"desc":"Remove unused variable 'CardTitle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardDescription' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardDescription"},"fix":{"range":[120,137],"text":""},"desc":"Remove unused variable 'CardDescription'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardContent' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":56,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":67,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardContent"},"fix":{"range":[137,150],"text":""},"desc":"Remove unused variable 'CardContent'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Button' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"Button"},"fix":{"range":[183,231],"text":""},"desc":"Remove unused variable 'Button'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { Container } from \"@/components/ui/grid\";\r\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { productService } from \"@/features/products/services/productService\";\r\n\r\nexport function ProductsPage() {\r\n  const [items, setItems] = React.useState([]);\r\n\r\n  async function load() {\r\n    const res = await productService.listProducts({ q: \"\" });\r\n    setItems(res.items);\r\n  }\r\n\r\n  React.useEffect(() => { load(); }, []);\r\n\r\n  return (\r\n    <Container className=\"py-10 space-y-6\">\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>Products (Skeleton)</CardTitle>\r\n          <CardDescription>Service adapter stub in place. Replace with Firestore later.</CardDescription>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-4\">\r\n          <div className=\"flex gap-2\">\r\n            <Button onClick={load}>Reload</Button>\r\n            <Button variant=\"outline\" onClick={() => alert(\"Next: import products + categories\")}>Next Step</Button>\r\n          </div>\r\n\r\n          <ul className=\"space-y-2\">\r\n            {items.map((p) => (\r\n              <li key={p.id} className=\"border rounded-md px-3 py-2\">\r\n                <div className=\"text-sm font-medium\">{p.name}</div>\r\n                <div className=\"text-xs text-muted-foreground\">{p.category} ‚Ä¢ ‡∏ø{p.price}</div>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n\r\n          {!items.length && (\r\n            <div className=\"text-sm text-muted-foreground\">No products yet (stub returns demo data).</div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    </Container>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\pages\\ReportPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,18],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'FileText' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"FileText"},"fix":{"range":[36,45],"text":""},"desc":"Remove unused variable 'FileText'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'BarChart3' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"BarChart3"},"fix":{"range":[44,55],"text":""},"desc":"Remove unused variable 'BarChart3'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { FileText, BarChart3 } from 'lucide-react';\n\nexport default function ReportPage() {\n  return (\n    <div className=\"h-full p-6 md:p-8 animate-fade-in-up\">\n      <div className=\"flex items-center justify-between mb-8\">\n         <div className=\"flex items-center gap-3\">\n             <div className=\"h-12 w-12 rounded-2xl bg-gradient-to-br from-purple-500 to-indigo-600 text-white shadow-lg shadow-purple-500/30 flex items-center justify-center\">\n                 <FileText size={24} />\n             </div>\n             <div>\n                 <h1 className=\"text-2xl font-bold text-slate-800 dark:text-white\">Reports & Analytics</h1>\n                 <p className=\"text-sm text-slate-500 dark:text-slate-400\">View sales performance and generate statements</p>\n             </div>\n         </div>\n      </div>\n\n      <div className=\"glass-panel p-12 flex flex-col items-center justify-center min-h-[400px] text-center\">\n          <div className=\"w-20 h-20 rounded-full bg-slate-100 dark:bg-white/5 flex items-center justify-center mb-6\">\n              <BarChart3 size={32} className=\"text-slate-400\" />\n          </div>\n          <h2 className=\"text-xl font-bold text-slate-800 dark:text-white mb-2\">Reporting Dashboard Coming Soon</h2>\n          <p className=\"text-slate-500 dark:text-slate-400 max-w-md mb-8\">\n              Advanced analytics, daily sales summaries, and exportable PDF reports will be available in the next update.\n          </p>\n          \n          <div className=\"flex gap-4 opacity-50 pointer-events-none\">\n              <div className=\"h-32 w-24 rounded-lg bg-slate-100 dark:bg-white/5 border border-dashed border-slate-300 dark:border-white/10\"></div>\n              <div className=\"h-32 w-24 rounded-lg bg-slate-100 dark:bg-white/5 border border-dashed border-slate-300 dark:border-white/10\"></div>\n              <div className=\"h-32 w-24 rounded-lg bg-slate-100 dark:bg-white/5 border border-dashed border-slate-300 dark:border-white/10\"></div>\n          </div>\n      </div>\n    </div>\n  );\n}\n\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\pages\\ReportsPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,23],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Container' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"Container"},"fix":{"range":[33,82],"text":""},"desc":"Remove unused variable 'Container'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Card' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"Card"},"fix":{"range":[93,98],"text":""},"desc":"Remove unused variable 'Card'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardHeader' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardHeader"},"fix":{"range":[97,109],"text":""},"desc":"Remove unused variable 'CardHeader'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardTitle' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardTitle"},"fix":{"range":[109,120],"text":""},"desc":"Remove unused variable 'CardTitle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardDescription' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardDescription"},"fix":{"range":[120,137],"text":""},"desc":"Remove unused variable 'CardDescription'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardContent' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":56,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":67,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardContent"},"fix":{"range":[137,150],"text":""},"desc":"Remove unused variable 'CardContent'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { Container } from \"@/components/ui/grid\";\r\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent } from \"@/components/ui/card\";\r\n\r\nexport function ReportsPage() {\r\n  return (\r\n    <Container className=\"py-10\">\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>Reports (Skeleton)</CardTitle>\r\n          <CardDescription>Next: daily report + cashier report.</CardDescription>\r\n        </CardHeader>\r\n        <CardContent className=\"text-sm text-muted-foreground\">\r\n          Placeholder page.\r\n        </CardContent>\r\n      </Card>\r\n    </Container>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\pages\\SettingsPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,23],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Container' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"Container"},"fix":{"range":[33,82],"text":""},"desc":"Remove unused variable 'Container'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'Card' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"Card"},"fix":{"range":[93,98],"text":""},"desc":"Remove unused variable 'Card'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardHeader' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardHeader"},"fix":{"range":[97,109],"text":""},"desc":"Remove unused variable 'CardHeader'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardTitle' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardTitle"},"fix":{"range":[109,120],"text":""},"desc":"Remove unused variable 'CardTitle'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardDescription' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":54,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardDescription"},"fix":{"range":[120,137],"text":""},"desc":"Remove unused variable 'CardDescription'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'CardContent' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":56,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":67,"suggestions":[{"messageId":"removeVar","data":{"varName":"CardContent"},"fix":{"range":[137,150],"text":""},"desc":"Remove unused variable 'CardContent'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { Container } from \"@/components/ui/grid\";\r\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent } from \"@/components/ui/card\";\r\n\r\nexport function SettingsPage() {\r\n  return (\r\n    <Container className=\"py-10\">\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>Settings (Skeleton)</CardTitle>\r\n          <CardDescription>Next: store profile, devices, printers.</CardDescription>\r\n        </CardHeader>\r\n        <CardContent className=\"text-sm text-muted-foreground\">\r\n          Placeholder page.\r\n        </CardContent>\r\n      </Card>\r\n    </Container>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\pages\\UserManagementPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,13],"text":""},"desc":"Remove unused variable 'React'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { collection, getDocs, limit, query, where } from \"firebase/firestore\";\nimport { db } from \"../firebase\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { createManagedUser, updateManagedUser } from \"../services/authService\";\n\nconst ROLE_OPTIONS = [\"admin\", \"SM-SGM\", \"user\"];\n\nexport default function UserManagementPage() {\n  const { firebaseUser, role } = useAuth();\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [form, setForm] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    role: \"user\",\n    allowedMenusText: \"\",\n  });\n\n  const canManage = role === \"admin\" || role === \"SM-SGM\";\n\n  const scopeQuery = useMemo(() => {\n    const base = collection(db, \"users\");\n    if (role === \"SM-SGM\" && firebaseUser && firebaseUser.uid) {\n      return query(base, where(\"createdByUid\", \"==\", firebaseUser.uid), limit(200));\n    }\n    return query(base, limit(200));\n  }, [role, firebaseUser]);\n\n  const load = useCallback(async () => {\n    setError(\"\");\n    setLoading(true);\n    try {\n      const snap = await getDocs(scopeQuery);\n      const rows = [];\n      snap.forEach((d) => rows.push(d.data()));\n      rows.sort((a, b) => String(a.username || \"\").localeCompare(String(b.username || \"\")));\n      setItems(rows);\n    } catch (err) {\n      setError(err && err.message ? err.message : \"Failed to load users\");\n    } finally {\n      setLoading(false);\n    }\n  }, [scopeQuery]);\n\n  useEffect(() => {\n    if (!canManage) return;\n    load();\n  }, [canManage, load]);\n\n  async function onCreate(e) {\n    e.preventDefault();\n    setError(\"\");\n    try {\n      const allowedMenus = String(form.allowedMenusText || \"\")\n        .split(\",\")\n        .map((s) => s.trim())\n        .filter(Boolean);\n\n      await createManagedUser({\n        username: form.username,\n        email: form.email,\n        password: form.password,\n        role: form.role,\n        allowedMenus,\n      });\n\n      setForm({ username: \"\", email: \"\", password: \"\", role: \"user\", allowedMenusText: \"\" });\n      await load();\n    } catch (err) {\n      setError(err && err.message ? err.message : \"Create user failed\");\n    }\n  }\n\n  async function onQuickUpdate(u, patch) {\n    setError(\"\");\n    try {\n      await updateManagedUser({ uid: u.uid, ...patch });\n      await load();\n    } catch (err) {\n      setError(err && err.message ? err.message : \"Update failed\");\n    }\n  }\n\n  if (!canManage) {\n    return <div style={{ padding: 16 }}>Access denied.</div>;\n  }\n\n  return (\n    <div style={{ padding: 16 }}>\n      <h2>User Management</h2>\n      {error ? <div style={{ color: \"crimson\", margin: \"10px 0\" }}>{error}</div> : null}\n\n      <div style={{ border: \"1px solid #ddd\", padding: 12, marginBottom: 16 }}>\n        <h3 style={{ marginTop: 0 }}>Create User</h3>\n        <form onSubmit={onCreate}>\n          <div style={{ display: \"grid\", gridTemplateColumns: \"1fr 1fr\", gap: 10 }}>\n            <div>\n              <label>username</label>\n              <input\n                value={form.username}\n                onChange={(e) => setForm((s) => ({ ...s, username: e.target.value }))}\n                style={{ width: \"100%\", padding: 8 }}\n              />\n            </div>\n            <div>\n              <label>email</label>\n              <input\n                value={form.email}\n                onChange={(e) => setForm((s) => ({ ...s, email: e.target.value }))}\n                style={{ width: \"100%\", padding: 8 }}\n              />\n            </div>\n            <div>\n              <label>password</label>\n              <input\n                value={form.password}\n                onChange={(e) => setForm((s) => ({ ...s, password: e.target.value }))}\n                type=\"password\"\n                style={{ width: \"100%\", padding: 8 }}\n              />\n            </div>\n            <div>\n              <label>role</label>\n              <select\n                value={form.role}\n                onChange={(e) => setForm((s) => ({ ...s, role: e.target.value }))}\n                style={{ width: \"100%\", padding: 8 }}\n              >\n                {ROLE_OPTIONS.map((r) => (\n                  <option key={r} value={r}>\n                    {r}\n                  </option>\n                ))}\n              </select>\n            </div>\n          </div>\n          <div style={{ marginTop: 10 }}>\n            <label>allowedMenus (comma-separated)</label>\n            <input\n              value={form.allowedMenusText}\n              onChange={(e) => setForm((s) => ({ ...s, allowedMenusText: e.target.value }))}\n              style={{ width: \"100%\", padding: 8 }}\n              placeholder=\"e.g. dashboard,inventory,reports\"\n            />\n          </div>\n          <button style={{ marginTop: 10, padding: \"8px 12px\" }} type=\"submit\">\n            Create\n          </button>\n        </form>\n      </div>\n\n      <div style={{ display: \"flex\", alignItems: \"center\", gap: 10 }}>\n        <h3 style={{ margin: 0 }}>Users</h3>\n        <button onClick={load} disabled={loading} style={{ padding: \"6px 10px\" }}>\n          {loading ? \"Loading...\" : \"Refresh\"}\n        </button>\n      </div>\n\n      <div style={{ marginTop: 10, overflowX: \"auto\" }}>\n        <table style={{ width: \"100%\", borderCollapse: \"collapse\" }}>\n          <thead>\n            <tr>\n              <th style={{ textAlign: \"left\", borderBottom: \"1px solid #ddd\", padding: 8 }}>username</th>\n              <th style={{ textAlign: \"left\", borderBottom: \"1px solid #ddd\", padding: 8 }}>email</th>\n              <th style={{ textAlign: \"left\", borderBottom: \"1px solid #ddd\", padding: 8 }}>role</th>\n              <th style={{ textAlign: \"left\", borderBottom: \"1px solid #ddd\", padding: 8 }}>allowedMenus</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((u) => (\n              <tr key={u.uid}>\n                <td style={{ borderBottom: \"1px solid #eee\", padding: 8 }}>{u.username}</td>\n                <td style={{ borderBottom: \"1px solid #eee\", padding: 8 }}>{u.email}</td>\n                <td style={{ borderBottom: \"1px solid #eee\", padding: 8 }}>\n                  <select\n                    value={u.role || \"user\"}\n                    onChange={(e) => onQuickUpdate(u, { role: e.target.value })}\n                    style={{ padding: 6 }}\n                  >\n                    {ROLE_OPTIONS.map((r) => (\n                      <option key={r} value={r}>\n                        {r}\n                      </option>\n                    ))}\n                  </select>\n                </td>\n                <td style={{ borderBottom: \"1px solid #eee\", padding: 8 }}>\n                  <input\n                    defaultValue={Array.isArray(u.allowedMenus) ? u.allowedMenus.join(\",\") : \"\"}\n                    onBlur={(e) =>\n                      onQuickUpdate(u, {\n                        allowedMenus: String(e.target.value || \"\")\n                          .split(\",\")\n                          .map((s) => s.trim())\n                          .filter(Boolean),\n                      })\n                    }\n                    style={{ width: 320, padding: 6 }}\n                  />\n                </td>\n              </tr>\n            ))}\n            {items.length === 0 ? (\n              <tr>\n                <td colSpan={4} style={{ padding: 12, color: \"#666\" }}>\n                  No users found in scope.\n                </td>\n              </tr>\n            ) : null}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\providers\\ThemeProvider.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\router\\AppRouter.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"React"},"fix":{"range":[7,23],"text":""},"desc":"Remove unused variable 'React'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'RouterProvider' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"RouterProvider"},"fix":{"range":[61,77],"text":""},"desc":"Remove unused variable 'RouterProvider'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'AppShell' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"AppShell"},"fix":{"range":[106,162],"text":""},"desc":"Remove unused variable 'AppShell'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'HomePage' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"HomePage"},"fix":{"range":[166,210],"text":""},"desc":"Remove unused variable 'HomePage'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'PosPage' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"PosPage"},"fix":{"range":[212,254],"text":""},"desc":"Remove unused variable 'PosPage'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ProductsPage' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"ProductsPage"},"fix":{"range":[256,308],"text":""},"desc":"Remove unused variable 'ProductsPage'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'OrdersPage' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"OrdersPage"},"fix":{"range":[310,358],"text":""},"desc":"Remove unused variable 'OrdersPage'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'ReportsPage' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"ReportsPage"},"fix":{"range":[360,410],"text":""},"desc":"Remove unused variable 'ReportsPage'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'SettingsPage' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"SettingsPage"},"fix":{"range":[412,464],"text":""},"desc":"Remove unused variable 'SettingsPage'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'NotFoundPage' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"NotFoundPage"},"fix":{"range":[466,518],"text":""},"desc":"Remove unused variable 'NotFoundPage'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\r\nimport { createBrowserRouter, RouterProvider } from \"react-router-dom\";\r\nimport { AppShell } from \"@/components/layout/AppShell\";\r\n\r\nimport { HomePage } from \"@/pages/HomePage\";\r\nimport { PosPage } from \"@/pages/PosPage\";\r\nimport { ProductsPage } from \"@/pages/ProductsPage\";\r\nimport { OrdersPage } from \"@/pages/OrdersPage\";\r\nimport { ReportsPage } from \"@/pages/ReportsPage\";\r\nimport { SettingsPage } from \"@/pages/SettingsPage\";\r\nimport { NotFoundPage } from \"@/pages/NotFoundPage\";\r\n\r\nconst router = createBrowserRouter([\r\n  {\r\n    path: \"/\",\r\n    element: <AppShell />,\r\n    children: [\r\n      { index: true, element: <HomePage /> },\r\n      { path: \"pos\", element: <PosPage /> },\r\n      { path: \"products\", element: <ProductsPage /> },\r\n      { path: \"orders\", element: <OrdersPage /> },\r\n      { path: \"reports\", element: <ReportsPage /> },\r\n      { path: \"settings\", element: <SettingsPage /> },\r\n      { path: \"*\", element: <NotFoundPage /> }\r\n    ]\r\n  }\r\n]);\r\n\r\nexport function AppRouter() {\r\n  return <RouterProvider router={router} />;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\services\\authService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\services\\dataService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\services\\firestoreService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\services\\posService.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'orderData' is defined but never used. Allowed unused args must match /^_/u.","line":377,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":377,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"orderData"},"fix":{"range":[13237,13246],"text":""},"desc":"Remove unused variable 'orderData'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { db } from '../firebase';\nimport { functions } from '../firebase';\nimport { collection, doc, getDoc, getDocs, setDoc, writeBatch, getCountFromServer, serverTimestamp, query, limit, where/* , orderBy, startAt, endAt */ } from 'firebase/firestore';\nimport { httpsCallable } from 'firebase/functions';\nimport * as XLSX from 'xlsx';\n\n// --- Helpers ---\nconst generateKeywords = (text) => {\n  if (!text) return [];\n  const keywords = new Set();\n  const words = text.toUpperCase().split(/[\\s\\-/().]+/);\n  words.forEach(word => {\n    const cleanWord = word.trim();\n    if (cleanWord.length < 2) return;\n    keywords.add(cleanWord);\n    let temp = '';\n    for (let i = 0; i < cleanWord.length; i++) {\n      temp += cleanWord[i];\n      if (temp.length >= 3) keywords.add(temp);\n    }\n  });\n  return Array.from(keywords);\n};\n\nconst calculateOrderFn = httpsCallable(functions, 'calculateOrder');\nlet __PRODUCT_ID_CACHE__ = null;\nlet __PRODUCT_ID_CACHE_AT__ = 0;\nlet __PRODUCT_DATE_CACHE__ = null;\nlet __PRODUCT_DATE_CACHE_AT__ = 0;\nconst PRODUCT_ID_CACHE_TTL_MS = 10 * 60 * 1000; // 10 minutes\n\nasync function getProductIdSetCached() {\n  const now = Date.now();\n  if (__PRODUCT_ID_CACHE__ && (now - __PRODUCT_ID_CACHE_AT__) < PRODUCT_ID_CACHE_TTL_MS) {\n    return __PRODUCT_ID_CACHE__;\n  }\n  const ids = new Set();\n  const qs = await getDocs(collection(db, 'products'));\n  qs.forEach((d) => ids.add(d.id));\n  __PRODUCT_ID_CACHE__ = ids;\n  __PRODUCT_ID_CACHE_AT__ = now;\n  return ids;\n}\n\nasync function getProductDateMapCached() {\n  const now = Date.now();\n  if (__PRODUCT_DATE_CACHE__ && (now - __PRODUCT_DATE_CACHE_AT__) < PRODUCT_ID_CACHE_TTL_MS) {\n    return __PRODUCT_DATE_CACHE__;\n  }\n  const dates = new Map();\n  const qs = await getDocs(collection(db, 'products'));\n  qs.forEach((d) => dates.set(d.id, d.data().DateLastAmended));\n  __PRODUCT_DATE_CACHE__ = dates;\n  __PRODUCT_DATE_CACHE_AT__ = now;\n  return dates;\n}\n\nasync function writeUploadMeta(uploadKey, lastUploadAtISO, count) {\n  await setDoc(doc(db, 'upload_meta', uploadKey), {\n    lastUploadAt: lastUploadAtISO,\n    count: Number(count || 0),\n    updatedAt: serverTimestamp()\n  }, { merge: true });\n}\n\n\n// Helper: ‡πÅ‡∏õ‡∏•‡∏á Column Letter ‡πÄ‡∏õ‡πá‡∏ô Index (A=0, B=1, ...)\n// ‡πÅ‡∏ï‡πà‡πÉ‡∏ô XLSX ‡πÅ‡∏ö‡∏ö Array of Arrays ‡πÄ‡∏£‡∏≤‡∏ô‡∏±‡∏ö Index ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢\n// B=1, F=5, L=11, N=13, R=17, U=20, V=21, Y=24, AB=27, AD=29, AF=31, AJ=35, AL=37, AO=40, AQ=42, AS=44, AT=45, AV=47, AY=50, BB=53\n\nexport const posService = {\n  calculateOrder: async (payload) => {\n    const result = await calculateOrderFn(payload);\n    return result.data;\n  },\n  \n  // 1. ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ Master Data ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á\n  hasMasterData: async () => {\n    try {\n      const coll = collection(db, 'products');\n      const snapshot = await getCountFromServer(coll);\n      return snapshot.data().count > 0;\n    } catch {\n      return false;\n    }\n  },\n\n  // 2. Upload ProductAllDept (CSV - Master)\n  uploadProductAllDept: async (products, onProgress) => {\n    console.log('üîÑ Uploading Master Data...');\n    const existingMap = await getProductDateMapCached();\n\n    // Filter Logic:\n    // 1. Must be ProductStatus = \"0 - Normal Product\" (Check startsWith \"0\")\n    // 2. Delta Check (DateLastAmended changed)\n    const toUpdate = products.filter((row) => {\n      // Check Product Status\n      const rawStatus = row.ProductStatus ? row.ProductStatus.toString().trim() : '';\n      if (!rawStatus.startsWith('0')) return false;\n\n      // Identify ID\n      const id = row.GridProductCode?.trim() || row.ProductCode?.trim();\n      if (!id) return false;\n\n      // Delta Check\n      const oldDate = existingMap.get(id);\n      const newDate = row.DateLastAmended;\n      // If new item (no oldDate) or date changed -> Update\n      if (!oldDate) return true;\n      if (oldDate !== newDate) return true;\n      \n      return false; \n    });\n\n    const BATCH_SIZE = 400;\n    let processed = 0;\n    const total = toUpdate.length;\n    const chunks = [];\n    for (let i = 0; i < total; i += BATCH_SIZE) chunks.push(toUpdate.slice(i, i + BATCH_SIZE));\n\n    for (let i = 0; i < chunks.length; i++) {\n      const chunk = chunks[i];\n      const batch = writeBatch(db);\n      chunk.forEach(row => {\n        const productCode = row.GridProductCode?.trim() || row.ProductCode?.trim();\n        const docRef = doc(db, 'products', productCode);\n        \n        // Generate Keywords for Universal Search\n        const searchKeywords = generateKeywords(row.ProductDesc);\n        if (row.Barcode) searchKeywords.push(row.Barcode.trim());\n        if (productCode) searchKeywords.push(productCode.trim());\n        \n        // Save to Firestore\n        batch.set(docRef, {\n          ...row,\n          keywords: searchKeywords,\n          // Parse numeric fields safely\n          SellPrice: parseFloat(row.SellPrice || 0),\n          VatRate: parseFloat(row.VatRate || 0),\n          LatestCost: parseFloat(row.LatestCost || 0),\n          \n          // Ensure critical fields are trimmed\n          barcode: row.Barcode?.trim(),\n          ProductDesc: row.ProductDesc?.trim(),\n          \n          updatedAt: serverTimestamp(),\n          _source: 'ProductAllDept' // Track source\n        }, { merge: true });\n      });\n      await batch.commit();\n      processed += chunk.length;\n      if (onProgress) onProgress(processed, total);\n      await new Promise(r => setTimeout(r, 50));\n    }\n    await writeUploadMeta('master', new Date().toISOString(), processed);\n    __PRODUCT_ID_CACHE__ = null;\n    __PRODUCT_DATE_CACHE__ = null;\n    return processed;\n  },\n\n  // 3. Upload Excel Helper (Generic)\n  uploadExcelUpdate: async (file, mappingLogic, onProgress, uploadKey) => {\n    // 3.1 Read File\n    const buffer = await file.arrayBuffer();\n    const workbook = XLSX.read(buffer);\n    const firstSheetName = workbook.SheetNames[0];\n    const worksheet = workbook.Sheets[firstSheetName];\n    \n    // Convert to Array of Arrays (Row 0 = Header)\n    const rows = XLSX.utils.sheet_to_json(worksheet, { header: 1, defval: '' });\n\n    const lastUpdateISO = new Date().toISOString();\n\n    // 3.2 Load Existing IDs to ensure we only update existing products\n    const existingIds = await getProductIdSetCached();\n    \n    console.log('‚úÖ Loaded ' + existingIds.size + ' master items for matching.');\n\n    // 3.3 Process Rows\n    const updates = [];\n    // Start loop from index 1 (skip header)\n    for (let i = 1; i < rows.length; i++) {\n      const row = rows[i];\n      // Column B is Index 1 (0-based)\n      const itemCode = String(row[1]).trim(); \n      \n      if (itemCode && existingIds.has(itemCode)) {\n        // Apply Mapping Logic\n        const updateData = mappingLogic(row);\n        if (updateData) {\n          updates.push({ id: itemCode, data: updateData });\n        }\n      }\n    }\n\n    if (updates.length === 0) return 0;\n\n    // 3.4 Batch Update\n    const BATCH_SIZE = 400;\n    let processed = 0;\n    const total = updates.length;\n    \n    for (let i = 0; i < total; i += BATCH_SIZE) {\n      const chunk = updates.slice(i, i + BATCH_SIZE);\n      const batch = writeBatch(db);\n      \n      chunk.forEach(item => {\n        const docRef = doc(db, 'products', item.id);\n        batch.set(docRef, { ...item.data, lastUpdate: lastUpdateISO, updatedAt: serverTimestamp() }, { merge: true });\n      });\n\n      await batch.commit();\n      processed += chunk.length;\n      if (onProgress) onProgress(processed, total);\n      await new Promise(r => setTimeout(r, 50));\n    }\n\n    if (uploadKey) {\n      await writeUploadMeta(uploadKey, lastUpdateISO, processed);\n    }\n    __PRODUCT_ID_CACHE__ = null;\n    __PRODUCT_DATE_CACHE__ = null;\n\n    return processed;\n  },\n\n  // 4. Wrapper: ItemMasterPrintOnDeph\n  uploadItemMasterPrint: async (file, onProgress) => {\n    return posService.uploadExcelUpdate(file, (row) => {\n      // Column Mapping (0-based index)\n      // B=1, F=5, L=11, N=13, U=20, Y=24, AD=29, AF=31, AJ=35, AO=40, AS=44, AV=47, AY=50, BB=53\n      return {\n        // Enriched Fields\n        description_print: row[5],\n        dept_print: row[11],\n        class_print: row[13],\n        merchandise_print: row[20],\n        regPrice_print: row[24],\n        method_print: row[29],\n        unitPrice_print: row[31],\n        dealPrice_print: row[35],\n        dealQty_print: row[40],\n        limit_print: row[44],\n        mpg_print: row[47],\n        tax_print: row[50],\n        brand_print: row[53],\n        _source_enriched: 'ItemMasterPrintOnDeph'\n      };\n    }, onProgress, 'print');\n  },\n\n  // 5. Wrapper: ItemMaintananceEvent\n  uploadItemMaintenance: async (file, onProgress) => {\n    return posService.uploadExcelUpdate(file, (row) => {\n      // Column Mapping (0-based index)\n      // B=1, F=5, L=11, N=13, R=17, V=21, Y=24, AB=27, AF=31, AL=37, AQ=42, AT=45\n      return {\n        // Maintenance Fields\n        description_maint: row[5],\n        type_maint: row[11],\n        dept_maint: row[13],\n        class_maint: row[17],\n        regPrice_maint: row[21],\n        method_maint: row[24],\n        unitPrice_maint: row[27],\n        dealPrice_maint: row[31],\n        dealQty_maint: row[37],\n        limitQty_maint: row[42],\n        mpGroup_maint: row[45],\n        _source_maintenance: 'ItemMaintananceEvent'\n      };\n    }, onProgress, 'maint');\n  },\n\n  // --- Common ---\n  getProductStats: async () => {\n    try {\n      const coll = collection(db, 'products');\n      const snapshot = await getCountFromServer(coll);\n      const uploads = await posService.getUploadMeta();\n      return { count: snapshot.data().count, lastUpdated: new Date(), uploads };\n    } catch { return { count: 0, lastUpdated: null, uploads: {} }; }\n  },\n\n  getUploadMeta: async () => {\n    const keys = ['master', 'print', 'maint'];\n    const result = {};\n    await Promise.all(keys.map(async (key) => {\n      try {\n        const snap = await getDoc(doc(db, 'upload_meta', key));\n        if (snap.exists()) result[key] = snap.data();\n      } catch (e) {\n        console.warn('getUploadMeta read failed for', key, e?.message || e);\n      }\n    }));\n    return result;\n  },\n  \n  clearDatabase: async (onProgress) => { /* Code ‡πÄ‡∏î‡∏¥‡∏° */ \n    const BATCH_SIZE = 400;\n    const MAX_BATCHES = 500;\n    let totalDeleted = 0;\n    let batches = 0;\n    while (true) {\n      const q = query(collection(db, 'products'), limit(BATCH_SIZE));\n      const snapshot = await getDocs(q);\n      if (snapshot.empty) break;\n      const batch = writeBatch(db);\n      snapshot.forEach((doc) => batch.delete(doc.ref));\n      await batch.commit();\n      totalDeleted += snapshot.size;\n      batches += 1;\n      if (onProgress) onProgress(totalDeleted);\n      if (batches >= MAX_BATCHES) {\n        throw new Error('clearDatabase aborted: exceeded max batch limit.');\n      }\n      await new Promise(r => setTimeout(r, 50));\n    }\n    return totalDeleted;\n  },\n\n  // Search & Scan (Code ‡πÄ‡∏î‡∏¥‡∏°)\n  searchProducts: async (keyword) => {\n    if (!keyword || keyword.length < 2) return [];\n    const searchKey = keyword.toUpperCase().trim();\n    const buildResults = (snapshot) => {\n      const results = [];\n      snapshot.forEach(doc => {\n        const d = doc.data();\n        if (d.ProductStatus?.startsWith('0')) {\n          results.push({ sku: d.GridProductCode || d.ProductCode || doc.id, name: d.ProductDesc, price: Number(d.SellPrice), ...d });\n        }\n      });\n      return results;\n    };\n\n    try {\n      const primaryQuery = query(\n        collection(db, 'products'),\n        where('keywords', 'array-contains', searchKey),\n        where('ProductStatus', '>=', '0'),\n        limit(15)\n      );\n      const primarySnap = await getDocs(primaryQuery);\n      return buildResults(primarySnap);\n    } catch (err) {\n      console.warn('searchProducts primary query failed, falling back without status filter:', err?.message || err);\n      try {\n        const fallbackQuery = query(\n          collection(db, 'products'),\n          where('keywords', 'array-contains', searchKey),\n          limit(20)\n        );\n        const fallbackSnap = await getDocs(fallbackQuery);\n        return buildResults(fallbackSnap);\n      } catch (error) {\n        console.error('searchProducts failed:', error);\n        return [];\n      }\n    }\n  },\n  scanItem: async (keyword) => {\n    const cleanKey = keyword.trim();\n    if (!cleanKey) throw new Error('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤');\n    try {\n      const docRef = doc(db, 'products', cleanKey);\n      const docSnap = await getDoc(docRef);\n      if (docSnap.exists() && docSnap.data().ProductStatus?.startsWith('0')) { const data = docSnap.data(); return { sku: docSnap.id, name: data.ProductDesc, price: Number(data.SellPrice), ...data }; }\n      const qBarcode = query(collection(db, 'products'), where('barcode', '==', cleanKey), limit(1));\n      const barcodeSnap = await getDocs(qBarcode);\n      if (!barcodeSnap.empty) { const data = barcodeSnap.docs[0].data(); if (data.ProductStatus?.startsWith('0')) return { sku: data.barcode, name: data.ProductDesc, price: Number(data.SellPrice), ...data }; }\n      const results = await posService.searchProducts(cleanKey);\n      if (results.length > 0) return results[0];\n      throw new Error('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤: ' + cleanKey);\n    } catch (error) { if (error.message.includes('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤')) throw error; throw new Error('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤'); }\n  },\n  createOrder: async (orderData) => { /*...*/ }\n};\n\r\n\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\services\\posService.uploadAddon.js","messages":[{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":54,"column":11,"nodeType":"BlockStatement","messageId":"unexpected","endLine":54,"endColumn":13,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[1600,1600],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/*\n  posService.uploadAddon.js\n  ‚úÖ Copy functions below into your existing src/services/posService.js\n\n  What it adds:\n  - Fast scanItem(): barcode_index -> products (1-2 reads)\n  - Lightweight searchProducts(): keywordsText range query (practical)\n*/\n\nimport { db } from \"../firebase\";\nimport { doc, getDoc, query, collection, limit, where, getDocs } from \"firebase/firestore\";\n\nconst memCache = new Map();\nfunction cacheGet(k) { return memCache.get(k); }\nfunction cacheSet(k, v) { memCache.set(k, v); if (memCache.size > 500) memCache.delete(memCache.keys().next().value); }\n\nasync function getByItemCode(itemCode) {\n  const ck = `p:${itemCode}`;\n  const c = cacheGet(ck);\n  if (c) return c;\n\n  const snap = await getDoc(doc(db, \"products\", itemCode));\n  if (!snap.exists()) throw new Error(\"Item not found\");\n  const data = snap.data();\n  cacheSet(ck, data);\n  return data;\n}\n\nasync function resolveBarcodeToItemCode(barcode) {\n  const ck = `b:${barcode}`;\n  const c = cacheGet(ck);\n  if (c) return c;\n\n  const snap = await getDoc(doc(db, \"barcode_index\", barcode));\n  if (!snap.exists()) return null;\n  const itemCode = snap.data().itemCode;\n  cacheSet(ck, itemCode);\n  return itemCode;\n}\n\nexport async function scanItemFast(skuOrBarcode) {\n  const code = String(skuOrBarcode).trim();\n\n  // 1) Try itemCode direct\n  try {\n    const p = await getByItemCode(code);\n    return {\n      id: p.itemCode,\n      sku: p.itemCode,\n      name: p.name || p.description || \"Unknown\",\n      price: Number(p.dealPrice || p.price || p.regPrice || 0),\n      badgeText: p.dealPrice ? \"DEAL\" : \"\"\n    };\n  } catch {}\n\n  // 2) Resolve barcode\n  const itemCode = await resolveBarcodeToItemCode(code);\n  if (!itemCode) throw new Error(\"Barcode not found\");\n\n  const p = await getByItemCode(itemCode);\n  return {\n    id: p.itemCode,\n    sku: p.itemCode,\n    name: p.name || p.description || \"Unknown\",\n    price: Number(p.dealPrice || p.price || p.regPrice || 0),\n    badgeText: p.dealPrice ? \"DEAL\" : \"\"\n  };\n}\n\nexport async function searchProductsLight(text) {\n  const qtext = String(text || \"\").trim();\n  if (qtext.length < 2) return [];\n\n  // barcode exact shortcut\n  const itemCode = await resolveBarcodeToItemCode(qtext);\n  if (itemCode) {\n    const p = await getByItemCode(itemCode);\n    return [{ sku: p.itemCode, name: p.name || p.description, price: Number(p.dealPrice || p.price || 0) }];\n  }\n\n  // keywordsText range query\n  const start = qtext.toLowerCase();\n  const end = start + \"\\uf8ff\";\n\n  const qr = query(\n    collection(db, \"products\"),\n    where(\"keywordsText\", \">=\", start),\n    where(\"keywordsText\", \"<=\", end),\n    limit(20)\n  );\n\n  const snaps = await getDocs(qr);\n  return snaps.docs.map(d => {\n    const p = d.data();\n    return { sku: p.itemCode, name: p.name || p.description, price: Number(p.dealPrice || p.price || 0) };\n  });\n}\n\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\services\\promotionEngine.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\services\\rbacService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\services\\uploadService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\toggle\\jquery.js","messages":[{"ruleId":"no-control-regex","severity":2,"message":"Unexpected control character(s) in regular expression: \\x1f, \\x1f.","line":2,"column":5615,"nodeType":"Literal","messageId":"unexpected","endLine":2,"endColumn":5668},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":2,"column":6002,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":6003},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":6098,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":6111},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":6322,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":6328},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":6830,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":6852},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":2,"column":7030,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":7031},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":2,"column":7334,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":7335},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":7600,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":7615},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":9866,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":9874},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":10176,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":10184},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":12190,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":12204},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":12758,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":12772},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":12796,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":12810},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":2,"column":13158,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":13159},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":13779,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":13787},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":14091,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":14099},{"ruleId":"no-constant-binary-expression","severity":2,"message":"Unexpected constant truthiness on the left-hand side of a `&&` expression.","line":2,"column":15111,"nodeType":"AssignmentExpression","messageId":"constantShortCircuit","endLine":2,"endColumn":15150},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":15919,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":15925},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":16190,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":16222},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":16388,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":16420},{"ruleId":"no-prototype-builtins","severity":2,"message":"Do not access Object.prototype method 'hasOwnProperty' from target object.","line":2,"column":16762,"nodeType":"CallExpression","messageId":"prototypeBuildIn","endLine":2,"endColumn":16776,"suggestions":[{"messageId":"callObjectPrototype","data":{"prop":"hasOwnProperty"},"fix":{"range":[16833,16861],"text":"Object.prototype.hasOwnProperty.call(b.setFilters, "},"desc":"Call Object.prototype.hasOwnProperty explicitly."}]},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":17452,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":17513},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":19272,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":19278},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":19372,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":19378},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":19432,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":19438},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":19616,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":19636},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":20785,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":20808},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":22057,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":22065},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":22168,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":22176},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":2,"column":24334,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":24335,"suggestions":[{"messageId":"removeEscape","fix":{"range":[24418,24419],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[24418,24418],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":2,"column":33944,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":33945},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":2,"column":33946,"nodeType":"BlockStatement","messageId":"unexpected","endLine":2,"endColumn":33948,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[34031,34031],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":2,"column":37691,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":2,"endColumn":37692,"suggestions":[{"messageId":"removeEscape","fix":{"range":[37775,37776],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[37775,37775],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":39340,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":39348},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":39456,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":39464},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":2,"column":39714,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":39715},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":2,"column":39716,"nodeType":"BlockStatement","messageId":"unexpected","endLine":2,"endColumn":39718,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[39801,39801],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":49400,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":49414},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":2,"column":50958,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":50959},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":2,"column":50960,"nodeType":"BlockStatement","messageId":"unexpected","endLine":2,"endColumn":50962,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[51045,51045],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":59283,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":59301},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":60452,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":60489},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":66084,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":66092},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":67827,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":67838},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":67893,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":67901},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":68197,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":68208},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":68263,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":68271},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":68670,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":68678},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":68947,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":68958},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":2,"column":72821,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":72822},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":74372,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":74380},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":75966,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":75978},{"ruleId":"no-self-assign","severity":2,"message":"'r.href' is assigned to itself.","line":2,"column":76746,"nodeType":"MemberExpression","messageId":"selfAssignment","endLine":2,"endColumn":76752},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":2,"column":76822,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":76823},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":2,"column":81549,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":81550},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":2,"column":81551,"nodeType":"BlockStatement","messageId":"unexpected","endLine":2,"endColumn":81553,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[81636,81636],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-cond-assign","severity":2,"message":"Expected a conditional expression and instead saw an assignment.","line":2,"column":84667,"nodeType":"AssignmentExpression","messageId":"missing","endLine":2,"endColumn":84678},{"ruleId":"no-undef","severity":2,"message":"'define' is not defined.","line":2,"column":89180,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":89186},{"ruleId":"no-undef","severity":2,"message":"'define' is not defined.","line":2,"column":89192,"nodeType":"Identifier","messageId":"undef","endLine":2,"endColumn":89198}],"suppressedMessages":[],"errorCount":49,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/*! jQuery v3.5.1 | (c) JS Foundation and other contributors | jquery.org/license */\n!function(e,t){\"use strict\";\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error(\"jQuery requires a window with a document\");return t(e)}:t(e)}(\"undefined\"!=typeof window?window:this,function(C,e){\"use strict\";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return\"function\"==typeof e&&\"number\"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement(\"script\");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?n[o.call(e)]||\"object\":typeof e}var f=\"3.5.1\",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&\"length\"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&(\"array\"===n||0===t||\"number\"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for(\"boolean\"==typeof a&&(l=a,a=arguments[s]||{},s++),\"object\"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],\"__proto__\"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:\"jQuery\"+(f+Math.random()).replace(/\\D/g,\"\"),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||\"[object Object]\"!==o.call(e))&&(!(t=r(e))||\"function\"==typeof(n=v.call(t,\"constructor\")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,\"string\"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),\"function\"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each(\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \"),function(e,t){n[\"[object \"+t+\"]\"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S=\"sizzle\"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),D=function(e,t){return e===t&&(l=!0),0},j={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",M=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",I=\"(?:\\\\\\\\[\\\\da-fA-F]{1,6}\"+M+\"?|\\\\\\\\[^\\\\r\\\\n\\\\f]|[\\\\w-]|[^\\0-\\\\x7f])+\",W=\"\\\\[\"+M+\"*(\"+I+\")(?:\"+M+\"*([*^$|!~]?=)\"+M+\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\"+I+\"))|)\"+M+\"*\\\\]\",F=\":(\"+I+\")(?:\\\\((('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+W+\")*)|.*)\\\\)|)\",B=new RegExp(M+\"+\",\"g\"),$=new RegExp(\"^\"+M+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+M+\"+$\",\"g\"),_=new RegExp(\"^\"+M+\"*,\"+M+\"*\"),z=new RegExp(\"^\"+M+\"*([>+~]|\"+M+\")\"+M+\"*\"),U=new RegExp(M+\"|>\"),X=new RegExp(F),V=new RegExp(\"^\"+I+\"$\"),G={ID:new RegExp(\"^#(\"+I+\")\"),CLASS:new RegExp(\"^\\\\.(\"+I+\")\"),TAG:new RegExp(\"^(\"+I+\"|[*])\"),ATTR:new RegExp(\"^\"+W),PSEUDO:new RegExp(\"^\"+F),CHILD:new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+M+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+M+\"*(?:([+-]|)\"+M+\"*(\\\\d+)|))\"+M+\"*\\\\)|)\",\"i\"),bool:new RegExp(\"^(?:\"+R+\")$\",\"i\"),needsContext:new RegExp(\"^\"+M+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+M+\"*((?:-\\\\d)?\\\\d*)\"+M+\"*\\\\)|)(?=[^-]|$)\",\"i\")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\\d$/i,K=/^[^{]+\\{\\s*\\[native \\w/,Z=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,ee=/[+~]/,te=new RegExp(\"\\\\\\\\[\\\\da-fA-F]{1,6}\"+M+\"?|\\\\\\\\([^\\\\r\\\\n\\\\f])\",\"g\"),ne=function(e,t){var n=\"0x\"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,ie=function(e,t){return t?\"\\0\"===e?\"\\ufffd\":e.slice(0,-1)+\"\\\\\"+e.charCodeAt(e.length-1).toString(16)+\" \":\"\\\\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&\"fieldset\"===e.nodeName.toLowerCase()},{dir:\"parentNode\",next:\"legend\"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],\"string\"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+\" \"]&&(!v||!v.test(t))&&(1!==p||\"object\"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute(\"id\"))?s=s.replace(re,ie):e.setAttribute(\"id\",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?\"#\"+s:\":scope\")+\" \"+xe(l[o]);c=l.join(\",\")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute(\"id\")}}}return g(t.replace($,\"$1\"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+\" \")>b.cacheLength&&delete e[r.shift()],e[t+\" \"]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement(\"fieldset\");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split(\"|\"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return\"input\"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return(\"input\"===t||\"button\"===t)&&e.type===n}}function ge(t){return function(e){return\"form\"in e?e.parentNode&&!1===e.disabled?\"label\"in e?\"label\"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:\"label\"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&\"undefined\"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||\"HTML\")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener(\"unload\",oe,!1):n.attachEvent&&n.attachEvent(\"onunload\",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement(\"div\")),\"undefined\"!=typeof e.querySelectorAll&&!e.querySelectorAll(\":scope fieldset div\").length}),d.attributes=ce(function(e){return e.className=\"i\",!e.getAttribute(\"className\")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment(\"\")),!e.getElementsByTagName(\"*\").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute(\"id\")===t}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t=\"undefined\"!=typeof e.getAttributeNode&&e.getAttributeNode(\"id\");return t&&t.value===n}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return\"undefined\"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if(\"*\"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if(\"undefined\"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML=\"<a id='\"+S+\"'></a><select id='\"+S+\"-\\r\\\\' msallowcapture=''><option selected=''></option></select>\",e.querySelectorAll(\"[msallowcapture^='']\").length&&v.push(\"[*^$]=\"+M+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\"[selected]\").length||v.push(\"\\\\[\"+M+\"*(?:value|\"+R+\")\"),e.querySelectorAll(\"[id~=\"+S+\"-]\").length||v.push(\"~=\"),(t=C.createElement(\"input\")).setAttribute(\"name\",\"\"),e.appendChild(t),e.querySelectorAll(\"[name='']\").length||v.push(\"\\\\[\"+M+\"*name\"+M+\"*=\"+M+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\":checked\").length||v.push(\":checked\"),e.querySelectorAll(\"a#\"+S+\"+*\").length||v.push(\".#.+[+~]\"),e.querySelectorAll(\"\\\\\\f\"),v.push(\"[\\\\r\\\\n\\\\f]\")}),ce(function(e){e.innerHTML=\"<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>\";var t=C.createElement(\"input\");t.setAttribute(\"type\",\"hidden\"),e.appendChild(t).setAttribute(\"name\",\"D\"),e.querySelectorAll(\"[name=d]\").length&&v.push(\"name\"+M+\"*[*^$|!~]?=\"),2!==e.querySelectorAll(\":enabled\").length&&v.push(\":enabled\",\":disabled\"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(\":disabled\").length&&v.push(\":enabled\",\":disabled\"),e.querySelectorAll(\"*,:x\"),v.push(\",.*:\")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,\"*\"),c.call(e,\"[s!='']:x\"),s.push(\"!=\",F)}),v=v.length&&new RegExp(v.join(\"|\")),s=s.length&&new RegExp(s.join(\"|\")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+\" \"]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&j.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+\"\").replace(re,ie)},se.error=function(e){throw new Error(\"Syntax error, unrecognized expression: \"+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(D),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n=\"\",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if(\"string\"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||\"\").replace(te,ne),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||\"\":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(\")\",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return\"*\"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+\" \"];return t||(t=new RegExp(\"(^|\"+M+\")\"+e+\"(\"+M+\"|$)\"))&&m(e,function(e){return t.test(\"string\"==typeof e.className&&e.className||\"undefined\"!=typeof e.getAttribute&&e.getAttribute(\"class\")||\"\")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?\"!=\"===r:!r||(t+=\"\",\"=\"===r?t===i:\"!=\"===r?t!==i:\"^=\"===r?i&&0===t.indexOf(i):\"*=\"===r?i&&-1<t.indexOf(i):\"$=\"===r?i&&t.slice(-i.length)===i:\"~=\"===r?-1<(\" \"+t.replace(B,\" \")+\" \").indexOf(i):\"|=\"===r&&(t===i||t.slice(0,i.length+1)===i+\"-\"))}},CHILD:function(h,e,t,g,v){var y=\"nth\"!==h.slice(0,3),m=\"last\"!==h.slice(-4),x=\"of-type\"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?\"nextSibling\":\"previousSibling\",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l=\"only\"===h&&!u&&\"nextSibling\"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error(\"unsupported pseudo: \"+e);return a[S]?a(o):1<a.length?(t=[e,e,\"\",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,\"$1\"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||\"\")||se.error(\"unsupported lang: \"+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute(\"xml:lang\")||e.getAttribute(\"lang\"))return(t=t.toLowerCase())===n||0===t.indexOf(n+\"-\")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&!!e.checked||\"option\"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&\"button\"===e.type||\"button\"===t},text:function(e){var t;return\"input\"===e.nodeName.toLowerCase()&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||\"text\"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r=\"\";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&\"parentNode\"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||\"*\",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[\" \"],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:\" \"===e[s-2].type?\"*\":\"\"})).replace($,\"$1\"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+\" \"];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($,\" \")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+\" \"];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l=\"0\",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG(\"*\",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l=\"function\"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&\"ID\"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split(\"\").sort(D).join(\"\")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement(\"fieldset\"))}),ce(function(e){return e.innerHTML=\"<a href='#'></a>\",\"#\"===e.firstChild.getAttribute(\"href\")})||fe(\"type|href|height|width\",function(e,t,n){if(!n)return e.getAttribute(t,\"type\"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML=\"<input/>\",e.firstChild.setAttribute(\"value\",\"\"),\"\"===e.firstChild.getAttribute(\"value\")})||fe(\"value\",function(e,t,n){if(!n&&\"input\"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute(\"disabled\")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[\":\"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i;function D(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):\"string\"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=\":not(\"+e+\")\"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if(\"string\"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,\"string\"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var j,q=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||j,\"string\"==typeof e){if(!(r=\"<\"===e[0]&&\">\"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,j=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a=\"string\"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?\"string\"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,\"parentNode\")},parentsUntil:function(e,t,n){return h(e,\"parentNode\",n)},next:function(e){return O(e,\"nextSibling\")},prev:function(e){return O(e,\"previousSibling\")},nextAll:function(e){return h(e,\"nextSibling\")},prevAll:function(e){return h(e,\"previousSibling\")},nextUntil:function(e,t,n){return h(e,\"nextSibling\",n)},prevUntil:function(e,t,n){return h(e,\"previousSibling\",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,\"template\")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return\"Until\"!==r.slice(-5)&&(t=e),t&&\"string\"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\\x20\\t\\r\\n\\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r=\"string\"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:\"\")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&\"string\"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t=\"\",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=\"\"),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[[\"notify\",\"progress\",S.Callbacks(\"memory\"),S.Callbacks(\"memory\"),2],[\"resolve\",\"done\",S.Callbacks(\"once memory\"),S.Callbacks(\"once memory\"),0,\"resolved\"],[\"reject\",\"fail\",S.Callbacks(\"once memory\"),S.Callbacks(\"once memory\"),1,\"rejected\"]],i=\"pending\",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},\"catch\":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+\"With\"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError(\"Thenable self-resolution\");t=e&&(\"object\"==typeof e||\"function\"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+\"With\"](this===s?void 0:this,arguments),this},s[t[0]+\"With\"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),\"pending\"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn(\"jQuery.Deferred exception: \"+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener(\"DOMContentLoaded\",B),C.removeEventListener(\"load\",B),S.ready()}S.fn.ready=function(e){return F.then(e)[\"catch\"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,\"complete\"===E.readyState||\"loading\"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener(\"DOMContentLoaded\",B),C.addEventListener(\"load\",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if(\"object\"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,\"ms-\").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if(\"string\"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&\"string\"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r=\"data-\"+t.replace(K,\"-$&\").toLowerCase(),\"string\"==typeof(n=e.getAttribute(r))){try{n=\"true\"===(i=n)||\"false\"!==i&&(\"null\"===i?null:i===+i+\"\"?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,\"hasDataAttrs\"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf(\"data-\")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,\"hasDataAttrs\",!0)}return i}return\"object\"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||\"fx\")+\"queue\",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||\"fx\";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);\"inprogress\"===i&&(i=n.shift(),r--),i&&(\"fx\"===t&&n.unshift(\"inprogress\"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+\"queueHooks\";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks(\"once memory\").add(function(){Y.remove(e,[t+\"queue\",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return\"string\"!=typeof t&&(n=t,t=\"fx\",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),\"fx\"===t&&\"inprogress\"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};\"string\"!=typeof e&&(t=e,e=void 0),e=e||\"fx\";while(a--)(n=Y.get(o[a],e+\"queueHooks\"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,te=new RegExp(\"^(?:([+-])=|)(\"+ee+\")([a-z%]*)$\",\"i\"),ne=[\"Top\",\"Right\",\"Bottom\",\"Left\"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return\"none\"===(e=t||e).style.display||\"\"===e.style.display&&ie(e)&&\"none\"===S.css(e,\"display\")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,\"\")},u=s(),l=n&&n[3]||(S.cssNumber[t]?\"\":\"px\"),c=e.nodeType&&(S.cssNumber[t]||\"px\"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?(\"none\"===n&&(l[c]=Y.get(r,\"display\")||null,l[c]||(r.style.display=\"\")),\"\"===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,\"display\"),o.parentNode.removeChild(o),\"none\"===u&&(u=\"block\"),ue[s]=u)))):\"none\"!==n&&(l[c]=\"none\",Y.set(r,\"display\",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return\"boolean\"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)/i,he=/^$|^module$|\\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement(\"div\")),(fe=E.createElement(\"input\")).setAttribute(\"type\",\"radio\"),fe.setAttribute(\"checked\",\"checked\"),fe.setAttribute(\"name\",\"t\"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML=\"<textarea>x</textarea>\",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML=\"<option></option>\",y.option=!!ce.lastChild;var ge={thead:[1,\"<table>\",\"</table>\"],col:[2,\"<table><colgroup>\",\"</colgroup></table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:[0,\"\",\"\"]};function ve(e,t){var n;return n=\"undefined\"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||\"*\"):\"undefined\"!=typeof e.querySelectorAll?e.querySelectorAll(t||\"*\"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],\"globalEval\",!t||Y.get(t[n],\"globalEval\"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,\"<select multiple='multiple'>\",\"</select>\"]);var me=/<|&#?\\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if(\"object\"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement(\"div\")),s=(de.exec(o)||[\"\",\"\"])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=\"\"}else p.push(t.createTextNode(o));f.textContent=\"\",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),\"script\"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||\"\")&&n.push(o)}return f}var be=/^key/,we=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Te=/^([^.]*)(?:\\.(.+)|)/;function Ce(){return!0}function Ee(){return!1}function Se(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==(\"focus\"===t)}function ke(e,t,n,r,i,o){var a,s;if(\"object\"==typeof t){for(s in\"string\"!=typeof n&&(r=r||n,n=void 0),t)ke(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&(\"string\"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ee;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Ae(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,Ce)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return\"undefined\"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||\"\").match(P)||[\"\"]).length;while(l--)d=g=(s=Te.exec(e[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(\".\")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||\"\").match(P)||[\"\"]).length;while(l--)if(d=g=(s=Te.exec(t[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&(\"**\"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,\"handle events\")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,\"events\")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!(\"click\"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(\"click\"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+\" \"]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Ae(t,\"click\",Ce),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Ae(t,\"click\"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Y.get(t,\"click\")||A(t,\"a\")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ce:Ee,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ce,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ce,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ce,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,\"char\":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&be.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&we.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({focus:\"focusin\",blur:\"focusout\"},function(e,t){S.event.special[e]={setup:function(){return Ae(this,e,Se),!1},trigger:function(){return Ae(this,e),!0},delegateType:t}}),S.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\",pointerenter:\"pointerover\",pointerleave:\"pointerout\"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return ke(this,e,t,n,r)},one:function(e,t,n,r){return ke(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+\".\"+r.namespace:r.origType,r.selector,r.handler),this;if(\"object\"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&\"function\"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ee),this.each(function(){S.event.remove(this,e,n,t)})}});var Ne=/<script|<style|<link/i,De=/checked\\s*(?:[^=]|=\\s*.checked.)/i,je=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g;function qe(e,t){return A(e,\"table\")&&A(11!==t.nodeType?t:t.firstChild,\"tr\")&&S(e).children(\"tbody\")[0]||e}function Le(e){return e.type=(null!==e.getAttribute(\"type\"))+\"/\"+e.type,e}function He(e){return\"true/\"===(e.type||\"\").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute(\"type\"),e}function Oe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,\"handle events\"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function Pe(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&\"string\"==typeof d&&!y.checkClone&&De.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),Pe(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,\"script\"),Le)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,\"script\"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,He),c=0;c<s;c++)u=a[c],he.test(u.type||\"\")&&!Y.access(u,\"globalEval\")&&S.contains(l,u)&&(u.src&&\"module\"!==(u.type||\"\").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute(\"nonce\")},l):b(u.textContent.replace(je,\"\"),u,l))}return n}function Re(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,\"script\")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,\"input\"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:\"input\"!==l&&\"textarea\"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Oe(o[r],a[r]);else Oe(e,c);return 0<(a=ve(c,\"script\")).length&&ye(a,!f&&ve(e,\"script\")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Pe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||qe(this,e).appendChild(e)})},prepend:function(){return Pe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=qe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent=\"\");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if(\"string\"==typeof e&&!Ne.test(e)&&!ge[(de.exec(e)||[\"\",\"\"])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Pe(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Me=new RegExp(\"^(\"+ee+\")(?!px)[a-z%]+$\",\"i\"),Ie=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},We=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Fe=new RegExp(ne.join(\"|\"),\"i\");function Be(e,t,n){var r,i,o,a,s=e.style;return(n=n||Ie(e))&&(\"\"!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Me.test(a)&&Fe.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+\"\":a}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText=\"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0\",l.style.cssText=\"position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%\",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n=\"1%\"!==e.top,s=12===t(e.marginLeft),l.style.right=\"60%\",o=36===t(e.right),r=36===t(e.width),l.style.position=\"absolute\",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement(\"div\"),l=E.createElement(\"div\");l.style&&(l.style.backgroundClip=\"content-box\",l.cloneNode(!0).style.backgroundClip=\"\",y.clearCloneStyle=\"content-box\"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement(\"table\"),t=E.createElement(\"tr\"),n=E.createElement(\"div\"),e.style.cssText=\"position:absolute;left:-11111px\",t.style.height=\"1px\",n.style.height=\"9px\",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=3<parseInt(r.height),re.removeChild(e)),a}}))}();var _e=[\"Webkit\",\"Moz\",\"ms\"],ze=E.createElement(\"div\").style,Ue={};function Xe(e){var t=S.cssProps[e]||Ue[e];return t||(e in ze?e:Ue[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=_e.length;while(n--)if((e=_e[n]+t)in ze)return e}(e)||e)}var Ve=/^(none|table(?!-c[ea]).+)/,Ge=/^--/,Ye={position:\"absolute\",visibility:\"hidden\",display:\"block\"},Qe={letterSpacing:\"0\",fontWeight:\"400\"};function Je(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||\"px\"):t}function Ke(e,t,n,r,i,o){var a=\"width\"===t?1:0,s=0,u=0;if(n===(r?\"border\":\"content\"))return 0;for(;a<4;a+=2)\"margin\"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?(\"content\"===n&&(u-=S.css(e,\"padding\"+ne[a],!0,i)),\"margin\"!==n&&(u-=S.css(e,\"border\"+ne[a]+\"Width\",!0,i))):(u+=S.css(e,\"padding\"+ne[a],!0,i),\"padding\"!==n?u+=S.css(e,\"border\"+ne[a]+\"Width\",!0,i):s+=S.css(e,\"border\"+ne[a]+\"Width\",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e[\"offset\"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Ze(e,t,n){var r=Ie(e),i=(!y.boxSizingReliable()||n)&&\"border-box\"===S.css(e,\"boxSizing\",!1,r),o=i,a=Be(e,t,r),s=\"offset\"+t[0].toUpperCase()+t.slice(1);if(Me.test(a)){if(!n)return a;a=\"auto\"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,\"tr\")||\"auto\"===a||!parseFloat(a)&&\"inline\"===S.css(e,\"display\",!1,r))&&e.getClientRects().length&&(i=\"border-box\"===S.css(e,\"boxSizing\",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Ke(e,t,n||(i?\"border\":\"content\"),o,r,a)+\"px\"}function et(e,t,n,r,i){return new et.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Be(e,\"opacity\");return\"\"===n?\"1\":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Ge.test(t),l=e.style;if(u||(t=Xe(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&\"get\"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];\"string\"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o=\"number\"),null!=n&&n==n&&(\"number\"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?\"\":\"px\")),y.clearCloneStyle||\"\"!==n||0!==t.indexOf(\"background\")||(l[t]=\"inherit\"),a&&\"set\"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Ge.test(t)||(t=Xe(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&\"get\"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Be(e,t,r)),\"normal\"===i&&t in Qe&&(i=Qe[t]),\"\"===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each([\"height\",\"width\"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ve.test(S.css(e,\"display\"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ze(e,u,n):We(e,Ye,function(){return Ze(e,u,n)})},set:function(e,t,n){var r,i=Ie(e),o=!y.scrollboxSize()&&\"absolute\"===i.position,a=(o||n)&&\"border-box\"===S.css(e,\"boxSizing\",!1,i),s=n?Ke(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e[\"offset\"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Ke(e,u,\"border\",!1,i)-.5)),s&&(r=te.exec(t))&&\"px\"!==(r[3]||\"px\")&&(e.style[u]=t,t=S.css(e,u)),Je(0,t,s)}}}),S.cssHooks.marginLeft=$e(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Be(e,\"marginLeft\"))||e.getBoundingClientRect().left-We(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+\"px\"}),S.each({margin:\"\",padding:\"\",border:\"Width\"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r=\"string\"==typeof e?e.split(\" \"):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},\"margin\"!==i&&(S.cssHooks[i+o].set=Je)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Ie(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=et).prototype={constructor:et,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?\"\":\"px\")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}}).init.prototype=et.prototype,(et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,\"\"))&&\"auto\"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[Xe(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:\"swing\"},S.fx=et.prototype.init,S.fx.step={};var tt,nt,rt,it,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function st(){nt&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(st):C.setTimeout(st,S.fx.interval),S.fx.tick())}function ut(){return C.setTimeout(function(){tt=void 0}),tt=Date.now()}function lt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i[\"margin\"+(n=ne[r])]=i[\"padding\"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners[\"*\"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ft(o,e,t){var n,a,r=0,i=ft.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=tt||ut(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:tt||ut(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&\"expand\"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=ft.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ct,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(ft,{tweeners:{\"*\":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=[\"*\"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f=\"width\"in t||\"height\"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,\"fxshow\");for(r in n.queue||(null==(a=S._queueHooks(e,\"fx\")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,\"fx\").length||a.empty.fire()})})),t)if(i=t[r],ot.test(i)){if(delete t[r],o=o||\"toggle\"===i,i===(g?\"hide\":\"show\")){if(\"show\"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,\"display\")),\"none\"===(c=S.css(e,\"display\"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,\"display\"),le([e]))),(\"inline\"===c||\"inline-block\"===c&&null!=l)&&\"none\"===S.css(e,\"float\")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l=\"none\"===c?\"\":c)),h.display=\"inline-block\")),n.overflow&&(h.overflow=\"hidden\",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?\"hidden\"in v&&(g=v.hidden):v=Y.access(e,\"fxshow\",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,\"fxshow\"),d)S.style(e,r,d[r])})),u=ct(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&\"object\"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:\"number\"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue=\"fx\"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css(\"opacity\",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=ft(this,S.extend({},t),o);(i||Y.get(this,\"finish\"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return\"string\"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||\"fx\",[]),this.each(function(){var e=!0,t=null!=i&&i+\"queueHooks\",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&at.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||\"fx\"),this.each(function(){var e,t=Y.get(this),n=t[a+\"queue\"],r=t[a+\"queueHooks\"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each([\"toggle\",\"show\",\"hide\"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||\"boolean\"==typeof e?i.apply(this,arguments):this.animate(lt(r,!0),e,t,n)}}),S.each({slideDown:lt(\"show\"),slideUp:lt(\"hide\"),slideToggle:lt(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),tt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){nt||(nt=!0,st())},S.fx.stop=function(){nt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||\"fx\",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},rt=E.createElement(\"input\"),it=E.createElement(\"select\").appendChild(E.createElement(\"option\")),rt.type=\"checkbox\",y.checkOn=\"\"!==rt.value,y.optSelected=it.selected,(rt=E.createElement(\"input\")).value=\"t\",rt.type=\"radio\",y.radioValue=\"t\"===rt.value;var pt,dt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return\"undefined\"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+\"\"),n):i&&\"get\"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&\"radio\"===t&&A(e,\"input\")){var n=e.value;return e.setAttribute(\"type\",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\\w+/g),function(e,t){var a=dt[t]||S.find.attr;dt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=dt[o],dt[o]=r,r=null!=a(e,t,n)?o:null,dt[o]=i),r}});var ht=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function vt(e){return(e.match(P)||[]).join(\" \")}function yt(e){return e.getAttribute&&e.getAttribute(\"class\")||\"\"}function mt(e){return Array.isArray(e)?e:\"string\"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&\"get\"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,\"tabindex\");return t?parseInt(t,10):ht.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{\"for\":\"htmlFor\",\"class\":\"className\"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each([\"tabIndex\",\"readOnly\",\"maxLength\",\"cellSpacing\",\"cellPadding\",\"rowSpan\",\"colSpan\",\"useMap\",\"frameBorder\",\"contentEditable\"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,yt(this)))});if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&\" \"+vt(i)+\" \"){a=0;while(o=e[a++])r.indexOf(\" \"+o+\" \")<0&&(r+=o+\" \");i!==(s=vt(r))&&n.setAttribute(\"class\",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,yt(this)))});if(!arguments.length)return this.attr(\"class\",\"\");if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&\" \"+vt(i)+\" \"){a=0;while(o=e[a++])while(-1<r.indexOf(\" \"+o+\" \"))r=r.replace(\" \"+o+\" \",\" \");i!==(s=vt(r))&&n.setAttribute(\"class\",s)}return this},toggleClass:function(i,t){var o=typeof i,a=\"string\"===o||Array.isArray(i);return\"boolean\"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,yt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=mt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&\"boolean\"!==o||((e=yt(this))&&Y.set(this,\"__className__\",e),this.setAttribute&&this.setAttribute(\"class\",e||!1===i?\"\":Y.get(this,\"__className__\")||\"\"))})},hasClass:function(e){var t,n,r=0;t=\" \"+e+\" \";while(n=this[r++])if(1===n.nodeType&&-1<(\" \"+vt(yt(n))+\" \").indexOf(t))return!0;return!1}});var xt=/\\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t=\"\":\"number\"==typeof t?t+=\"\":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?\"\":e+\"\"})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&\"set\"in r&&void 0!==r.set(this,t,\"value\")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&\"get\"in r&&void 0!==(e=r.get(t,\"value\"))?e:\"string\"==typeof(e=t.value)?e.replace(xt,\"\"):null==e?\"\":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,\"value\");return null!=t?t:vt(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a=\"select-one\"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,\"optgroup\"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each([\"radio\",\"checkbox\"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute(\"value\")?\"on\":e.value})}),y.focusin=\"onfocusin\"in C;var bt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,\"type\")?e.type:e,h=v.call(e,\"namespace\")?e.namespace.split(\".\"):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!bt.test(d+S.event.triggered)&&(-1<d.indexOf(\".\")&&(d=(h=d.split(\".\")).shift(),h.sort()),u=d.indexOf(\":\")<0&&\"on\"+d,(e=e[S.expando]?e:new S.Event(d,\"object\"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join(\".\"),e.rnamespace=e.namespace?new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,bt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,\"events\")||Object.create(null))[e.type]&&Y.get(o,\"handle\"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,wt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,wt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:\"focusin\",blur:\"focusout\"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var Tt=C.location,Ct={guid:Date.now()},Et=/\\?/;S.parseXML=function(e){var t;if(!e||\"string\"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,\"text/xml\")}catch(e){t=void 0}return t&&!t.getElementsByTagName(\"parsererror\").length||S.error(\"Invalid XML: \"+e),t};var St=/\\[\\]$/,kt=/\\r?\\n/g,At=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function Dt(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||St.test(n)?i(n,t):Dt(n+\"[\"+(\"object\"==typeof t&&null!=t?e:\"\")+\"]\",t,r,i)});else if(r||\"object\"!==w(e))i(n,e);else for(t in e)Dt(n+\"[\"+t+\"]\",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(null==n?\"\":n)};if(null==e)return\"\";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)Dt(n,e[n],t,i);return r.join(\"&\")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,\"elements\");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(\":disabled\")&&Nt.test(this.nodeName)&&!At.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(kt,\"\\r\\n\")}}):{name:t.name,value:n.replace(kt,\"\\r\\n\")}}).get()}});var jt=/%20/g,qt=/#.*$/,Lt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \\t]*([^\\r\\n]*)$/gm,Ot=/^(?:GET|HEAD)$/,Pt=/^\\/\\//,Rt={},Mt={},It=\"*/\".concat(\"*\"),Wt=E.createElement(\"a\");function Ft(o){return function(e,t){\"string\"!=typeof e&&(t=e,e=\"*\");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])\"+\"===n[0]?(n=n.slice(1)||\"*\",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Bt(t,i,o,a){var s={},u=t===Mt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return\"string\"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s[\"*\"]&&l(\"*\")}function $t(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Wt.href=Tt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:\"GET\",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":It,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/\\bxml\\b/,html:/\\bhtml/,json:/\\bjson\\b/},responseFields:{xml:\"responseXML\",text:\"responseText\",json:\"responseJSON\"},converters:{\"* text\":String,\"text html\":!0,\"text json\":JSON.parse,\"text xml\":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$t($t(e,S.ajaxSettings),t):$t(S.ajaxSettings,e)},ajaxPrefilter:Ft(Rt),ajaxTransport:Ft(Mt),ajax:function(e,t){\"object\"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks(\"once memory\"),w=v.statusCode||{},a={},s={},u=\"canceled\",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Ht.exec(p))n[t[1].toLowerCase()+\" \"]=(n[t[1].toLowerCase()+\" \"]||[]).concat(t[2])}t=n[e.toLowerCase()+\" \"]}return null==t?null:t.join(\", \")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Tt.href)+\"\").replace(Pt,Tt.protocol+\"//\"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||\"*\").toLowerCase().match(P)||[\"\"],null==v.crossDomain){r=E.createElement(\"a\");try{r.href=v.url,r.href=r.href,v.crossDomain=Wt.protocol+\"//\"+Wt.host!=r.protocol+\"//\"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&\"string\"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Bt(Rt,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger(\"ajaxStart\"),v.type=v.type.toUpperCase(),v.hasContent=!Ot.test(v.type),f=v.url.replace(qt,\"\"),v.hasContent?v.data&&v.processData&&0===(v.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&(v.data=v.data.replace(jt,\"+\")):(o=v.url.slice(f.length),v.data&&(v.processData||\"string\"==typeof v.data)&&(f+=(Et.test(f)?\"&\":\"?\")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Lt,\"$1\"),o=(Et.test(f)?\"&\":\"?\")+\"_=\"+Ct.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader(\"If-Modified-Since\",S.lastModified[f]),S.etag[f]&&T.setRequestHeader(\"If-None-Match\",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader(\"Content-Type\",v.contentType),T.setRequestHeader(\"Accept\",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+(\"*\"!==v.dataTypes[0]?\", \"+It+\"; q=0.01\":\"\"):v.accepts[\"*\"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u=\"abort\",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Bt(Mt,v,t,T)){if(T.readyState=1,g&&m.trigger(\"ajaxSend\",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort(\"timeout\")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,\"No Transport\");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||\"\",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while(\"*\"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader(\"Content-Type\"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+\" \"+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray(\"script\",v.dataTypes)&&(v.converters[\"text script\"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if(\"*\"===o)o=u;else if(\"*\"!==u&&u!==o){if(!(a=l[u+\" \"+o]||l[\"* \"+o]))for(i in l)if((s=i.split(\" \"))[1]===o&&(a=l[u+\" \"+s[0]]||l[\"* \"+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e[\"throws\"])t=a(t);else try{t=a(t)}catch(e){return{state:\"parsererror\",error:a?e:\"No conversion from \"+u+\" to \"+o}}}return{state:\"success\",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader(\"Last-Modified\"))&&(S.lastModified[f]=u),(u=T.getResponseHeader(\"etag\"))&&(S.etag[f]=u)),204===e||\"HEAD\"===v.type?l=\"nocontent\":304===e?l=\"notmodified\":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l=\"error\",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+\"\",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?\"ajaxSuccess\":\"ajaxError\",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger(\"ajaxComplete\",[T,v]),--S.active||S.event.trigger(\"ajaxStop\")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,\"json\")},getScript:function(e,t){return S.get(e,void 0,t,\"script\")}}),S.each([\"get\",\"post\"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)\"content-type\"===t.toLowerCase()&&(e.contentType=e.headers[t]||\"\")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:\"GET\",dataType:\"script\",cache:!0,async:!1,global:!1,converters:{\"text script\":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not(\"body\").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var _t={0:200,1223:204},zt=S.ajaxSettings.xhr();y.cors=!!zt&&\"withCredentials\"in zt,y.ajax=zt=!!zt,S.ajaxTransport(function(i){var o,a;if(y.cors||zt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e[\"X-Requested-With\"]||(e[\"X-Requested-With\"]=\"XMLHttpRequest\"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,\"abort\"===e?r.abort():\"error\"===e?\"number\"!=typeof r.status?t(0,\"error\"):t(r.status,r.statusText):t(_t[r.status]||r.status,r.statusText,\"text\"!==(r.responseType||\"text\")||\"string\"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o(\"error\"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o(\"abort\");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/\\b(?:java|ecma)script\\b/},converters:{\"text script\":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter(\"script\",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type=\"GET\")}),S.ajaxTransport(\"script\",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S(\"<script>\").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on(\"load error\",i=function(e){r.remove(),i=null,e&&t(\"error\"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Ut,Xt=[],Vt=/(=)\\?(?=&|$)|\\?\\?/;S.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var e=Xt.pop()||S.expando+\"_\"+Ct.guid++;return this[e]=!0,e}}),S.ajaxPrefilter(\"json jsonp\",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Vt.test(e.url)?\"url\":\"string\"==typeof e.data&&0===(e.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&Vt.test(e.data)&&\"data\");if(a||\"jsonp\"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Vt,\"$1\"+r):!1!==e.jsonp&&(e.url+=(Et.test(e.url)?\"&\":\"?\")+e.jsonp+\"=\"+r),e.converters[\"script json\"]=function(){return o||S.error(r+\" was not called\"),o[0]},e.dataTypes[0]=\"json\",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),\"script\"}),y.createHTMLDocument=((Ut=E.implementation.createHTMLDocument(\"\").body).innerHTML=\"<form></form><form></form>\",2===Ut.childNodes.length),S.parseHTML=function(e,t,n){return\"string\"!=typeof e?[]:(\"boolean\"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument(\"\")).createElement(\"base\")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(\" \");return-1<s&&(r=vt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&\"object\"==typeof t&&(i=\"POST\"),0<a.length&&S.ajax({url:e,type:i||\"GET\",dataType:\"html\",data:t}).done(function(e){o=arguments,a.html(r?S(\"<div>\").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,\"position\"),c=S(e),f={};\"static\"===l&&(e.style.position=\"relative\"),s=c.offset(),o=S.css(e,\"top\"),u=S.css(e,\"left\"),(\"absolute\"===l||\"fixed\"===l)&&-1<(o+u).indexOf(\"auto\")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),\"using\"in t?t.using.call(e,f):(\"number\"==typeof f.top&&(f.top+=\"px\"),\"number\"==typeof f.left&&(f.left+=\"px\"),c.css(f))}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if(\"fixed\"===S.css(r,\"position\"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&\"static\"===S.css(e,\"position\"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,\"borderTopWidth\",!0),i.left+=S.css(e,\"borderLeftWidth\",!0))}return{top:t.top-i.top-S.css(r,\"marginTop\",!0),left:t.left-i.left-S.css(r,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&\"static\"===S.css(e,\"position\"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(t,i){var o=\"pageYOffset\"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each([\"top\",\"left\"],function(e,n){S.cssHooks[n]=$e(y.pixelPosition,function(e,t){if(t)return t=Be(e,n),Me.test(t)?S(e).position()[n]+\"px\":t})}),S.each({Height:\"height\",Width:\"width\"},function(a,s){S.each({padding:\"inner\"+a,content:s,\"\":\"outer\"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||\"boolean\"!=typeof e),i=r||(!0===e||!0===t?\"margin\":\"border\");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf(\"outer\")?e[\"inner\"+a]:e.document.documentElement[\"client\"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body[\"scroll\"+a],r[\"scroll\"+a],e.body[\"offset\"+a],r[\"offset\"+a],r[\"client\"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\"**\"):this.off(t,e||\"**\",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each(\"blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu\".split(\" \"),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Gt=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if(\"string\"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return(\"number\"===t||\"string\"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?\"\":(e+\"\").replace(Gt,\"\")},\"function\"==typeof define&&define.amd&&define(\"jquery\",[],function(){return S});var Yt=C.jQuery,Qt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Qt),e&&C.jQuery===S&&(C.jQuery=Yt),S},\"undefined\"==typeof e&&(C.jQuery=C.$=S),S});\n","usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\toggle\\script.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\utils\\cn.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\src\\utils\\sound.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\01 Main Work\\Boots\\Boots-POS Gemini\\vite.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]